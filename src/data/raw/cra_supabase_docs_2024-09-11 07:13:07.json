{
  "input_url": "https://supabase.com/docs/guides/auth",
  "total_pages": 50,
  "unique_links": [
    "https://supabase.com/docs/guides/auth/quickstarts/react",
    "https://supabase.com/docs/guides/auth/passwords",
    "https://supabase.com/docs/guides/auth",
    "https://supabase.com/docs/guides/auth/server-side/sveltekit",
    "https://supabase.com/docs/guides/auth/sessions/implicit-flow",
    "https://supabase.com/docs/guides/auth/server-side/migrating-to-ssr-from-auth-helpers",
    "https://supabase.com/docs/guides/auth/auth-helpers/nextjs",
    "https://supabase.com/docs/guides/auth/architecture",
    "https://supabase.com/docs/guides/auth/auth-smtp",
    "https://supabase.com/docs/guides/auth/users",
    "https://supabase.com/docs/guides/auth/quickstarts/react-native",
    "https://supabase.com/docs/guides/auth/enterprise-sso/auth-sso-saml",
    "https://supabase.com/docs/guides/auth/server-side/advanced-guide",
    "https://supabase.com/docs/guides/auth/auth-mfa/totp",
    "https://supabase.com/docs/guides/auth/server-side",
    "https://supabase.com/docs/guides/auth/auth-hooks/custom-access-token-hook",
    "https://supabase.com/docs/guides/auth/enterprise-sso",
    "https://supabase.com/docs/guides/auth/auth-helpers",
    "https://supabase.com/docs/guides/auth/auth-email-templates",
    "https://supabase.com/docs/guides/auth/auth-helpers/flutter-auth-ui",
    "https://supabase.com/docs/guides/auth/auth-captcha",
    "https://supabase.com/docs/guides/auth/rate-limits",
    "https://supabase.com/docs/guides/auth/redirect-urls",
    "https://supabase.com/docs/guides/auth/auth-mfa",
    "https://supabase.com/docs/guides/auth/auth-identity-linking",
    "https://supabase.com/docs/guides/auth/auth-mfa/phone",
    "https://supabase.com/docs/guides/auth/quickstarts/nextjs",
    "https://supabase.com/docs/guides/auth/auth-hooks/send-sms-hook",
    "https://supabase.com/docs/guides/auth/general-configuration",
    "https://supabase.com/docs/guides/auth/auth-hooks/send-email-hook",
    "https://supabase.com/docs/guides/auth/server-side/nextjs",
    "https://supabase.com/docs/guides/auth/auth-hooks/password-verification-hook",
    "https://supabase.com/docs/guides/auth/identities",
    "https://supabase.com/docs/guides/auth/signout",
    "https://supabase.com/docs/guides/auth/auth-hooks/mfa-verification-hook",
    "https://supabase.com/docs/guides/auth/auth-helpers/auth-ui",
    "https://supabase.com/docs/guides/auth/password-security",
    "https://supabase.com/docs/guides/auth/server-side/creating-a-client",
    "https://supabase.com/docs/guides/auth/auth-helpers/remix",
    "https://supabase.com/docs/guides/auth/jwts",
    "https://supabase.com/docs/guides/auth/auth-anonymous",
    "https://supabase.com/docs/guides/auth/phone-login",
    "https://supabase.com/docs/guides/auth/auth-email-passwordless",
    "https://supabase.com/docs/guides/auth/social-login",
    "https://supabase.com/docs/guides/auth/auth-helpers/sveltekit",
    "https://supabase.com/docs/guides/auth/native-mobile-deep-linking",
    "https://supabase.com/docs/guides/auth/managing-user-data",
    "https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages",
    "https://supabase.com/docs/guides/auth/auth-hooks",
    "https://supabase.com/docs/guides/auth/sessions"
  ],
  "data": [
    {
      "markdown": "Auth\n\n# Supabase Auth with SvelteKit\n\n* * *\n\nWe generally recommend using the new `@supabase/ssr` package instead of `auth-helpers`. `@supabase/ssr` takes the core concepts of the Auth Helpers package and makes them available to any server framework. Check out the [migration doc](/docs/guides/auth/server-side/migrating-to-ssr-from-auth-helpers) to learn more.\n\nSee legacy docs",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Supabase Auth with SvelteKit</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>We generally recommend using the new <code>@supabase/ssr</code> package instead of <code>auth-helpers</code>. <code>@supabase/ssr</code> takes the core concepts of the Auth Helpers package and makes them available to any server framework. Check out the <a href=\"/docs/guides/auth/server-side/migrating-to-ssr-from-auth-helpers\">migration doc</a> to learn more.</p></div></div>\n<div class=\" flex flex-col space-y-3  text-foreground-light border-b mt-8 pb-2\" data-orientation=\"vertical\"><div><div data-state=\"closed\" data-orientation=\"vertical\" class=\" group first:rounded-tl-md first:rounded-tr-md last:rounded-bl-md last:rounded-br-md overflow-hidden will-change-transform \"><button type=\"button\" aria-controls=\"radix-:R1m9jtsn7qb6ra:\" aria-expanded=\"false\" data-state=\"closed\" data-orientation=\"vertical\" id=\"radix-:Rm9jtsn7qb6ra:\" class=\" flex flex-row gap-3 items-center w-full text-left cursor-pointer outline-none focus-visible:ring-1 focus-visible:z-10 ring-foreground-light  justify-between\" data-radix-collection-item=\"\">See legacy docs<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-down  text-foreground-lighter rotate-0 group-state-open:rotate-180 group-data-[state=open]:rotate-180 ease-&amp;lsqb;cubic-bezier(0.87,_0,_0.13,_1)&amp;rsqb; transition-transform duration-300 duration-200  order-last\" aria-hidden=\"true\"><path d=\"m6 9 6 6 6-6\"></path></svg></button><div data-state=\"closed\" id=\"radix-:R1m9jtsn7qb6ra:\" hidden=\"\" role=\"region\" aria-labelledby=\"radix-:Rm9jtsn7qb6ra:\" data-orientation=\"vertical\" class=\" data-open:animate-slide-down data-closed:animate-slide-up \" style=\"--radix-accordion-content-height:var(--radix-collapsible-content-height);--radix-accordion-content-width:var(--radix-collapsible-content-width)\"></div></div></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-helpers/sveltekit",
        "title": "Supabase Auth with SvelteKit | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Supabase%20Auth%20with%20SvelteKit&description=Convenience%20helpers%20for%20implementing%20user%20authentication%20in%20SvelteKit.",
        "ogTitle": "Supabase Auth with SvelteKit | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-helpers/sveltekit",
        "description": "Convenience helpers for implementing user authentication in SvelteKit.",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "ogDescription": "Convenience helpers for implementing user authentication in SvelteKit.",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Setting up Server-Side Auth for SvelteKit\n\n* * *\n\nSet up Server-Side Auth to use cookie-based authentication with SvelteKit.\n\n1\n\n### Install Supabase packages\n\nInstall the `@supabase/supabase-js` package and the helper `@supabase/ssr` package.\n\n`\n_10\nnpm install @supabase/supabase-js @supabase/ssr\n`\n\n2\n\n### Set up environment variables\n\nCreate a `.env.local` file in your project root directory.\n\nFill in your `PUBLIC_SUPABASE_URL` and `PUBLIC_SUPABASE_ANON_KEY`:\n\n###### Project URL\n\nLoading...\n\n###### Anon key\n\nLoading...\n\n.env.local\n\n`\n_10\nPUBLIC_SUPABASE_URL=<your_supabase_project_url>\n_10\nPUBLIC_SUPABASE_ANON_KEY=<your_supabase_anon_key>\n`\n\n3\n\n### Set up server-side hooks\n\nSet up server-side hooks in `src/hooks.server.ts`. The hooks:\n\n- Create a request-specific Supabase client, using the user credentials from the request cookie. This client is used for server-only code.\n- Check user authentication.\n- Guard protected pages.\n\nsrc/hooks.server.ts\n\n``\n_81\nimport { createServerClient } from '@supabase/ssr'\n_81\nimport { type Handle, redirect } from '@sveltejs/kit'\n_81\nimport { sequence } from '@sveltejs/kit/hooks'\n_81\n_81\nimport { PUBLIC_SUPABASE_URL, PUBLIC_SUPABASE_ANON_KEY } from '$env/static/public'\n_81\n_81\nconst supabase: Handle = async ({ event, resolve }) => {\n_81\n/**\n_81\n* Creates a Supabase client specific to this server request.\n_81\n*\n_81\n* The Supabase client gets the Auth token from the request cookies.\n_81\n*/\n_81\nevent.locals.supabase = createServerClient(PUBLIC_SUPABASE_URL, PUBLIC_SUPABASE_ANON_KEY, {\n_81\n    cookies: {\n_81\n      getAll: () => event.cookies.getAll(),\n_81\n      /**\n_81\n       * SvelteKit's cookies API requires `path` to be explicitly set in\n_81\n       * the cookie options. Setting `path` to `/` replicates previous/\n_81\n       * standard behavior.\n_81\n       */\n_81\n      setAll: (cookiesToSet) => {\n_81\n        cookiesToSet.forEach(({ name, value, options }) => {\n_81\n          event.cookies.set(name, value, { ...options, path: '/' })\n_81\n        })\n_81\n      },\n_81\n    },\n_81\n})\n_81\n_81\n/**\n_81\n* Unlike `supabase.auth.getSession()`, which returns the session _without_\n_81\n* validating the JWT, this function also calls `getUser()` to validate the\n_81\n* JWT before returning the session.\n_81\n*/\n_81\nevent.locals.safeGetSession = async () => {\n_81\n    const {\n_81\n      data: { session },\n_81\n    } = await event.locals.supabase.auth.getSession()\n_81\n    if (!session) {\n_81\n      return { session: null, user: null }\n_81\n    }\n_81\n_81\n    const {\n_81\n      data: { user },\n_81\n      error,\n_81\n    } = await event.locals.supabase.auth.getUser()\n_81\n    if (error) {\n_81\n      // JWT validation has failed\n_81\n      return { session: null, user: null }\n_81\n    }\n_81\n_81\n    return { session, user }\n_81\n}\n_81\n_81\nreturn resolve(event, {\n_81\n    filterSerializedResponseHeaders(name) {\n_81\n      /**\n_81\n       * Supabase libraries use the `content-range` and `x-supabase-api-version`\n_81\n       * headers, so we need to tell SvelteKit to pass it through.\n_81\n       */\n_81\n      return name === 'content-range' || name === 'x-supabase-api-version'\n_81\n    },\n_81\n})\n_81\n}\n_81\n_81\nconst authGuard: Handle = async ({ event, resolve }) => {\n_81\nconst { session, user } = await event.locals.safeGetSession()\n_81\nevent.locals.session = session\n_81\nevent.locals.user = user\n_81\n_81\nif (!event.locals.session && event.url.pathname.startsWith('/private')) {\n_81\n    redirect(303, '/auth')\n_81\n}\n_81\n_81\nif (event.locals.session && event.url.pathname === '/auth') {\n_81\n    redirect(303, '/private')\n_81\n}\n_81\n_81\nreturn resolve(event)\n_81\n}\n_81\n_81\nexport const handle: Handle = sequence(supabase, authGuard)\n``\n\n4\n\n### Create TypeScript definitions\n\nTo prevent TypeScript errors, add type definitions for the new `event.locals` properties.\n\nsrc/app.d.ts\n\n`\n_20\nimport type { Session, SupabaseClient, User } from '@supabase/supabase-js'\n_20\n_20\ndeclare global {\n_20\nnamespace App {\n_20\n    // interface Error {}\n_20\n    interface Locals {\n_20\n      supabase: SupabaseClient\n_20\n      safeGetSession: () => Promise<{ session: Session | null; user: User | null }>\n_20\n      session: Session | null\n_20\n      user: User | null\n_20\n    }\n_20\n    interface PageData {\n_20\n      session: Session | null\n_20\n    }\n_20\n    // interface PageState {}\n_20\n    // interface Platform {}\n_20\n}\n_20\n}\n_20\n_20\nexport {}\n`\n\n5\n\n### Create a Supabase client in your root layout\n\nCreate a Supabase client in your root `+layout.ts`. This client can be used to access Supabase from the client or the server. In order to get access to the Auth token on the server, use a `+layout.server.ts` file to pass in the session from `event.locals`.\n\nsrc/routes/+layout.ts\n\nsrc/routes/+layout.server.ts\n\n``\n_43\nimport { createBrowserClient, createServerClient, isBrowser } from '@supabase/ssr'\n_43\nimport { PUBLIC_SUPABASE_ANON_KEY, PUBLIC_SUPABASE_URL } from '$env/static/public'\n_43\nimport type { LayoutLoad } from './$types'\n_43\n_43\nexport const load: LayoutLoad = async ({ data, depends, fetch }) => {\n_43\n/**\n_43\n* Declare a dependency so the layout can be invalidated, for example, on\n_43\n* session refresh.\n_43\n*/\n_43\ndepends('supabase:auth')\n_43\n_43\nconst supabase = isBrowser()\n_43\n    ? createBrowserClient(PUBLIC_SUPABASE_URL, PUBLIC_SUPABASE_ANON_KEY, {\n_43\n        global: {\n_43\n          fetch,\n_43\n        },\n_43\n      })\n_43\n    : createServerClient(PUBLIC_SUPABASE_URL, PUBLIC_SUPABASE_ANON_KEY, {\n_43\n        global: {\n_43\n          fetch,\n_43\n        },\n_43\n        cookies: {\n_43\n          getAll() {\n_43\n            return data.cookies\n_43\n          },\n_43\n        },\n_43\n      })\n_43\n_43\n/**\n_43\n* It's fine to use `getSession` here, because on the client, `getSession` is\n_43\n* safe, and on the server, it reads `session` from the `LayoutData`, which\n_43\n* safely checked the session using `safeGetSession`.\n_43\n*/\n_43\nconst {\n_43\n    data: { session },\n_43\n} = await supabase.auth.getSession()\n_43\n_43\nconst {\n_43\n    data: { user },\n_43\n} = await supabase.auth.getUser()\n_43\n_43\nreturn { session, supabase, user }\n_43\n}\n``\n\n6\n\n### Listen to Auth events\n\nSet up a listener for Auth events on the client, to handle session refreshes and signouts.\n\nsrc/routes/+layout.svelte\n\n`\n_19\n<script>\n_19\n\timport { invalidate } from '$app/navigation';\n_19\n\timport { onMount } from 'svelte';\n_19\n_19\n\texport let data;\n_19\n\t$: ({ session, supabase } = data);\n_19\n_19\n\tonMount(() => {\n_19\n\t\tconst { data } = supabase.auth.onAuthStateChange((_, newSession) => {\n_19\n\t\t\tif (newSession?.expires_at !== session?.expires_at) {\n_19\n\t\t\t\tinvalidate('supabase:auth');\n_19\n\t\t\t}\n_19\n\t\t});\n_19\n_19\n\t\treturn () => data.subscription.unsubscribe();\n_19\n\t});\n_19\n</script>\n_19\n_19\n<slot />\n`\n\n7\n\n### Create your first page\n\nCreate your first page. This example page calls Supabase from the server to get a list of countries from the database.\n\nThis is an example of a public page that uses publicly readable data.\n\nTo populate your database, run the [countries quickstart](/dashboard/project/_/sql/quickstarts) from your dashboard.\n\nsrc/routes/+page.server.ts\n\nsrc/routes/+page.svelte\n\n`\n_10\nimport type { PageServerLoad } from './$types'\n_10\n_10\nexport const load: PageServerLoad = async ({ locals: { supabase } }) => {\n_10\nconst { data: countries } = await supabase.from('countries').select('name').limit(5).order('name')\n_10\nreturn { countries: countries ?? [] }\n_10\n}\n`\n\n8\n\n### Change the Auth confirmation path\n\nIf you have email confirmation turned on (the default), a new user will receive an email confirmation after signing up.\n\nChange the email template to support a server-side authentication flow.\n\nGo to the [Auth templates](https://supabase.com/dashboard/project/_/auth/templates) page in your dashboard. In the `Confirm signup` template, change `{{ .ConfirmationURL }}` to `{{ .SiteURL }}/auth/confirm?token_hash={{ .TokenHash }}&type=email`.\n\n9\n\n### Create a login page\n\nNext, create a login page to let users sign up and log in.\n\nsrc/routes/auth/+page.server.ts\n\nsrc/routes/auth/+page.svelte\n\nsrc/routes/auth/+layout.svelte\n\nsrc/routes/auth/error/+page.svelte\n\n`\n_32\nimport { redirect } from '@sveltejs/kit'\n_32\n_32\nimport type { Actions } from './$types'\n_32\n_32\nexport const actions: Actions = {\n_32\nsignup: async ({ request, locals: { supabase } }) => {\n_32\n    const formData = await request.formData()\n_32\n    const email = formData.get('email') as string\n_32\n    const password = formData.get('password') as string\n_32\n_32\n    const { error } = await supabase.auth.signUp({ email, password })\n_32\n    if (error) {\n_32\n      console.error(error)\n_32\n      redirect(303, '/auth/error')\n_32\n    } else {\n_32\n      redirect(303, '/')\n_32\n    }\n_32\n},\n_32\nlogin: async ({ request, locals: { supabase } }) => {\n_32\n    const formData = await request.formData()\n_32\n    const email = formData.get('email') as string\n_32\n    const password = formData.get('password') as string\n_32\n_32\n    const { error } = await supabase.auth.signInWithPassword({ email, password })\n_32\n    if (error) {\n_32\n      console.error(error)\n_32\n      redirect(303, '/auth/error')\n_32\n    } else {\n_32\n      redirect(303, '/private')\n_32\n    }\n_32\n},\n_32\n}\n`\n\n10\n\n### Create the signup confirmation route\n\nFinish the signup flow by creating the API route to handle email verification.\n\nsrc/routes/auth/confirm/+server.ts\n\n``\n_31\nimport type { EmailOtpType } from '@supabase/supabase-js'\n_31\nimport { redirect } from '@sveltejs/kit'\n_31\n_31\nimport type { RequestHandler } from './$types'\n_31\n_31\nexport const GET: RequestHandler = async ({ url, locals: { supabase } }) => {\n_31\nconst token_hash = url.searchParams.get('token_hash')\n_31\nconst type = url.searchParams.get('type') as EmailOtpType | null\n_31\nconst next = url.searchParams.get('next') ?? '/'\n_31\n_31\n/**\n_31\n* Clean up the redirect URL by deleting the Auth flow parameters.\n_31\n*\n_31\n* `next` is preserved for now, because it's needed in the error case.\n_31\n*/\n_31\nconst redirectTo = new URL(url)\n_31\nredirectTo.pathname = next\n_31\nredirectTo.searchParams.delete('token_hash')\n_31\nredirectTo.searchParams.delete('type')\n_31\n_31\nif (token_hash && type) {\n_31\n    const { error } = await supabase.auth.verifyOtp({ type, token_hash })\n_31\n    if (!error) {\n_31\n      redirectTo.searchParams.delete('next')\n_31\n      redirect(303, redirectTo)\n_31\n    }\n_31\n}\n_31\n_31\nredirectTo.pathname = '/auth/error'\n_31\nredirect(303, redirectTo)\n_31\n}\n``\n\n11\n\n### Create private routes\n\nCreate private routes that can only be accessed by authenticated users. The routes in the `private` directory are protected by the route guard in `hooks.server.ts`.\n\nTo ensure that `hooks.server.ts` runs for every nested path, put a `+layout.server.ts` file in the `private` directory. This file can be empty, but must exist to protect routes that don't have their own `+layout|page.server.ts`.\n\nsrc/routes/private/+layout.server.ts\n\nsrc/routes/private/+layout.svelte\n\nSQL\n\nsrc/routes/private/+page.server.ts\n\nsrc/routes/private/+page.svelte\n\n``\n_10\n/**\n_10\n* This file is necessary to ensure protection of all routes in the `private`\n_10\n* directory. It makes the routes in this directory _dynamic_ routes, which\n_10\n* send a server request, and thus trigger `hooks.server.ts`.\n_10\n**/\n``",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Setting up Server-Side Auth for SvelteKit</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>Set up Server-Side Auth to use cookie-based authentication with SvelteKit.</p>\n<div class=\"py-8\"><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">1</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Install Supabase packages</h3><p>Install the <code>@supabase/supabase-js</code> package and the helper <code>@supabase/ssr</code> package.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>npm install @supabase/supabase-js @supabase/ssr</span></div></div><br></code></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">2</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Set up environment variables</h3><p>Create a <code>.env.local</code> file in your project root directory.</p><p>Fill in your <code>PUBLIC_SUPABASE_URL</code> and <code>PUBLIC_SUPABASE_ANON_KEY</code>:</p><div class=\"max-w-[min(100%, 500px)] my-6\"><h6 class=\"mt-0 mb-1 text-foreground\">Project URL</h6><div class=\"flex flex-wrap gap-x-6\"><button class=\"items-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground-muted focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-control bg-background hover:bg-accent hover:text-accent-foreground px-4 overflow-hidden h-auto min-h-10 flex justify-between border-none py-0 pl-0 pr-1 text-left\" role=\"combobox\" aria-expanded=\"false\" type=\"button\" aria-haspopup=\"dialog\" aria-controls=\"radix-:R2jjim9jtsn7qb6ra:\" data-state=\"closed\">Loading...<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevrons-up-down ml-2 h-4 w-4 shrink-0 opacity-50\"><path d=\"m7 15 5 5 5-5\"></path><path d=\"m7 9 5-5 5 5\"></path></svg></button></div><div class=\"flex items-center gap-2 mt-1\"><input type=\"text\" disabled=\"\" class=\"flex w-full rounded-md border border-control bg-foreground/[.026] file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-foreground-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-background-control focus-visible:ring-offset-2 focus-visible:ring-offset-foreground-muted disabled:cursor-not-allowed disabled:opacity-50 aria-[invalid=true]:bg-destructive-200 aria-[invalid=true]:border-destructive-400 aria-[invalid=true]:focus:border-destructive aria-[invalid=true]:focus-visible:border-destructive aria-[] text-sm leading-4 px-3 py-2 h-[34px] font-mono\" value=\"Loading...\"><button class=\"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground-muted focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 py-2 px-0\" disabled=\"\" aria-label=\"Copy\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-copy\"><rect width=\"14\" height=\"14\" x=\"8\" y=\"8\" rx=\"2\" ry=\"2\"></rect><path d=\"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\"></path></svg></button></div></div><div class=\"max-w-[min(100%, 500px)] my-6\"><h6 class=\"mt-0 mb-1 text-foreground\">Anon key</h6><div class=\"flex flex-wrap gap-x-6\"><button class=\"items-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground-muted focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-control bg-background hover:bg-accent hover:text-accent-foreground px-4 overflow-hidden h-auto min-h-10 flex justify-between border-none py-0 pl-0 pr-1 text-left\" role=\"combobox\" aria-expanded=\"false\" type=\"button\" aria-haspopup=\"dialog\" aria-controls=\"radix-:R2kjim9jtsn7qb6ra:\" data-state=\"closed\">Loading...<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevrons-up-down ml-2 h-4 w-4 shrink-0 opacity-50\"><path d=\"m7 15 5 5 5-5\"></path><path d=\"m7 9 5-5 5 5\"></path></svg></button></div><div class=\"flex items-center gap-2 mt-1\"><input type=\"text\" disabled=\"\" class=\"flex w-full rounded-md border border-control bg-foreground/[.026] file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-foreground-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-background-control focus-visible:ring-offset-2 focus-visible:ring-offset-foreground-muted disabled:cursor-not-allowed disabled:opacity-50 aria-[invalid=true]:bg-destructive-200 aria-[invalid=true]:border-destructive-400 aria-[invalid=true]:focus:border-destructive aria-[invalid=true]:focus-visible:border-destructive aria-[] text-sm leading-4 px-3 py-2 h-[34px] font-mono\" value=\"Loading...\"><button class=\"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground-muted focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 py-2 px-0\" disabled=\"\" aria-label=\"Copy\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-copy\"><rect width=\"14\" height=\"14\" x=\"8\" y=\"8\" rx=\"2\" ry=\"2\"></rect><path d=\"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\"></path></svg></button></div></div></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\".env.local\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>.env.local</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>PUBLIC_SUPABASE_URL=&lt;your_supabase_project_url&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>PUBLIC_SUPABASE_ANON_KEY=&lt;your_supabase_anon_key&gt;</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">3</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Set up server-side hooks</h3><p>Set up server-side hooks in <code>src/hooks.server.ts</code>. The hooks:</p><ul>\n<li>Create a request-specific Supabase client, using the user credentials from the request cookie. This client is used for server-only code.</li>\n<li>Check user authentication.</li>\n<li>Guard protected pages.</li>\n</ul></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"src/hooks.server.ts\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/</span>hooks.server.ts</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createServerClient } from '@supabase/ssr'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>import { type Handle, redirect } from '@sveltejs/kit'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>import { sequence } from '@sveltejs/kit/hooks'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>import { PUBLIC_SUPABASE_URL, PUBLIC_SUPABASE_ANON_KEY } from '$env/static/public'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>const supabase: Handle = async ({ event, resolve }) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>  /**</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>   * Creates a Supabase client specific to this server request.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>   *</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>   * The Supabase client gets the Auth token from the request cookies.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>   */</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>  event.locals.supabase = createServerClient(PUBLIC_SUPABASE_URL, PUBLIC_SUPABASE_ANON_KEY, {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>    cookies: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>      getAll: () =&gt; event.cookies.getAll(),</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>      /**</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>       * SvelteKit's cookies API requires `path` to be explicitly set in</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>       * the cookie options. Setting `path` to `/` replicates previous/</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>       * standard behavior.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>       */</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>      setAll: (cookiesToSet) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>        cookiesToSet.forEach(({ name, value, options }) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>          event.cookies.set(name, value, { ...options, path: '/' })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>        })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>      },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>    },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>  })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>  /**</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>   * Unlike `supabase.auth.getSession()`, which returns the session _without_</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>   * validating the JWT, this function also calls `getUser()` to validate the</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>   * JWT before returning the session.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>   */</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>  event.locals.safeGetSession = async () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>    const {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>      data: { session },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>    } = await event.locals.supabase.auth.getSession()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>    if (!session) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>      return { session: null, user: null }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>    const {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>      data: { user },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>      error,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>    } = await event.locals.supabase.auth.getUser()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>    if (error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>      // JWT validation has failed</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>      return { session: null, user: null }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>    return { session, user }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>  return resolve(event, {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>    filterSerializedResponseHeaders(name) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>      /**</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>       * Supabase libraries use the `content-range` and `x-supabase-api-version`</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>       * headers, so we need to tell SvelteKit to pass it through.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>       */</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>      return name === 'content-range' || name === 'x-supabase-api-version'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>    },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>  })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>const authGuard: Handle = async ({ event, resolve }) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>  const { session, user } = await event.locals.safeGetSession()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>  event.locals.session = session</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>  event.locals.user = user</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>  if (!event.locals.session &amp;&amp; event.url.pathname.startsWith('/private')) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>    redirect(303, '/auth')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>  if (event.locals.session &amp;&amp; event.url.pathname === '/auth') {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>    redirect(303, '/private')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>  return resolve(event)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->81</span><div style=\"display:inline-block;margin-left:16px\"><span>export const handle: Handle = sequence(supabase, authGuard)</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">4</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Create TypeScript definitions</h3><p>To prevent TypeScript errors, add type definitions for the new <code>event.locals</code> properties.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"src/app.d.ts\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/</span>app.d.ts</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>import type { Session, SupabaseClient, User } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>declare global {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>  namespace App {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>    // interface Error {}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>    interface Locals {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>      supabase: SupabaseClient</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>      safeGetSession: () =&gt; Promise&lt;{ session: Session | null; user: User | null }&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>      session: Session | null</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>      user: User | null</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>    interface PageData {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>      session: Session | null</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>    // interface PageState {}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>    // interface Platform {}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>export {}</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">5</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Create a Supabase client in your root layout</h3><p>Create a Supabase client in your root <code>+layout.ts</code>. This client can be used to access Supabase from the client or the server. In order to get access to the Auth token on the server, use a <code>+layout.server.ts</code> file to pass in the session from <code>event.locals</code>.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"src/routes/+layout.ts\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/routes/</span>+layout.ts</div></div><div title=\"src/routes/+layout.server.ts\" data-ch-tab=\"north\" data-active=\"false\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/routes/</span>+layout.server.ts</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createBrowserClient, createServerClient, isBrowser } from '@supabase/ssr'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>import { PUBLIC_SUPABASE_ANON_KEY, PUBLIC_SUPABASE_URL } from '$env/static/public'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>import type { LayoutLoad } from './$types'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>export const load: LayoutLoad = async ({ data, depends, fetch }) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>  /**</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>   * Declare a dependency so the layout can be invalidated, for example, on</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>   * session refresh.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>   */</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>  depends('supabase:auth')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>  const supabase = isBrowser()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>    ? createBrowserClient(PUBLIC_SUPABASE_URL, PUBLIC_SUPABASE_ANON_KEY, {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>        global: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>          fetch,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>        },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>      })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>    : createServerClient(PUBLIC_SUPABASE_URL, PUBLIC_SUPABASE_ANON_KEY, {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>        global: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>          fetch,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>        },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>        cookies: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>          getAll() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>            return data.cookies</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>          },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>        },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>      })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>  /**</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>   * It's fine to use `getSession` here, because on the client, `getSession` is</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>   * safe, and on the server, it reads `session` from the `LayoutData`, which</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>   * safely checked the session using `safeGetSession`.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>   */</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>  const {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>    data: { session },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>  } = await supabase.auth.getSession()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>  const {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>    data: { user },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>  } = await supabase.auth.getUser()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>  return { session, supabase, user }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->43</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">6</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Listen to Auth events</h3><p>Set up a listener for Auth events on the client, to handle session refreshes and signouts.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"src/routes/+layout.svelte\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/routes/</span>+layout.svelte</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;script&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>\timport { invalidate } from '$app/navigation';</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>\timport { onMount } from 'svelte';</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>\texport let data;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>\t$: ({ session, supabase } = data);</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>\tonMount(() =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>\t\tconst { data } = supabase.auth.onAuthStateChange((_, newSession) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>\t\t\tif (newSession?.expires_at !== session?.expires_at) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>\t\t\t\tinvalidate('supabase:auth');</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>\t\t\t}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>\t\t});</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>\t\treturn () =&gt; data.subscription.unsubscribe();</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>\t});</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;/script&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;slot /&gt;</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">7</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Create your first page</h3><p>Create your first page. This example page calls Supabase from the server to get a list of countries from the database.</p><p>This is an example of a public page that uses publicly readable data.</p><p>To populate your database, run the <a href=\"/dashboard/project/_/sql/quickstarts\">countries quickstart</a> from your dashboard.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"src/routes/+page.server.ts\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/routes/</span>+page.server.ts</div></div><div title=\"src/routes/+page.svelte\" data-ch-tab=\"north\" data-active=\"false\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/routes/</span>+page.svelte</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>import type { PageServerLoad } from './$types'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>export const load: PageServerLoad = async ({ locals: { supabase } }) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  const { data: countries } = await supabase.from('countries').select('name').limit(5).order('name')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  return { countries: countries ?? [] }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">8</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Change the Auth confirmation path</h3><p>If you have email confirmation turned on (the default), a new user will receive an email confirmation after signing up.</p><p>Change the email template to support a server-side authentication flow.</p><p>Go to the <a href=\"https://supabase.com/dashboard/project/_/auth/templates\">Auth templates</a> page in your dashboard. In the <code>Confirm signup</code> template, change <code>{{ .ConfirmationURL }}</code> to <code>{{ .SiteURL }}/auth/confirm?token_hash={{ .TokenHash }}&amp;type=email</code>.</p></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">9</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Create a login page</h3><p>Next, create a login page to let users sign up and log in.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"src/routes/auth/+page.server.ts\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/routes/auth/</span>+page.server.ts</div></div><div title=\"src/routes/auth/+page.svelte\" data-ch-tab=\"north\" data-active=\"false\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/routes/auth/</span>+page.svelte</div></div><div title=\"src/routes/auth/+layout.svelte\" data-ch-tab=\"north\" data-active=\"false\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/routes/auth/</span>+layout.svelte</div></div><div title=\"src/routes/auth/error/+page.svelte\" data-ch-tab=\"north\" data-active=\"false\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/routes/auth/error/</span>+page.svelte</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>import { redirect } from '@sveltejs/kit'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>import type { Actions } from './$types'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>export const actions: Actions = {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>  signup: async ({ request, locals: { supabase } }) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    const formData = await request.formData()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    const email = formData.get('email') as string</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    const password = formData.get('password') as string</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    const { error } = await supabase.auth.signUp({ email, password })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    if (error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>      console.error(error)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>      redirect(303, '/auth/error')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    } else {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>      redirect(303, '/')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>  },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>  login: async ({ request, locals: { supabase } }) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    const formData = await request.formData()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    const email = formData.get('email') as string</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    const password = formData.get('password') as string</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    const { error } = await supabase.auth.signInWithPassword({ email, password })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    if (error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>      console.error(error)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>      redirect(303, '/auth/error')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    } else {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>      redirect(303, '/private')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>  },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">10</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Create the signup confirmation route</h3><p>Finish the signup flow by creating the API route to handle email verification.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"src/routes/auth/confirm/+server.ts\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/routes/auth/confirm/</span>+server.ts</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>import type { EmailOtpType } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>import { redirect } from '@sveltejs/kit'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>import type { RequestHandler } from './$types'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>export const GET: RequestHandler = async ({ url, locals: { supabase } }) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>  const token_hash = url.searchParams.get('token_hash')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>  const type = url.searchParams.get('type') as EmailOtpType | null</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>  const next = url.searchParams.get('next') ?? '/'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>  /**</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>   * Clean up the redirect URL by deleting the Auth flow parameters.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>   *</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>   * `next` is preserved for now, because it's needed in the error case.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>   */</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>  const redirectTo = new URL(url)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>  redirectTo.pathname = next</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>  redirectTo.searchParams.delete('token_hash')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>  redirectTo.searchParams.delete('type')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>  if (token_hash &amp;&amp; type) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>    const { error } = await supabase.auth.verifyOtp({ type, token_hash })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>    if (!error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>      redirectTo.searchParams.delete('next')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>      redirect(303, redirectTo)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>  redirectTo.pathname = '/auth/error'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>  redirect(303, redirectTo)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">11</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Create private routes</h3><p>Create private routes that can only be accessed by authenticated users. The routes in the <code>private</code> directory are protected by the route guard in <code>hooks.server.ts</code>.</p><p>To ensure that <code>hooks.server.ts</code> runs for every nested path, put a <code>+layout.server.ts</code> file in the <code>private</code> directory. This file can be empty, but must exist to protect routes that don't have their own <code>+layout|page.server.ts</code>.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose min-h-[30rem]\" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"src/routes/private/+layout.server.ts\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/routes/private/</span>+layout.server.ts</div></div><div title=\"src/routes/private/+layout.svelte\" data-ch-tab=\"north\" data-active=\"false\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/routes/private/</span>+layout.svelte</div></div><div title=\"SQL\" data-ch-tab=\"north\" data-active=\"false\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>SQL</div></div><div title=\"src/routes/private/+page.server.ts\" data-ch-tab=\"north\" data-active=\"false\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/routes/private/</span>+page.server.ts</div></div><div title=\"src/routes/private/+page.svelte\" data-ch-tab=\"north\" data-active=\"false\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/routes/private/</span>+page.svelte</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>/**</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span> * This file is necessary to ensure protection of all routes in the `private`</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span> * directory. It makes the routes in this directory _dynamic_ routes, which</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span> * send a server request, and thus trigger `hooks.server.ts`.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span> **/</span></div></div><br></code></div></div></div></div></div></div></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/server-side/sveltekit",
        "title": "Setting up Server-Side Auth for SvelteKit | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Setting%20up%20Server-Side%20Auth%20for%20SvelteKit&description=undefined",
        "ogTitle": "Setting up Server-Side Auth for SvelteKit | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/server-side/sveltekit",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Custom Access Token Hook\n\n## Customize the access token issued by Supabase Auth\n\n* * *\n\nThe custom access token hook runs before a token is issued and allows you to add additional claims based on the authentication method used.\n\nClaims returned must conform to our specification. Supabase Auth will check for these claims after the hook is run and return an error if they are not present.\n\nThese are the fields currently available on an access token:\n\nRequired Claims: `aud`, `exp`, `iat`, `sub`, `email`, `phone`, `role`, `aal`, `session_id`\nOptional Claims: `jti`, `iss`, `nbf`, `app_metadata`, `user_metadata`, `amr`\n\n**Inputs**\n\n| Field | Type | Description |\n| --- | --- | --- |\n| `user_id` | `string` | Unique identifier for the user attempting to sign in. |\n| `claims` | `object` | Claims which are included in the access token. |\n| `authentication_method` | `string` | The authentication method used to request the access token. Possible values include: `oauth`, `password`, `otp`, `totp`, `recovery`, `invite`, `sso/saml`, `magiclink`, `email/signup`, `email_change`, `token_refresh`, `anonymous`. |\n\nJSONJSON Schema\n\n`\n1\n{\n2\n\"user_id\": \"8ccaa7af-909f-44e7-84cb-67cdccb56be6\",\n3\n\"claims\": {\n4\n    \"aud\": \"authenticated\",\n5\n    \"exp\": 1715690221,\n6\n    \"iat\": 1715686621,\n7\n    \"sub\": \"8ccaa7af-909f-44e7-84cb-67cdccb56be6\",\n8\n    \"email\": \"\",\n9\n    \"phone\": \"\",\n10\n    \"app_metadata\": {},\n11\n    \"user_metadata\": {},\n12\n    \"role\": \"authenticated\",\n13\n    \"aal\": \"aal1\",\n14\n    \"amr\": [ { \"method\": \"anonymous\", \"timestamp\": 1715686621 } ],\n15\n    \"session_id\": \"4b938a09-5372-4177-a314-cfa292099ea2\",\n16\n    \"is_anonymous\": true\n17\n},\n18\n\"authentication_method\": \"anonymous\"\n19\n}\n`\n\n**Outputs**\n\nReturn these only if your hook processed the input without errors.\n\n| Field | Type | Description |\n| --- | --- | --- |\n| `claims` | `object` | The updated claims after the hook has been run. |\n\nSQLHTTP\n\nAdd admin roleAdd claim via plv8Restrict access to SSO users\n\nYou can allow registered admin users to perform restricted actions by granting an `admin` claim to their token.\n\nCreate a profiles table with an `is_admin` flag:\n\n`\n1\ncreate table profiles (\n2\nuser_id uuid not null primary key references auth.users (id),\n3\nis_admin boolean not null default false\n4\n);\n`\n\nCreate a hook:\n\n`\n1\ncreate or replace function public.custom_access_token_hook(event jsonb)\n2\nreturns jsonb\n3\nlanguage plpgsql\n4\nas $$\n5\ndeclare\n6\n    claims jsonb;\n7\n    is_admin boolean;\n8\nbegin\n9\n    -- Check if the user is marked as admin in the profiles table\n10\n    select is_admin into is_admin from profiles where user_id = (event->>'user_id')::uuid;\n11\n12\n    -- Proceed only if the user is an admin\n13\n    if is_admin then\n14\n      claims := event->'claims';\n15\n16\n      -- Check if 'app_metadata' exists in claims\n17\n      if jsonb_typeof(claims->'app_metadata') is null then\n18\n        -- If 'app_metadata' does not exist, create an empty object\n19\n        claims := jsonb_set(claims, '{app_metadata}', '{}');\n20\n      end if;\n21\n22\n      -- Set a claim of 'admin'\n23\n      claims := jsonb_set(claims, '{app_metadata, admin}', 'true');\n24\n25\n      -- Update the 'claims' object in the original event\n26\n      event := jsonb_set(event, '{claims}', claims);\n27\n    end if;\n28\n29\n    -- Return the modified or original event\n30\n    return event;\n31\nend;\n32\n$$;\n33\n34\ngrant all\n35\non table public.profiles\n36\nto supabase_auth_admin;\n37\n38\nrevoke all\n39\non table public.profiles\n40\nfrom authenticated, anon, public;\n`",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Custom Access Token Hook</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Customize the access token issued by Supabase Auth</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>The custom access token hook runs before a token is issued and allows you to add additional claims based on the authentication method used.</p>\n<p>Claims returned must conform to our specification. Supabase Auth will check for these claims after the hook is run and return an error if they are not present.</p>\n<p>These are the fields currently available on an access token:</p>\n<p>Required Claims: <code>aud</code>, <code>exp</code>, <code>iat</code>, <code>sub</code>, <code>email</code>, <code>phone</code>, <code>role</code>, <code>aal</code>, <code>session_id</code>\nOptional Claims: <code>jti</code>, <code>iss</code>, <code>nbf</code>, <code>app_metadata</code>, <code>user_metadata</code>, <code>amr</code></p>\n<p><strong>Inputs</strong></p>\n<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>user_id</code></td><td><code>string</code></td><td>Unique identifier for the user attempting to sign in.</td></tr><tr><td><code>claims</code></td><td><code>object</code></td><td>Claims which are included in the access token.</td></tr><tr><td><code>authentication_method</code></td><td><code>string</code></td><td>The authentication method used to request the access token. Possible values include: <code>oauth</code>, <code>password</code>, <code>otp</code>, <code>totp</code>, <code>recovery</code>, <code>invite</code>, <code>sso/saml</code>, <code>magiclink</code>, <code>email/signup</code>, <code>email_change</code>, <code>token_refresh</code>, <code>anonymous</code>.</td></tr></tbody></table>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"0\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R5u9jtsn7qb6ra:-content-custom-access-token-json\" data-state=\"active\" id=\"radix-:R5u9jtsn7qb6ra:-trigger-custom-access-token-json\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JSON</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R5u9jtsn7qb6ra:-content-custom-access-token-json-schema\" data-state=\"inactive\" id=\"radix-:R5u9jtsn7qb6ra:-trigger-custom-access-token-json-schema\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JSON Schema</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R5u9jtsn7qb6ra:-trigger-custom-access-token-json\" id=\"radix-:R5u9jtsn7qb6ra:-content-custom-access-token-json\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"json\" style=\"width: 926px; height: 401px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 399px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 361px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">{</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">  \"user_id\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"8ccaa7af-909f-44e7-84cb-67cdccb56be6\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">  \"claims\"</span><span style=\"color: var(--ch-4);\">: {</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">    \"aud\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"authenticated\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 76px); width: 31.5px; opacity: 0.99;\">5</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 76px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">    \"exp\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-2);\">1715690221</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 95px); width: 31.5px; opacity: 0.99;\">6</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 95px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">    \"iat\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-2);\">1715686621</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 114px); width: 31.5px; opacity: 0.99;\">7</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 114px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">    \"sub\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"8ccaa7af-909f-44e7-84cb-67cdccb56be6\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 133px); width: 31.5px; opacity: 0.99;\">8</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 133px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">    \"email\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 152px); width: 31.5px; opacity: 0.99;\">9</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 152px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">    \"phone\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 171px); width: 31.5px; opacity: 0.99;\">10</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 171px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">    \"app_metadata\"</span><span style=\"color: var(--ch-4);\">: {},</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 190px); width: 31.5px; opacity: 0.99;\">11</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 190px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">    \"user_metadata\"</span><span style=\"color: var(--ch-4);\">: {},</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 209px); width: 31.5px; opacity: 0.99;\">12</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 209px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">    \"role\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"authenticated\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 228px); width: 31.5px; opacity: 0.99;\">13</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 228px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">    \"aal\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"aal1\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 247px); width: 31.5px; opacity: 0.99;\">14</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 247px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">    \"amr\"</span><span style=\"color: var(--ch-4);\">: [ { </span><span style=\"color: var(--ch-6);\">\"method\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"anonymous\"</span><span style=\"color: var(--ch-4);\">, </span><span style=\"color: var(--ch-6);\">\"timestamp\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-2);\">1715686621</span><span style=\"color: var(--ch-4);\"> } ],</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 266px); width: 31.5px; opacity: 0.99;\">15</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 266px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">    \"session_id\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"4b938a09-5372-4177-a314-cfa292099ea2\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 285px); width: 31.5px; opacity: 0.99;\">16</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 285px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">    \"is_anonymous\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-2);\">true</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 304px); width: 31.5px; opacity: 0.99;\">17</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 304px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  },</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 323px); width: 31.5px; opacity: 0.99;\">18</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 323px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">  \"authentication_method\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"anonymous\"</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 342px); width: 31.5px; opacity: 0.99;\">19</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 342px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">}</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R5u9jtsn7qb6ra:-trigger-custom-access-token-json-schema\" hidden=\"\" id=\"radix-:R5u9jtsn7qb6ra:-content-custom-access-token-json-schema\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p><strong>Outputs</strong></p>\n<p>Return these only if your hook processed the input without errors.</p>\n<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>claims</code></td><td><code>object</code></td><td>The updated claims after the hook has been run.</td></tr></tbody></table>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"0\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R6u9jtsn7qb6ra:-content-sql\" data-state=\"active\" id=\"radix-:R6u9jtsn7qb6ra:-trigger-sql\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>SQL</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R6u9jtsn7qb6ra:-content-http\" data-state=\"inactive\" id=\"radix-:R6u9jtsn7qb6ra:-trigger-http\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>HTTP</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6u9jtsn7qb6ra:-trigger-sql\" id=\"radix-:R6u9jtsn7qb6ra:-content-sql\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"0\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rbeu9jtsn7qb6ra:-content-add-admin-role\" data-state=\"active\" id=\"radix-:Rbeu9jtsn7qb6ra:-trigger-add-admin-role\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Add admin role</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbeu9jtsn7qb6ra:-content-add-metadata-claim-plv8\" data-state=\"inactive\" id=\"radix-:Rbeu9jtsn7qb6ra:-trigger-add-metadata-claim-plv8\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Add claim via plv8</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbeu9jtsn7qb6ra:-content-restrict-access-to-sso-users\" data-state=\"inactive\" id=\"radix-:Rbeu9jtsn7qb6ra:-trigger-restrict-access-to-sso-users\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Restrict access to SSO users</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbeu9jtsn7qb6ra:-trigger-add-admin-role\" id=\"radix-:Rbeu9jtsn7qb6ra:-content-add-admin-role\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>You can allow registered admin users to perform restricted actions by granting an <code>admin</code> claim to their token.</p><p>Create a profiles table with an <code>is_admin</code> flag:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"sql\" style=\"width: 926px; height: 116px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 114px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 76px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 441px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">create table </span><span style=\"color: var(--ch-5);\">profiles</span><span style=\"color: var(--ch-4);\"> (</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 441px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  user_id uuid </span><span style=\"color: var(--ch-7);\">not null primary key references </span><span style=\"color: var(--ch-2);\">auth</span><span style=\"color: var(--ch-4);\">.</span><span style=\"color: var(--ch-2);\">users</span><span style=\"color: var(--ch-4);\"> (id),</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 441px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  is_admin </span><span style=\"color: var(--ch-7);\">boolean not null default</span><span style=\"color: var(--ch-4);\"> false</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 441px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">);</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div><p>Create a hook:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"sql\" style=\"width: 926px; height: 800px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 798px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 760px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">create or replace function </span><span style=\"color: var(--ch-5);\">public</span><span style=\"color: var(--ch-4);\">.custom_access_token_hook(</span><span style=\"color: var(--ch-7);\">event</span><span style=\"color: var(--ch-4);\"> jsonb)</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">returns</span><span style=\"color: var(--ch-4);\"> jsonb</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">language</span><span style=\"color: var(--ch-4);\"> plpgsql</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">as</span><span style=\"color: var(--ch-4);\"> $$</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 76px); width: 31.5px; opacity: 0.99;\">5</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 76px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  declare</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 95px); width: 31.5px; opacity: 0.99;\">6</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 95px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">    claims jsonb;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 114px); width: 31.5px; opacity: 0.99;\">7</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 114px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">    is_admin </span><span style=\"color: var(--ch-7);\">boolean</span><span style=\"color: var(--ch-4);\">;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 133px); width: 31.5px; opacity: 0.99;\">8</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 133px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  begin</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 152px); width: 31.5px; opacity: 0.99;\">9</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 152px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-1);\">    -- Check if the user is marked as admin in the profiles table</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 171px); width: 31.5px; opacity: 0.99;\">10</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 171px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">    select</span><span style=\"color: var(--ch-4);\"> is_admin </span><span style=\"color: var(--ch-7);\">into</span><span style=\"color: var(--ch-4);\"> is_admin </span><span style=\"color: var(--ch-7);\">from</span><span style=\"color: var(--ch-4);\"> profiles </span><span style=\"color: var(--ch-7);\">where</span><span style=\"color: var(--ch-4);\"> user_id </span><span style=\"color: var(--ch-7);\">=</span><span style=\"color: var(--ch-4);\"> (</span><span style=\"color: var(--ch-7);\">event-&gt;&gt;</span><span style=\"color: var(--ch-8);\">'user_id'</span><span style=\"color: var(--ch-4);\">)::uuid;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 190px); width: 31.5px; opacity: 0.99;\">11</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 190px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\"></span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 209px); width: 31.5px; opacity: 0.99;\">12</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 209px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-1);\">    -- Proceed only if the user is an admin</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 228px); width: 31.5px; opacity: 0.99;\">13</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 228px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">    if</span><span style=\"color: var(--ch-4);\"> is_admin </span><span style=\"color: var(--ch-7);\">then</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 247px); width: 31.5px; opacity: 0.99;\">14</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 247px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">      claims :</span><span style=\"color: var(--ch-7);\">= event-&gt;</span><span style=\"color: var(--ch-8);\">'claims'</span><span style=\"color: var(--ch-4);\">;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 266px); width: 31.5px; opacity: 0.99;\">15</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 266px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\"></span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 285px); width: 31.5px; opacity: 0.99;\">16</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 285px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-1);\">      -- Check if 'app_metadata' exists in claims</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 304px); width: 31.5px; opacity: 0.99;\">17</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 304px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">      if</span><span style=\"color: var(--ch-4);\"> jsonb_typeof(claims</span><span style=\"color: var(--ch-7);\">-&gt;</span><span style=\"color: var(--ch-8);\">'app_metadata'</span><span style=\"color: var(--ch-4);\">) </span><span style=\"color: var(--ch-7);\">is null then</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 323px); width: 31.5px; opacity: 0.99;\">18</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 323px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-1);\">        -- If 'app_metadata' does not exist, create an empty object</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 342px); width: 31.5px; opacity: 0.99;\">19</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 342px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">        claims :</span><span style=\"color: var(--ch-7);\">=</span><span style=\"color: var(--ch-4);\"> jsonb_set(claims, </span><span style=\"color: var(--ch-8);\">'{app_metadata}'</span><span style=\"color: var(--ch-4);\">, </span><span style=\"color: var(--ch-8);\">'{}'</span><span style=\"color: var(--ch-4);\">);</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 361px); width: 31.5px; opacity: 0.99;\">20</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 361px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">      end if</span><span style=\"color: var(--ch-4);\">;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 380px); width: 31.5px; opacity: 0.99;\">21</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 380px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\"></span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 399px); width: 31.5px; opacity: 0.99;\">22</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 399px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-1);\">      -- Set a claim of 'admin'</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 418px); width: 31.5px; opacity: 0.99;\">23</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 418px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">      claims :</span><span style=\"color: var(--ch-7);\">=</span><span style=\"color: var(--ch-4);\"> jsonb_set(claims, </span><span style=\"color: var(--ch-8);\">'{app_metadata, admin}'</span><span style=\"color: var(--ch-4);\">, </span><span style=\"color: var(--ch-8);\">'true'</span><span style=\"color: var(--ch-4);\">);</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 437px); width: 31.5px; opacity: 0.99;\">24</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 437px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\"></span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 456px); width: 31.5px; opacity: 0.99;\">25</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 456px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-1);\">      -- Update the 'claims' object in the original event</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 475px); width: 31.5px; opacity: 0.99;\">26</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 475px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">      event</span><span style=\"color: var(--ch-4);\"> :</span><span style=\"color: var(--ch-7);\">=</span><span style=\"color: var(--ch-4);\"> jsonb_set(</span><span style=\"color: var(--ch-7);\">event</span><span style=\"color: var(--ch-4);\">, </span><span style=\"color: var(--ch-8);\">'{claims}'</span><span style=\"color: var(--ch-4);\">, claims);</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 494px); width: 31.5px; opacity: 0.99;\">27</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 494px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">    end if</span><span style=\"color: var(--ch-4);\">;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 513px); width: 31.5px; opacity: 0.99;\">28</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 513px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\"></span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 532px); width: 31.5px; opacity: 0.99;\">29</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 532px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-1);\">    -- Return the modified or original event</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 551px); width: 31.5px; opacity: 0.99;\">30</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 551px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">    return event</span><span style=\"color: var(--ch-4);\">;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 570px); width: 31.5px; opacity: 0.99;\">31</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 570px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  end</span><span style=\"color: var(--ch-4);\">;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 589px); width: 31.5px; opacity: 0.99;\">32</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 589px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">$$;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 608px); width: 31.5px; opacity: 0.99;\">33</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 608px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\"></span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 627px); width: 31.5px; opacity: 0.99;\">34</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 627px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">grant</span><span style=\"color: var(--ch-4);\"> all</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 646px); width: 31.5px; opacity: 0.99;\">35</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 646px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  on table </span><span style=\"color: var(--ch-2);\">public</span><span style=\"color: var(--ch-4);\">.</span><span style=\"color: var(--ch-2);\">profiles</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 665px); width: 31.5px; opacity: 0.99;\">36</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 665px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  to</span><span style=\"color: var(--ch-4);\"> supabase_auth_admin;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 684px); width: 31.5px; opacity: 0.99;\">37</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 684px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\"></span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 703px); width: 31.5px; opacity: 0.99;\">38</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 703px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">revoke</span><span style=\"color: var(--ch-4);\"> all</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 722px); width: 31.5px; opacity: 0.99;\">39</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 722px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  on table </span><span style=\"color: var(--ch-2);\">public</span><span style=\"color: var(--ch-4);\">.</span><span style=\"color: var(--ch-2);\">profiles</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 741px); width: 31.5px; opacity: 0.99;\">40</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 741px); width: 630px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  from</span><span style=\"color: var(--ch-4);\"> authenticated, anon, public;</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbeu9jtsn7qb6ra:-trigger-add-metadata-claim-plv8\" hidden=\"\" id=\"radix-:Rbeu9jtsn7qb6ra:-content-add-metadata-claim-plv8\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbeu9jtsn7qb6ra:-trigger-restrict-access-to-sso-users\" hidden=\"\" id=\"radix-:Rbeu9jtsn7qb6ra:-content-restrict-access-to-sso-users\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6u9jtsn7qb6ra:-trigger-http\" hidden=\"\" id=\"radix-:R6u9jtsn7qb6ra:-content-http\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div></article></div></div></div><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div><next-route-announcer style=\"position: absolute;\"></next-route-announcer></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-hooks/custom-access-token-hook",
        "title": "Custom Access Token Hook | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Custom%20Access%20Token%20Hook&description=undefined",
        "ogTitle": "Custom Access Token Hook | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-hooks/custom-access-token-hook",
        "description": "Customize the access token issued by Supabase Auth",
        "modifiedTime": "2024-09-10T20:36:24.980Z",
        "ogDescription": "Customize the access token issued by Supabase Auth",
        "publishedTime": "2024-09-10T20:36:24.980Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Send Email Hook\n\n## Use a custom email provider to send authentication messages\n\n* * *\n\nThe Send Email Hook runs before an email is sent and allows for flexibility around email sending. You can use this hook to configure a back-up email provider or add internationalization to your emails.\n\n**Inputs**\n\n| Field | Type | Description |\n| --- | --- | --- |\n| `user` | [`User`](/docs/guides/auth/users#the-user-object) | The user attempting to sign in. |\n| `email` | `object` | Metadata specific to the email sending process. Includes the OTP and `token_hash`. |\n\nJSONJSON Schema\n\n`\n_49\n{\n_49\n\"user\": {\n_49\n    \"id\": \"8484b834-f29e-4af2-bf42-80644d154f76\",\n_49\n    \"aud\": \"authenticated\",\n_49\n    \"role\": \"authenticated\",\n_49\n    \"email\": \"john@soupbase.io\",\n_49\n    \"phone\": \"\",\n_49\n    \"app_metadata\": {\n_49\n      \"provider\": \"email\",\n_49\n      \"providers\": [\"email\"]\n_49\n    },\n_49\n    \"user_metadata\": {\n_49\n      \"email\": \"john@soupbase.io\",\n_49\n      \"email_verified\": false,\n_49\n      \"phone_verified\": false,\n_49\n      \"sub\": \"8484b834-f29e-4af2-bf42-80644d154f76\"\n_49\n    },\n_49\n    \"identities\": [\\\n_49\\\n      {\\\n_49\\\n        \"identity_id\": \"bc26d70b-517d-4826-bce4-413a5ff257e7\",\\\n_49\\\n        \"id\": \"8484b834-f29e-4af2-bf42-80644d154f76\",\\\n_49\\\n        \"user_id\": \"8484b834-f29e-4af2-bf42-80644d154f76\",\\\n_49\\\n        \"identity_data\": {\\\n_49\\\n          \"email\": \"john@soupbase.io\",\\\n_49\\\n          \"email_verified\": false,\\\n_49\\\n          \"phone_verified\": false,\\\n_49\\\n          \"sub\": \"8484b834-f29e-4af2-bf42-80644d154f76\"\\\n_49\\\n        },\\\n_49\\\n        \"provider\": \"email\",\\\n_49\\\n        \"last_sign_in_at\": \"2024-05-14T12:56:33.824231484Z\",\\\n_49\\\n        \"created_at\": \"2024-05-14T12:56:33.824261Z\",\\\n_49\\\n        \"updated_at\": \"2024-05-14T12:56:33.824261Z\",\\\n_49\\\n        \"email\": \"john@soupbase.io\"\\\n_49\\\n      }\\\n_49\\\n    ],\n_49\n    \"created_at\": \"2024-05-14T12:56:33.821567Z\",\n_49\n    \"updated_at\": \"2024-05-14T12:56:33.825595Z\",\n_49\n    \"is_anonymous\": false\n_49\n},\n_49\n\"email_data\": {\n_49\n    \"token\": \"305805\",\n_49\n    \"token_hash\": \"7d5b7b1964cf5d388340a7f04f1dbb5eeb6c7b52ef8270e1737a58d0\",\n_49\n    \"redirect_to\": \"http://localhost:3000/\",\n_49\n    \"email_action_type\": \"signup\",\n_49\n    \"site_url\": \"http://localhost:9999\",\n_49\n    \"token_new\": \"\",\n_49\n    \"token_hash_new\": \"\"\n_49\n}\n_49\n}\n`\n\n**Outputs**\n\n- No outputs are required. An empty response with a status code of 200 is taken as a successful response.\n\nSQLHTTP\n\nUse Resend as an email providerAdd Internationalization for Email Templates\n\nYou can configure [Resend](https://resend.com/) as the custom email provider through the \"Send Email\" hook. This allows you to take advantage of Resend's developer-friendly APIs to send emails and leverage [React Email](https://react.email/) for managing your email templates. For a more advanced React Email tutorial, refer to [this guide](/docs/guides/functions/examples/auth-send-email-hook-react-email-resend).\n\nIf you want to send emails through the Supabase Resend integration, which uses Resend's SMTP server, check out [this integration](/partners/integrations/resend) instead.\n\nCreate a `.env` file with the following environment variables:\n\n`\n_10\nRESEND_API_KEY=your_resend_api_key\n_10\nSEND_EMAIL_HOOK_SECRET=<base64_secret>\n`\n\nYou can generate the secret in the [Auth Hooks](/dashboard/project/_/auth/hooks) section of the Supabase dashboard. Make sure to remove the `v1,whsec_` prefix!\n\nSet the secrets in your Supabase project:\n\n`\n_10\nsupabase secrets set --env-file .env\n`\n\nCreate a new edge function:\n\n`\n_10\nsupabase functions new send-email\n`\n\nAdd the following code to your edge function:\n\n``\n_61\nimport { Webhook } from \"https://esm.sh/standardwebhooks@1.0.0\";\n_61\nimport { Resend } from \"npm:resend\";\n_61\n_61\nconst resend = new Resend(Deno.env.get(\"RESEND_API_KEY\") as string);\n_61\nconst hookSecret = Deno.env.get(\"SEND_EMAIL_HOOK_SECRET\") as string;\n_61\n_61\nDeno.serve(async (req) => {\n_61\nif (req.method !== \"POST\") {\n_61\n    return new Response(\"not allowed\", { status: 400 });\n_61\n}\n_61\n_61\nconst payload = await req.text();\n_61\nconst headers = Object.fromEntries(req.headers);\n_61\nconst wh = new Webhook(hookSecret);\n_61\ntry {\n_61\n    const { user, email_data } = wh.verify(payload, headers) as {\n_61\n      user: {\n_61\n        email: string;\n_61\n      };\n_61\n      email_data: {\n_61\n        token: string;\n_61\n        token_hash: string;\n_61\n        redirect_to: string;\n_61\n        email_action_type: string;\n_61\n        site_url: string;\n_61\n        token_new: string;\n_61\n        token_hash_new: string;\n_61\n      };\n_61\n    };\n_61\n_61\n    const { error } = await resend.emails.send({\n_61\n      from: \"welcome <onboarding@example.com>\",\n_61\n      to: [user.email],\n_61\n      subject: \"Welcome to my site!\",\n_61\n      text: `Confirm you signup with this code: ${email_data.token}`,\n_61\n    });\n_61\n    if (error) {\n_61\n      throw error;\n_61\n    }\n_61\n} catch (error) {\n_61\n    return new Response(\n_61\n      JSON.stringify({\n_61\n        error: {\n_61\n          http_code: error.code,\n_61\n          message: error.message,\n_61\n        },\n_61\n      }),\n_61\n      {\n_61\n        status: 401,\n_61\n        headers: { \"Content-Type\": \"application/json\" },\n_61\n      },\n_61\n    );\n_61\n}\n_61\n_61\nconst responseHeaders = new Headers();\n_61\nresponseHeaders.set(\"Content-Type\", \"application/json\");\n_61\nreturn new Response(JSON.stringify({}), {\n_61\n    status: 200,\n_61\n    headers: responseHeaders,\n_61\n});\n_61\n});\n``\n\nDeploy your edge function and [configure it as a hook](/dashboard/project/_/auth/hooks):\n\n`\n_10\nsupabase functions deploy send-email --no-verify-jwt\n`",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Send Email Hook</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Use a custom email provider to send authentication messages</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>The Send Email Hook runs before an email is sent and allows for flexibility around email sending. You can use this hook to configure a back-up email provider or add internationalization to your emails.</p>\n<p><strong>Inputs</strong></p>\n<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>user</code></td><td><a href=\"/docs/guides/auth/users#the-user-object\"><code>User</code></a></td><td>The user attempting to sign in.</td></tr><tr><td><code>email</code></td><td><code>object</code></td><td>Metadata specific to the email sending process. Includes the OTP and <code>token_hash</code>.</td></tr></tbody></table>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R369jtsn7qb6ra:-content-send-email-json\" data-state=\"active\" id=\"radix-:R369jtsn7qb6ra:-trigger-send-email-json\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JSON</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R369jtsn7qb6ra:-content-send-email-json-schema\" data-state=\"inactive\" id=\"radix-:R369jtsn7qb6ra:-trigger-send-email-json-schema\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JSON Schema</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R369jtsn7qb6ra:-trigger-send-email-json\" id=\"radix-:R369jtsn7qb6ra:-content-send-email-json\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"user\": {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"id\": \"8484b834-f29e-4af2-bf42-80644d154f76\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"aud\": \"authenticated\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"role\": \"authenticated\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"email\": \"john@soupbase.io\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"phone\": \"\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"app_metadata\": {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>      \"provider\": \"email\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>      \"providers\": [\"email\"]</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"user_metadata\": {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>      \"email\": \"john@soupbase.io\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>      \"email_verified\": false,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>      \"phone_verified\": false,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>      \"sub\": \"8484b834-f29e-4af2-bf42-80644d154f76\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"identities\": [</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>      {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"identity_id\": \"bc26d70b-517d-4826-bce4-413a5ff257e7\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"id\": \"8484b834-f29e-4af2-bf42-80644d154f76\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"user_id\": \"8484b834-f29e-4af2-bf42-80644d154f76\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"identity_data\": {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>          \"email\": \"john@soupbase.io\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>          \"email_verified\": false,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>          \"phone_verified\": false,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>          \"sub\": \"8484b834-f29e-4af2-bf42-80644d154f76\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>        },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"provider\": \"email\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"last_sign_in_at\": \"2024-05-14T12:56:33.824231484Z\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"created_at\": \"2024-05-14T12:56:33.824261Z\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"updated_at\": \"2024-05-14T12:56:33.824261Z\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"email\": \"john@soupbase.io\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    ],</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"created_at\": \"2024-05-14T12:56:33.821567Z\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"updated_at\": \"2024-05-14T12:56:33.825595Z\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"is_anonymous\": false</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>  },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"email_data\": {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"token\": \"305805\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"token_hash\": \"7d5b7b1964cf5d388340a7f04f1dbb5eeb6c7b52ef8270e1737a58d0\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"redirect_to\": \"http://localhost:3000/\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"email_action_type\": \"signup\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"site_url\": \"http://localhost:9999\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"token_new\": \"\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"token_hash_new\": \"\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->49</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R369jtsn7qb6ra:-trigger-send-email-json-schema\" hidden=\"\" id=\"radix-:R369jtsn7qb6ra:-content-send-email-json-schema\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p><strong>Outputs</strong></p>\n<ul>\n<li>No outputs are required. An empty response with a status code of 200 is taken as a successful response.</li>\n</ul>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R3u9jtsn7qb6ra:-content-sql\" data-state=\"inactive\" id=\"radix-:R3u9jtsn7qb6ra:-trigger-sql\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>SQL</span></button><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R3u9jtsn7qb6ra:-content-http\" data-state=\"active\" id=\"radix-:R3u9jtsn7qb6ra:-trigger-http\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>HTTP</span></button></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R3u9jtsn7qb6ra:-trigger-sql\" hidden=\"\" id=\"radix-:R3u9jtsn7qb6ra:-content-sql\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R3u9jtsn7qb6ra:-trigger-http\" id=\"radix-:R3u9jtsn7qb6ra:-content-http\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R6nu9jtsn7qb6ra:-content-http-send-email-with-resend\" data-state=\"active\" id=\"radix-:R6nu9jtsn7qb6ra:-trigger-http-send-email-with-resend\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Use Resend as an email provider</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R6nu9jtsn7qb6ra:-content-http-internationalization-for-emails\" data-state=\"inactive\" id=\"radix-:R6nu9jtsn7qb6ra:-trigger-http-internationalization-for-emails\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Add Internationalization for Email Templates</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6nu9jtsn7qb6ra:-trigger-http-send-email-with-resend\" id=\"radix-:R6nu9jtsn7qb6ra:-content-http-send-email-with-resend\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>You can configure <a href=\"https://resend.com/\">Resend</a> as the custom email provider through the \"Send Email\" hook. This allows you to take advantage of Resend's developer-friendly APIs to send emails and leverage <a href=\"https://react.email/\">React Email</a> for managing your email templates. For a more advanced React Email tutorial, refer to <a href=\"/docs/guides/functions/examples/auth-send-email-hook-react-email-resend\">this guide</a>.</p><p>If you want to send emails through the Supabase Resend integration, which uses Resend's SMTP server, check out <a href=\"/partners/integrations/resend\">this integration</a> instead.</p><p>Create a <code>.env</code> file with the following environment variables:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>RESEND_API_KEY=your_resend_api_key</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>SEND_EMAIL_HOOK_SECRET=&lt;base64_secret&gt;</span></div></div><br></code></div></div><div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text-foreground bg-alternative border [&amp;>svg]:text-background [&amp;>svg]:bg-foreground mb-2\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>You can generate the secret in the <a href=\"/dashboard/project/_/auth/hooks\">Auth Hooks</a> section of the Supabase dashboard. Make sure to remove the <code>v1,whsec_</code> prefix!</p></div></div><p>Set the secrets in your Supabase project:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>supabase secrets set --env-file .env</span></div></div><br></code></div></div><p>Create a new edge function:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>supabase functions new send-email</span></div></div><br></code></div></div><p>Add the following code to your edge function:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Webhook } from \"https://esm.sh/standardwebhooks@1.0.0\";</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Resend } from \"npm:resend\";</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>const resend = new Resend(Deno.env.get(\"RESEND_API_KEY\") as string);</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>const hookSecret = Deno.env.get(\"SEND_EMAIL_HOOK_SECRET\") as string;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>Deno.serve(async (req) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>  if (req.method !== \"POST\") {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>    return new Response(\"not allowed\", { status: 400 });</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>  const payload = await req.text();</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>  const headers = Object.fromEntries(req.headers);</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>  const wh = new Webhook(hookSecret);</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>  try {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>    const { user, email_data } = wh.verify(payload, headers) as {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>      user: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>        email: string;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>      };</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>      email_data: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>        token: string;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>        token_hash: string;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>        redirect_to: string;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>        email_action_type: string;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>        site_url: string;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>        token_new: string;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>        token_hash_new: string;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>      };</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>    };</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>    const { error } = await resend.emails.send({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>      from: \"welcome &lt;onboarding@example.com&gt;\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>      to: [user.email],</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>      subject: \"Welcome to my site!\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>      text: `Confirm you signup with this code: ${email_data.token}`,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>    });</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>    if (error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>      throw error;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>  } catch (error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>    return new Response(</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>      JSON.stringify({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>        error: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>          http_code: error.code,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>          message: error.message,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>        },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>      }),</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>      {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>        status: 401,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>        headers: { \"Content-Type\": \"application/json\" },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>      },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>    );</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>  const responseHeaders = new Headers();</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>  responseHeaders.set(\"Content-Type\", \"application/json\");</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>  return new Response(JSON.stringify({}), {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>    status: 200,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>    headers: responseHeaders,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>  });</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->61</span><div style=\"display:inline-block;margin-left:16px\"><span>});</span></div></div><br></code></div></div><p>Deploy your edge function and <a href=\"/dashboard/project/_/auth/hooks\">configure it as a hook</a>:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>supabase functions deploy send-email --no-verify-jwt</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6nu9jtsn7qb6ra:-trigger-http-internationalization-for-emails\" hidden=\"\" id=\"radix-:R6nu9jtsn7qb6ra:-content-http-internationalization-for-emails\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-hooks/send-email-hook",
        "title": "Send Email Hook | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Send%20Email%20Hook&description=undefined",
        "ogTitle": "Send Email Hook | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-hooks/send-email-hook",
        "description": "Use a custom email provider to send authentication messages",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "ogDescription": "Use a custom email provider to send authentication messages",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Send SMS Hook\n\n## Use a custom SMS provider to send authentication messages\n\n* * *\n\nRuns before a message is sent. Use the hook to:\n\n- Use a regional SMS Provider\n- Use alternate messaging channels such as WhatsApp\n- Adjust the message body to include platform specific fields such as the [AppHash](https://developers.google.com/identity/sms-retriever/overview)\n\n**Inputs**\n\n| Field | Type | Description |\n| --- | --- | --- |\n| `user` | [`User`](/docs/guides/auth/users#the-user-object) | The user attempting to sign in. |\n| `sms` | `object` | Metadata specific to the SMS sending process. Includes the OTP. |\n\nJSONJSON Schema\n\n`\n_42\n{\n_42\n\"user\": {\n_42\n    \"id\": \"6481a5c1-3d37-4a56-9f6a-bee08c554965\",\n_42\n    \"aud\": \"authenticated\",\n_42\n    \"role\": \"authenticated\",\n_42\n    \"email\": \"\",\n_42\n    \"phone\": \"+1333363128\",\n_42\n    \"phone_confirmed_at\": \"2024-05-13T11:52:48.157306Z\",\n_42\n    \"confirmation_sent_at\": \"2024-05-14T12:31:52.824573Z\",\n_42\n    \"confirmed_at\": \"2024-05-13T11:52:48.157306Z\",\n_42\n    \"phone_change_sent_at\": \"2024-05-13T11:47:02.183064Z\",\n_42\n    \"last_sign_in_at\": \"2024-05-13T11:52:48.162518Z\",\n_42\n    \"app_metadata\": {\n_42\n      \"provider\": \"phone\",\n_42\n      \"providers\": [\"phone\"]\n_42\n    },\n_42\n    \"user_metadata\": {},\n_42\n    \"identities\": [\\\n_42\\\n      {\\\n_42\\\n        \"identity_id\": \"3be5e552-65aa-41d9-9db9-2a502f845459\",\\\n_42\\\n        \"id\": \"6481a5c1-3d37-4a56-9f6a-bee08c554965\",\\\n_42\\\n        \"user_id\": \"6481a5c1-3d37-4a56-9f6a-bee08c554965\",\\\n_42\\\n        \"identity_data\": {\\\n_42\\\n          \"email_verified\": false,\\\n_42\\\n          \"phone\": \"+1612341244428\",\\\n_42\\\n          \"phone_verified\": true,\\\n_42\\\n          \"sub\": \"6481a5c1-3d37-4a56-9f6a-bee08c554965\"\\\n_42\\\n        },\\\n_42\\\n        \"provider\": \"phone\",\\\n_42\\\n        \"last_sign_in_at\": \"2024-05-13T11:52:48.155562Z\",\\\n_42\\\n        \"created_at\": \"2024-05-13T11:52:48.155599Z\",\\\n_42\\\n        \"updated_at\": \"2024-05-13T11:52:48.159391Z\"\\\n_42\\\n      }\\\n_42\\\n    ],\n_42\n    \"created_at\": \"2024-05-13T11:45:33.7738Z\",\n_42\n    \"updated_at\": \"2024-05-14T12:31:52.82475Z\",\n_42\n    \"is_anonymous\": false\n_42\n},\n_42\n\"sms\": {\n_42\n    \"otp\": \"561166\"\n_42\n}\n_42\n}\n`\n\n**Outputs**\n\n- No outputs are required. An empty response with a status code of 200 is taken as a successful response.\n\nSQLHTTP\n\nQueue SMS Messages\n\nYour company uses a worker to manage all messaging related jobs. For performance reasons, the messaging system sends messages in intervals via a job queue. Instead of sending a message immediately, messages are queued and sent in periodic intervals via `pg_cron`.\n\nCreate a table to store jobs\n\n`\n_10\ncreate table job_queue (\n_10\njob_id uuid primary key default gen_random_uuid(),\n_10\njob_data jsonb not null,\n_10\ncreated_at timestamp default now(),\n_10\nstatus text default 'pending',\n_10\npriority int default 0,\n_10\nretry_count int default 0,\n_10\nmax_retries int default 2,\n_10\nscheduled_at timestamp default now()\n_10\n);\n`\n\nCreate the hook:\n\n`\n_31\ncreate or replace function send_sms(event jsonb) returns void as $$\n_31\ndeclare\n_31\n    job_data jsonb;\n_31\n    scheduled_time timestamp;\n_31\n    priority int;\n_31\nbegin\n_31\n    -- extract phone and otp from the event json\n_31\n    job_data := jsonb_build_object(\n_31\n        'phone', event->'user'->>'phone',\n_31\n        'otp', event->'sms'->>'otp'\n_31\n    );\n_31\n_31\n    -- calculate the nearest 5-minute window for scheduled_time\n_31\n    scheduled_time := date_trunc('minute', now()) + interval '5 minute' * floor(extract('epoch' from (now() - date_trunc('minute', now())) / 60) / 5);\n_31\n_31\n    -- assign priority dynamically (example logic: higher priority for earlier scheduled time)\n_31\n    priority := extract('epoch' from (scheduled_time - now()))::int;\n_31\n_31\n    -- insert the job into the job_queue table\n_31\n    insert into job_queue (job_data, priority, scheduled_at, max_retries)\n_31\n    values (job_data, priority, scheduled_time, 2);\n_31\nend;\n_31\n$$ language plpgsql;\n_31\n_31\ngrant all\n_31\non table public.job_queue\n_31\nto supabase_auth_admin;\n_31\n_31\nrevoke all\n_31\non table public.job_queue\n_31\nfrom authenticated, anon;\n`\n\nCreate a function to periodically run and dequeue all jobs\n\n`\n_42\ncreate or replace function dequeue_and_run_jobs() returns void as $$\n_42\ndeclare\n_42\n    job record;\n_42\nbegin\n_42\n    for job in\n_42\n        select * from job_queue\n_42\n        where status = 'pending'\n_42\n          and scheduled_at <= now()\n_42\n        order by priority desc, created_at\n_42\n        for update skip locked\n_42\n    loop\n_42\n        begin\n_42\n            -- add job processing logic here.\n_42\n            -- for demonstration, we'll just update the job status to 'completed'.\n_42\n            update job_queue\n_42\n            set status = 'completed'\n_42\n            where job_id = job.job_id;\n_42\n_42\n        exception when others then\n_42\n            -- handle job failure and retry logic\n_42\n            if job.retry_count < job.max_retries then\n_42\n                update job_queue\n_42\n                set retry_count = retry_count + 1,\n_42\n                    scheduled_at = now() + interval '1 minute'  -- delay retry by 1 minute\n_42\n                where job_id = job.job_id;\n_42\n            else\n_42\n                update job_queue\n_42\n                set status = 'failed'\n_42\n                where job_id = job.job_id;\n_42\n            end if;\n_42\n        end;\n_42\n    end loop;\n_42\nend;\n_42\n$$ language plpgsql;\n_42\n_42\ngrant execute\n_42\non function public.dequeue_and_run_jobs\n_42\nto supabase_auth_admin;\n_42\n_42\nrevoke execute\n_42\non function public.dequeue_and_run_jobs\n_42\nfrom authenticated, anon;\n`\n\nConfigure `pg_cron` to run the job on an interval. You can use a tool like [crontab.guru](https://crontab.guru/) to check that your job is running on an appropriate schedule. Ensure that `pg_cron` is enabled under `Database > Extensions`\n\n`\n_10\nselect\n_10\ncron.schedule(\n_10\n    '* * * * *', -- this cron expression means every minute.\n_10\n    'select dequeue_and_run_jobs();'\n_10\n);\n`",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Send SMS Hook</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Use a custom SMS provider to send authentication messages</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>Runs before a message is sent. Use the hook to:</p>\n<ul>\n<li>Use a regional SMS Provider</li>\n<li>Use alternate messaging channels such as WhatsApp</li>\n<li>Adjust the message body to include platform specific fields such as the <a href=\"https://developers.google.com/identity/sms-retriever/overview\">AppHash</a></li>\n</ul>\n<p><strong>Inputs</strong></p>\n<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>user</code></td><td><a href=\"/docs/guides/auth/users#the-user-object\"><code>User</code></a></td><td>The user attempting to sign in.</td></tr><tr><td><code>sms</code></td><td><code>object</code></td><td>Metadata specific to the SMS sending process. Includes the OTP.</td></tr></tbody></table>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R5e9jtsn7qb6ra:-content-send-sms-json\" data-state=\"active\" id=\"radix-:R5e9jtsn7qb6ra:-trigger-send-sms-json\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JSON</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R5e9jtsn7qb6ra:-content-send-sms-json-schema\" data-state=\"inactive\" id=\"radix-:R5e9jtsn7qb6ra:-trigger-send-sms-json-schema\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JSON Schema</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R5e9jtsn7qb6ra:-trigger-send-sms-json\" id=\"radix-:R5e9jtsn7qb6ra:-content-send-sms-json\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"user\": {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"id\": \"6481a5c1-3d37-4a56-9f6a-bee08c554965\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"aud\": \"authenticated\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"role\": \"authenticated\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"email\": \"\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"phone\": \"+1333363128\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"phone_confirmed_at\": \"2024-05-13T11:52:48.157306Z\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"confirmation_sent_at\": \"2024-05-14T12:31:52.824573Z\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"confirmed_at\": \"2024-05-13T11:52:48.157306Z\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"phone_change_sent_at\": \"2024-05-13T11:47:02.183064Z\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"last_sign_in_at\": \"2024-05-13T11:52:48.162518Z\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"app_metadata\": {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>      \"provider\": \"phone\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>      \"providers\": [\"phone\"]</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"user_metadata\": {},</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"identities\": [</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>      {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"identity_id\": \"3be5e552-65aa-41d9-9db9-2a502f845459\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"id\": \"6481a5c1-3d37-4a56-9f6a-bee08c554965\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"user_id\": \"6481a5c1-3d37-4a56-9f6a-bee08c554965\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"identity_data\": {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>          \"email_verified\": false,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>          \"phone\": \"+1612341244428\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>          \"phone_verified\": true,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>          \"sub\": \"6481a5c1-3d37-4a56-9f6a-bee08c554965\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>        },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"provider\": \"phone\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"last_sign_in_at\": \"2024-05-13T11:52:48.155562Z\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"created_at\": \"2024-05-13T11:52:48.155599Z\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>        \"updated_at\": \"2024-05-13T11:52:48.159391Z\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    ],</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"created_at\": \"2024-05-13T11:45:33.7738Z\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"updated_at\": \"2024-05-14T12:31:52.82475Z\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"is_anonymous\": false</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>  },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"sms\": {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"otp\": \"561166\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R5e9jtsn7qb6ra:-trigger-send-sms-json-schema\" hidden=\"\" id=\"radix-:R5e9jtsn7qb6ra:-content-send-sms-json-schema\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p><strong>Outputs</strong></p>\n<ul>\n<li>No outputs are required. An empty response with a status code of 200 is taken as a successful response.</li>\n</ul>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R669jtsn7qb6ra:-content-sql\" data-state=\"active\" id=\"radix-:R669jtsn7qb6ra:-trigger-sql\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>SQL</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R669jtsn7qb6ra:-content-http\" data-state=\"inactive\" id=\"radix-:R669jtsn7qb6ra:-trigger-http\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>HTTP</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R669jtsn7qb6ra:-trigger-sql\" id=\"radix-:R669jtsn7qb6ra:-content-sql\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rbe69jtsn7qb6ra:-content-sql-send-message-via-job-queue\" data-state=\"active\" id=\"radix-:Rbe69jtsn7qb6ra:-trigger-sql-send-message-via-job-queue\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Queue SMS Messages</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbe69jtsn7qb6ra:-trigger-sql-send-message-via-job-queue\" id=\"radix-:Rbe69jtsn7qb6ra:-content-sql-send-message-via-job-queue\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>Your company uses a worker to manage all messaging related jobs. For performance reasons, the messaging system sends messages in intervals via a job queue. Instead of sending a message immediately, messages are queued and sent in periodic intervals via <code>pg_cron</code>.</p><p>Create a table to store jobs</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>create table job_queue (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  job_id uuid primary key default gen_random_uuid(),</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  job_data jsonb not null,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  created_at timestamp default now(),</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  status text default 'pending',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  priority int default 0,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  retry_count int default 0,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  max_retries int default 2,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  scheduled_at timestamp default now()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>);</span></div></div><br></code></div></div><p>Create the hook:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>create or replace function send_sms(event jsonb) returns void as $$</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>declare</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>    job_data jsonb;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>    scheduled_time timestamp;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>    priority int;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>begin</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>    -- extract phone and otp from the event json</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>    job_data := jsonb_build_object(</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>        'phone', event-&gt;'user'-&gt;&gt;'phone',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>        'otp', event-&gt;'sms'-&gt;&gt;'otp'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>    );</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>    -- calculate the nearest 5-minute window for scheduled_time</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>    scheduled_time := date_trunc('minute', now()) + interval '5 minute' * floor(extract('epoch' from (now() - date_trunc('minute', now())) / 60) / 5);</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>    -- assign priority dynamically (example logic: higher priority for earlier scheduled time)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>    priority := extract('epoch' from (scheduled_time - now()))::int;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>    -- insert the job into the job_queue table</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>    insert into job_queue (job_data, priority, scheduled_at, max_retries)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>    values (job_data, priority, scheduled_time, 2);</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>end;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>$$ language plpgsql;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>grant all</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>  on table public.job_queue</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>  to supabase_auth_admin;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>revoke all</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>  on table public.job_queue</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->31</span><div style=\"display:inline-block;margin-left:16px\"><span>  from authenticated, anon;</span></div></div><br></code></div></div><p>Create a function to periodically run and dequeue all jobs</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>create or replace function dequeue_and_run_jobs() returns void as $$</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>declare</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    job record;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>begin</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    for job in</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>        select * from job_queue</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>        where status = 'pending'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>          and scheduled_at &lt;= now()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>        order by priority desc, created_at</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>        for update skip locked</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    loop</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>        begin</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>            -- add job processing logic here.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>            -- for demonstration, we'll just update the job status to 'completed'.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>            update job_queue</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>            set status = 'completed'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>            where job_id = job.job_id;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>        exception when others then</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>            -- handle job failure and retry logic</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>            if job.retry_count &lt; job.max_retries then</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>                update job_queue</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>                set retry_count = retry_count + 1,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>                    scheduled_at = now() + interval '1 minute'  -- delay retry by 1 minute</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>                where job_id = job.job_id;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>            else</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>                update job_queue</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>                set status = 'failed'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>                where job_id = job.job_id;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>            end if;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>        end;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>    end loop;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>end;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>$$ language plpgsql;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>grant execute</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>  on function public.dequeue_and_run_jobs</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>  to supabase_auth_admin;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>revoke execute</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>  on function public.dequeue_and_run_jobs</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->42</span><div style=\"display:inline-block;margin-left:16px\"><span>  from authenticated, anon;</span></div></div><br></code></div></div><p>Configure <code>pg_cron</code> to run the job on an interval. You can use a tool like <a href=\"https://crontab.guru/\">crontab.guru</a> to check that your job is running on an appropriate schedule. Ensure that <code>pg_cron</code> is enabled under <code>Database &gt; Extensions</code></p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>select</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  cron.schedule(</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    '* * * * *', -- this cron expression means every minute.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    'select dequeue_and_run_jobs();'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  );</span></div></div><br></code></div></div></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R669jtsn7qb6ra:-trigger-http\" hidden=\"\" id=\"radix-:R669jtsn7qb6ra:-content-http\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-hooks/send-sms-hook",
        "title": "Send SMS Hook | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Send%20SMS%20Hook&description=undefined",
        "ogTitle": "Send SMS Hook | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-hooks/send-sms-hook",
        "description": "Use a custom SMS provider to send authentication messages",
        "modifiedTime": "2024-09-10T20:36:24.980Z",
        "ogDescription": "Use a custom SMS provider to send authentication messages",
        "publishedTime": "2024-09-10T20:36:24.980Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Single Sign-On with SAML 2.0 for Projects\n\n* * *\n\nLooking for guides on how to use Single Sign-On with the Supabase dashboard? Head on over to [Enable SSO for Your Organization](/docs/guides/platform/sso).\n\nSupabase Auth supports enterprise-level Single Sign-On (SSO) for any identity providers compatible with the SAML 2.0 protocol. This is a non-exclusive list of supported identity providers:\n\n- Google Workspaces (formerly known as GSuite)\n- Okta, Auth0\n- Microsoft Active Directory, Azure Active Directory, Microsoft Entra\n- PingIdentity\n- OneLogin\n\nIf you're having issues with identity provider software not on this list, please [open a support ticket](https://supabase.com/dashboard/support/new).\n\n## Prerequisites [\\#](\\#prerequisites)\n\nThis guide requires the use of the [Supabase CLI](/docs/guides/cli). Please make sure you're using version v1.46.4 or higher. You can use `supabase -v` to see the currently installed version.\n\nYou can use the `supabase sso` [subcommands](/docs/reference/cli/supabase-sso) to manage your project's configuration.\n\nSAML 2.0 support is disabled by default on Supabase projects. You can configure this on the [Auth Providers](https://supabase.com/dashboard/project/_/auth/providers) page on your project.\n\nPlease note that SAML 2.0 support is offered on plans Pro and above. Check the [Pricing](https://supabase.com/pricing) page for more information.\n\n## Terminology [\\#](\\#terminology)\n\nThe number of SAML and SSO acronyms can often be overwhelming. Here's a glossary which you can refer back to at any time:\n\n- **Identity Provider**, **IdP**, or **IDP**\nAn identity provider is a service that manages user accounts at a company or organization. It can verify the identity of a user and exchange that information with your Supabase project and other applications. It acts as a single source of truth for user identities and access rights. Commonly used identity providers are: Microsoft Active Directory (Azure AD, Microsoft Entra), Okta, Google Workspaces (GSuite), PingIdentity, OneLogin, and many others. There are also self-hosted and on-prem versions of identity providers, and sometimes they are accessible only by having access to a company VPN or being in a specific building.\n- **Service Provider**, **SP**\nThis is the software that is asking for user information from an identity provider. In Supabase, this is your project's Auth server.\n- **Assertion**\nAn assertion is a statement issued by an identity provider that contains information about a user.\n- **EntityID**\nA globally unique ID (usually a URL) that identifies an Identity Provider or Service Provider across the world.\n- **NameID**\nA unique ID (usually an email address) that identifies a user at an Identity Provider.\n- **Metadata**\nAn XML document that describes the features and configuration of an Identity Provider or Service Provider. It can be as a standalone document or as a URL. Usually (but not always) the `EntityID` is the URL at which you can access the Metadata.\n- **Certificate**\nSupabase Auth (the Service Provider) trusts assertions from an Identity Provider based on the signature attached to the assertion. The signature is verified according to the certificate present in the Metadata.\n- **Assertion Consumer Service (ACS) URL**\nThis is one of the most important SAML URLs. It is the URL where Supabase Auth will accept assertions from an identity provider. Basically, once the identity provider verifies the user's identity it will redirect to this URL and the redirect request will contain the assertion.\n- **Binding (Redirect, POST, or Artifact)**\nThis is a description of the way an identity provider communicates with Supabase Auth. When using the Redirect binding, the communication occurs using HTTP 301 redirects. When it's `POST`, it's using `POST` requests sent with `<form>` elements on a page. When using Artifact, it's using a more secure exchange over a Redirect or `POST`.\n- **RelayState**\nState used by Supabase Auth to hold information about a request to verify the identity of a user.\n\n## Important SAML 2.0 information [\\#](\\#important-saml-20-information)\n\nBelow is information about your project's SAML 2.0 configuration which you can share with the company or organization that you're trying to on-board.\n\n| Name | Value |\n| --- | --- |\n| EntityID | `https://<project>.supabase.co/auth/v1/sso/saml/metadata` |\n| Metadata URL | `https://<project>.supabase.co/auth/v1/sso/saml/metadata` |\n| Metadata URL<br>(download) | `https://<project>.supabase.co/auth/v1/sso/saml/metadata?download=true` |\n| ACS URL | `https://<project>.supabase.co/auth/v1/sso/saml/acs` |\n| SLO URL | `https://<project>.supabase.co/auth/v1/sso/slo` |\n| NameID | Required `emailAddress` or `persistent` |\n\nNote that SLO (Single Logout) is not supported at this time with Supabase Auth as it is a rarely supported feature by identity providers. However, the URL is registered and advertised for when this does become available.\n\nAppend `?download=true` to the Metadata URL to download the Metadata XML file. This is useful in cases where the identity provider requires a file.\n\nAlternatively, you can use the `supabase sso info --project-ref <your-project>` [command](/docs/reference/cli/supabase-sso-info) to get setup information for your project.\n\n### User accounts and identities [\\#](\\#user-accounts-and-identities)\n\nUser accounts and identities created via SSO differ from regular (email, phone, password, social login...) accounts in these ways:\n\n- **No automatic linking.**\nEach user account verified using a SSO identity provider will not be automatically linked to existing user accounts in the system. That is, if a user `jane.doe@company.com` had signed up with a password, and then uses their company SSO login with your project, there will be two `jane.doe@company.com` user accounts in the system.\n- **Emails are not necessarily unique.**\nGiven the behavior with no automatic linking, email addresses are no longer a unique identifier for a user account. Please always use the user's UUID to correctly reference user accounts.\n- **Sessions may have a maximum duration.**\nDepending on the configuration of the identity provider, a login session established with SSO may forcibly log out a user after a certain period of time.\n\n### Row Level Security [\\#](\\#row-level-security)\n\nYou can use information about the SSO identity provider in Row Level Security policies.\n\nHere are some commonly used statements to extract SSO related information from the user's JWT:\n\n- `auth.jwt()#>>'{amr,0,method}'`\nReturns the name of the last method used to verify the identity of this user. With SAML SSO this is `sso/saml`.\n- `auth.jwt()#>>'{amr,0,provider}'`\nReturns the UUID of the SSO identity provider used by the user to sign-in.\n- `auth.jwt()#>>'{user_metadata,iss}'`\nReturns the identity provider's SAML 2.0 `EntityID`\n\nIf you use [Multi-Factor Authentication](/docs/guides/auth/auth-mfa) with SSO, the `amr` array may have a different method at index `0`!\n\nA common use case with SSO is to use the UUID of the identity provider as the identifier for the organization the user belongs to -- frequently known as a tenant. By associating the identity provider's UUID with your tenants, you can use restrictive RLS policies to scope down actions and data that a user is able to access.\n\nFor example, let's say you have a table like:\n\n`\n_10\ncreate table organization_settings (\n_10\n  -- the organization's unique ID\n_10\nid uuid not null primary key,\n_10\n  -- the organization's SSO identity provider\n_10\nsso_provider_id uuid unique,\n_10\n  -- name of the organization\n_10\nname text,\n_10\n  -- billing plan (paid, Free, Enterprise)\n_10\nbilling_plan text\n_10\n);\n`\n\nYou can use the information present in the user's JWT to scope down which rows from this table the user can see, without doing any additional user management:\n\n`\n_10\nCREATE POLICY \"View organization settings.\"\n_10\nON organization_settings\n_10\nAS RESTRICTIVE\n_10\nUSING (\n_10\n    sso_provider_id = (select auth.jwt()#>>'{amr,0,provider}')\n_10\n);\n`\n\n## Managing SAML 2.0 connections [\\#](\\#managing-saml-20-connections)\n\nOnce you've enabled SAML 2.0 support on your project via the [Auth Providers](https://supabase.com/dashboard/project/_/auth/providers) page in the dashboard, you can use the [Supabase CLI](/docs/reference/cli/supabase-sso) to add, update, remove and view information about identity providers.\n\n### Add a connection [\\#](\\#add-a-connection)\n\nTo establish a connection to a SAML 2.0 Identity Provider (IdP) you will need:\n\n- A SAML 2.0 Metadata XML file, or a SAML 2.0 Metadata URL pointing to an XML file\n- (Optional) Email domains that the organization's IdP uses\n- (Optional) Attribute mappings between the user properties of the IdP and the claims stored by Supabase Auth\n\nYou should obtain the SAML 2.0 Metadata XML file or URL from the organization whose IdP you wish to connect. Most SAML 2.0 Identity Providers support the Metadata URL standard, and we recommend using a URL if this is available.\n\nCommonly used SAML 2.0 Identity Providers that support Metadata URLs:\n\n- Okta\n- Azure AD (Microsoft Entra)\n- PingIdentity\n\nCommonly used SAML 2.0 Identity Providers that only support Metadata XML files:\n\n- Google Workspaces (GSuite)\n- Any self-hosted or on-prem identity provider behind a VPN\n\nOnce you've obtained the SAML 2.0 Metadata XML file or URL you can [establish a connection](/docs/reference/cli/supabase-sso-add) with your project's Supabase Auth server by running:\n\n`\n_10\nsupabase sso add --type saml --project-ref <your-project> \\\n_10\n  --metadata-url 'https://company.com/idp/saml/metadata' \\\n_10\n  --domains company.com\n`\n\nIf you wish to use a Metadata XML file instead, you can use:\n\n`\n_10\nsupabase sso add --type saml --project-ref <your-project> \\\n_10\n  --metadata-file /path/to/saml/metadata.xml \\\n_10\n  --domains company.com\n`\n\nThis command will register a new identity provider with your project's Auth server. When successful, you will see the details of the provider such as it's SAML information and registered domains.\n\nPlease note that only persons with write access to the project can register, update or remove identity providers.\n\nOnce you've added an identity provider, users who have access to it can sign in to your application. With SAML 2.0 there are two ways that users can sign in to your project:\n\n- By signing-in from your application's user interface, commonly known as **SP (Service Provider) Initiated Flow**\n- By clicking on an icon in the application menu on the company intranet or identity provider page, commonly known as **Identity Provider Initiated (IdP) Flow**\n\nTo initiate a sign-in request from your application's user interface (i.e. the SP Initiated Flow), you can use:\n\nJavaScriptDartSwiftKotlin\n\n`\n_10\nsupabase.auth.signInWithSSO({\n_10\ndomain: 'company.com',\n_10\n})\n`\n\nCalling [`signInWithSSO`](/docs/reference/javascript/auth-signinwithsso) starts the sign-in process using the identity provider registered for the `company.com` domain name. It is not required that identity providers be assigned one or multiple domain names, in which case you can use the provider's unique ID instead.\n\n### Understanding attribute mappings [\\#](\\#understanding-attribute-mappings)\n\nWhen a user signs in using the SAML 2.0 Single Sign-On protocol, an XML document called the SAML Assertion is exchanged between the identity provider and Supabase Auth.\n\nThis assertion contains information about the user's identity and other authentication information, such as:\n\n- Unique ID of the user (called `NameID` in SAML)\n- Email address\n- Name of the user\n- Department or organization\n- Other attributes present in the users directory managed by the identity provider\n\nWith exception of the unique user ID, SAML does not require any other attributes in the assertion. Identity providers can be configured so that only select user information is shared with your project.\n\nYour project can be configured to recognize these attributes and map them into your project's database using a JSON structure. This process is called attribute mapping, and varies according to the configuration of the identity provider.\n\nFor example, the following JSON structure configures attribute mapping for the `email` and `first_name` user identity properties.\n\n`\n_10\n{\n_10\n\"keys\": {\n_10\n    \"email\": {\n_10\n      \"name\": \"mail\"\n_10\n    },\n_10\n    \"first_name\": {\n_10\n      \"name\": \"givenName\"\n_10\n    }\n_10\n}\n_10\n}\n`\n\nWhen creating or updating an identity provider with the [Supabase CLI](/docs/guides/cli) you can include this JSON as a file with the `--attribute-mapping-file /path/to/attribute/mapping.json` flag.\n\nFor example, to change the attribute mappings to an existing provider you can use:\n\n`\n_10\nsupabase sso update <provider-uuid> --project-ref <your-project> \\\n_10\n  --attribute-mapping-file /path/to/attribute/mapping.json\n`\n\nGiven a SAML 2.0 assertion that includes these attributes:\n\n`\n_21\n<saml:AttributeStatement>\n_21\n<!-- will be mapped to the email key -->\n_21\n<saml:Attribute\n_21\n    Name=\"mail\"\n_21\n    NameFormat=\"urn:oasis:names:tc:SAML:2.0:attrname-format:basic\"\n_21\n    >\n_21\n    <saml:AttributeValue xsi:type=\"xs:string\">\n_21\n      jane.doe@company.com\n_21\n    </saml:AttributeValue>\n_21\n</saml:Attribute>\n_21\n_21\n<!-- will be mapped to the first_name key -->\n_21\n<saml:Attribute\n_21\n    Name=\"givenName\"\n_21\n    NameFormat=\"urn:oasis:names:tc:SAML:2.0:attrname-format:basic\"\n_21\n    >\n_21\n    <saml:AttributeValue xsi:type=\"xs:string\">\n_21\n      Jane Doe\n_21\n    </saml:AttributeValue>\n_21\n</saml:Attribute>\n_21\n</saml:AttributeStatement>\n`\n\nWill result in the following claims in the user's identity in the database and JWT:\n\n`\n_10\n{\n_10\n\"email\": \"jane.doe@company.com\",\n_10\n\"custom_claims\": {\n_10\n    \"first_name\": \"Jane Doe\"\n_10\n}\n_10\n}\n`\n\nSupabase Auth does not require specifying attribute mappings if you only need access to the user's email. It will attempt to find an email attribute specified in the assertion. All other properties will not be automatically included, and it is those you need to map.\n\nAt this time it is not possible to have users without an email address, so SAML assertions without one will be rejected.\n\nMost SAML 2.0 identity providers use Lightweight Directory Access Protocol (LDAP) attribute names. However, due to their variability and complexity operators of identity providers are able to customize both the `Name` and attribute value that is sent to Supabase Auth in an assertion. Please refer to the identity provider's documentation and contact the operator for details on what attributes are mapped for your project.\n\n**Accessing the stored attributes**\n\nThe stored attributes, once mapped, show up in the access token (a JWT) of the user. If you need to look these values up in the database, you can find them in the `auth.identities` table under the `identity_data` JSON column. Identities created for SSO providers have `sso:<uuid-of-provider>` in the `provider` column, while `id` contains the unique NameID of the user account.\n\nFurthermore, you can find the same identity data under `raw_app_meta_data` inside `auth.users`.\n\n### Remove a connection [\\#](\\#remove-a-connection)\n\nOnce a connection to an identity provider is established, you can [remove it](/docs/reference/cli/supabase-sso-remove) by running:\n\n`\n_10\nsupabase sso remove <provider-id> --project-ref <your-project>\n`\n\nIf successful, the details of the removed identity provider will be shown. All user accounts from that identity provider will be immediately logged out. User information will remain in the system, but it will no longer be possible for any of those accounts to be accessed in the future, even if you add the connection again.\n\nIf you need to reassign those user accounts to another identity provider, please [open a support ticket](https://supabase.com/dashboard/support/new).\n\nA [list of all](/docs/reference/cli/supabase-sso-list) registered identity providers can be displayed by running:\n\n`\n_10\nsupabase sso list --project-ref <your-project>\n`\n\n### Update a connection [\\#](\\#update-a-connection)\n\nYou may wish to update settings about a connection to a SAML 2.0 identity provider.\n\nCommonly this is necessary when:\n\n- Cryptographic keys are rotated or have expired\n- Metadata URL has changed, but is the same identity provider\n- Other SAML 2.0 Metadata attributes have changed, but it is still the same identity provider\n- You are updating the domains or attribute mapping\n\nYou can use this command to [update](/docs/reference/cli/supabase-sso-update) the configuration of an identity provider:\n\n`\n_10\nsupabase sso update <provider-id> --project-ref <your-project>\n`\n\nPlease use `--help` to see all available flags.\n\nIt is not possible to change the unique SAML identifier of the identity provider, known as `EntityID`. Everything else can be updated. If the SAML `EntityID` of your identity provider has changed, it is regarded as a new identity provider and you will have to register it like a new connection.\n\n### Retrieving information about a connection [\\#](\\#retrieving-information-about-a-connection)\n\nYou can always obtain a [list](/docs/reference/cli/supabase-sso-list) of all registered providers using:\n\n`\n_10\nsupabase sso list --project-ref <your-project>\n`\n\nThis list will only include basic information about each provider. To see [all of the information](/docs/reference/cli/supabase-sso-show) about a provider you can use:\n\n`\n_10\nsupabase sso show <provider-id> --project-ref <your-project>\n`\n\nYou can use the `-o json` flag to output the information as JSON, should you need to. Other formats may be supported, please use `--help` to see all available options.\n\n## Frequently asked questions [\\#](\\#frequently-asked-questions)\n\n### How do I publish my application to an identity provider's marketplace? [\\#](\\#how-do-i-publish-my-application-to-an-identity-providers-marketplace)\n\nMany cloud-based identity providers offer a marketplace where you can register your application for easy on-boarding with customers. When you use Supabase Auth's SAML 2.0 support you can register your project in any one of these marketplaces.\n\nPlease refer to the relevant documentation for each cloud-based identity provider on how you can do this. Some common marketplaces are:\n\n- [Okta Integration Network](https://developer.okta.com/docs/guides/build-sso-integration/saml2/main/)\n- [Azure Active Directory App Gallery](https://learn.microsoft.com/en-us/azure/active-directory-b2c/publish-app-to-azure-ad-app-gallery)\n- [Google Workspaces Pre-integrated SAML apps catalog](https://support.google.com/a/table/9217027)\n\n### Why do some users get: SAML assertion does not contain email address? [\\#](\\#why-do-some-users-get-saml-assertion-does-not-contain-email-address)\n\nIdentity providers do not have to send back and email address for the user, though they often do. Supabase Auth requires that an email address is present.\n\nThe following list of commonly used SAML attribute names is inspected, in order of appearance, to discover the email address in the assertion:\n\n- `urn:oid:0.9.2342.19200300.100.1.3`\n- `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress`\n- `http://schemas.xmlsoap.org/claims/EmailAddress`\n- `mail`\n- `email`\n\nFinally if there is no such attribute, it will use the SAML `NameID` value but only if the format is advertised as `urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress`.\n\nShould you run into this problem, it is most likely a misconfiguration issue **on the identity provider side.** Please instruct your contact at the company to map the user's email address to one of the above listed attribute names, typically `email`.\n\n### How do I access the private key used for SAML in my project? [\\#](\\#how-do-i-access-the-private-key-used-for-saml-in-my-project)\n\nAt this time it is not possible to extract the RSA private key used by your project's Supabase Auth server. This is done to keep the private key as secure as possible, given that SAML does not offer an easy way to rotate keys without disrupting service. (Please use a SAML 2.0 Metadata URL whenever possible for this reason!)\n\nIf you really need access to the key, please [open a support ticket](https://supabase.com/dashboard/support/new) and we'll try to support you as best as possible.",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Single Sign-On with SAML 2.0 for Projects</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text-foreground [&amp;>svg]:text-background [&amp;>svg]:bg-foreground mb-2 [&amp;_svg]:bg-foreground-muted [&amp;_svg]:text-background-muted bg-surface-200/25 border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>Looking for guides on how to use Single Sign-On with the Supabase dashboard? Head on over to <a href=\"/docs/guides/platform/sso\">Enable SSO for Your Organization</a>.</p></div></div>\n<p>Supabase Auth supports enterprise-level Single Sign-On (SSO) for any identity providers compatible with the SAML 2.0 protocol. This is a non-exclusive list of supported identity providers:</p>\n<ul>\n<li>Google Workspaces (formerly known as GSuite)</li>\n<li>Okta, Auth0</li>\n<li>Microsoft Active Directory, Azure Active Directory, Microsoft Entra</li>\n<li>PingIdentity</li>\n<li>OneLogin</li>\n</ul>\n<p>If you're having issues with identity provider software not on this list, please <a href=\"https://supabase.com/dashboard/support/new\">open a support ticket</a>.</p>\n<h2 id=\"prerequisites\" class=\"group scroll-mt-24\">Prerequisites<a href=\"#prerequisites\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>This guide requires the use of the <a href=\"/docs/guides/cli\">Supabase CLI</a>. Please make sure you're using version v1.46.4 or higher. You can use <code>supabase -v</code> to see the currently installed version.</p>\n<p>You can use the <code>supabase sso</code> <a href=\"/docs/reference/cli/supabase-sso\">subcommands</a> to manage your project's configuration.</p>\n<p>SAML 2.0 support is disabled by default on Supabase projects. You can configure this on the <a href=\"https://supabase.com/dashboard/project/_/auth/providers\">Auth Providers</a> page on your project.</p>\n<p>Please note that SAML 2.0 support is offered on plans Pro and above. Check the <a href=\"https://supabase.com/pricing\">Pricing</a> page for more information.</p>\n<h2 id=\"terminology\" class=\"group scroll-mt-24\">Terminology<a href=\"#terminology\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>The number of SAML and SSO acronyms can often be overwhelming. Here's a glossary which you can refer back to at any time:</p>\n<ul>\n<li><strong>Identity Provider</strong>, <strong>IdP</strong>, or <strong>IDP</strong>\nAn identity provider is a service that manages user accounts at a company or organization. It can verify the identity of a user and exchange that information with your Supabase project and other applications. It acts as a single source of truth for user identities and access rights. Commonly used identity providers are: Microsoft Active Directory (Azure AD, Microsoft Entra), Okta, Google Workspaces (GSuite), PingIdentity, OneLogin, and many others. There are also self-hosted and on-prem versions of identity providers, and sometimes they are accessible only by having access to a company VPN or being in a specific building.</li>\n<li><strong>Service Provider</strong>, <strong>SP</strong>\nThis is the software that is asking for user information from an identity provider. In Supabase, this is your project's Auth server.</li>\n<li><strong>Assertion</strong>\nAn assertion is a statement issued by an identity provider that contains information about a user.</li>\n<li><strong>EntityID</strong>\nA globally unique ID (usually a URL) that identifies an Identity Provider or Service Provider across the world.</li>\n<li><strong>NameID</strong>\nA unique ID (usually an email address) that identifies a user at an Identity Provider.</li>\n<li><strong>Metadata</strong>\nAn XML document that describes the features and configuration of an Identity Provider or Service Provider. It can be as a standalone document or as a URL. Usually (but not always) the <code>EntityID</code> is the URL at which you can access the Metadata.</li>\n<li><strong>Certificate</strong>\nSupabase Auth (the Service Provider) trusts assertions from an Identity Provider based on the signature attached to the assertion. The signature is verified according to the certificate present in the Metadata.</li>\n<li><strong>Assertion Consumer Service (ACS) URL</strong>\nThis is one of the most important SAML URLs. It is the URL where Supabase Auth will accept assertions from an identity provider. Basically, once the identity provider verifies the user's identity it will redirect to this URL and the redirect request will contain the assertion.</li>\n<li><strong>Binding (Redirect, POST, or Artifact)</strong>\nThis is a description of the way an identity provider communicates with Supabase Auth. When using the Redirect binding, the communication occurs using HTTP 301 redirects. When it's <code>POST</code>, it's using <code>POST</code> requests sent with <code>&lt;form&gt;</code> elements on a page. When using Artifact, it's using a more secure exchange over a Redirect or <code>POST</code>.</li>\n<li><strong>RelayState</strong>\nState used by Supabase Auth to hold information about a request to verify the identity of a user.</li>\n</ul>\n<h2 id=\"important-saml-20-information\" class=\"group scroll-mt-24\">Important SAML 2.0 information<a href=\"#important-saml-20-information\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Below is information about your project's SAML 2.0 configuration which you can share with the company or organization that you're trying to on-board.</p>\n<table><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr><td>EntityID</td><td><code>https://&lt;project&gt;.supabase.co/auth/v1/sso/saml/metadata</code></td></tr><tr><td>Metadata URL</td><td><code>https://&lt;project&gt;.supabase.co/auth/v1/sso/saml/metadata</code></td></tr><tr><td>Metadata URL<br>(download)</td><td><code>https://&lt;project&gt;.supabase.co/auth/v1/sso/saml/metadata?download=true</code></td></tr><tr><td>ACS URL</td><td><code>https://&lt;project&gt;.supabase.co/auth/v1/sso/saml/acs</code></td></tr><tr><td>SLO URL</td><td><code>https://&lt;project&gt;.supabase.co/auth/v1/sso/slo</code></td></tr><tr><td>NameID</td><td>Required <code>emailAddress</code> or <code>persistent</code></td></tr></tbody></table>\n<p>Note that SLO (Single Logout) is not supported at this time with Supabase Auth as it is a rarely supported feature by identity providers. However, the URL is registered and advertised for when this does become available.</p>\n<p>Append <code>?download=true</code> to the Metadata URL to download the Metadata XML file. This is useful in cases where the identity provider requires a file.</p>\n<p>Alternatively, you can use the <code>supabase sso info --project-ref &lt;your-project&gt;</code> <a href=\"/docs/reference/cli/supabase-sso-info\">command</a> to get setup information for your project.</p>\n<h3 id=\"user-accounts-and-identities\" class=\"group scroll-mt-24\">User accounts and identities<a href=\"#user-accounts-and-identities\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>User accounts and identities created via SSO differ from regular (email, phone, password, social login...) accounts in these ways:</p>\n<ul>\n<li><strong>No automatic linking.</strong>\nEach user account verified using a SSO identity provider will not be automatically linked to existing user accounts in the system. That is, if a user <code>jane.doe@company.com</code> had signed up with a password, and then uses their company SSO login with your project, there will be two <code>jane.doe@company.com</code> user accounts in the system.</li>\n<li><strong>Emails are not necessarily unique.</strong>\nGiven the behavior with no automatic linking, email addresses are no longer a unique identifier for a user account. Please always use the user's UUID to correctly reference user accounts.</li>\n<li><strong>Sessions may have a maximum duration.</strong>\nDepending on the configuration of the identity provider, a login session established with SSO may forcibly log out a user after a certain period of time.</li>\n</ul>\n<h3 id=\"row-level-security\" class=\"group scroll-mt-24\">Row Level Security<a href=\"#row-level-security\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>You can use information about the SSO identity provider in Row Level Security policies.</p>\n<p>Here are some commonly used statements to extract SSO related information from the user's JWT:</p>\n<ul>\n<li><code>auth.jwt()#&gt;&gt;'{amr,0,method}'</code>\nReturns the name of the last method used to verify the identity of this user. With SAML SSO this is <code>sso/saml</code>.</li>\n<li><code>auth.jwt()#&gt;&gt;'{amr,0,provider}'</code>\nReturns the UUID of the SSO identity provider used by the user to sign-in.</li>\n<li><code>auth.jwt()#&gt;&gt;'{user_metadata,iss}'</code>\nReturns the identity provider's SAML 2.0 <code>EntityID</code></li>\n</ul>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>If you use <a href=\"/docs/guides/auth/auth-mfa\">Multi-Factor Authentication</a> with SSO, the <code>amr</code> array may have a different method at index <code>0</code>!</p></div></div>\n<p>A common use case with SSO is to use the UUID of the identity provider as the identifier for the organization the user belongs to -- frequently known as a tenant. By associating the identity provider's UUID with your tenants, you can use restrictive RLS policies to scope down actions and data that a user is able to access.</p>\n<p>For example, let's say you have a table like:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>create table organization_settings (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  -- the organization's unique ID</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  id uuid not null primary key,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  -- the organization's SSO identity provider</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  sso_provider_id uuid unique,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  -- name of the organization</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  name text,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  -- billing plan (paid, Free, Enterprise)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  billing_plan text</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>);</span></div></div><br></code></div></div>\n<p>You can use the information present in the user's JWT to scope down which rows from this table the user can see, without doing any additional user management:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>CREATE POLICY \"View organization settings.\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  ON organization_settings</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  AS RESTRICTIVE</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  USING (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    sso_provider_id = (select auth.jwt()#&gt;&gt;'{amr,0,provider}')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  );</span></div></div><br></code></div></div>\n<h2 id=\"managing-saml-20-connections\" class=\"group scroll-mt-24\">Managing SAML 2.0 connections<a href=\"#managing-saml-20-connections\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Once you've enabled SAML 2.0 support on your project via the <a href=\"https://supabase.com/dashboard/project/_/auth/providers\">Auth Providers</a> page in the dashboard, you can use the <a href=\"/docs/reference/cli/supabase-sso\">Supabase CLI</a> to add, update, remove and view information about identity providers.</p>\n<h3 id=\"add-a-connection\" class=\"group scroll-mt-24\">Add a connection<a href=\"#add-a-connection\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>To establish a connection to a SAML 2.0 Identity Provider (IdP) you will need:</p>\n<ul>\n<li>A SAML 2.0 Metadata XML file, or a SAML 2.0 Metadata URL pointing to an XML file</li>\n<li>(Optional) Email domains that the organization's IdP uses</li>\n<li>(Optional) Attribute mappings between the user properties of the IdP and the claims stored by Supabase Auth</li>\n</ul>\n<p>You should obtain the SAML 2.0 Metadata XML file or URL from the organization whose IdP you wish to connect. Most SAML 2.0 Identity Providers support the Metadata URL standard, and we recommend using a URL if this is available.</p>\n<p>Commonly used SAML 2.0 Identity Providers that support Metadata URLs:</p>\n<ul>\n<li>Okta</li>\n<li>Azure AD (Microsoft Entra)</li>\n<li>PingIdentity</li>\n</ul>\n<p>Commonly used SAML 2.0 Identity Providers that only support Metadata XML files:</p>\n<ul>\n<li>Google Workspaces (GSuite)</li>\n<li>Any self-hosted or on-prem identity provider behind a VPN</li>\n</ul>\n<p>Once you've obtained the SAML 2.0 Metadata XML file or URL you can <a href=\"/docs/reference/cli/supabase-sso-add\">establish a connection</a> with your project's Supabase Auth server by running:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>supabase sso add --type saml --project-ref &lt;your-project&gt; \\</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  --metadata-url 'https://company.com/idp/saml/metadata' \\</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  --domains company.com</span></div></div><br></code></div></div>\n<p>If you wish to use a Metadata XML file instead, you can use:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>supabase sso add --type saml --project-ref &lt;your-project&gt; \\</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  --metadata-file /path/to/saml/metadata.xml \\</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  --domains company.com</span></div></div><br></code></div></div>\n<p>This command will register a new identity provider with your project's Auth server. When successful, you will see the details of the provider such as it's SAML information and registered domains.</p>\n<p>Please note that only persons with write access to the project can register, update or remove identity providers.</p>\n<p>Once you've added an identity provider, users who have access to it can sign in to your application. With SAML 2.0 there are two ways that users can sign in to your project:</p>\n<ul>\n<li>By signing-in from your application's user interface, commonly known as <strong>SP (Service Provider) Initiated Flow</strong></li>\n<li>By clicking on an icon in the application menu on the company intranet or identity provider page, commonly known as <strong>Identity Provider Initiated (IdP) Flow</strong></li>\n</ul>\n<p>To initiate a sign-in request from your application's user interface (i.e. the SP Initiated Flow), you can use:</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R1cu9jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:R1cu9jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R1cu9jtsn7qb6ra:-content-dart\" data-state=\"inactive\" id=\"radix-:R1cu9jtsn7qb6ra:-trigger-dart\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Dart</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R1cu9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:R1cu9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R1cu9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:R1cu9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R1cu9jtsn7qb6ra:-trigger-js\" id=\"radix-:R1cu9jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>supabase.auth.signInWithSSO({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  domain: 'company.com',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><br></code></div></div><p>Calling <a href=\"/docs/reference/javascript/auth-signinwithsso\"><code>signInWithSSO</code></a> starts the sign-in process using the identity provider registered for the <code>company.com</code> domain name. It is not required that identity providers be assigned one or multiple domain names, in which case you can use the provider's unique ID instead.</p></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R1cu9jtsn7qb6ra:-trigger-dart\" hidden=\"\" id=\"radix-:R1cu9jtsn7qb6ra:-content-dart\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R1cu9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:R1cu9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R1cu9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:R1cu9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h3 id=\"understanding-attribute-mappings\" class=\"group scroll-mt-24\">Understanding attribute mappings<a href=\"#understanding-attribute-mappings\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>When a user signs in using the SAML 2.0 Single Sign-On protocol, an XML document called the SAML Assertion is exchanged between the identity provider and Supabase Auth.</p>\n<p>This assertion contains information about the user's identity and other authentication information, such as:</p>\n<ul>\n<li>Unique ID of the user (called <code>NameID</code> in SAML)</li>\n<li>Email address</li>\n<li>Name of the user</li>\n<li>Department or organization</li>\n<li>Other attributes present in the users directory managed by the identity provider</li>\n</ul>\n<p>With exception of the unique user ID, SAML does not require any other attributes in the assertion. Identity providers can be configured so that only select user information is shared with your project.</p>\n<p>Your project can be configured to recognize these attributes and map them into your project's database using a JSON structure. This process is called attribute mapping, and varies according to the configuration of the identity provider.</p>\n<p>For example, the following JSON structure configures attribute mapping for the <code>email</code> and <code>first_name</code> user identity properties.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"keys\": {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"email\": {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>      \"name\": \"mail\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"first_name\": {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>      \"name\": \"givenName\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div>\n<p>When creating or updating an identity provider with the <a href=\"/docs/guides/cli\">Supabase CLI</a> you can include this JSON as a file with the <code>--attribute-mapping-file /path/to/attribute/mapping.json</code> flag.</p>\n<p>For example, to change the attribute mappings to an existing provider you can use:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>supabase sso update &lt;provider-uuid&gt; --project-ref &lt;your-project&gt; \\</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  --attribute-mapping-file /path/to/attribute/mapping.json</span></div></div><br></code></div></div>\n<p>Given a SAML 2.0 assertion that includes these attributes:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;saml:AttributeStatement&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;!-- will be mapped to the email key --&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;saml:Attribute</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>    Name=\"mail\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>    NameFormat=\"urn:oasis:names:tc:SAML:2.0:attrname-format:basic\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>    &gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;saml:AttributeValue xsi:type=\"xs:string\"&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>      jane.doe@company.com</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;/saml:AttributeValue&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;/saml:Attribute&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;!-- will be mapped to the first_name key --&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;saml:Attribute</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>    Name=\"givenName\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>    NameFormat=\"urn:oasis:names:tc:SAML:2.0:attrname-format:basic\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>    &gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;saml:AttributeValue xsi:type=\"xs:string\"&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>      Jane Doe</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;/saml:AttributeValue&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;/saml:Attribute&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->21</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;/saml:AttributeStatement&gt;</span></div></div><br></code></div></div>\n<p>Will result in the following claims in the user's identity in the database and JWT:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"email\": \"jane.doe@company.com\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"custom_claims\": {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"first_name\": \"Jane Doe\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div>\n<p>Supabase Auth does not require specifying attribute mappings if you only need access to the user's email. It will attempt to find an email attribute specified in the assertion. All other properties will not be automatically included, and it is those you need to map.</p>\n<p>At this time it is not possible to have users without an email address, so SAML assertions without one will be rejected.</p>\n<p>Most SAML 2.0 identity providers use Lightweight Directory Access Protocol (LDAP) attribute names. However, due to their variability and complexity operators of identity providers are able to customize both the <code>Name</code> and attribute value that is sent to Supabase Auth in an assertion. Please refer to the identity provider's documentation and contact the operator for details on what attributes are mapped for your project.</p>\n<p><strong>Accessing the stored attributes</strong></p>\n<p>The stored attributes, once mapped, show up in the access token (a JWT) of the user. If you need to look these values up in the database, you can find them in the <code>auth.identities</code> table under the <code>identity_data</code> JSON column. Identities created for SSO providers have <code>sso:&lt;uuid-of-provider&gt;</code> in the <code>provider</code> column, while <code>id</code> contains the unique NameID of the user account.</p>\n<p>Furthermore, you can find the same identity data under <code>raw_app_meta_data</code> inside <code>auth.users</code>.</p>\n<h3 id=\"remove-a-connection\" class=\"group scroll-mt-24\">Remove a connection<a href=\"#remove-a-connection\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Once a connection to an identity provider is established, you can <a href=\"/docs/reference/cli/supabase-sso-remove\">remove it</a> by running:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>supabase sso remove &lt;provider-id&gt; --project-ref &lt;your-project&gt;</span></div></div><br></code></div></div>\n<p>If successful, the details of the removed identity provider will be shown. All user accounts from that identity provider will be immediately logged out. User information will remain in the system, but it will no longer be possible for any of those accounts to be accessed in the future, even if you add the connection again.</p>\n<p>If you need to reassign those user accounts to another identity provider, please <a href=\"https://supabase.com/dashboard/support/new\">open a support ticket</a>.</p>\n<p>A <a href=\"/docs/reference/cli/supabase-sso-list\">list of all</a> registered identity providers can be displayed by running:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>supabase sso list --project-ref &lt;your-project&gt;</span></div></div><br></code></div></div>\n<h3 id=\"update-a-connection\" class=\"group scroll-mt-24\">Update a connection<a href=\"#update-a-connection\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>You may wish to update settings about a connection to a SAML 2.0 identity provider.</p>\n<p>Commonly this is necessary when:</p>\n<ul>\n<li>Cryptographic keys are rotated or have expired</li>\n<li>Metadata URL has changed, but is the same identity provider</li>\n<li>Other SAML 2.0 Metadata attributes have changed, but it is still the same identity provider</li>\n<li>You are updating the domains or attribute mapping</li>\n</ul>\n<p>You can use this command to <a href=\"/docs/reference/cli/supabase-sso-update\">update</a> the configuration of an identity provider:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>supabase sso update &lt;provider-id&gt; --project-ref &lt;your-project&gt;</span></div></div><br></code></div></div>\n<p>Please use <code>--help</code> to see all available flags.</p>\n<p>It is not possible to change the unique SAML identifier of the identity provider, known as <code>EntityID</code>. Everything else can be updated. If the SAML <code>EntityID</code> of your identity provider has changed, it is regarded as a new identity provider and you will have to register it like a new connection.</p>\n<h3 id=\"retrieving-information-about-a-connection\" class=\"group scroll-mt-24\">Retrieving information about a connection<a href=\"#retrieving-information-about-a-connection\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>You can always obtain a <a href=\"/docs/reference/cli/supabase-sso-list\">list</a> of all registered providers using:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>supabase sso list --project-ref &lt;your-project&gt;</span></div></div><br></code></div></div>\n<p>This list will only include basic information about each provider. To see <a href=\"/docs/reference/cli/supabase-sso-show\">all of the information</a> about a provider you can use:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>supabase sso show &lt;provider-id&gt; --project-ref &lt;your-project&gt;</span></div></div><br></code></div></div>\n<p>You can use the <code>-o json</code> flag to output the information as JSON, should you need to. Other formats may be supported, please use <code>--help</code> to see all available options.</p>\n<h2 id=\"frequently-asked-questions\" class=\"group scroll-mt-24\">Frequently asked questions<a href=\"#frequently-asked-questions\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<h3 id=\"how-do-i-publish-my-application-to-an-identity-providers-marketplace\" class=\"group scroll-mt-24\">How do I publish my application to an identity provider's marketplace?<a href=\"#how-do-i-publish-my-application-to-an-identity-providers-marketplace\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Many cloud-based identity providers offer a marketplace where you can register your application for easy on-boarding with customers. When you use Supabase Auth's SAML 2.0 support you can register your project in any one of these marketplaces.</p>\n<p>Please refer to the relevant documentation for each cloud-based identity provider on how you can do this. Some common marketplaces are:</p>\n<ul>\n<li><a href=\"https://developer.okta.com/docs/guides/build-sso-integration/saml2/main/\">Okta Integration Network</a></li>\n<li><a href=\"https://learn.microsoft.com/en-us/azure/active-directory-b2c/publish-app-to-azure-ad-app-gallery\">Azure Active Directory App Gallery</a></li>\n<li><a href=\"https://support.google.com/a/table/9217027\">Google Workspaces Pre-integrated SAML apps catalog</a></li>\n</ul>\n<h3 id=\"why-do-some-users-get-saml-assertion-does-not-contain-email-address\" class=\"group scroll-mt-24\">Why do some users get: SAML assertion does not contain email address?<a href=\"#why-do-some-users-get-saml-assertion-does-not-contain-email-address\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Identity providers do not have to send back and email address for the user, though they often do. Supabase Auth requires that an email address is present.</p>\n<p>The following list of commonly used SAML attribute names is inspected, in order of appearance, to discover the email address in the assertion:</p>\n<ul>\n<li><code>urn:oid:0.9.2342.19200300.100.1.3</code></li>\n<li><code>http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress</code></li>\n<li><code>http://schemas.xmlsoap.org/claims/EmailAddress</code></li>\n<li><code>mail</code></li>\n<li><code>email</code></li>\n</ul>\n<p>Finally if there is no such attribute, it will use the SAML <code>NameID</code> value but only if the format is advertised as <code>urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress</code>.</p>\n<p>Should you run into this problem, it is most likely a misconfiguration issue <strong>on the identity provider side.</strong> Please instruct your contact at the company to map the user's email address to one of the above listed attribute names, typically <code>email</code>.</p>\n<h3 id=\"how-do-i-access-the-private-key-used-for-saml-in-my-project\" class=\"group scroll-mt-24\">How do I access the private key used for SAML in my project?<a href=\"#how-do-i-access-the-private-key-used-for-saml-in-my-project\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>At this time it is not possible to extract the RSA private key used by your project's Supabase Auth server. This is done to keep the private key as secure as possible, given that SAML does not offer an easy way to rotate keys without disrupting service. (Please use a SAML 2.0 Metadata URL whenever possible for this reason!)</p>\n<p>If you really need access to the key, please <a href=\"https://supabase.com/dashboard/support/new\">open a support ticket</a> and we'll try to support you as best as possible.</p></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/enterprise-sso/auth-sso-saml",
        "title": "Single Sign-On with SAML 2.0 for Projects | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Single%20Sign-On%20with%20SAML%202.0%20for%20Projects&description=Use%20Single%20Sign-On%20(SSO)%20authentication%20on%20your%20project%20with%20SAML%202.0",
        "ogTitle": "Single Sign-On with SAML 2.0 for Projects | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/enterprise-sso/auth-sso-saml",
        "description": "Use Single Sign-On (SSO) authentication on your project with SAML 2.0",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "ogDescription": "Use Single Sign-On (SSO) authentication on your project with SAML 2.0",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# JWTs\n\n## JSON Web Tokens\n\n* * *\n\nA [JSON Web Token](https://jwt.io/introduction) is a type of data structure, represented as a string, that usually contains identity and authorization information about a user. It encodes information about its lifetime and is signed with a cryptographic key to make it tamper-resistant.\n\nSupabase Access Tokens are JWTs. The JWT is sent along with every request to Supabase services. By verifying the token and inspecting the included claims, you can allow or deny access to resources. [Row Level Security](/docs/guides/database/postgres/row-level-security) policies are based on the information present in JWTs.\n\n## Encoding and signing JWTs [\\#](\\#encoding-and-signing-jwts)\n\nJWTs are encoded and signed as follows.\n\nThe JSON object starts out looking something like this:\n\n`\n1\n{\n2\n\"sub\": \"0001\",\n3\n\"name\": \"Sam Vimes\",\n4\n\"iat\": 1516239022,\n5\n\"exp\": 1518239022\n6\n}\n`\n\n`sub` is the \"subject\", which is usually the UUID of the user. `name` is self-explanatory, and `iat` is the Unix timestamp at which the token was created. Many JWTs will also have an `exp`, which is the date at which the token is set to expire and can no longer be used. These are some of the standard fields you may find in a JWT, but you can pretty much store whatever you want in there, for example:\n\n`\n1\n{\n2\n\"sub\": \"0002\",\n3\n\"name\": \"V\u011bra Hrab\u00e1nkov\u00e1\",\n4\n\"iat\": 1516239022,\n5\n\"exp\": 1518239022,\n6\n\"theme\": {\n7\n      \"primary\" : \"#D80C14\",\n8\n      \"secondary\" : \"#FFFFFF\"\n9\n}\n10\n}\n`\n\nJust note that the more data you store in your token, the longer the encoded string will be.\n\nWhen we want to send the JWT to the user, we first encode the data using an algorithm such as `HS256`. There are many libraries (and several different algorithms) that can be used to do this encoding/decoding, such as [jsonwebtoken](https://www.npmjs.com/package/jsonwebtoken). The signing is as simple as:\n\n`\n1\n// from https://replit.com/@awalias/jsonwebtokens#index.js\n2\nlet token = jwt.sign({ name: 'Sam Vimes' }, 'some-secret')\n`\n\nAnd the resulting string will look like this:\n\n`\n1\neyJhbGciOiJIUzI1NiJ9\n2\n.eyJzdWIiOiIwMDAxIiwibmFtZSI6IlNhbSBWaW1lcyIsImlhdCI6MTUxNjIzOTAyMiwiZXhwIjoxNTE4MjM5MDIyfQ\n3\n.zMcHjKlkGhuVsiPIkyAkB2rjXzyzJsMMgpvEGvGtjvA\n`\n\nYou will notice that the string is actually made up of three components:\n\nThe first segment `eyJhbGciOiJIUzI1NiJ9` is known as the \"header\", and when decoded just tells us which algorithm was used to do the encoding:\n\n`\n1\n{\n2\n\"alg\": \"HS256\"\n3\n}\n`\n\nThe second segment `eyJzdWIiOiIwMDAxIiwibmFtZSI6IlNhbSBWaW1lcyIsImlhdCI6MTUxNjIzOTAyMiwiZXhwIjoxNTE4MjM5MDIyfQ` contains our original payload:\n\n`\n1\n{\n2\n\"sub\": \"0001\",\n3\n\"name\": \"Sam Vimes\",\n4\n\"iat\": 1516239022,\n5\n\"exp\": 1518239022\n6\n}\n`\n\nThe last segment `zMcHjKlkGhuVsiPIkyAkB2rjXzyzJsMMgpvEGvGtjvA` is the signature itself, which is the part used by the website or service provider to verify that a token sent by some user is legitimate. It is produced in the first instance by running the cryptographic function HS256 on the following input:\n\n`\n1\nHMACSHA256(\n2\nbase64UrlEncode(header) + \".\" +\n3\nbase64UrlEncode(payload)\n4\n<jwt_secret>\n5\n)\n`\n\nYou can test out minting your own tokens on [https://jwt.io](https://jwt.io).\n\nIt is important to note that anyone who possesses the `jwt_secret` here can create new tokens, and also verify existing ones. More advanced JWT algorithms use two secrets: one for the creation of tokens, and a separate one to verify the validity of signed tokens.\n\nYou might wonder why JWTs are so popular all of a sudden. The answer is that with the mass adoption of microservice architecture, we were in a situation where several distinct microservices (APIs, websites, servers, etc.) want to easily validate that a user is who they say they are, or are in other words a \"logged-in\" user. Traditional session tokens are no use here, since they would require each microservice to either maintain a record of currently valid session tokens or to query a central database each time a user wants to access a resource in order to check the validity of the session token \u2013 very inefficient indeed. JWT-based auth in this sense is decentralized, since anyone with the `jwt_secret` can verify a token without needing access to a centralized database.\n\nNote: One downside of JWTs is that they are not easily voidable, like session tokens. If a JWT is leaked to a malicious actor, they will be able to redeem it anywhere until the expiry date is reached \u2013 unless of course the system owner updates the `jwt_secret` (which will of course invalidate _everyone's_ existing tokens).\n\n## JWTs in Supabase [\\#](\\#jwts-in-supabase)\n\nIn Supabase we issue JWTs for three different purposes:\n\n1. `anon key`: This key is used to bypass the Supabase API gateway and can be used in your client-side code.\n2. `service role key`: This key has super admin rights and can bypass your Row Level Security. Do not put it in your client-side code. Keep it private.\n3. `user specific jwts`: These are tokens we issue to users who log into your project/service/website. It's the modern equivalent of a session token, and can be used by a user to access content or permissions specific to them.\n\nThe first token here, the `anon key` token, is for developers to send along with their API requests whenever they want to interact with their Supabase database.\n\nLet's say you want to read the names of all the rows in a table `colors`. We would make a request like:\n\n`\n1\ncurl 'https://xscduanzzfseqszwzhcy.supabase.co/rest/v1/colors?select=name' \\\n2\n-H \"apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYxNDIwNTE3NCwiZXhwIjoxOTI5NzgxMTc0fQ.-NBR1WnZyQGpRLdXJfgfpszoZ0EeE6KHatJsDPLIX8c\"\n`\n\nIf we put this token into [https://jwt.io](https://jwt.io), we see it decodes to:\n\n`\n1\n{\n2\n\"role\": \"anon\",\n3\n\"iss\": \"supabase\",\n4\n\"iat\": 1614205174,\n5\n\"exp\": 1929781174\n6\n}\n`\n\nThis JWT is signed by a `jwt_secret` specific to the developer's Supabase token (you can find this secret alongside this encoded \"anon key\" on your Dashboard under Settings > API page) and is required to get past the Supabase API gateway and access the developer's project.\n\nThe idea with this particular key is that it's safe to put into your client, meaning it's okay if your end users see this key \u2013 but _only_ if you first enable Row Level Security.\n\nThe second key, `service role key`, should only ever be used on one of your own servers or environments, and should never be shared with end users. You might use this token to do things like make batch inserts of data.\n\nThe `user access token` is the JWT issued when you call for example:\n\n`\n1\nsupabase.auth.signIn({\n2\nemail: 'lao.gimmie@gov.sg',\n3\npassword: 'They_Live_1988!',\n4\n})\n`\n\nThis token should be passed in addition to the `apikey` header as an `Authorization Bearer` header like:\n\n`\n1\ncurl 'https://xscduanzzfseqszwzhcy.supabase.co/rest/v1/colors?select=name' \\\n2\n-H \"apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYxNDIwNTE3NCwiZXhwIjoxOTI5NzgxMTc0fQ.-NBR1WnZyQGpRLdXJfgfpszoZ0EeE6KHatJsDPLIX8c\" \\\n3\n-H \"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNjE1ODI0Mzg4LCJzdWIiOiIwMzM0NzQ0YS1mMmEyLTRhYmEtOGM4YS02ZTc0OGY2MmExNzIiLCJlbWFpbCI6InNvbWVvbmVAZW1haWwuY29tIiwiYXBwX21ldGFkYXRhIjp7InByb3ZpZGVyIjoiZW1haWwifSwidXNlcl9tZXRhZGF0YSI6bnVsbCwicm9sZSI6ImF1dGhlbnRpY2F0ZWQifQ.I-_oSsJamtinGxniPETBf-ezAUwDW2sY9bJIThvdX9s\"\n`\n\nYou'll notice that this token is quite a bit longer, since it contains information specific to the user such as:\n\n`\n1\n{\n2\n\"aud\": \"authenticated\",\n3\n\"exp\": 1615824388,\n4\n\"sub\": \"0334744a-f2a2-4aba-8c8a-6e748f62a172\",\n5\n\"email\": \"d.l.solove@gmail.com\",\n6\n\"app_metadata\": {\n7\n    \"provider\": \"email\"\n8\n},\n9\n\"user_metadata\": null,\n10\n\"role\": \"authenticated\"\n11\n}\n`\n\nNow that you understand what JWTs are and where they're used in Supabase, you can explore how to use them in combination with Row Level Security to start restricting access to certain tables, rows, and columns in your Postgres database.\n\n## Resources [\\#](\\#resources)\n\n- JWT debugger: [https://jwt.io/](https://jwt.io/)",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">JWTs</h1><h2 class=\"mt-3 text-xl text-foreground-light\">JSON Web Tokens</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>A <a href=\"https://jwt.io/introduction\">JSON Web Token</a> is a type of data structure, represented as a string, that usually contains identity and authorization information about a user. It encodes information about its lifetime and is signed with a cryptographic key to make it tamper-resistant.</p>\n<p>Supabase Access Tokens are JWTs. The JWT is sent along with every request to Supabase services. By verifying the token and inspecting the included claims, you can allow or deny access to resources. <a href=\"/docs/guides/database/postgres/row-level-security\">Row Level Security</a> policies are based on the information present in JWTs.</p>\n<h2 id=\"encoding-and-signing-jwts\" class=\"group scroll-mt-24\">Encoding and signing JWTs<a href=\"#encoding-and-signing-jwts\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>JWTs are encoded and signed as follows.</p>\n<p>The JSON object starts out looking something like this:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"js\" style=\"width: 926px; height: 154px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 152px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 114px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 154px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">{</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 154px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"sub\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"0001\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 154px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"name\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"Sam Vimes\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 154px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"iat\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-2);\">1516239022</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 76px); width: 31.5px; opacity: 0.99;\">5</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 76px); width: 154px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"exp\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-2);\">1518239022</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 95px); width: 31.5px; opacity: 0.99;\">6</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 95px); width: 154px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">}</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<p><code>sub</code> is the \"subject\", which is usually the UUID of the user. <code>name</code> is self-explanatory, and <code>iat</code> is the Unix timestamp at which the token was created. Many JWTs will also have an <code>exp</code>, which is the date at which the token is set to expire and can no longer be used. These are some of the standard fields you may find in a JWT, but you can pretty much store whatever you want in there, for example:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"js\" style=\"width: 926px; height: 230px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 228px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 190px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 203px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">{</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 203px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"sub\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"0002\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 203px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"name\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"V\u011bra Hrab\u00e1nkov\u00e1\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 203px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"iat\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-2);\">1516239022</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 76px); width: 31.5px; opacity: 0.99;\">5</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 76px); width: 203px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"exp\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-2);\">1518239022</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 95px); width: 31.5px; opacity: 0.99;\">6</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 95px); width: 203px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"theme\"</span><span style=\"color: var(--ch-4);\">: {</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 114px); width: 31.5px; opacity: 0.99;\">7</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 114px); width: 203px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">      \"primary\"</span><span style=\"color: var(--ch-4);\"> : </span><span style=\"color: var(--ch-8);\">\"#D80C14\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 133px); width: 31.5px; opacity: 0.99;\">8</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 133px); width: 203px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">      \"secondary\"</span><span style=\"color: var(--ch-4);\"> : </span><span style=\"color: var(--ch-8);\">\"#FFFFFF\"</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 152px); width: 31.5px; opacity: 0.99;\">9</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 152px); width: 203px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  }</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 171px); width: 31.5px; opacity: 0.99;\">10</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 171px); width: 203px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">}</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<p>Just note that the more data you store in your token, the longer the encoded string will be.</p>\n<p>When we want to send the JWT to the user, we first encode the data using an algorithm such as <code>HS256</code>. There are many libraries (and several different algorithms) that can be used to do this encoding/decoding, such as <a href=\"https://www.npmjs.com/package/jsonwebtoken\">jsonwebtoken</a>. The signing is as simple as:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"js\" style=\"width: 926px; height: 78px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 76px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 38px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 406px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-1);\">// from https://replit.com/@awalias/jsonwebtokens#index.js</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 406px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">let</span><span style=\"color: var(--ch-4);\"> token </span><span style=\"color: var(--ch-7);\">=</span><span style=\"color: var(--ch-4);\"> jwt.</span><span style=\"color: var(--ch-5);\">sign</span><span style=\"color: var(--ch-4);\">({ name: </span><span style=\"color: var(--ch-8);\">'Sam Vimes'</span><span style=\"color: var(--ch-4);\"> }, </span><span style=\"color: var(--ch-8);\">'some-secret'</span><span style=\"color: var(--ch-4);\">)</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<p>And the resulting string will look like this:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"js\" style=\"width: 926px; height: 97px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 95px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 57px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 651px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">eyJhbGciOiJIUzI1NiJ9</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 651px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  .eyJzdWIiOiIwMDAxIiwibmFtZSI6IlNhbSBWaW1lcyIsImlhdCI6MTUxNjIzOTAyMiwiZXhwIjoxNTE4MjM5MDIyfQ</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 651px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  .zMcHjKlkGhuVsiPIkyAkB2rjXzyzJsMMgpvEGvGtjvA</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<p>You will notice that the string is actually made up of three components:</p>\n<p>The first segment <code>eyJhbGciOiJIUzI1NiJ9</code> is known as the \"header\", and when decoded just tells us which algorithm was used to do the encoding:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"js\" style=\"width: 926px; height: 97px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 95px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 57px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 112px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">{</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 112px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"alg\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"HS256\"</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 112px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">}</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<p>The second segment <code class=\"break-all\">eyJzdWIiOiIwMDAxIiwibmFtZSI6IlNhbSBWaW1lcyIsImlhdCI6MTUxNjIzOTAyMiwiZXhwIjoxNTE4MjM5MDIyfQ</code> contains our original payload:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"js\" style=\"width: 926px; height: 154px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 152px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 114px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 154px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">{</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 154px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"sub\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"0001\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 154px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"name\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"Sam Vimes\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 154px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"iat\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-2);\">1516239022</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 76px); width: 31.5px; opacity: 0.99;\">5</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 76px); width: 154px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"exp\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-2);\">1518239022</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 95px); width: 31.5px; opacity: 0.99;\">6</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 95px); width: 154px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">}</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<p>The last segment <code>zMcHjKlkGhuVsiPIkyAkB2rjXzyzJsMMgpvEGvGtjvA</code> is the signature itself, which is the part used by the website or service provider to verify that a token sent by some user is legitimate. It is produced in the first instance by running the cryptographic function HS256 on the following input:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"js\" style=\"width: 926px; height: 135px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 133px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 95px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 231px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-5);\">HMACSHA256</span><span style=\"color: var(--ch-4);\">(</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 231px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-5);\">  base64UrlEncode</span><span style=\"color: var(--ch-4);\">(header) </span><span style=\"color: var(--ch-7);\">+ </span><span style=\"color: var(--ch-8);\">\".\" </span><span style=\"color: var(--ch-7);\">+</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 231px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-5);\">  base64UrlEncode</span><span style=\"color: var(--ch-4);\">(payload)</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 231px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  &lt;</span><span style=\"color: var(--ch-6);\">jwt_secret</span><span style=\"color: var(--ch-4);\">&gt;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 76px); width: 31.5px; opacity: 0.99;\">5</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 76px); width: 231px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">)</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<p>You can test out minting your own tokens on <a href=\"https://jwt.io\">https://jwt.io</a>.</p>\n<p>It is important to note that anyone who possesses the <code>jwt_secret</code> here can create new tokens, and also verify existing ones. More advanced JWT algorithms use two secrets: one for the creation of tokens, and a separate one to verify the validity of signed tokens.</p>\n<p>You might wonder why JWTs are so popular all of a sudden. The answer is that with the mass adoption of microservice architecture, we were in a situation where several distinct microservices (APIs, websites, servers, etc.) want to easily validate that a user is who they say they are, or are in other words a \"logged-in\" user. Traditional session tokens are no use here, since they would require each microservice to either maintain a record of currently valid session tokens or to query a central database each time a user wants to access a resource in order to check the validity of the session token \u2013 very inefficient indeed. JWT-based auth in this sense is decentralized, since anyone with the <code>jwt_secret</code> can verify a token without needing access to a centralized database.</p>\n<p>Note: One downside of JWTs is that they are not easily voidable, like session tokens. If a JWT is leaked to a malicious actor, they will be able to redeem it anywhere until the expiry date is reached \u2013 unless of course the system owner updates the <code>jwt_secret</code> (which will of course invalidate <em>everyone's</em> existing tokens).</p>\n<h2 id=\"jwts-in-supabase\" class=\"group scroll-mt-24\">JWTs in Supabase<a href=\"#jwts-in-supabase\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>In Supabase we issue JWTs for three different purposes:</p>\n<ol>\n<li><code>anon key</code>: This key is used to bypass the Supabase API gateway and can be used in your client-side code.</li>\n<li><code>service role key</code>: This key has super admin rights and can bypass your Row Level Security. Do not put it in your client-side code. Keep it private.</li>\n<li><code>user specific jwts</code>: These are tokens we issue to users who log into your project/service/website. It's the modern equivalent of a session token, and can be used by a user to access content or permissions specific to them.</li>\n</ol>\n<p>The first token here, the <code>anon key</code> token, is for developers to send along with their API requests whenever they want to interact with their Supabase database.</p>\n<p>Let's say you want to read the names of all the rows in a table <code>colors</code>. We would make a request like:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"bash\" style=\"width: 926px; height: 93px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 1151.5px; height: 76px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 1151.5px; height: 38px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 1120px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-3);\">curl </span><span style=\"color: var(--ch-8);\">'https://xscduanzzfseqszwzhcy.supabase.co/rest/v1/colors?select=name' </span><span style=\"color: var(--ch-2);\">\\</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 1120px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">-H </span><span style=\"color: var(--ch-8);\">\"apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYxNDIwNTE3NCwiZXhwIjoxOTI5NzgxMTc0fQ.-NBR1WnZyQGpRLdXJfgfpszoZ0EeE6KHatJsDPLIX8c\"</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<p>If we put this token into <a href=\"https://jwt.io\">https://jwt.io</a>, we see it decodes to:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"js\" style=\"width: 926px; height: 154px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 152px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 114px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 140px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">{</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 140px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"role\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"anon\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 140px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"iss\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"supabase\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 140px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"iat\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-2);\">1614205174</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 76px); width: 31.5px; opacity: 0.99;\">5</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 76px); width: 140px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"exp\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-2);\">1929781174</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 95px); width: 31.5px; opacity: 0.99;\">6</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 95px); width: 140px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">}</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<p>This JWT is signed by a <code>jwt_secret</code> specific to the developer's Supabase token (you can find this secret alongside this encoded \"anon key\" on your Dashboard under Settings &gt; API page) and is required to get past the Supabase API gateway and access the developer's project.</p>\n<p>The idea with this particular key is that it's safe to put into your client, meaning it's okay if your end users see this key \u2013 but <em>only</em> if you first enable Row Level Security.</p>\n<p>The second key, <code>service role key</code>, should only ever be used on one of your own servers or environments, and should never be shared with end users. You might use this token to do things like make batch inserts of data.</p>\n<p>The <code>user access token</code> is the JWT issued when you call for example:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"js\" style=\"width: 926px; height: 116px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 114px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 76px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 210px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">supabase.auth.</span><span style=\"color: var(--ch-5);\">signIn</span><span style=\"color: var(--ch-4);\">({</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 210px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  email: </span><span style=\"color: var(--ch-8);\">'lao.gimmie@gov.sg'</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 210px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  password: </span><span style=\"color: var(--ch-8);\">'They_Live_1988!'</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 210px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">})</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<p>This token should be passed in addition to the <code>apikey</code> header as an <code>Authorization Bearer</code> header like:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"bash\" style=\"width: 926px; height: 112px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 2593.5px; height: 95px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 2593.5px; height: 57px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 2562px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-3);\">curl </span><span style=\"color: var(--ch-8);\">'https://xscduanzzfseqszwzhcy.supabase.co/rest/v1/colors?select=name' </span><span style=\"color: var(--ch-2);\">\\</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 2562px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">-H </span><span style=\"color: var(--ch-8);\">\"apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYxNDIwNTE3NCwiZXhwIjoxOTI5NzgxMTc0fQ.-NBR1WnZyQGpRLdXJfgfpszoZ0EeE6KHatJsDPLIX8c\" </span><span style=\"color: var(--ch-2);\">\\</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 2562px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">-H </span><span style=\"color: var(--ch-8);\">\"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNjE1ODI0Mzg4LCJzdWIiOiIwMzM0NzQ0YS1mMmEyLTRhYmEtOGM4YS02ZTc0OGY2MmExNzIiLCJlbWFpbCI6InNvbWVvbmVAZW1haWwuY29tIiwiYXBwX21ldGFkYXRhIjp7InByb3ZpZGVyIjoiZW1haWwifSwidXNlcl9tZXRhZGF0YSI6bnVsbCwicm9sZSI6ImF1dGhlbnRpY2F0ZWQifQ.I-_oSsJamtinGxniPETBf-ezAUwDW2sY9bJIThvdX9s\"</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<p>You'll notice that this token is quite a bit longer, since it contains information specific to the user such as:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"js\" style=\"width: 926px; height: 249px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 247px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 209px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 336px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">{</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 336px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"aud\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"authenticated\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 336px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"exp\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-2);\">1615824388</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 336px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"sub\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"0334744a-f2a2-4aba-8c8a-6e748f62a172\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 76px); width: 31.5px; opacity: 0.99;\">5</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 76px); width: 336px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"email\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"d.l.solove@gmail.com\"</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 95px); width: 31.5px; opacity: 0.99;\">6</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 95px); width: 336px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"app_metadata\"</span><span style=\"color: var(--ch-4);\">: {</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 114px); width: 31.5px; opacity: 0.99;\">7</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 114px); width: 336px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">    \"provider\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"email\"</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 133px); width: 31.5px; opacity: 0.99;\">8</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 133px); width: 336px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  },</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 152px); width: 31.5px; opacity: 0.99;\">9</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 152px); width: 336px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"user_metadata\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-2);\">null</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 171px); width: 31.5px; opacity: 0.99;\">10</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 171px); width: 336px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-8);\">  \"role\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"authenticated\"</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 190px); width: 31.5px; opacity: 0.99;\">11</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 190px); width: 336px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">}</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<p>Now that you understand what JWTs are and where they're used in Supabase, you can explore how to use them in combination with Row Level Security to start restricting access to certain tables, rows, and columns in your Postgres database.</p>\n<h2 id=\"resources\" class=\"group scroll-mt-24\">Resources<a href=\"#resources\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<ul>\n<li>JWT debugger: <a href=\"https://jwt.io/\">https://jwt.io/</a></li>\n</ul></article></div></div></div></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div><next-route-announcer style=\"position: absolute;\"></next-route-announcer></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/jwts",
        "title": "JWTs | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=JWTs&description=undefined",
        "ogTitle": "JWTs | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/jwts",
        "description": "JSON Web Tokens",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "ogDescription": "JSON Web Tokens",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Password Verification Hook\n\n* * *\n\nYour company wishes to increase security beyond the requirements of the default password implementation in order to fulfill security or compliance requirements. You plan to track the status of a password sign-in attempt and take action via an email or a restriction on logins where necessary.\n\nAs this hook runs on unauthenticated requests, malicious users can abuse the hook by calling it multiple times. Pay extra care when using the hook as you can unintentionally block legitimate users from accessing your application.\n\nCheck if a password is valid prior to taking any additional action to ensure the user is legitimate. Where possible, send an email or notification instead of blocking the user.\n\n**Inputs**\n\n| Field | Type | Description |\n| --- | --- | --- |\n| `user_id` | `string` | Unique identifier for the user attempting to sign in. Correlate this to the `auth.users` table. |\n| `valid` | `boolean` | Whether the password verification attempt was valid. |\n\nJSONJSON Schema\n\n`\n_10\n{\n_10\n\"user_id\": \"3919cb6e-4215-4478-a960-6d3454326cec\",\n_10\n\"valid\": true\n_10\n}\n`\n\n**Outputs**\n\nReturn these only if your hook processed the input without errors.\n\n| Field | Type | Description |\n| --- | --- | --- |\n| `decision` | `string` | The decision on whether to allow authentication to move forward. Use `reject` to deny the verification attempt and log the user out of all active sessions. Use `continue` to use the default Supabase Auth behavior. |\n| `message` | `string` | The message to show the user if the decision was `reject`. |\n| `should_logout_user` | `boolean` | Whether to log out the user if a `reject` decision is issued. Has no effect when a `continue` decision is issued. |\n\n`\n_10\n{\n_10\n\"decision\": \"reject\",\n_10\n\"message\": \"You have exceeded maximum number of password sign-in attempts.\",\n_10\n\"should_logout_user\": \"false\"\n_10\n}\n`\n\nSQL\n\nLimit failed password verification attemptsSend email notification on failed password attempts\n\nAs part of new security measures within the company, users can only input an incorrect password every 10 seconds and not more than that. You want to write a hook to enforce this.\n\nCreate a table to record each user's last incorrect password verification attempt.\n\n`\n_10\ncreate table public.password_failed_verification_attempts (\n_10\nuser_id uuid not null,\n_10\nlast_failed_at timestamp not null default now(),\n_10\nprimary key (user_id)\n_10\n);\n`\n\nCreate a hook to read and write information to this table. For example:\n\n`\n_54\ncreate function public.hook_password_verification_attempt(event jsonb)\n_54\nreturns jsonb\n_54\nlanguage plpgsql\n_54\nas $$\n_54\ndeclare\n_54\n    last_failed_at timestamp;\n_54\nbegin\n_54\n    if event->'valid' is true then\n_54\n      -- password is valid, accept it\n_54\n      return jsonb_build_object('decision', 'continue');\n_54\n    end if;\n_54\n_54\n    select last_failed_at into last_failed_at\n_54\n      from public.password_failed_verification_attempts\n_54\n      where\n_54\n        user_id = event->'user_id';\n_54\n_54\n    if last_failed_at is not null and now() - last_failed_at < interval '10 seconds' then\n_54\n      -- last attempt was done too quickly\n_54\n      return jsonb_build_object(\n_54\n        'error', jsonb_build_object(\n_54\n          'http_code', 429,\n_54\n          'message',   'Please wait a moment before trying again.'\n_54\n        )\n_54\n      );\n_54\n    end if;\n_54\n_54\n    -- record this failed attempt\n_54\n    insert into public.password_failed_verification_attempts\n_54\n      (\n_54\n        user_id,\n_54\n        last_failed_at\n_54\n      )\n_54\n      values\n_54\n      (\n_54\n        event->'user_id',\n_54\n        now()\n_54\n      )\n_54\n      on conflict do update\n_54\n        set last_failed_at = now();\n_54\n_54\n    -- finally let Supabase Auth do the default behavior for a failed attempt\n_54\n    return jsonb_build_object('decision', 'continue');\n_54\nend;\n_54\n$$;\n_54\n_54\n-- Assign appropriate permissions\n_54\ngrant all\n_54\non table public.password_failed_verification_attempts\n_54\nto supabase_auth_admin;\n_54\n_54\nrevoke all\n_54\non table public.password_failed_verification_attempts\n_54\nfrom authenticated, anon, public;\n`",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Password Verification Hook</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>Your company wishes to increase security beyond the requirements of the default password implementation in order to fulfill security or compliance requirements. You plan to track the status of a password sign-in attempt and take action via an email or a restriction on logins where necessary.</p>\n<p>As this hook runs on unauthenticated requests, malicious users can abuse the hook by calling it multiple times. Pay extra care when using the hook as you can unintentionally block legitimate users from accessing your application.</p>\n<p>Check if a password is valid prior to taking any additional action to ensure the user is legitimate. Where possible, send an email or notification instead of blocking the user.</p>\n<p><strong>Inputs</strong></p>\n<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>user_id</code></td><td><code>string</code></td><td>Unique identifier for the user attempting to sign in. Correlate this to the <code>auth.users</code> table.</td></tr><tr><td><code>valid</code></td><td><code>boolean</code></td><td>Whether the password verification attempt was valid.</td></tr></tbody></table>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R5m9jtsn7qb6ra:-content-password-verification-attempt-json\" data-state=\"active\" id=\"radix-:R5m9jtsn7qb6ra:-trigger-password-verification-attempt-json\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JSON</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R5m9jtsn7qb6ra:-content-password-verification-attempt-json-schema\" data-state=\"inactive\" id=\"radix-:R5m9jtsn7qb6ra:-trigger-password-verification-attempt-json-schema\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JSON Schema</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R5m9jtsn7qb6ra:-trigger-password-verification-attempt-json\" id=\"radix-:R5m9jtsn7qb6ra:-content-password-verification-attempt-json\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"user_id\": \"3919cb6e-4215-4478-a960-6d3454326cec\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"valid\": true</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R5m9jtsn7qb6ra:-trigger-password-verification-attempt-json-schema\" hidden=\"\" id=\"radix-:R5m9jtsn7qb6ra:-content-password-verification-attempt-json-schema\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p><strong>Outputs</strong></p>\n<p>Return these only if your hook processed the input without errors.</p>\n<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>decision</code></td><td><code>string</code></td><td>The decision on whether to allow authentication to move forward. Use <code>reject</code> to deny the verification attempt and log the user out of all active sessions. Use <code>continue</code> to use the default Supabase Auth behavior.</td></tr><tr><td><code>message</code></td><td><code>string</code></td><td>The message to show the user if the decision was <code>reject</code>.</td></tr><tr><td><code>should_logout_user</code></td><td><code>boolean</code></td><td>Whether to log out the user if a <code>reject</code> decision is issued. Has no effect when a <code>continue</code> decision is issued.</td></tr></tbody></table>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"decision\": \"reject\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"message\": \"You have exceeded maximum number of password sign-in attempts.\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"should_logout_user\": \"false\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R6u9jtsn7qb6ra:-content-sql\" data-state=\"active\" id=\"radix-:R6u9jtsn7qb6ra:-trigger-sql\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>SQL</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6u9jtsn7qb6ra:-trigger-sql\" id=\"radix-:R6u9jtsn7qb6ra:-content-sql\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R7eu9jtsn7qb6ra:-content-sql-limit-failed-password-verification-attempts\" data-state=\"active\" id=\"radix-:R7eu9jtsn7qb6ra:-trigger-sql-limit-failed-password-verification-attempts\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Limit failed password verification attempts</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R7eu9jtsn7qb6ra:-content-sql-send-email-on-failed-password-attempt\" data-state=\"inactive\" id=\"radix-:R7eu9jtsn7qb6ra:-trigger-sql-send-email-on-failed-password-attempt\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Send email notification on failed password attempts</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R7eu9jtsn7qb6ra:-trigger-sql-limit-failed-password-verification-attempts\" id=\"radix-:R7eu9jtsn7qb6ra:-content-sql-limit-failed-password-verification-attempts\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>As part of new security measures within the company, users can only input an incorrect password every 10 seconds and not more than that. You want to write a hook to enforce this.</p><p>Create a table to record each user's last incorrect password verification attempt.</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>create table public.password_failed_verification_attempts (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  user_id uuid not null,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  last_failed_at timestamp not null default now(),</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  primary key (user_id)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>);</span></div></div><br></code></div></div><p>Create a hook to read and write information to this table. For example:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>create function public.hook_password_verification_attempt(event jsonb)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>returns jsonb</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>language plpgsql</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>as $$</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>  declare</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>    last_failed_at timestamp;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>  begin</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>    if event-&gt;'valid' is true then</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>      -- password is valid, accept it</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>      return jsonb_build_object('decision', 'continue');</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>    end if;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>    select last_failed_at into last_failed_at</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>      from public.password_failed_verification_attempts</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>      where</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>        user_id = event-&gt;'user_id';</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>    if last_failed_at is not null and now() - last_failed_at &lt; interval '10 seconds' then</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>      -- last attempt was done too quickly</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>      return jsonb_build_object(</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>        'error', jsonb_build_object(</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>          'http_code', 429,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>          'message',   'Please wait a moment before trying again.'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>        )</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>      );</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>    end if;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>    -- record this failed attempt</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>    insert into public.password_failed_verification_attempts</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>      (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>        user_id,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>        last_failed_at</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>      )</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>      values</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>      (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>        event-&gt;'user_id',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>        now()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>      )</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>      on conflict do update</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>        set last_failed_at = now();</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>    -- finally let Supabase Auth do the default behavior for a failed attempt</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>    return jsonb_build_object('decision', 'continue');</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>  end;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>$$;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>-- Assign appropriate permissions</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>grant all</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>  on table public.password_failed_verification_attempts</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>  to supabase_auth_admin;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>revoke all</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>  on table public.password_failed_verification_attempts</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->54</span><div style=\"display:inline-block;margin-left:16px\"><span>  from authenticated, anon, public;</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R7eu9jtsn7qb6ra:-trigger-sql-send-email-on-failed-password-attempt\" hidden=\"\" id=\"radix-:R7eu9jtsn7qb6ra:-content-sql-send-email-on-failed-password-attempt\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-hooks/password-verification-hook",
        "title": "Password Verification Hook | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Password%20Verification%20Hook&description=undefined",
        "ogTitle": "Password Verification Hook | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-hooks/password-verification-hook",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Supabase Auth with Remix\n\n* * *\n\nWe generally recommend using the new `@supabase/ssr` package instead of `auth-helpers`. `@supabase/ssr` takes the core concepts of the Auth Helpers package and makes them available to any server framework. Check out the [migration doc](/docs/guides/auth/server-side/migrating-to-ssr-from-auth-helpers) to learn more.\n\nSee legacy docs",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Supabase Auth with Remix</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>We generally recommend using the new <code>@supabase/ssr</code> package instead of <code>auth-helpers</code>. <code>@supabase/ssr</code> takes the core concepts of the Auth Helpers package and makes them available to any server framework. Check out the <a href=\"/docs/guides/auth/server-side/migrating-to-ssr-from-auth-helpers\">migration doc</a> to learn more.</p></div></div>\n<div class=\" flex flex-col space-y-3  text-foreground-light border-b mt-8 pb-2\" data-orientation=\"vertical\"><div><div data-state=\"closed\" data-orientation=\"vertical\" class=\" group first:rounded-tl-md first:rounded-tr-md last:rounded-bl-md last:rounded-br-md overflow-hidden will-change-transform \"><button type=\"button\" aria-controls=\"radix-:R1m9jtsn7qb6ra:\" aria-expanded=\"false\" data-state=\"closed\" data-orientation=\"vertical\" id=\"radix-:Rm9jtsn7qb6ra:\" class=\" flex flex-row gap-3 items-center w-full text-left cursor-pointer outline-none focus-visible:ring-1 focus-visible:z-10 ring-foreground-light  justify-between\" data-radix-collection-item=\"\">See legacy docs<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-down  text-foreground-lighter rotate-0 group-state-open:rotate-180 group-data-[state=open]:rotate-180 ease-&amp;lsqb;cubic-bezier(0.87,_0,_0.13,_1)&amp;rsqb; transition-transform duration-300 duration-200  order-last\" aria-hidden=\"true\"><path d=\"m6 9 6 6 6-6\"></path></svg></button><div data-state=\"closed\" id=\"radix-:R1m9jtsn7qb6ra:\" hidden=\"\" role=\"region\" aria-labelledby=\"radix-:Rm9jtsn7qb6ra:\" data-orientation=\"vertical\" class=\" data-open:animate-slide-down data-closed:animate-slide-up \" style=\"--radix-accordion-content-height:var(--radix-collapsible-content-height);--radix-accordion-content-width:var(--radix-collapsible-content-width)\"></div></div></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-helpers/remix",
        "title": "Supabase Auth with Remix | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Supabase%20Auth%20with%20Remix&description=Authentication%20helpers%20for%20loaders%20and%20actions%20in%20Remix.",
        "ogTitle": "Supabase Auth with Remix | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-helpers/remix",
        "description": "Authentication helpers for loaders and actions in Remix.",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "ogDescription": "Authentication helpers for loaders and actions in Remix.",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Creating a Supabase client for SSR\n\n## Configure your Supabase client to use cookies\n\n* * *\n\nTo use Server-Side Rendering (SSR) with Supabase, you need to configure your Supabase client to use cookies. The `@supabase/ssr` package helps you do this for JavaScript/TypeScript applications.\n\n## Install [\\#](\\#install)\n\nInstall the `@supabase/ssr` and `@supabase/supabase-js` packages:\n\nnpmyarnpnpm\n\n`\n_10\nnpm install @supabase/ssr @supabase/supabase-js\n`\n\n## Set environment variables [\\#](\\#set-environment-variables)\n\nIn your environment variables file, set your Supabase URL and Supabase Anon Key:\n\n###### Project URL\n\nLoading...\n\n###### Anon key\n\nLoading...\n\nNext.jsSvelteKitAstroRemixExpress\n\n.env.local\n\n`\n_10\nNEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url\n_10\nNEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key\n`\n\n## Create a client [\\#](\\#create-a-client)\n\nYou'll need some one-time setup code to configure your Supabase client to use cookies. Once your utility code is set up, you can use your new `createClient` utility functions to get a properly configured Supabase client.\n\nUse the browser client in code that runs on the browser, and the server client in code that runs on the server.\n\nNext.jsSvelteKitAstroRemixExpress\n\nThe following code samples are for App Router. For help with Pages Router, see the [Next.js Server-Side Auth guide](/docs/guides/auth/server-side/nextjs?queryGroups=router&router=pages).\n\nClient-sideServer-sideMiddleware\n\n## Next steps [\\#](\\#next-steps)\n\n- Implement [Authentication using Email and Password](/docs/guides/auth/server-side/email-based-auth-with-pkce-flow-for-ssr)\n- Implement [Authentication using OAuth](/docs/guides/auth/server-side/oauth-with-pkce-flow-for-ssr)\n- [Learn more about SSR](/docs/guides/auth/server-side-rendering)",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Creating a Supabase client for SSR</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Configure your Supabase client to use cookies</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>To use Server-Side Rendering (SSR) with Supabase, you need to configure your Supabase client to use cookies. The <code>@supabase/ssr</code> package helps you do this for JavaScript/TypeScript applications.</p>\n<h2 id=\"install\" class=\"group scroll-mt-24\">Install<a href=\"#install\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Install the <code>@supabase/ssr</code> and <code>@supabase/supabase-js</code> packages:</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R569jtsn7qb6ra:-content-npm\" data-state=\"active\" id=\"radix-:R569jtsn7qb6ra:-trigger-npm\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>npm</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R569jtsn7qb6ra:-content-yarn\" data-state=\"inactive\" id=\"radix-:R569jtsn7qb6ra:-trigger-yarn\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>yarn</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R569jtsn7qb6ra:-content-pnpm\" data-state=\"inactive\" id=\"radix-:R569jtsn7qb6ra:-trigger-pnpm\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>pnpm</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R569jtsn7qb6ra:-trigger-npm\" id=\"radix-:R569jtsn7qb6ra:-content-npm\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>npm install @supabase/ssr @supabase/supabase-js</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R569jtsn7qb6ra:-trigger-yarn\" hidden=\"\" id=\"radix-:R569jtsn7qb6ra:-content-yarn\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R569jtsn7qb6ra:-trigger-pnpm\" hidden=\"\" id=\"radix-:R569jtsn7qb6ra:-content-pnpm\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h2 id=\"set-environment-variables\" class=\"group scroll-mt-24\">Set environment variables<a href=\"#set-environment-variables\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>In your environment variables file, set your Supabase URL and Supabase Anon Key:</p>\n<div class=\"max-w-[min(100%, 500px)] my-6\"><h6 class=\"mt-0 mb-1 text-foreground\">Project URL</h6><div class=\"flex flex-wrap gap-x-6\"><button class=\"items-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground-muted focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-control bg-background hover:bg-accent hover:text-accent-foreground px-4 overflow-hidden h-auto min-h-10 flex justify-between border-none py-0 pl-0 pr-1 text-left\" role=\"combobox\" aria-expanded=\"false\" type=\"button\" aria-haspopup=\"dialog\" aria-controls=\"radix-:R19u9jtsn7qb6ra:\" data-state=\"closed\">Loading...<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevrons-up-down ml-2 h-4 w-4 shrink-0 opacity-50\"><path d=\"m7 15 5 5 5-5\"></path><path d=\"m7 9 5-5 5 5\"></path></svg></button></div><div class=\"flex items-center gap-2 mt-1\"><input type=\"text\" disabled=\"\" class=\"flex w-full rounded-md border border-control bg-foreground/[.026] file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-foreground-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-background-control focus-visible:ring-offset-2 focus-visible:ring-offset-foreground-muted disabled:cursor-not-allowed disabled:opacity-50 aria-[invalid=true]:bg-destructive-200 aria-[invalid=true]:border-destructive-400 aria-[invalid=true]:focus:border-destructive aria-[invalid=true]:focus-visible:border-destructive aria-[] text-sm leading-4 px-3 py-2 h-[34px] font-mono\" value=\"Loading...\"><button class=\"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground-muted focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 py-2 px-0\" disabled=\"\" aria-label=\"Copy\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-copy\"><rect width=\"14\" height=\"14\" x=\"8\" y=\"8\" rx=\"2\" ry=\"2\"></rect><path d=\"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\"></path></svg></button></div></div>\n<div class=\"max-w-[min(100%, 500px)] my-6\"><h6 class=\"mt-0 mb-1 text-foreground\">Anon key</h6><div class=\"flex flex-wrap gap-x-6\"><button class=\"items-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground-muted focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-control bg-background hover:bg-accent hover:text-accent-foreground px-4 overflow-hidden h-auto min-h-10 flex justify-between border-none py-0 pl-0 pr-1 text-left\" role=\"combobox\" aria-expanded=\"false\" type=\"button\" aria-haspopup=\"dialog\" aria-controls=\"radix-:R1a69jtsn7qb6ra:\" data-state=\"closed\">Loading...<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevrons-up-down ml-2 h-4 w-4 shrink-0 opacity-50\"><path d=\"m7 15 5 5 5-5\"></path><path d=\"m7 9 5-5 5 5\"></path></svg></button></div><div class=\"flex items-center gap-2 mt-1\"><input type=\"text\" disabled=\"\" class=\"flex w-full rounded-md border border-control bg-foreground/[.026] file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-foreground-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-background-control focus-visible:ring-offset-2 focus-visible:ring-offset-foreground-muted disabled:cursor-not-allowed disabled:opacity-50 aria-[invalid=true]:bg-destructive-200 aria-[invalid=true]:border-destructive-400 aria-[invalid=true]:focus:border-destructive aria-[invalid=true]:focus-visible:border-destructive aria-[] text-sm leading-4 px-3 py-2 h-[34px] font-mono\" value=\"Loading...\"><button class=\"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground-muted focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 py-2 px-0\" disabled=\"\" aria-label=\"Copy\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-copy\"><rect width=\"14\" height=\"14\" x=\"8\" y=\"8\" rx=\"2\" ry=\"2\"></rect><path d=\"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\"></path></svg></button></div></div>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R6e9jtsn7qb6ra:-content-nextjs\" data-state=\"active\" id=\"radix-:R6e9jtsn7qb6ra:-trigger-nextjs\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Next.js</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R6e9jtsn7qb6ra:-content-sveltekit\" data-state=\"inactive\" id=\"radix-:R6e9jtsn7qb6ra:-trigger-sveltekit\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>SvelteKit</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R6e9jtsn7qb6ra:-content-astro\" data-state=\"inactive\" id=\"radix-:R6e9jtsn7qb6ra:-trigger-astro\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Astro</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R6e9jtsn7qb6ra:-content-remix\" data-state=\"inactive\" id=\"radix-:R6e9jtsn7qb6ra:-trigger-remix\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Remix</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R6e9jtsn7qb6ra:-content-express\" data-state=\"inactive\" id=\"radix-:R6e9jtsn7qb6ra:-trigger-express\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Express</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6e9jtsn7qb6ra:-trigger-nextjs\" id=\"radix-:R6e9jtsn7qb6ra:-content-nextjs\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\".env.local\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>.env.local</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key</span></div></div><br></code></div></div></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6e9jtsn7qb6ra:-trigger-sveltekit\" hidden=\"\" id=\"radix-:R6e9jtsn7qb6ra:-content-sveltekit\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6e9jtsn7qb6ra:-trigger-astro\" hidden=\"\" id=\"radix-:R6e9jtsn7qb6ra:-content-astro\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6e9jtsn7qb6ra:-trigger-remix\" hidden=\"\" id=\"radix-:R6e9jtsn7qb6ra:-content-remix\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6e9jtsn7qb6ra:-trigger-express\" hidden=\"\" id=\"radix-:R6e9jtsn7qb6ra:-content-express\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h2 id=\"create-a-client\" class=\"group scroll-mt-24\">Create a client<a href=\"#create-a-client\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>You'll need some one-time setup code to configure your Supabase client to use cookies. Once your utility code is set up, you can use your new <code>createClient</code> utility functions to get a properly configured Supabase client.</p>\n<p>Use the browser client in code that runs on the browser, and the server client in code that runs on the server.</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R7e9jtsn7qb6ra:-content-nextjs\" data-state=\"active\" id=\"radix-:R7e9jtsn7qb6ra:-trigger-nextjs\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Next.js</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R7e9jtsn7qb6ra:-content-sveltekit\" data-state=\"inactive\" id=\"radix-:R7e9jtsn7qb6ra:-trigger-sveltekit\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>SvelteKit</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R7e9jtsn7qb6ra:-content-astro\" data-state=\"inactive\" id=\"radix-:R7e9jtsn7qb6ra:-trigger-astro\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Astro</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R7e9jtsn7qb6ra:-content-remix\" data-state=\"inactive\" id=\"radix-:R7e9jtsn7qb6ra:-trigger-remix\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Remix</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R7e9jtsn7qb6ra:-content-express\" data-state=\"inactive\" id=\"radix-:R7e9jtsn7qb6ra:-trigger-express\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Express</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R7e9jtsn7qb6ra:-trigger-nextjs\" id=\"radix-:R7e9jtsn7qb6ra:-content-nextjs\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>The following code samples are for App Router. For help with Pages Router, see the <a href=\"/docs/guides/auth/server-side/nextjs?queryGroups=router&amp;router=pages\">Next.js Server-Side Auth guide</a>.</p><div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R33fe9jtsn7qb6ra:-content-client\" data-state=\"inactive\" id=\"radix-:R33fe9jtsn7qb6ra:-trigger-client\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Client-side</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R33fe9jtsn7qb6ra:-content-server\" data-state=\"inactive\" id=\"radix-:R33fe9jtsn7qb6ra:-trigger-server\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Server-side</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R33fe9jtsn7qb6ra:-content-middleware\" data-state=\"inactive\" id=\"radix-:R33fe9jtsn7qb6ra:-trigger-middleware\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Middleware</span></button></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R33fe9jtsn7qb6ra:-trigger-client\" hidden=\"\" id=\"radix-:R33fe9jtsn7qb6ra:-content-client\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R33fe9jtsn7qb6ra:-trigger-server\" hidden=\"\" id=\"radix-:R33fe9jtsn7qb6ra:-content-server\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R33fe9jtsn7qb6ra:-trigger-middleware\" hidden=\"\" id=\"radix-:R33fe9jtsn7qb6ra:-content-middleware\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R7e9jtsn7qb6ra:-trigger-sveltekit\" hidden=\"\" id=\"radix-:R7e9jtsn7qb6ra:-content-sveltekit\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R7e9jtsn7qb6ra:-trigger-astro\" hidden=\"\" id=\"radix-:R7e9jtsn7qb6ra:-content-astro\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R7e9jtsn7qb6ra:-trigger-remix\" hidden=\"\" id=\"radix-:R7e9jtsn7qb6ra:-content-remix\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R7e9jtsn7qb6ra:-trigger-express\" hidden=\"\" id=\"radix-:R7e9jtsn7qb6ra:-content-express\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h2 id=\"next-steps\" class=\"group scroll-mt-24\">Next steps<a href=\"#next-steps\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<ul>\n<li>Implement <a href=\"/docs/guides/auth/server-side/email-based-auth-with-pkce-flow-for-ssr\">Authentication using Email and Password</a></li>\n<li>Implement <a href=\"/docs/guides/auth/server-side/oauth-with-pkce-flow-for-ssr\">Authentication using OAuth</a></li>\n<li><a href=\"/docs/guides/auth/server-side-rendering\">Learn more about SSR</a></li>\n</ul></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/server-side/creating-a-client",
        "title": "Creating a Supabase client for SSR | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Creating%20a%20Supabase%20client%20for%20SSR&description=undefined",
        "ogTitle": "Creating a Supabase client for SSR | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/server-side/creating-a-client",
        "description": "Configure your Supabase client to use cookies",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "ogDescription": "Configure your Supabase client to use cookies",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Identity Linking\n\n## Manage the identities associated with your user\n\n* * *\n\n## Identity linking strategies [\\#](\\#identity-linking-strategies)\n\nCurrently, Supabase Auth supports 2 strategies to link an identity to a user:\n\n1. [Automatic Linking](#automatic-linking)\n2. [Manual Linking](#manual-linking-beta)\n\n### Automatic linking [\\#](\\#automatic-linking)\n\nSupabase Auth automatically links identities with the same email address to a single user. This helps to improve the user experience when multiple OAuth login options are presented since the user does not need to remember which OAuth account they used to sign up with. When a new user signs in with OAuth, Supabase Auth will attempt to look for an existing user that uses the same email address. If a match is found, the new identity is linked to the user.\n\nIn order for automatic linking to correctly identify the user for linking, Supabase Auth needs to ensure that all user emails are unique. It would also be an insecure practice to automatically link an identity to a user with an unverified email address since that could lead to pre-account takeover attacks. To prevent this from happening, when a new identity can be linked to an existing user, Supabase Auth will remove any other unconfirmed identities linked to an existing user.\n\nUsers that signed up with [SAML SSO](/docs/guides/auth/sso/auth-sso-saml) will not be considered as targets for automatic linking.\n\n### Manual linking (beta) [\\#](\\#manual-linking-beta)\n\nJavaScriptDartSwiftKotlinPython\n\nSupabase Auth allows a user to initiate identity linking with a different email address when they are logged in. To link an OAuth identity to the user, call [`linkIdentity()`](/docs/reference/javascript/auth-linkidentity):\n\n`\n_10\nconst { data, error } = await supabase.auth.linkIdentity({ provider: 'google' })\n`\n\nIn the example above, the user will be redirected to Google to complete the OAuth2.0 flow. Once the OAuth2.0 flow has completed successfully, the user will be redirected back to the application and the Google identity will be linked to the user. You can enable manual linking from your project's authentication [configuration options](/dashboard/project/_/settings/auth) or by setting the environment variable `GOTRUE_SECURITY_MANUAL_LINKING_ENABLED: true` when self-hosting.\n\n## Unlink an identity [\\#](\\#unlink-an-identity)\n\nJavaScriptDartSwiftKotlinPython\n\nYou can use [`getUserIdentities()`](/docs/reference/javascript/auth-getuseridentities) to fetch all the identities linked to a user. Then, call [`unlinkIdentity()`](/docs/reference/javascript/auth-unlinkidentity) to unlink the identity. The user needs to be logged in and have at least 2 linked identities in order to unlink an existing identity.\n\n`\n_10\n// retrieve all identities linked to a user\n_10\nconst {\n_10\ndata: { identities },\n_10\n} = await supabase.auth.getUserIdentities()\n_10\n_10\n// find the google identity linked to the user\n_10\nconst googleIdentity = identities.find((identity) => identity.provider === 'google')\n_10\n_10\n// unlink the google identity from the user\n_10\nconst { data, error } = await supabase.auth.unlinkIdentity(googleIdentity)\n`",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Identity Linking</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Manage the identities associated with your user</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<h2 id=\"identity-linking-strategies\" class=\"group scroll-mt-24\">Identity linking strategies<a href=\"#identity-linking-strategies\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Currently, Supabase Auth supports 2 strategies to link an identity to a user:</p>\n<ol>\n<li><a href=\"#automatic-linking\">Automatic Linking</a></li>\n<li><a href=\"#manual-linking-beta\">Manual Linking</a></li>\n</ol>\n<h3 id=\"automatic-linking\" class=\"group scroll-mt-24\">Automatic linking<a href=\"#automatic-linking\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Supabase Auth automatically links identities with the same email address to a single user. This helps to improve the user experience when multiple OAuth login options are presented since the user does not need to remember which OAuth account they used to sign up with. When a new user signs in with OAuth, Supabase Auth will attempt to look for an existing user that uses the same email address. If a match is found, the new identity is linked to the user.</p>\n<p>In order for automatic linking to correctly identify the user for linking, Supabase Auth needs to ensure that all user emails are unique. It would also be an insecure practice to automatically link an identity to a user with an unverified email address since that could lead to pre-account takeover attacks. To prevent this from happening, when a new identity can be linked to an existing user, Supabase Auth will remove any other unconfirmed identities linked to an existing user.</p>\n<p>Users that signed up with <a href=\"/docs/guides/auth/sso/auth-sso-saml\">SAML SSO</a> will not be considered as targets for automatic linking.</p>\n<h3 id=\"manual-linking-beta\" class=\"group scroll-mt-24\">Manual linking (beta)<a href=\"#manual-linking-beta\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R6e9jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:R6e9jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R6e9jtsn7qb6ra:-content-dart\" data-state=\"inactive\" id=\"radix-:R6e9jtsn7qb6ra:-trigger-dart\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Dart</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R6e9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:R6e9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R6e9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:R6e9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R6e9jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:R6e9jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6e9jtsn7qb6ra:-trigger-js\" id=\"radix-:R6e9jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>Supabase Auth allows a user to initiate identity linking with a different email address when they are logged in. To link an OAuth identity to the user, call <a href=\"/docs/reference/javascript/auth-linkidentity\"><code>linkIdentity()</code></a>:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const { data, error } = await supabase.auth.linkIdentity({ provider: 'google' })</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6e9jtsn7qb6ra:-trigger-dart\" hidden=\"\" id=\"radix-:R6e9jtsn7qb6ra:-content-dart\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6e9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:R6e9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6e9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:R6e9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6e9jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:R6e9jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p>In the example above, the user will be redirected to Google to complete the OAuth2.0 flow. Once the OAuth2.0 flow has completed successfully, the user will be redirected back to the application and the Google identity will be linked to the user. You can enable manual linking from your project's authentication <a href=\"/dashboard/project/_/settings/auth\">configuration options</a> or by setting the environment variable <code>GOTRUE_SECURITY_MANUAL_LINKING_ENABLED: true</code> when self-hosting.</p>\n<h2 id=\"unlink-an-identity\" class=\"group scroll-mt-24\">Unlink an identity<a href=\"#unlink-an-identity\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R769jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:R769jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R769jtsn7qb6ra:-content-dart\" data-state=\"inactive\" id=\"radix-:R769jtsn7qb6ra:-trigger-dart\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Dart</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R769jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:R769jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R769jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:R769jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R769jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:R769jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R769jtsn7qb6ra:-trigger-js\" id=\"radix-:R769jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>You can use <a href=\"/docs/reference/javascript/auth-getuseridentities\"><code>getUserIdentities()</code></a> to fetch all the identities linked to a user. Then, call <a href=\"/docs/reference/javascript/auth-unlinkidentity\"><code>unlinkIdentity()</code></a> to unlink the identity. The user needs to be logged in and have at least 2 linked identities in order to unlink an existing identity.</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>// retrieve all identities linked to a user</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  data: { identities },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>} = await supabase.auth.getUserIdentities()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>// find the google identity linked to the user</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const googleIdentity = identities.find((identity) =&gt; identity.provider === 'google')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>// unlink the google identity from the user</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const { data, error } = await supabase.auth.unlinkIdentity(googleIdentity)</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R769jtsn7qb6ra:-trigger-dart\" hidden=\"\" id=\"radix-:R769jtsn7qb6ra:-content-dart\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R769jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:R769jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R769jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:R769jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R769jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:R769jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-identity-linking",
        "title": "Identity Linking | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Identity%20Linking&description=Manage%20the%20identities%20associated%20with%20your%20user",
        "ogTitle": "Identity Linking | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-identity-linking",
        "description": "Manage the identities associated with your user",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "ogDescription": "Manage the identities associated with your user",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Setting up Server-Side Auth for Next.js\n\n* * *\n\nNext.js comes in two flavors: the [App Router](https://nextjs.org/docs/app) and the [Pages Router](https://nextjs.org/docs/pages). You can set up Server-Side Auth with either strategy. You can even use both in the same application.\n\nApp RouterPages RouterHybrid router strategies\n\n1\n\n### Install Supabase packages\n\nInstall the `@supabase/supabase-js` package and the helper `@supabase/ssr` package.\n\n`\n_10\nnpm install @supabase/supabase-js @supabase/ssr\n`\n\n2\n\n### Set up environment variables\n\nCreate a `.env.local` file in your project root directory.\n\nFill in your `NEXT_PUBLIC_SUPABASE_URL` and `NEXT_PUBLIC_SUPABASE_ANON_KEY`:\n\n###### Project URL\n\nLoading...\n\n###### Anon key\n\nLoading...\n\n.env.local\n\n`\n_10\nNEXT_PUBLIC_SUPABASE_URL=<your_supabase_project_url>\n_10\nNEXT_PUBLIC_SUPABASE_ANON_KEY=<your_supabase_anon_key>\n`\n\n3\n\n### Write utility functions to create Supabase clients\n\nTo access Supabase from your Next.js app, you need 2 types of Supabase clients:\n\n1. **Client Component client** \\- To access Supabase from Client Components, which run in the browser.\n2. **Server Component client** \\- To access Supabase from Server Components, Server Actions, and Route Handlers, which run only on the server.\n\nCreate a `utils/supabase` folder with a file for each type of client. Then copy the utility functions for each client type.\n\nWhat does the \\`cookies\\` object do?\n\nDo I need to create a new client for every route?\n\nutils/supabase/client.ts\n\nutils/supabase/server.ts\n\n`\n_10\nimport { createBrowserClient } from '@supabase/ssr'\n_10\n_10\nexport function createClient() {\n_10\nreturn createBrowserClient(\n_10\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n_10\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n_10\n)\n_10\n}\n`\n\n4\n\n### Hook up middleware\n\nCreate a `middleware.ts` file at the root of your project.\n\nSince Server Components can't write cookies, you need middleware to refresh expired Auth tokens and store them.\n\nThe middleware is responsible for:\n\n1. Refreshing the Auth token (by calling `supabase.auth.getUser`).\n2. Passing the refreshed Auth token to Server Components, so they don't attempt to refresh the same token themselves. This is accomplished with `request.cookies.set`.\n3. Passing the refreshed Auth token to the browser, so it replaces the old token. This is accomplished with `response.cookies.set`.\n\nCopy the middleware code for your app.\n\nAdd a [matcher](https://nextjs.org/docs/app/building-your-application/routing/middleware#matching-paths) so the middleware doesn't run on routes that don't access Supabase.\n\nBe careful when protecting pages. The server gets the user session from the cookies, which can be spoofed by anyone.\n\nAlways use `supabase.auth.getUser()` to protect pages and user data.\n\n_Never_ trust `supabase.auth.getSession()` inside server code such as middleware. It isn't guaranteed to revalidate the Auth token.\n\nIt's safe to trust `getUser()` because it sends a request to the Supabase Auth server every time to revalidate the Auth token.\n\nmiddleware.ts\n\nutils/supabase/middleware.ts\n\n`\n_19\nimport { type NextRequest } from 'next/server'\n_19\nimport { updateSession } from '@/utils/supabase/middleware'\n_19\n_19\nexport async function middleware(request: NextRequest) {\n_19\nreturn await updateSession(request)\n_19\n}\n_19\n_19\nexport const config = {\n_19\nmatcher: [\\\n_19\\\n    /*\\\n_19\\\n     * Match all request paths except for the ones starting with:\\\n_19\\\n     * - _next/static (static files)\\\n_19\\\n     * - _next/image (image optimization files)\\\n_19\\\n     * - favicon.ico (favicon file)\\\n_19\\\n     * Feel free to modify this pattern to include more paths.\\\n_19\\\n     */\\\n_19\\\n    '/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)',\\\n_19\\\n],\n_19\n}\n`\n\n5\n\n### Create a login page\n\nCreate a login page for your app. Use a Server Action to call the Supabase signup function.\n\nSince Supabase is being called from an Action, use the client defined in `@/utils/supabase/server.ts`.\n\nNote that `cookies` is called before any calls to Supabase, which opts fetch calls out of Next.js's caching. This is important for authenticated data fetches, to ensure that users get access only to their own data.\n\nSee the Next.js docs to learn more about [opting out of data caching](https://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating#opting-out-of-data-caching).\n\napp/login/page.tsx\n\napp/login/actions.ts\n\napp/error/page.tsx\n\n`\n_14\nimport { login, signup } from './actions'\n_14\n_14\nexport default function LoginPage() {\n_14\nreturn (\n_14\n    <form>\n_14\n      <label htmlFor=\"email\">Email:</label>\n_14\n      <input id=\"email\" name=\"email\" type=\"email\" required />\n_14\n      <label htmlFor=\"password\">Password:</label>\n_14\n      <input id=\"password\" name=\"password\" type=\"password\" required />\n_14\n      <button formAction={login}>Log in</button>\n_14\n      <button formAction={signup}>Sign up</button>\n_14\n    </form>\n_14\n)\n_14\n}\n`\n\n6\n\n### Change the Auth confirmation path\n\nIf you have email confirmation turned on (the default), a new user will receive an email confirmation after signing up.\n\nChange the email template to support a server-side authentication flow.\n\nGo to the [Auth templates](https://supabase.com/dashboard/project/_/auth/templates) page in your dashboard. In the `Confirm signup` template, change `{{ .ConfirmationURL }}` to `{{ .SiteURL }}/auth/confirm?token_hash={{ .TokenHash }}&type=signup`.\n\n7\n\n### Create a route handler for Auth confirmation\n\nCreate a Route Handler for `auth/confirm`. When a user clicks their confirmation email link, exchange their secure code for an Auth token.\n\nSince this is a Router Handler, use the Supabase client from `@/utils/supabase/server.ts`.\n\napp/auth/confirm/route.ts\n\n`\n_28\nimport { type EmailOtpType } from '@supabase/supabase-js'\n_28\nimport { type NextRequest } from 'next/server'\n_28\n_28\nimport { createClient } from '@/utils/supabase/server'\n_28\nimport { redirect } from 'next/navigation'\n_28\n_28\nexport async function GET(request: NextRequest) {\n_28\nconst { searchParams } = new URL(request.url)\n_28\nconst token_hash = searchParams.get('token_hash')\n_28\nconst type = searchParams.get('type') as EmailOtpType | null\n_28\nconst next = searchParams.get('next') ?? '/'\n_28\n_28\nif (token_hash && type) {\n_28\n    const supabase = createClient()\n_28\n_28\n    const { error } = await supabase.auth.verifyOtp({\n_28\n      type,\n_28\n      token_hash,\n_28\n    })\n_28\n    if (!error) {\n_28\n      // redirect user to specified redirect URL or root of app\n_28\n      redirect(next)\n_28\n    }\n_28\n}\n_28\n_28\n// redirect the user to an error page with some instructions\n_28\nredirect('/error')\n_28\n}\n`\n\n8\n\n### Access user info from Server Component\n\nServer Components can read cookies, so you can get the Auth status and user info.\n\nSince you're calling Supabase from a Server Component, use the client created in `@/utils/supabase/server.ts`.\n\nCreate a `private` page that users can only access if they're logged in. The page displays their email.\n\nBe careful when protecting pages. The server gets the user session from the cookies, which can be spoofed by anyone.\n\nAlways use `supabase.auth.getUser()` to protect pages and user data.\n\n_Never_ trust `supabase.auth.getSession()` inside Server Components. It isn't guaranteed to revalidate the Auth token.\n\nIt's safe to trust `getUser()` because it sends a request to the Supabase Auth server every time to revalidate the Auth token.\n\napp/private/page.tsx\n\n`\n_14\nimport { redirect } from 'next/navigation'\n_14\n_14\nimport { createClient } from '@/utils/supabase/server'\n_14\n_14\nexport default async function PrivatePage() {\n_14\nconst supabase = createClient()\n_14\n_14\nconst { data, error } = await supabase.auth.getUser()\n_14\nif (error || !data?.user) {\n_14\n    redirect('/login')\n_14\n}\n_14\n_14\nreturn <p>Hello {data.user.email}</p>\n_14\n}\n`\n\n## Congratulations [\\#](\\#congratulations)\n\nYou're done! To recap, you've successfully:\n\n- Called Supabase from a Server Action.\n- Called Supabase from a Server Component.\n- Set up a Supabase client utility to call Supabase from a Client Component. You can use this if you need to call Supabase from a Client Component, for example to set up a realtime subscription.\n- Set up middleware to automatically refresh the Supabase Auth session.\n\nYou can now use any Supabase features from your client or server code!",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Setting up Server-Side Auth for Next.js</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>Next.js comes in two flavors: the <a href=\"https://nextjs.org/docs/app\">App Router</a> and the <a href=\"https://nextjs.org/docs/pages\">Pages Router</a>. You can set up Server-Side Auth with either strategy. You can even use both in the same application.</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R1m9jtsn7qb6ra:-content-app\" data-state=\"active\" id=\"radix-:R1m9jtsn7qb6ra:-trigger-app\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>App Router</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R1m9jtsn7qb6ra:-content-pages\" data-state=\"inactive\" id=\"radix-:R1m9jtsn7qb6ra:-trigger-pages\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Pages Router</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R1m9jtsn7qb6ra:-content-hybrid\" data-state=\"inactive\" id=\"radix-:R1m9jtsn7qb6ra:-trigger-hybrid\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Hybrid router strategies</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R1m9jtsn7qb6ra:-trigger-app\" id=\"radix-:R1m9jtsn7qb6ra:-content-app\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"py-8\"><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">1</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Install Supabase packages</h3><p>Install the <code>@supabase/supabase-js</code> package and the helper <code>@supabase/ssr</code> package.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>npm install @supabase/supabase-js @supabase/ssr</span></div></div><br></code></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">2</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Set up environment variables</h3><p>Create a <code>.env.local</code> file in your project root directory.</p><p>Fill in your <code>NEXT_PUBLIC_SUPABASE_URL</code> and <code>NEXT_PUBLIC_SUPABASE_ANON_KEY</code>:</p><div class=\"max-w-[min(100%, 500px)] my-6\"><h6 class=\"mt-0 mb-1 text-foreground\">Project URL</h6><div class=\"flex flex-wrap gap-x-6\"><button class=\"items-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground-muted focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-control bg-background hover:bg-accent hover:text-accent-foreground px-4 overflow-hidden h-auto min-h-10 flex justify-between border-none py-0 pl-0 pr-1 text-left\" role=\"combobox\" aria-expanded=\"false\" type=\"button\" aria-haspopup=\"dialog\" aria-controls=\"radix-:R19pp2rm9jtsn7qb6ra:\" data-state=\"closed\">Loading...<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevrons-up-down ml-2 h-4 w-4 shrink-0 opacity-50\"><path d=\"m7 15 5 5 5-5\"></path><path d=\"m7 9 5-5 5 5\"></path></svg></button></div><div class=\"flex items-center gap-2 mt-1\"><input type=\"text\" disabled=\"\" class=\"flex w-full rounded-md border border-control bg-foreground/[.026] file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-foreground-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-background-control focus-visible:ring-offset-2 focus-visible:ring-offset-foreground-muted disabled:cursor-not-allowed disabled:opacity-50 aria-[invalid=true]:bg-destructive-200 aria-[invalid=true]:border-destructive-400 aria-[invalid=true]:focus:border-destructive aria-[invalid=true]:focus-visible:border-destructive aria-[] text-sm leading-4 px-3 py-2 h-[34px] font-mono\" value=\"Loading...\"><button class=\"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground-muted focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 py-2 px-0\" disabled=\"\" aria-label=\"Copy\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-copy\"><rect width=\"14\" height=\"14\" x=\"8\" y=\"8\" rx=\"2\" ry=\"2\"></rect><path d=\"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\"></path></svg></button></div></div><div class=\"max-w-[min(100%, 500px)] my-6\"><h6 class=\"mt-0 mb-1 text-foreground\">Anon key</h6><div class=\"flex flex-wrap gap-x-6\"><button class=\"items-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground-muted focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-control bg-background hover:bg-accent hover:text-accent-foreground px-4 overflow-hidden h-auto min-h-10 flex justify-between border-none py-0 pl-0 pr-1 text-left\" role=\"combobox\" aria-expanded=\"false\" type=\"button\" aria-haspopup=\"dialog\" aria-controls=\"radix-:R1a9p2rm9jtsn7qb6ra:\" data-state=\"closed\">Loading...<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevrons-up-down ml-2 h-4 w-4 shrink-0 opacity-50\"><path d=\"m7 15 5 5 5-5\"></path><path d=\"m7 9 5-5 5 5\"></path></svg></button></div><div class=\"flex items-center gap-2 mt-1\"><input type=\"text\" disabled=\"\" class=\"flex w-full rounded-md border border-control bg-foreground/[.026] file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-foreground-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-background-control focus-visible:ring-offset-2 focus-visible:ring-offset-foreground-muted disabled:cursor-not-allowed disabled:opacity-50 aria-[invalid=true]:bg-destructive-200 aria-[invalid=true]:border-destructive-400 aria-[invalid=true]:focus:border-destructive aria-[invalid=true]:focus-visible:border-destructive aria-[] text-sm leading-4 px-3 py-2 h-[34px] font-mono\" value=\"Loading...\"><button class=\"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground-muted focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 py-2 px-0\" disabled=\"\" aria-label=\"Copy\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-copy\"><rect width=\"14\" height=\"14\" x=\"8\" y=\"8\" rx=\"2\" ry=\"2\"></rect><path d=\"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\"></path></svg></button></div></div></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\".env.local\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>.env.local</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>NEXT_PUBLIC_SUPABASE_URL=&lt;your_supabase_project_url&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>NEXT_PUBLIC_SUPABASE_ANON_KEY=&lt;your_supabase_anon_key&gt;</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">3</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Write utility functions to create Supabase clients</h3><p>To access Supabase from your Next.js app, you need 2 types of Supabase clients:</p><ol>\n<li><strong>Client Component client</strong> - To access Supabase from Client Components, which run in the browser.</li>\n<li><strong>Server Component client</strong> - To access Supabase from Server Components, Server Actions, and Route Handlers, which run only on the server.</li>\n</ol><p>Create a <code>utils/supabase</code> folder with a file for each type of client. Then copy the utility functions for each client type.</p><div class=\" flex flex-col space-y-3  text-foreground-light mt-8 mb-6\" data-orientation=\"vertical\"><div><div class=\"border-b mt-3 pb-3\"><div data-state=\"closed\" data-orientation=\"vertical\" class=\" group first:rounded-tl-md first:rounded-tr-md last:rounded-bl-md last:rounded-br-md overflow-hidden will-change-transform \"><button type=\"button\" aria-controls=\"radix-:Rm9pirm9jtsn7qb6ra:\" aria-expanded=\"false\" data-state=\"closed\" data-orientation=\"vertical\" id=\"radix-:R69pirm9jtsn7qb6ra:\" class=\" flex flex-row gap-3 items-center w-full text-left cursor-pointer outline-none focus-visible:ring-1 focus-visible:z-10 ring-foreground-light  justify-between\" data-radix-collection-item=\"\"><span class=\"text-foreground\">What does the `cookies` object do?</span><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-down  text-foreground-lighter rotate-0 group-state-open:rotate-180 group-data-[state=open]:rotate-180 ease-&amp;lsqb;cubic-bezier(0.87,_0,_0.13,_1)&amp;rsqb; transition-transform duration-300 duration-200  order-last\" aria-hidden=\"true\"><path d=\"m6 9 6 6 6-6\"></path></svg></button><div data-state=\"closed\" id=\"radix-:Rm9pirm9jtsn7qb6ra:\" hidden=\"\" role=\"region\" aria-labelledby=\"radix-:R69pirm9jtsn7qb6ra:\" data-orientation=\"vertical\" class=\" data-open:animate-slide-down data-closed:animate-slide-up \" style=\"--radix-accordion-content-height:var(--radix-collapsible-content-height);--radix-accordion-content-width:var(--radix-collapsible-content-width)\"></div></div></div><div class=\"border-b mt-3 pb-3\"><div data-state=\"closed\" data-orientation=\"vertical\" class=\" group first:rounded-tl-md first:rounded-tr-md last:rounded-bl-md last:rounded-br-md overflow-hidden will-change-transform \"><button type=\"button\" aria-controls=\"radix-:Rq9pirm9jtsn7qb6ra:\" aria-expanded=\"false\" data-state=\"closed\" data-orientation=\"vertical\" id=\"radix-:Ra9pirm9jtsn7qb6ra:\" class=\" flex flex-row gap-3 items-center w-full text-left cursor-pointer outline-none focus-visible:ring-1 focus-visible:z-10 ring-foreground-light  justify-between\" data-radix-collection-item=\"\"><span class=\"text-foreground\">Do I need to create a new client for every route?</span><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-down  text-foreground-lighter rotate-0 group-state-open:rotate-180 group-data-[state=open]:rotate-180 ease-&amp;lsqb;cubic-bezier(0.87,_0,_0.13,_1)&amp;rsqb; transition-transform duration-300 duration-200  order-last\" aria-hidden=\"true\"><path d=\"m6 9 6 6 6-6\"></path></svg></button><div data-state=\"closed\" id=\"radix-:Rq9pirm9jtsn7qb6ra:\" hidden=\"\" role=\"region\" aria-labelledby=\"radix-:Ra9pirm9jtsn7qb6ra:\" data-orientation=\"vertical\" class=\" data-open:animate-slide-down data-closed:animate-slide-up \" style=\"--radix-accordion-content-height:var(--radix-collapsible-content-height);--radix-accordion-content-width:var(--radix-collapsible-content-width)\"></div></div></div></div></div></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose min-h-[34rem]\" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"utils/supabase/client.ts\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">utils/supabase/</span>client.ts</div></div><div title=\"utils/supabase/server.ts\" data-ch-tab=\"north\" data-active=\"false\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">utils/supabase/</span>server.ts</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createBrowserClient } from '@supabase/ssr'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>export function createClient() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  return createBrowserClient(</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    process.env.NEXT_PUBLIC_SUPABASE_URL!,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  )</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">4</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Hook up middleware</h3><p>Create a <code>middleware.ts</code> file at the root of your project.</p><p>Since Server Components can't write cookies, you need middleware to refresh expired Auth tokens and store them.</p><p>The middleware is responsible for:</p><ol>\n<li>Refreshing the Auth token (by calling <code>supabase.auth.getUser</code>).</li>\n<li>Passing the refreshed Auth token to Server Components, so they don't attempt to refresh the same token themselves. This is accomplished with <code>request.cookies.set</code>.</li>\n<li>Passing the refreshed Auth token to the browser, so it replaces the old token. This is accomplished with <code>response.cookies.set</code>.</li>\n</ol><p>Copy the middleware code for your app.</p><p>Add a <a href=\"https://nextjs.org/docs/app/building-your-application/routing/middleware#matching-paths\">matcher</a> so the middleware doesn't run on routes that don't access Supabase.</p><div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text [&amp;>svg]:text-destructive-200 [&amp;>svg]:bg-destructive-600 mb-2 [&amp;_svg]:bg-destructive [&amp;_svg]:text-white bg-alternative border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>Be careful when protecting pages. The server gets the user session from the cookies, which can be spoofed by anyone.</p><p>Always use <code>supabase.auth.getUser()</code> to protect pages and user data.</p><p><em>Never</em> trust <code>supabase.auth.getSession()</code> inside server code such as middleware. It isn't guaranteed to revalidate the Auth token.</p><p>It's safe to trust <code>getUser()</code> because it sends a request to the Supabase Auth server every time to revalidate the Auth token.</p></div></div></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose min-h-[800px]\" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"middleware.ts\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>middleware.ts</div></div><div title=\"utils/supabase/middleware.ts\" data-ch-tab=\"north\" data-active=\"false\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">utils/supabase/</span>middleware.ts</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>import { type NextRequest } from 'next/server'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>import { updateSession } from '@/utils/supabase/middleware'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>export async function middleware(request: NextRequest) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>  return await updateSession(request)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>export const config = {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>  matcher: [</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>    /*</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>     * Match all request paths except for the ones starting with:</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>     * - _next/static (static files)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>     * - _next/image (image optimization files)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>     * - favicon.ico (favicon file)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>     * Feel free to modify this pattern to include more paths.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>     */</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>    '/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>  ],</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->19</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">5</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Create a login page</h3><p>Create a login page for your app. Use a Server Action to call the Supabase signup function.</p><p>Since Supabase is being called from an Action, use the client defined in <code>@/utils/supabase/server.ts</code>.</p><div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text-foreground [&amp;>svg]:text-background [&amp;>svg]:bg-foreground mb-2 [&amp;_svg]:bg-foreground-muted [&amp;_svg]:text-background-muted bg-surface-200/25 border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>Note that <code>cookies</code> is called before any calls to Supabase, which opts fetch calls out of Next.js's caching. This is important for authenticated data fetches, to ensure that users get access only to their own data.</p><p>See the Next.js docs to learn more about <a href=\"https://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating#opting-out-of-data-caching\">opting out of data caching</a>.</p></div></div></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose min-h-[34rem]\" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"app/login/page.tsx\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">app/login/</span>page.tsx</div></div><div title=\"app/login/actions.ts\" data-ch-tab=\"north\" data-active=\"false\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">app/login/</span>actions.ts</div></div><div title=\"app/error/page.tsx\" data-ch-tab=\"north\" data-active=\"false\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">app/error/</span>page.tsx</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>import { login, signup } from './actions'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>export default function LoginPage() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  return (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;form&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;label htmlFor=\"email\"&gt;Email:&lt;/label&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;input id=\"email\" name=\"email\" type=\"email\" required /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;label htmlFor=\"password\"&gt;Password:&lt;/label&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;input id=\"password\" name=\"password\" type=\"password\" required /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;button formAction={login}&gt;Log in&lt;/button&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;button formAction={signup}&gt;Sign up&lt;/button&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;/form&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  )</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">6</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Change the Auth confirmation path</h3><p>If you have email confirmation turned on (the default), a new user will receive an email confirmation after signing up.</p><p>Change the email template to support a server-side authentication flow.</p><p>Go to the <a href=\"https://supabase.com/dashboard/project/_/auth/templates\">Auth templates</a> page in your dashboard. In the <code>Confirm signup</code> template, change <code>{{ .ConfirmationURL }}</code> to <code>{{ .SiteURL }}/auth/confirm?token_hash={{ .TokenHash }}&amp;type=signup</code>.</p></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">7</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Create a route handler for Auth confirmation</h3><p>Create a Route Handler for <code>auth/confirm</code>. When a user clicks their confirmation email link, exchange their secure code for an Auth token.</p><p>Since this is a Router Handler, use the Supabase client from <code>@/utils/supabase/server.ts</code>.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"app/auth/confirm/route.ts\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">app/auth/confirm/</span>route.ts</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>import { type EmailOtpType } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>import { type NextRequest } from 'next/server'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createClient } from '@/utils/supabase/server'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>import { redirect } from 'next/navigation'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>export async function GET(request: NextRequest) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>  const { searchParams } = new URL(request.url)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>  const token_hash = searchParams.get('token_hash')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>  const type = searchParams.get('type') as EmailOtpType | null</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>  const next = searchParams.get('next') ?? '/'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>  if (token_hash &amp;&amp; type) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>    const supabase = createClient()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>    const { error } = await supabase.auth.verifyOtp({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>      type,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>      token_hash,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>    })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>    if (!error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>      // redirect user to specified redirect URL or root of app</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>      redirect(next)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>  // redirect the user to an error page with some instructions</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>  redirect('/error')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">8</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Access user info from Server Component</h3><p>Server Components can read cookies, so you can get the Auth status and user info.</p><p>Since you're calling Supabase from a Server Component, use the client created in <code>@/utils/supabase/server.ts</code>.</p><p>Create a <code>private</code> page that users can only access if they're logged in. The page displays their email.</p><div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text [&amp;>svg]:text-destructive-200 [&amp;>svg]:bg-destructive-600 mb-2 [&amp;_svg]:bg-destructive [&amp;_svg]:text-white bg-alternative border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>Be careful when protecting pages. The server gets the user session from the cookies, which can be spoofed by anyone.</p><p>Always use <code>supabase.auth.getUser()</code> to protect pages and user data.</p><p><em>Never</em> trust <code>supabase.auth.getSession()</code> inside Server Components. It isn't guaranteed to revalidate the Auth token.</p><p>It's safe to trust <code>getUser()</code> because it sends a request to the Supabase Auth server every time to revalidate the Auth token.</p></div></div></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"app/private/page.tsx\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">app/private/</span>page.tsx</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>import { redirect } from 'next/navigation'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createClient } from '@/utils/supabase/server'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>export default async function PrivatePage() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  const supabase = createClient()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  const { data, error } = await supabase.auth.getUser()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  if (error || !data?.user) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>    redirect('/login')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  return &lt;p&gt;Hello {data.user.email}&lt;/p&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div></div></div></div></div></div><h2 id=\"congratulations\" class=\"group scroll-mt-24\">Congratulations<a href=\"#congratulations\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2><p>You're done! To recap, you've successfully:</p><ul>\n<li>Called Supabase from a Server Action.</li>\n<li>Called Supabase from a Server Component.</li>\n<li>Set up a Supabase client utility to call Supabase from a Client Component. You can use this if you need to call Supabase from a Client Component, for example to set up a realtime subscription.</li>\n<li>Set up middleware to automatically refresh the Supabase Auth session.</li>\n</ul><p>You can now use any Supabase features from your client or server code!</p></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R1m9jtsn7qb6ra:-trigger-pages\" hidden=\"\" id=\"radix-:R1m9jtsn7qb6ra:-content-pages\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R1m9jtsn7qb6ra:-trigger-hybrid\" hidden=\"\" id=\"radix-:R1m9jtsn7qb6ra:-content-hybrid\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/server-side/nextjs",
        "title": "Setting up Server-Side Auth for Next.js | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Setting%20up%20Server-Side%20Auth%20for%20Next.js&description=undefined",
        "ogTitle": "Setting up Server-Side Auth for Next.js | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/server-side/nextjs",
        "modifiedTime": "2024-09-10T20:36:24.980Z",
        "publishedTime": "2024-09-10T20:36:24.980Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# MFA Verification Hook\n\n* * *\n\nYou can add additional checks to the [Supabase MFA implementation](/docs/guides/auth/auth-mfa) with hooks. For example, you can:\n\n- Limit the number of verification attempts performed over a period of time.\n- Sign out users who have too many invalid verification attempts.\n- Count, rate limit, or ban sign-ins.\n\n**Inputs**\n\nSupabase Auth will send a payload containing these fields to your hook:\n\n| Field | Type | Description |\n| --- | --- | --- |\n| `factor_id` | `string` | Unique identifier for the MFA factor being verified |\n| `factor_type` | `string` | `totp` or `phone` |\n| `user_id` | `string` | Unique identifier for the user |\n| `valid` | `boolean` | Whether the verification attempt was valid. For TOTP, this means that the six digit code was correct (true) or incorrect (false). |\n\nJSONJSON Schema\n\n`\n_10\n{\n_10\n\"factor_id\": \"6eab6a69-7766-48bf-95d8-bd8f606894db\",\n_10\n\"user_id\": \"3919cb6e-4215-4478-a960-6d3454326cec\",\n_10\n\"valid\": true\n_10\n}\n`\n\n**Outputs**\n\nReturn this if your hook processed the input without errors.\n\n| Field | Type | Description |\n| --- | --- | --- |\n| `decision` | `string` | The decision on whether to allow authentication to move forward. Use `reject` to deny the verification attempt and log the user out of all active sessions. Use `continue` to use the default Supabase Auth behavior. |\n| `message` | `string` | The message to show the user if the decision was `reject`. |\n\n`\n_10\n{\n_10\n\"decision\": \"reject\",\n_10\n\"message\": \"You have exceeded maximum number of MFA attempts.\"\n_10\n}\n`\n\nSQL\n\nLimit failed MFA verification attempts\n\nYour company requires that a user can input an incorrect MFA Verification code no more than once every 2 seconds.\n\nCreate a table to record the last time a user had an incorrect MFA verification attempt for a factor.\n\n`\n_10\ncreate table public.mfa_failed_verification_attempts (\n_10\nuser_id uuid not null,\n_10\nfactor_id uuid not null,\n_10\nlast_failed_at timestamp not null default now(),\n_10\nprimary key (user_id, factor_id)\n_10\n);\n`\n\nCreate a hook to read and write information to this table. For example:\n\n`\n_58\ncreate function public.hook_mfa_verification_attempt(event jsonb)\n_58\nreturns jsonb\n_58\nlanguage plpgsql\n_58\nas $$\n_58\ndeclare\n_58\n    last_failed_at timestamp;\n_58\nbegin\n_58\n    if event->'valid' is true then\n_58\n      -- code is valid, accept it\n_58\n      return jsonb_build_object('decision', 'continue');\n_58\n    end if;\n_58\n_58\n    select last_failed_at into last_failed_at\n_58\n      from public.mfa_failed_verification_attempts\n_58\n      where\n_58\n        user_id = event->'user_id'\n_58\n          and\n_58\n        factor_id = event->'factor_id';\n_58\n_58\n    if last_failed_at is not null and now() - last_failed_at < interval '2 seconds' then\n_58\n      -- last attempt was done too quickly\n_58\n      return jsonb_build_object(\n_58\n        'error', jsonb_build_object(\n_58\n          'http_code', 429,\n_58\n          'message',   'Please wait a moment before trying again.'\n_58\n        )\n_58\n      );\n_58\n    end if;\n_58\n_58\n    -- record this failed attempt\n_58\n    insert into public.mfa_failed_verification_attempts\n_58\n      (\n_58\n        user_id,\n_58\n        factor_id,\n_58\n        last_refreshed_at\n_58\n      )\n_58\n      values\n_58\n      (\n_58\n        event->'user_id',\n_58\n        event->'factor_id',\n_58\n        now()\n_58\n      )\n_58\n      on conflict do update\n_58\n        set last_refreshed_at = now();\n_58\n_58\n    -- finally let Supabase Auth do the default behavior for a failed attempt\n_58\n    return jsonb_build_object('decision', 'continue');\n_58\nend;\n_58\n$$;\n_58\n_58\n-- Assign appropriate permissions and revoke access\n_58\ngrant all\n_58\non table public.mfa_failed_verification_attempts\n_58\nto supabase_auth_admin;\n_58\n_58\nrevoke all\n_58\non table public.mfa_failed_verification_attempts\n_58\nfrom authenticated, anon, public;\n`",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">MFA Verification Hook</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>You can add additional checks to the <a href=\"/docs/guides/auth/auth-mfa\">Supabase MFA implementation</a> with hooks. For example, you can:</p>\n<ul>\n<li>Limit the number of verification attempts performed over a period of time.</li>\n<li>Sign out users who have too many invalid verification attempts.</li>\n<li>Count, rate limit, or ban sign-ins.</li>\n</ul>\n<p><strong>Inputs</strong></p>\n<p>Supabase Auth will send a payload containing these fields to your hook:</p>\n<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>factor_id</code></td><td><code>string</code></td><td>Unique identifier for the MFA factor being verified</td></tr><tr><td><code>factor_type</code></td><td><code>string</code></td><td><code>totp</code> or <code>phone</code></td></tr><tr><td><code>user_id</code></td><td><code>string</code></td><td>Unique identifier for the user</td></tr><tr><td><code>valid</code></td><td><code>boolean</code></td><td>Whether the verification attempt was valid. For TOTP, this means that the six digit code was correct (true) or incorrect (false).</td></tr></tbody></table>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R5m9jtsn7qb6ra:-content-mfa-verification-attempt-json\" data-state=\"active\" id=\"radix-:R5m9jtsn7qb6ra:-trigger-mfa-verification-attempt-json\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JSON</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R5m9jtsn7qb6ra:-content-mfa-verification-attempt-json-schema\" data-state=\"inactive\" id=\"radix-:R5m9jtsn7qb6ra:-trigger-mfa-verification-attempt-json-schema\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JSON Schema</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R5m9jtsn7qb6ra:-trigger-mfa-verification-attempt-json\" id=\"radix-:R5m9jtsn7qb6ra:-content-mfa-verification-attempt-json\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"factor_id\": \"6eab6a69-7766-48bf-95d8-bd8f606894db\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"user_id\": \"3919cb6e-4215-4478-a960-6d3454326cec\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"valid\": true</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R5m9jtsn7qb6ra:-trigger-mfa-verification-attempt-json-schema\" hidden=\"\" id=\"radix-:R5m9jtsn7qb6ra:-content-mfa-verification-attempt-json-schema\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p><strong>Outputs</strong></p>\n<p>Return this if your hook processed the input without errors.</p>\n<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>decision</code></td><td><code>string</code></td><td>The decision on whether to allow authentication to move forward. Use <code>reject</code> to deny the verification attempt and log the user out of all active sessions. Use <code>continue</code> to use the default Supabase Auth behavior.</td></tr><tr><td><code>message</code></td><td><code>string</code></td><td>The message to show the user if the decision was <code>reject</code>.</td></tr></tbody></table>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"decision\": \"reject\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"message\": \"You have exceeded maximum number of MFA attempts.\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R6u9jtsn7qb6ra:-content-sql\" data-state=\"active\" id=\"radix-:R6u9jtsn7qb6ra:-trigger-sql\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>SQL</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6u9jtsn7qb6ra:-trigger-sql\" id=\"radix-:R6u9jtsn7qb6ra:-content-sql\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R7eu9jtsn7qb6ra:-content-sql-limit-failed-mfa-verification-attempts\" data-state=\"active\" id=\"radix-:R7eu9jtsn7qb6ra:-trigger-sql-limit-failed-mfa-verification-attempts\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Limit failed MFA verification attempts</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R7eu9jtsn7qb6ra:-trigger-sql-limit-failed-mfa-verification-attempts\" id=\"radix-:R7eu9jtsn7qb6ra:-content-sql-limit-failed-mfa-verification-attempts\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>Your company requires that a user can input an incorrect MFA Verification code no more than once every 2 seconds.</p><p>Create a table to record the last time a user had an incorrect MFA verification attempt for a factor.</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>create table public.mfa_failed_verification_attempts (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  user_id uuid not null,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  factor_id uuid not null,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  last_failed_at timestamp not null default now(),</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  primary key (user_id, factor_id)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>);</span></div></div><br></code></div></div><p>Create a hook to read and write information to this table. For example:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>create function public.hook_mfa_verification_attempt(event jsonb)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>  returns jsonb</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>  language plpgsql</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>as $$</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>  declare</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>    last_failed_at timestamp;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>  begin</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>    if event-&gt;'valid' is true then</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>      -- code is valid, accept it</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>      return jsonb_build_object('decision', 'continue');</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>    end if;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>    select last_failed_at into last_failed_at</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>      from public.mfa_failed_verification_attempts</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>      where</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>        user_id = event-&gt;'user_id'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>          and</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>        factor_id = event-&gt;'factor_id';</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>    if last_failed_at is not null and now() - last_failed_at &lt; interval '2 seconds' then</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>      -- last attempt was done too quickly</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>      return jsonb_build_object(</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>        'error', jsonb_build_object(</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>          'http_code', 429,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>          'message',   'Please wait a moment before trying again.'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>        )</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>      );</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>    end if;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>    -- record this failed attempt</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>    insert into public.mfa_failed_verification_attempts</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>      (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>        user_id,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>        factor_id,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>        last_refreshed_at</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>      )</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>      values</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>      (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>        event-&gt;'user_id',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>        event-&gt;'factor_id',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>        now()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>      )</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>      on conflict do update</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>        set last_refreshed_at = now();</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>    -- finally let Supabase Auth do the default behavior for a failed attempt</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>    return jsonb_build_object('decision', 'continue');</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>  end;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>$$;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>-- Assign appropriate permissions and revoke access</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>grant all</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>  on table public.mfa_failed_verification_attempts</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>  to supabase_auth_admin;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>revoke all</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>  on table public.mfa_failed_verification_attempts</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->58</span><div style=\"display:inline-block;margin-left:16px\"><span>  from authenticated, anon, public;</span></div></div><br></code></div></div></div></div></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-hooks/mfa-verification-hook",
        "title": "MFA Verification Hook | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=MFA%20Verification%20Hook&description=undefined",
        "ogTitle": "MFA Verification Hook | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-hooks/mfa-verification-hook",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Multi-Factor Authentication\n\n* * *\n\nMulti-factor authentication (MFA), sometimes called two-factor authentication (2FA), adds an additional layer of security to your application by verifying their identity through additional verification steps.\n\nIt is considered a best practice to use MFA for your applications.\n\nUsers with weak passwords or compromised social login accounts are prone to malicious account takeovers. These can be prevented with MFA because they require the user to provide proof of both of these:\n\n- Something they know.\nPassword, or access to a social-login account.\n- Something they have.\nAccess to an authenticator app (a.k.a. TOTP) or a mobile phone.\n\n## Overview [\\#](\\#overview)\n\nSupabase Auth implements MFA via two methods: App Authenticator, which makes use of a Time based-one Time Password, and phone messaging, which makes use of a code generated by Supabase Auth.\n\nApplications using MFA require two important flows:\n\n1. **Enrollment flow.**\nThis lets users set up and control MFA in your app.\n2. **Authentication flow.**\nThis lets users sign in using any factors after the conventional login step.\n\nSupabase Auth provides:\n\n- **Enrollment API** \\- build rich user interfaces for adding and removing factors.\n- **Challenge and Verify APIs** \\- securely verify that the user has access to a factor.\n- **List Factors API** \\- build rich user interfaces for signing in with additional factors.\n\nYou can control access to the Enrollment API as well as the Challenge and Verify APIs via the Supabase Dashboard. A setting of `Verification Disabled` will disable both the challenge API and the verification API.\n\nThese sets of APIs let you control the MFA experience that works for you. You can create flows where MFA is optional, mandatory for all, or only specific groups of users.\n\nOnce users have enrolled or signed-in with a factor, Supabase Auth adds additional metadata to the user's access token (JWT) that your application can use to allow or deny access.\n\nThis information is represented by an [Authenticator Assurance Level](https://pages.nist.gov/800-63-3-Implementation-Resources/63B/AAL/), a standard measure about the assurance of the user's identity Supabase Auth has for that particular session. There are two levels recognized today:\n\n1. **Assurance Level 1: `aal1`**\nMeans that the user's identity was verified using a conventional login method\nsuch as email+password, magic link, one-time password, phone auth or social\nlogin.\n2. **Assurance Level 2: `aal2`**\nMeans that the user's identity was additionally verified using at least one\nsecond factor, such as a TOTP code or One-Time Password code.\n\nThis assurance level is encoded in the `aal` claim in the JWT associated with the user. By decoding this value you can create custom authorization rules in your frontend, backend, and database that will enforce the MFA policy that works for your application. JWTs without an `aal` claim are at the `aal1` level.\n\n## Adding to your app [\\#](\\#adding-to-your-app)\n\nAdding MFA to your app involves these four steps:\n\n1. **Add enrollment flow.**\nYou need to provide a UI within your app that your users will be able to set-up\nMFA in. You can add this right after sign-up, or as part of a separate flow in\nthe settings portion of your app.\n2. **Add unenroll flow.**\nYou need to support a UI through which users can see existing devices and unenroll\ndevices which are no longer relevant.\n3. **Add challenge step to login.**\nIf a user has set-up MFA, your app's login flow needs to present a challenge\nscreen to the user asking them to prove they have access to the additional\nfactor.\n4. **Enforce rules for MFA logins.**\nOnce your users have a way to enroll and log in with MFA, you need to enforce\nauthorization rules across your app: on the frontend, backend, API servers or\nRow-Level Security policies.\n\nThe enrollment flow and the challenge steps differ by factor and are covered on a separate page. Visit the [Phone](/docs/guides/auth/auth-mfa/phone) or [App Authenticator](/docs/guides/auth/auth-mfa/totp) pages to see how to add the flows for the respective factors. You can combine both flows and allow for use of both Phone and App Authenticator Factors.\n\n### Add unenroll flow [\\#](\\#add-unenroll-flow)\n\nThe unenroll process is the same for both Phone and TOTP factors.\n\nAn unenroll flow provides a UI for users to manage and unenroll factors linked to their accounts. Most applications do so via a factor management page where users can view and unlink selected factors.\n\nWhen a user unenrolls a factor, call `supabase.auth.mfa.unenroll()` with the ID of the factor. For example, call:\n\n`\n_10\nsupabase.auth.mfa.unenroll({factorId: \"d30fd651-184e-4748-a928-0a4b9be1d429\"})\n`\n\nto unenroll a factor with ID `d30fd651-184e-4748-a928-0a4b9be1d429`.\n\n### Enforce rules for MFA logins [\\#](\\#enforce-rules-for-mfa-logins)\n\nAdding MFA to your app's UI does not in-and-of-itself offer a higher level of security to your users. You also need to enforce the MFA rules in your application's database, APIs, and server-side rendering.\n\nDepending on your application's needs, there are three ways you can choose to enforce MFA.\n\n1. **Enforce for all users (new and existing).**\nAny user account will have to enroll MFA to continue using your app.\nThe application will not allow access without going through MFA first.\n2. **Enforce for new users only.**\nOnly new users will be forced to enroll MFA, while old users will be encouraged\nto do so.\nThe application will not allow access for new users without going through MFA\nfirst.\n3. **Enforce only for users that have opted-in.**\nUsers that want MFA can enroll in it and the application will not allow access\nwithout going through MFA first.\n\n#### Example: React [\\#](\\#example-react)\n\nBelow is an example that creates a new `UnenrollMFA` component that illustrates the important pieces of the MFA enrollment flow. Note that users can only unenroll a factor after completing the enrollment flow and obtaining an `aal2` JWT claim. Here are some points of note:\n\n- When the component appears on screen, the `supabase.auth.mfa.listFactors()` endpoint\nfetches all existing factors together with their details.\n- The existing factors for a user are displayed in a table.\n- Once the user has selected a factor to unenroll, they can type in the factorId and click **Unenroll**\nwhich creates a confirmation modal.\n\nUnenrolling a factor will downgrade the assurance level from `aal2` to `aal1` only after the refresh interval has lapsed. For an immediate downgrade from `aal2` to `aal1` after enrolling one will need to manually call `refreshSession()`\n\n`\n_46\n/**\n_46\n* UnenrollMFA shows a simple table with the list of factors together with a button to unenroll.\n_46\n* When a user types in the factorId of the factor that they wish to unenroll and clicks unenroll\n_46\n* the corresponding factor will be unenrolled.\n_46\n*/\n_46\nexport function UnenrollMFA() {\n_46\nconst [factorId, setFactorId] = useState('')\n_46\nconst [factors, setFactors] = useState([])\n_46\nconst [error, setError] = useState('') // holds an error message\n_46\n_46\nuseEffect(() => {\n_46\n    ;(async () => {\n_46\n      const { data, error } = await supabase.auth.mfa.listFactors()\n_46\n      if (error) {\n_46\n        throw error\n_46\n      }\n_46\n_46\n      setFactors([...data.totp, ...data.phone])\n_46\n    })()\n_46\n}, [])\n_46\n_46\nreturn (\n_46\n    <>\n_46\n      {error && <div className=\"error\">{error}</div>}\n_46\n      <tbody>\n_46\n        <tr>\n_46\n          <td>Factor ID</td>\n_46\n          <td>Friendly Name</td>\n_46\n          <td>Factor Status</td>\n_46\n          <td>Phone Number</td>\n_46\n        </tr>\n_46\n        {factors.map((factor) => (\n_46\n          <tr>\n_46\n            <td>{factor.id}</td>\n_46\n            <td>{factor.friendly_name}</td>\n_46\n            <td>{factor.factor_type}</td>\n_46\n            <td>{factor.status}</td>\n_46\n            <td>{factor.phone}</td>\n_46\n          </tr>\n_46\n        ))}\n_46\n      </tbody>\n_46\n      <input type=\"text\" value={verifyCode} onChange={(e) => setFactorId(e.target.value.trim())} />\n_46\n      <button onClick={() => supabase.auth.mfa.unenroll({ factorId })}>Unenroll</button>\n_46\n    </>\n_46\n)\n_46\n}\n`\n\n#### Database [\\#](\\#database)\n\nYour app should sufficiently deny or allow access to tables or rows based on the user's current and possible authenticator levels.\n\nPostgreSQL has two types of policies: permissive and restrictive. This guide uses restrictive policies. Make sure you don't omit the `as restrictive` clause.\n\n##### Enforce for all users (new and existing)\n\nIf your app falls under this case, this is a template Row Level Security policy you can apply to all your tables:\n\n`\n_10\ncreate policy \"Policy name.\"\n_10\non table_name\n_10\nas restrictive\n_10\nto authenticated\n_10\nusing ((select auth.jwt()->>'aal') = 'aal2');\n`\n\n- Here the policy will not accept any JWTs with an `aal` claim other than\n`aal2`, which is the highest authenticator assurance level.\n- **Using `as restrictive` ensures this policy will restrict all commands on the**\n**table regardless of other policies!**\n\n##### Enforce for new users only\n\nIf your app falls under this case, the rules get more complex. User accounts created past a certain timestamp must have a `aal2` level to access the database.\n\n`\n_13\ncreate policy \"Policy name.\"\n_13\non table_name\n_13\nas restrictive -- very important!\n_13\nto authenticated\n_13\nusing\n_13\n    (array[(select auth.jwt()->>'aal')] <@ (\n_13\n       select\n_13\n         case\n_13\n           when created_at >= '2022-12-12T00:00:00Z' then array['aal2']\n_13\n           else array['aal1', 'aal2']\n_13\n         end as aal\n_13\n       from auth.users\n_13\n       where (select auth.uid()) = id));\n`\n\n- The policy will accept both `aal1` and `aal2` for users with a `created_at`\ntimestamp prior to 12th December 2022 at 00:00 UTC, but will only accept\n`aal2` for all other timestamps.\n- The `<@` operator is PostgreSQL's [\"contained in\"\\\\\noperator.](https://www.postgresql.org/docs/current/functions-array.html)\n- **Using `as restrictive` ensures this policy will restrict all commands on the**\n**table regardless of other policies!**\n\n##### Enforce only for users that have opted-in\n\nUsers that have enrolled MFA on their account are expecting that your\napplication only works for them if they've gone through MFA.\n\n`\n_14\ncreate policy \"Policy name.\"\n_14\non table_name\n_14\nas restrictive -- very important!\n_14\nto authenticated\n_14\nusing (\n_14\n    array[(select auth.jwt()->>'aal')] <@ (\n_14\n      select\n_14\n          case\n_14\n            when count(id) > 0 then array['aal2']\n_14\n            else array['aal1', 'aal2']\n_14\n          end as aal\n_14\n        from auth.mfa_factors\n_14\n        where ((select auth.uid()) = user_id) and status = 'verified'\n_14\n    ));\n`\n\n- The policy will only accept only `aal2` when the user has at least one MFA\nfactor verified.\n- Otherwise, it will accept both `aal1` and `aal2`.\n- The `<@` operator is PostgreSQL's [\"contained in\"\\\\\noperator.](https://www.postgresql.org/docs/current/functions-array.html)\n- **Using `as restrictive` ensures this policy will restrict all commands on the**\n**table regardless of other policies!**\n\n### Server-Side Rendering [\\#](\\#server-side-rendering)\n\nWhen using the Supabase JavaScript library in a server-side rendering context, make sure you always create a new object for each request! This will prevent you from accidentally rendering and serving content belonging to different users.\n\nIt is possible to enforce MFA on the Server-Side Rendering level. However, this can be tricky do to well.\n\nYou can use the `supabase.auth.mfa.getAuthenticatorAssuranceLevel()` and `supabase.auth.mfa.listFactors()` APIs to identify the AAL level of the session and any factors that are enabled for a user, similar to how you would use these on the browser.\n\nHowever, encountering a different AAL level on the server may not actually be a security problem. Consider these likely scenarios:\n\n1. User signed-in with a conventional method but closed their tab on the MFA\nflow.\n2. User forgot a tab open for a very long time. (This happens more often than\nyou might imagine.)\n3. User has lost their authenticator device and is confused about the next\nsteps.\n\nWe thus recommend you redirect users to a page where they can authenticate using their additional factor, instead of rendering a HTTP 401 Unauthorized or HTTP 403 Forbidden content.\n\n### APIs [\\#](\\#apis)\n\nIf your application uses the Supabase Database, Storage or Edge Functions, just using Row Level Security policies will give you sufficient protection. In the event that you have other APIs that you wish to protect, follow these general guidelines:\n\n1. **Use a good JWT verification and parsing library for your language.**\nThis will let you securely parse JWTs and extract their claims.\n2. **Retrieve the `aal` claim from the JWT and compare its value according to**\n**your needs.**\nIf you've encountered an AAL level that can be increased, ask the user to\ncontinue the login process instead of logging them out.\n3. **Use the `https://<project-ref>.supabase.co/rest/v1/auth/factors` REST**\n**endpoint to identify if the user has enrolled any MFA factors.**\nOnly `verified` factors should be acted upon.\n\n## Frequently asked questions [\\#](\\#frequently-asked-questions)\n\nHow do I check when a user went through MFA?",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Multi-Factor Authentication</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>Multi-factor authentication (MFA), sometimes called two-factor authentication (2FA), adds an additional layer of security to your application by verifying their identity through additional verification steps.</p>\n<p>It is considered a best practice to use MFA for your applications.</p>\n<p>Users with weak passwords or compromised social login accounts are prone to malicious account takeovers. These can be prevented with MFA because they require the user to provide proof of both of these:</p>\n<ul>\n<li>Something they know.\nPassword, or access to a social-login account.</li>\n<li>Something they have.\nAccess to an authenticator app (a.k.a. TOTP) or a mobile phone.</li>\n</ul>\n<h2 id=\"overview\" class=\"group scroll-mt-24\">Overview<a href=\"#overview\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Supabase Auth implements MFA via two methods: App Authenticator, which makes use of a Time based-one Time Password, and phone messaging, which makes use of a code generated by Supabase Auth.</p>\n<p>Applications using MFA require two important flows:</p>\n<ol>\n<li><strong>Enrollment flow.</strong>\nThis lets users set up and control MFA in your app.</li>\n<li><strong>Authentication flow.</strong>\nThis lets users sign in using any factors after the conventional login step.</li>\n</ol>\n<p>Supabase Auth provides:</p>\n<ul>\n<li><strong>Enrollment API</strong> - build rich user interfaces for adding and removing factors.</li>\n<li><strong>Challenge and Verify APIs</strong> - securely verify that the user has access to a factor.</li>\n<li><strong>List Factors API</strong> - build rich user interfaces for signing in with additional factors.</li>\n</ul>\n<p>You can control access to the Enrollment API as well as the Challenge and Verify APIs via the Supabase Dashboard. A setting of <code>Verification Disabled</code> will disable both the challenge API and the verification API.</p>\n<p>These sets of APIs let you control the MFA experience that works for you. You can create flows where MFA is optional, mandatory for all, or only specific groups of users.</p>\n<p>Once users have enrolled or signed-in with a factor, Supabase Auth adds additional metadata to the user's access token (JWT) that your application can use to allow or deny access.</p>\n<p>This information is represented by an <a href=\"https://pages.nist.gov/800-63-3-Implementation-Resources/63B/AAL/\">Authenticator Assurance Level</a>, a standard measure about the assurance of the user's identity Supabase Auth has for that particular session. There are two levels recognized today:</p>\n<ol>\n<li><strong>Assurance Level 1: <code>aal1</code></strong>\nMeans that the user's identity was verified using a conventional login method\nsuch as email+password, magic link, one-time password, phone auth or social\nlogin.</li>\n<li><strong>Assurance Level 2: <code>aal2</code></strong>\nMeans that the user's identity was additionally verified using at least one\nsecond factor, such as a TOTP code or One-Time Password code.</li>\n</ol>\n<p>This assurance level is encoded in the <code>aal</code> claim in the JWT associated with the user. By decoding this value you can create custom authorization rules in your frontend, backend, and database that will enforce the MFA policy that works for your application. JWTs without an <code>aal</code> claim are at the <code>aal1</code> level.</p>\n<h2 id=\"adding-to-your-app\" class=\"group scroll-mt-24\">Adding to your app<a href=\"#adding-to-your-app\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Adding MFA to your app involves these four steps:</p>\n<ol>\n<li><strong>Add enrollment flow.</strong>\nYou need to provide a UI within your app that your users will be able to set-up\nMFA in. You can add this right after sign-up, or as part of a separate flow in\nthe settings portion of your app.</li>\n<li><strong>Add unenroll flow.</strong>\nYou need to support a UI through which users can see existing devices and unenroll\ndevices which are no longer relevant.</li>\n<li><strong>Add challenge step to login.</strong>\nIf a user has set-up MFA, your app's login flow needs to present a challenge\nscreen to the user asking them to prove they have access to the additional\nfactor.</li>\n<li><strong>Enforce rules for MFA logins.</strong>\nOnce your users have a way to enroll and log in with MFA, you need to enforce\nauthorization rules across your app: on the frontend, backend, API servers or\nRow-Level Security policies.</li>\n</ol>\n<p>The enrollment flow and the challenge steps differ by factor and are covered on a separate page. Visit the <a href=\"/docs/guides/auth/auth-mfa/phone\">Phone</a> or <a href=\"/docs/guides/auth/auth-mfa/totp\">App Authenticator</a> pages to see how to add the flows for the respective factors. You can combine both flows and allow for use of both Phone and App Authenticator Factors.</p>\n<h3 id=\"add-unenroll-flow\" class=\"group scroll-mt-24\">Add unenroll flow<a href=\"#add-unenroll-flow\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>The unenroll process is the same for both Phone and TOTP factors.</p>\n<p>An unenroll flow provides a UI for users to manage and unenroll factors linked to their accounts. Most applications do so via a factor management page where users can view and unlink selected factors.</p>\n<p>When a user unenrolls a factor, call <code>supabase.auth.mfa.unenroll()</code> with the ID of the factor. For example, call:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>supabase.auth.mfa.unenroll({factorId: \"d30fd651-184e-4748-a928-0a4b9be1d429\"})</span></div></div><br></code></div></div>\n<p>to unenroll a factor with ID <code>d30fd651-184e-4748-a928-0a4b9be1d429</code>.</p>\n<h3 id=\"enforce-rules-for-mfa-logins\" class=\"group scroll-mt-24\">Enforce rules for MFA logins<a href=\"#enforce-rules-for-mfa-logins\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Adding MFA to your app's UI does not in-and-of-itself offer a higher level of security to your users. You also need to enforce the MFA rules in your application's database, APIs, and server-side rendering.</p>\n<p>Depending on your application's needs, there are three ways you can choose to enforce MFA.</p>\n<ol>\n<li><strong>Enforce for all users (new and existing).</strong>\nAny user account will have to enroll MFA to continue using your app.\nThe application will not allow access without going through MFA first.</li>\n<li><strong>Enforce for new users only.</strong>\nOnly new users will be forced to enroll MFA, while old users will be encouraged\nto do so.\nThe application will not allow access for new users without going through MFA\nfirst.</li>\n<li><strong>Enforce only for users that have opted-in.</strong>\nUsers that want MFA can enroll in it and the application will not allow access\nwithout going through MFA first.</li>\n</ol>\n<h4 id=\"example-react\" class=\"group scroll-mt-24\">Example: React<a href=\"#example-react\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h4>\n<p>Below is an example that creates a new <code>UnenrollMFA</code> component that illustrates the important pieces of the MFA enrollment flow. Note that users can only unenroll a factor after completing the enrollment flow and obtaining an <code>aal2</code> JWT claim. Here are some points of note:</p>\n<ul>\n<li>When the component appears on screen, the <code>supabase.auth.mfa.listFactors()</code> endpoint\nfetches all existing factors together with their details.</li>\n<li>The existing factors for a user are displayed in a table.</li>\n<li>Once the user has selected a factor to unenroll, they can type in the factorId and click <strong>Unenroll</strong>\nwhich creates a confirmation modal.</li>\n</ul>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text-foreground [&amp;>svg]:text-background [&amp;>svg]:bg-foreground mb-2 [&amp;_svg]:bg-foreground-muted [&amp;_svg]:text-background-muted bg-surface-200/25 border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>Unenrolling a factor will downgrade the assurance level from <code>aal2</code> to <code>aal1</code> only after the refresh interval has lapsed. For an immediate downgrade from <code>aal2</code> to <code>aal1</code> after enrolling one will need to manually call <code>refreshSession()</code></p></div></div>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>/**</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span> * UnenrollMFA shows a simple table with the list of factors together with a button to unenroll.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span> * When a user types in the factorId of the factor that they wish to unenroll and clicks unenroll</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span> * the corresponding factor will be unenrolled.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span> */</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>export function UnenrollMFA() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [factorId, setFactorId] = useState('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [factors, setFactors] = useState([])</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [error, setError] = useState('') // holds an error message</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>  useEffect(() =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>    ;(async () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>      const { data, error } = await supabase.auth.mfa.listFactors()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>      if (error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>        throw error</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>      setFactors([...data.totp, ...data.phone])</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>    })()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>  }, [])</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>  return (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>      {error &amp;&amp; &lt;div className=\"error\"&gt;{error}&lt;/div&gt;}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;tbody&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>        &lt;tr&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>          &lt;td&gt;Factor ID&lt;/td&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>          &lt;td&gt;Friendly Name&lt;/td&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>          &lt;td&gt;Factor Status&lt;/td&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>          &lt;td&gt;Phone Number&lt;/td&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>        &lt;/tr&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>        {factors.map((factor) =&gt; (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>          &lt;tr&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>            &lt;td&gt;{factor.id}&lt;/td&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>            &lt;td&gt;{factor.friendly_name}&lt;/td&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>            &lt;td&gt;{factor.factor_type}&lt;/td&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>            &lt;td&gt;{factor.status}&lt;/td&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>            &lt;td&gt;{factor.phone}&lt;/td&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>          &lt;/tr&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>        ))}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;/tbody&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;input type=\"text\" value={verifyCode} onChange={(e) =&gt; setFactorId(e.target.value.trim())} /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;button onClick={() =&gt; supabase.auth.mfa.unenroll({ factorId })}&gt;Unenroll&lt;/button&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;/&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>  )</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->46</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div>\n<h4 id=\"database\" class=\"group scroll-mt-24\">Database<a href=\"#database\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h4>\n<p>Your app should sufficiently deny or allow access to tables or rows based on the user's current and possible authenticator levels.</p>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>PostgreSQL has two types of policies: permissive and restrictive. This guide uses restrictive policies. Make sure you don't omit the <code>as restrictive</code> clause.</p></div></div>\n<h5>Enforce for all users (new and existing)</h5>\n<p>If your app falls under this case, this is a template Row Level Security policy you can apply to all your tables:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>create policy \"Policy name.\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  on table_name</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  as restrictive</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  to authenticated</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  using ((select auth.jwt()-&gt;&gt;'aal') = 'aal2');</span></div></div><br></code></div></div>\n<ul>\n<li>Here the policy will not accept any JWTs with an <code>aal</code> claim other than\n<code>aal2</code>, which is the highest authenticator assurance level.</li>\n<li><strong>Using <code>as restrictive</code> ensures this policy will restrict all commands on the\ntable regardless of other policies!</strong></li>\n</ul>\n<h5>Enforce for new users only</h5>\n<p>If your app falls under this case, the rules get more complex. User accounts created past a certain timestamp must have a <code>aal2</code> level to access the database.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>create policy \"Policy name.\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>  on table_name</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>  as restrictive -- very important!</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>  to authenticated</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>  using</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>    (array[(select auth.jwt()-&gt;&gt;'aal')] &lt;@ (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>       select</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>         case</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>           when created_at &gt;= '2022-12-12T00:00:00Z' then array['aal2']</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>           else array['aal1', 'aal2']</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>         end as aal</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>       from auth.users</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>       where (select auth.uid()) = id));</span></div></div><br></code></div></div>\n<ul>\n<li>The policy will accept both <code>aal1</code> and <code>aal2</code> for users with a <code>created_at</code>\ntimestamp prior to 12th December 2022 at 00:00 UTC, but will only accept\n<code>aal2</code> for all other timestamps.</li>\n<li>The <code>&lt;@</code> operator is PostgreSQL's <a href=\"https://www.postgresql.org/docs/current/functions-array.html\">\"contained in\"\noperator.</a></li>\n<li><strong>Using <code>as restrictive</code> ensures this policy will restrict all commands on the\ntable regardless of other policies!</strong></li>\n</ul>\n<h5>Enforce only for users that have opted-in</h5>\n<p>Users that have enrolled MFA on their account are expecting that your\napplication only works for them if they've gone through MFA.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>create policy \"Policy name.\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  on table_name</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  as restrictive -- very important!</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  to authenticated</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  using (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>    array[(select auth.jwt()-&gt;&gt;'aal')] &lt;@ (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>      select</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>          case</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>            when count(id) &gt; 0 then array['aal2']</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>            else array['aal1', 'aal2']</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>          end as aal</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>        from auth.mfa_factors</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>        where ((select auth.uid()) = user_id) and status = 'verified'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>    ));</span></div></div><br></code></div></div>\n<ul>\n<li>The policy will only accept only <code>aal2</code> when the user has at least one MFA\nfactor verified.</li>\n<li>Otherwise, it will accept both <code>aal1</code> and <code>aal2</code>.</li>\n<li>The <code>&lt;@</code> operator is PostgreSQL's <a href=\"https://www.postgresql.org/docs/current/functions-array.html\">\"contained in\"\noperator.</a></li>\n<li><strong>Using <code>as restrictive</code> ensures this policy will restrict all commands on the\ntable regardless of other policies!</strong></li>\n</ul>\n<h3 id=\"server-side-rendering\" class=\"group scroll-mt-24\">Server-Side Rendering<a href=\"#server-side-rendering\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text-foreground [&amp;>svg]:text-background [&amp;>svg]:bg-foreground mb-2 [&amp;_svg]:bg-foreground-muted [&amp;_svg]:text-background-muted bg-surface-200/25 border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>When using the Supabase JavaScript library in a server-side rendering context, make sure you always create a new object for each request! This will prevent you from accidentally rendering and serving content belonging to different users.</p></div></div>\n<p>It is possible to enforce MFA on the Server-Side Rendering level. However, this can be tricky do to well.</p>\n<p>You can use the <code>supabase.auth.mfa.getAuthenticatorAssuranceLevel()</code> and <code>supabase.auth.mfa.listFactors()</code> APIs to identify the AAL level of the session and any factors that are enabled for a user, similar to how you would use these on the browser.</p>\n<p>However, encountering a different AAL level on the server may not actually be a security problem. Consider these likely scenarios:</p>\n<ol>\n<li>User signed-in with a conventional method but closed their tab on the MFA\nflow.</li>\n<li>User forgot a tab open for a very long time. (This happens more often than\nyou might imagine.)</li>\n<li>User has lost their authenticator device and is confused about the next\nsteps.</li>\n</ol>\n<p>We thus recommend you redirect users to a page where they can authenticate using their additional factor, instead of rendering a HTTP 401 Unauthorized or HTTP 403 Forbidden content.</p>\n<h3 id=\"apis\" class=\"group scroll-mt-24\">APIs<a href=\"#apis\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>If your application uses the Supabase Database, Storage or Edge Functions, just using Row Level Security policies will give you sufficient protection. In the event that you have other APIs that you wish to protect, follow these general guidelines:</p>\n<ol>\n<li><strong>Use a good JWT verification and parsing library for your language.</strong>\nThis will let you securely parse JWTs and extract their claims.</li>\n<li><strong>Retrieve the <code>aal</code> claim from the JWT and compare its value according to\nyour needs.</strong>\nIf you've encountered an AAL level that can be increased, ask the user to\ncontinue the login process instead of logging them out.</li>\n<li><strong>Use the <code>https://&lt;project-ref&gt;.supabase.co/rest/v1/auth/factors</code> REST\nendpoint to identify if the user has enrolled any MFA factors.</strong>\nOnly <code>verified</code> factors should be acted upon.</li>\n</ol>\n<h2 id=\"frequently-asked-questions\" class=\"group scroll-mt-24\">Frequently asked questions<a href=\"#frequently-asked-questions\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<div class=\" flex flex-col space-y-3  text-foreground-light mt-8 mb-6 [&amp;>div]:space-y-4\" data-orientation=\"vertical\"><div><div data-state=\"closed\" data-orientation=\"vertical\" class=\" group first:rounded-tl-md first:rounded-tr-md last:rounded-bl-md last:rounded-br-md overflow-hidden will-change-transform \"><button type=\"button\" aria-controls=\"radix-:Rvm9jtsn7qb6ra:\" aria-expanded=\"false\" data-state=\"closed\" data-orientation=\"vertical\" id=\"radix-:Rfm9jtsn7qb6ra:\" class=\" flex flex-row gap-3 items-center w-full text-left cursor-pointer outline-none focus-visible:ring-1 focus-visible:z-10 ring-foreground-light  justify-between\" data-radix-collection-item=\"\"><span class=\"text-foreground\">How do I check when a user went through MFA?</span><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-down  text-foreground-lighter rotate-0 group-state-open:rotate-180 group-data-[state=open]:rotate-180 ease-&amp;lsqb;cubic-bezier(0.87,_0,_0.13,_1)&amp;rsqb; transition-transform duration-300 duration-200  order-last\" aria-hidden=\"true\"><path d=\"m6 9 6 6 6-6\"></path></svg></button><div data-state=\"closed\" id=\"radix-:Rvm9jtsn7qb6ra:\" hidden=\"\" role=\"region\" aria-labelledby=\"radix-:Rfm9jtsn7qb6ra:\" data-orientation=\"vertical\" class=\" data-open:animate-slide-down data-closed:animate-slide-up \" style=\"--radix-accordion-content-height:var(--radix-collapsible-content-height);--radix-accordion-content-width:var(--radix-collapsible-content-width)\"></div></div></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-mfa",
        "title": "Multi-Factor Authentication | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Multi-Factor%20Authentication&description=Add%20an%20additional%20layer%20of%20security%20to%20your%20apps%20with%20Supabase%20Auth%20multi-factor%20authentication.",
        "ogTitle": "Multi-Factor Authentication | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-mfa",
        "description": "Add an additional layer of security to your apps with Supabase Auth multi-factor authentication.",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "ogDescription": "Add an additional layer of security to your apps with Supabase Auth multi-factor authentication.",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Supabase Auth with the Next.js App Router\n\n* * *\n\nThe `auth-helpers` package has been replaced with the `@supabase/ssr` package. We recommend setting up Auth for your Next.js app with `@supabase/ssr` instead. See the [Next.js Server-Side Auth guide](/docs/guides/auth/server-side/nextjs) to learn how.\n\nSee legacy docs",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Supabase Auth with the Next.js App Router</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>The <code>auth-helpers</code> package has been replaced with the <code>@supabase/ssr</code> package. We recommend setting up Auth for your Next.js app with <code>@supabase/ssr</code> instead. See the <a href=\"/docs/guides/auth/server-side/nextjs\">Next.js Server-Side Auth guide</a> to learn how.</p></div></div>\n<div class=\" flex flex-col space-y-3  text-foreground-light border-b mt-8 pb-2\" data-orientation=\"vertical\"><div><div data-state=\"closed\" data-orientation=\"vertical\" class=\" group first:rounded-tl-md first:rounded-tr-md last:rounded-bl-md last:rounded-br-md overflow-hidden will-change-transform \"><button type=\"button\" aria-controls=\"radix-:R1m9jtsn7qb6ra:\" aria-expanded=\"false\" data-state=\"closed\" data-orientation=\"vertical\" id=\"radix-:Rm9jtsn7qb6ra:\" class=\" flex flex-row gap-3 items-center w-full text-left cursor-pointer outline-none focus-visible:ring-1 focus-visible:z-10 ring-foreground-light  justify-between\" data-radix-collection-item=\"\">See legacy docs<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-down  text-foreground-lighter rotate-0 group-state-open:rotate-180 group-data-[state=open]:rotate-180 ease-&amp;lsqb;cubic-bezier(0.87,_0,_0.13,_1)&amp;rsqb; transition-transform duration-300 duration-200  order-last\" aria-hidden=\"true\"><path d=\"m6 9 6 6 6-6\"></path></svg></button><div data-state=\"closed\" id=\"radix-:R1m9jtsn7qb6ra:\" hidden=\"\" role=\"region\" aria-labelledby=\"radix-:Rm9jtsn7qb6ra:\" data-orientation=\"vertical\" class=\" data-open:animate-slide-down data-closed:animate-slide-up \" style=\"--radix-accordion-content-height:var(--radix-collapsible-content-height);--radix-accordion-content-width:var(--radix-collapsible-content-width)\"></div></div></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-helpers/nextjs",
        "title": "Supabase Auth with the Next.js App Router | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Supabase%20Auth%20with%20the%20Next.js%20App%20Router&description=Authentication%20and%20Authorization%20helpers%20for%20creating%20an%20authenticated%20Supabase%20client%20with%20the%20Next.js%2013%20App%20Router.",
        "ogTitle": "Supabase Auth with the Next.js App Router | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-helpers/nextjs",
        "description": "Authentication and Authorization helpers for creating an authenticated Supabase client with the Next.js 13 App Router.",
        "modifiedTime": "2024-09-10T20:36:24.980Z",
        "ogDescription": "Authentication and Authorization helpers for creating an authenticated Supabase client with the Next.js 13 App Router.",
        "publishedTime": "2024-09-10T20:36:24.980Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Auth Hooks\n\n## Use HTTP or Postgres Functions to customize your authentication flow\n\n* * *\n\n## What is a hook [\\#](\\#what-is-a-hook)\n\nA hook is an endpoint that allows you to alter the default Supabase Auth flow at specific execution points. Developers can use hooks to add custom behavior that's not supported natively.\n\nHooks help you:\n\n- Track the origin of user signups by adding metadata\n- Improve security by adding additional checks to password and multi-factor authentication\n- Support legacy systems by integrating with identity credentials from external authentication systems\n- Add additional custom claims to your JWT\n- Send authentication emails or SMS messages through a custom provider\n\nThe following hooks are available:\n\n| Hook | Available on Plan |\n| --- | --- |\n| [Custom Access Token](/docs/guides/auth/auth-hooks/custom-access-token-hook) | Free, Pro |\n| [Send SMS](/docs/guides/auth/auth-hooks/send-sms-hook) | Free, Pro |\n| [Send Email](/docs/guides/auth/auth-hooks/send-email-hook) | Free, Pro |\n| [MFA Verification Attempt](/docs/guides/auth/auth-hooks/mfa-verification-hook) | Teams and Enterprise |\n| [Password Verification Attempt](/docs/guides/auth/auth-hooks/password-verification-hook) | Teams and Enterprise |\n\nSupabase supports 2 ways to [configure a hook](/dashboard/project/_/auth/hooks) in your project:\n\nPostgres FunctionHTTP Endpoint\n\nA [postgres function](/docs/guides/database/functions) can be configured as a hook. The function should take in a single argument -- the event of type JSONB -- and return a JSONB object. Since the postgres function runs on your database, the request does not leave your project's instance.\n\n## Security Model [\\#](\\#security-model)\n\nSign the payload and grant permissions selectively in order to guard the integrity of the payload.\n\nSQLHTTP\n\nWhen you configure a postgres function as a hook, Supabase will automatically apply the following grants to the function for these reasons:\n\n- Allow the `supabase_auth_admin` role to execute the function. The `supabase_auth_admin` role is the postgres role that is used by Supabase Auth to make requests to your database.\n- Revoke permissions from other roles (e.g. `anon`, `authenticated`, `public`) to ensure the function is not accessible by Supabase Data APIs.\n\n`\n1\n-- Grant access to function to supabase_auth_admin\n2\ngrant execute\n3\non function public.custom_access_token_hook\n4\nto supabase_auth_admin;\n5\n6\n-- Grant access to schema to supabase_auth_admin\n7\ngrant usage on schema public to supabase_auth_admin;\n8\n9\n-- Revoke function permissions from authenticated, anon and public\n10\nrevoke execute\n11\non function public.custom_access_token_hook\n12\nfrom authenticated, anon, public;\n`\n\n##### Create postgres functions with security invoker\n\nWe do not recommend creating postgres functions with the `security definer` tag. The `security definer` tag specifies that the function is to be executed with the privileges of the user that owns it. Read more about the `security definer` tag [in our database guide](/docs/guides/database/functions#security-definer-vs-invoker).\n\n## Using Hooks [\\#](\\#using-hooks)\n\n### Developing [\\#](\\#developing)\n\nLet us develop a Hook locally and then deploy it to the cloud. As a recap, here\u2019s a list of available Hooks\n\n| Hook | Suggested Function Name | When it is called | What it Does |\n| --- | --- | --- | --- |\n| Send SMS | `send_sms` | Each time an SMS is sent | Allows you to customize message content and SMS Provider |\n| Send Email | `send_email` | Each time an Email is sent | Allows you to customize message content and Email Provider |\n| Custom Access Token | `custom_access_token` | Each time a new JWT is created | Returns the claims you wish to be present in the JWT. |\n| MFA Verification Attempt | `mfa_verification_attempt` | Each time a user tries to verify an MFA factor. | Returns a decision on whether to reject the attempt and future ones, or to allow the user to keep trying. |\n| Password Verification Attempt | `password_verification_attempt` | Each time a user tries to sign in with a password. | Return a decision whether to allow the user to reject the attempt, or to allow the user to keep trying. |\n\nEdit `config.toml` to set up the Auth Hook locally.\n\nSQLHTTP\n\nModify the `auth.hook.<hook_name>` field and set `uri` to a value of `pg-functions://postgres/<schema>/<function_name>`\n\n`\n1\n[auth.hook.<hook_name>]\n2\nenabled = true\n3\nuri = \"pg-functions://....\"\n`\n\nYou need to assign additional permissions so that Supabase Auth can access the hook as well as the tables it interacts with.\n\nThe `supabase_auth_admin` role does not have permissions to the `public` schema. You need to grant the role permission to execute your hook:\n\n`\n1\ngrant execute\n2\non function public.custom_access_token_hook\n3\nto supabase_auth_admin;\n`\n\nYou also need to grant usage to `supabase_auth_admin`:\n\n`\n1\ngrant usage on schema public to supabase_auth_admin;\n`\n\nAlso revoke permissions from the `authenticated` and `anon` roles to ensure the function is not accessible by Supabase Serverless APIs.\n\n`\n1\nrevoke execute\n2\non function public.custom_access_token_hook\n3\nfrom authenticated, anon;\n`\n\nFor security, we recommend against the use the `security definer` tag. The `security definer` tag specifies that the function is to be executed with the privileges of the user that owns it. When a function is created via the Supabase dashboard with the tag, it will have the extensive permissions of the `postgres` role which make it easier for undesirable actions to occur.\n\nWe recommend that you do not use any tag and explicitly grant permissions to `supabase_auth_admin` as described above.\n\nRead more about `security definer` tag [in our database guide](/docs/guides/database/functions#security-definer-vs-invoker).\n\nThere are no restrictions as to what language can be used to write a Postgres Hook. If [PL/pgSQL](https://www.postgresql.org/docs/current/plpgsql.html) is too difficult consider using the [plv8](/docs/guides/database/extensions/plv8) extension which lets you use JavaScript to define functions.\n\nOnce done, save your Auth Hook as a migration in order to version the Auth Hook and share it with other team members. Run [`supabase migration new`](/docs/reference/cli/supabase-migration-new) to create a migration.\n\nIf you're using the Supabase SQL Editor, there's an issue when using the `?` ( _Does the string exist as a top-level key within the JSON value?_) operator. Use a direct connection to the database if you need to use it when defining a function.\n\nHere is an example hook signature:\n\n`\n1\ncreate or replace function public.custom_access_token_hook(event jsonb)\n2\nreturns jsonb\n3\nlanguage plpgsql\n4\nas $$\n5\ndeclare\n6\n  -- Insert variables here\n7\nbegin\n8\n  -- Insert logic here\n9\nreturn event;\n10\nend;\n11\n$$;\n`\n\nYou can visit `SQL Editor > Templates` for hook templates.\n\n### Deploying [\\#](\\#deploying)\n\nIn the dashboard, navigate to [`Authentication > Hooks`](/dashboard/project/_/auth/hooks) and select the appropriate function type (SQL or HTTP) from the dropdown menu.\n\n### Error Handling [\\#](\\#error-handling)\n\nYou should return an error when facing a runtime error. Runtime errors are specific to your application and arise from specific business rules rather than programmer errors.\n\nRuntime errors could happen when:\n\n- The user does not have appropriate permissions\n- The event payload received does not have required claims.\n- The user has performed an action which violates a business rule.\n- The email or phone provider used in the webhook returned an error.\n\nSQLHTTP\n\nThe error is a JSON object and has the following properties:\n\n- `error` An object that contains information about the error.\n  - `http_code` A number indicating the HTTP code to be returned. If not set, the code is HTTP 500 Internal Server Error.\n  - `message` A message to be returned in the HTTP response. Required.\n\nHere's an example:\n\n`\n1\n{\n2\n\"error\": {\n3\n    \"http_code\": 429,\n4\n    \"message\": \"You can only verify a factor once every 10 seconds.\"\n5\n}\n6\n}\n`\n\nErrors returned from a Postgres Hook are not retry-able. When an error is returned, the error is propagated from the hook to Supabase Auth and translated into a HTTP error which is returned to your application. Supabase Auth will only take into account the error and disregard the rest of the payload.\n\nOutside of runtime errors, both HTTP Hooks and Postgres Hooks return timeout errors. Postgres Hooks have 2 seconds to complete processing while HTTP Hooks should complete in 5 seconds. Both HTTP Hooks and Postgres Hooks are run in a transaction do limit the duration of execution to avoid delays in authentication process.\n\n## Available Hooks [\\#](\\#available-hooks)\n\nEach Hook description contains an example JSONSchema which you can use in conjunction with [JSONSchema Faker](https://json-schema-faker.js.org/) in order to generate a mock payload. For HTTP Hooks, you can also use [the Standard Webhooks Testing Tool](https://www.standardwebhooks.com/simulate) to simulate a request.\n\n[Custom Access Token\\\\\n\\\\\nCustomize the access token issued by Supabase Auth](/docs/guides/auth/auth-hooks/custom-access-token-hook)\n\n[Send SMS\\\\\n\\\\\nUse a custom SMS provider to send authentication messages](/docs/guides/auth/auth-hooks/send-sms-hook)\n\n[Send Email\\\\\n\\\\\nUse a custom email provider to send authentication messages](/docs/guides/auth/auth-hooks/send-email-hook)\n\n[MFA Verification\\\\\n\\\\\nAdd additional checks to the MFA verification flow](/docs/guides/auth/auth-hooks/mfa-verification-hook)\n\n[Password verification\\\\\n\\\\\nAdd additional checks to the password verification flow](/docs/guides/auth/auth-hooks/password-verification-hook)\n\n### Is this helpful?\n\nYesNo\n\nThanks for your feedback!\n\nOn this page\n\n- [What is a hook](#what-is-a-hook)\n- [Security Model](#security-model)\n- [Using Hooks](#using-hooks)\n- [Developing](#developing)\n- [Deploying](#deploying)\n- [Error Handling](#error-handling)\n- [Available Hooks](#available-hooks)\n\n1. We only collect analytics essential to ensuring smooth operation of our services. [Learn more](https://supabase.com/privacy)\n\n\n\n\n\n   AcceptOpt out[Learn more](https://supabase.com/privacy)",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Auth Hooks</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Use HTTP or Postgres Functions to customize your authentication flow</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<h2 id=\"what-is-a-hook\" class=\"group scroll-mt-24\">What is a hook<a href=\"#what-is-a-hook\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>A hook is an endpoint that allows you to alter the default Supabase Auth flow at specific execution points. Developers can use hooks to add custom behavior that's not supported natively.</p>\n<p>Hooks help you:</p>\n<ul>\n<li>Track the origin of user signups by adding metadata</li>\n<li>Improve security by adding additional checks to password and multi-factor authentication</li>\n<li>Support legacy systems by integrating with identity credentials from external authentication systems</li>\n<li>Add additional custom claims to your JWT</li>\n<li>Send authentication emails or SMS messages through a custom provider</li>\n</ul>\n<p>The following hooks are available:</p>\n<table><thead><tr><th>Hook</th><th>Available on Plan</th></tr></thead><tbody><tr><td><a href=\"/docs/guides/auth/auth-hooks/custom-access-token-hook\">Custom Access Token</a></td><td>Free, Pro</td></tr><tr><td><a href=\"/docs/guides/auth/auth-hooks/send-sms-hook\">Send SMS</a></td><td>Free, Pro</td></tr><tr><td><a href=\"/docs/guides/auth/auth-hooks/send-email-hook\">Send Email</a></td><td>Free, Pro</td></tr><tr><td><a href=\"/docs/guides/auth/auth-hooks/mfa-verification-hook\">MFA Verification Attempt</a></td><td>Teams and Enterprise</td></tr><tr><td><a href=\"/docs/guides/auth/auth-hooks/password-verification-hook\">Password Verification Attempt</a></td><td>Teams and Enterprise</td></tr></tbody></table>\n<p>Supabase supports 2 ways to <a href=\"/dashboard/project/_/auth/hooks\">configure a hook</a> in your project:</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"0\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Ra69jtsn7qb6ra:-content-postgres-function\" data-state=\"active\" id=\"radix-:Ra69jtsn7qb6ra:-trigger-postgres-function\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Postgres Function</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Ra69jtsn7qb6ra:-content-http\" data-state=\"inactive\" id=\"radix-:Ra69jtsn7qb6ra:-trigger-http\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>HTTP Endpoint</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Ra69jtsn7qb6ra:-trigger-postgres-function\" id=\"radix-:Ra69jtsn7qb6ra:-content-postgres-function\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>A <a href=\"/docs/guides/database/functions\">postgres function</a> can be configured as a hook. The function should take in a single argument -- the event of type JSONB -- and return a JSONB object. Since the postgres function runs on your database, the request does not leave your project's instance.</p></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Ra69jtsn7qb6ra:-trigger-http\" hidden=\"\" id=\"radix-:Ra69jtsn7qb6ra:-content-http\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h2 id=\"security-model\" class=\"group scroll-mt-24\">Security Model<a href=\"#security-model\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Sign the payload and grant permissions selectively in order to guard the integrity of the payload.</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"0\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rau9jtsn7qb6ra:-content-sql\" data-state=\"active\" id=\"radix-:Rau9jtsn7qb6ra:-trigger-sql\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>SQL</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rau9jtsn7qb6ra:-content-http\" data-state=\"inactive\" id=\"radix-:Rau9jtsn7qb6ra:-trigger-http\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>HTTP</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rau9jtsn7qb6ra:-trigger-sql\" id=\"radix-:Rau9jtsn7qb6ra:-content-sql\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>When you configure a postgres function as a hook, Supabase will automatically apply the following grants to the function for these reasons:</p><ul>\n<li>Allow the <code>supabase_auth_admin</code> role to execute the function. The <code>supabase_auth_admin</code> role is the postgres role that is used by Supabase Auth to make requests to your database.</li>\n<li>Revoke permissions from other roles (e.g. <code>anon</code>, <code>authenticated</code>, <code>public</code>) to ensure the function is not accessible by Supabase Data APIs.</li>\n</ul><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"sql\" style=\"width: 926px; height: 268px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 266px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 228px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-1);\">-- Grant access to function to supabase_auth_admin</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">grant execute</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  on function </span><span style=\"color: var(--ch-2);\">public</span><span style=\"color: var(--ch-4);\">.</span><span style=\"color: var(--ch-2);\">custom_access_token_hook</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  to</span><span style=\"color: var(--ch-4);\"> supabase_auth_admin;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 76px); width: 31.5px; opacity: 0.99;\">5</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 76px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\"></span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 95px); width: 31.5px; opacity: 0.99;\">6</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 95px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-1);\">-- Grant access to schema to supabase_auth_admin</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 114px); width: 31.5px; opacity: 0.99;\">7</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 114px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">grant</span><span style=\"color: var(--ch-4);\"> usage </span><span style=\"color: var(--ch-7);\">on schema</span><span style=\"color: var(--ch-4);\"> public </span><span style=\"color: var(--ch-7);\">to</span><span style=\"color: var(--ch-4);\"> supabase_auth_admin;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 133px); width: 31.5px; opacity: 0.99;\">8</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 133px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\"></span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 152px); width: 31.5px; opacity: 0.99;\">9</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 152px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-1);\">-- Revoke function permissions from authenticated, anon and public</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 171px); width: 31.5px; opacity: 0.99;\">10</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 171px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">revoke execute</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 190px); width: 31.5px; opacity: 0.99;\">11</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 190px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  on function </span><span style=\"color: var(--ch-2);\">public</span><span style=\"color: var(--ch-4);\">.</span><span style=\"color: var(--ch-2);\">custom_access_token_hook</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 209px); width: 31.5px; opacity: 0.99;\">12</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 209px); width: 462px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  from</span><span style=\"color: var(--ch-4);\"> authenticated, anon, public;</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div><div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><h5 class=\"mb-1 text mt-0.5 flex gap-3 text-sm [&amp;_p]:mb-1.5 [&amp;_p]:mt-0\">Create postgres functions with security invoker</h5><div class=\"text-sm [&amp;_p]:leading-relaxed text-foreground-light font-normal mt-3 [&amp;_p]:mb-1.5 [&amp;_p]:mt-0\"><p>We do not recommend creating postgres functions with the <code>security definer</code> tag. The <code>security definer</code> tag specifies that the function is to be executed with the privileges of the user that owns it. Read more about the <code>security definer</code> tag <a href=\"/docs/guides/database/functions#security-definer-vs-invoker\">in our database guide</a>.</p></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rau9jtsn7qb6ra:-trigger-http\" hidden=\"\" id=\"radix-:Rau9jtsn7qb6ra:-content-http\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h2 id=\"using-hooks\" class=\"group scroll-mt-24\">Using Hooks<a href=\"#using-hooks\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<h3 id=\"developing\" class=\"group scroll-mt-24\">Developing<a href=\"#developing\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Let us develop a Hook locally and then deploy it to the cloud. As a recap, here\u2019s a list of available Hooks</p>\n<table><thead><tr><th>Hook</th><th>Suggested Function Name</th><th>When it is called</th><th>What it Does</th></tr></thead><tbody><tr><td>Send SMS</td><td><code>send_sms</code></td><td>Each time an SMS is sent</td><td>Allows you to customize message content and SMS Provider</td></tr><tr><td>Send Email</td><td><code>send_email</code></td><td>Each time an Email is sent</td><td>Allows you to customize message content and Email Provider</td></tr><tr><td>Custom Access Token</td><td><code>custom_access_token</code></td><td>Each time a new JWT is created</td><td>Returns the claims you wish to be present in the JWT.</td></tr><tr><td>MFA Verification Attempt</td><td><code>mfa_verification_attempt</code></td><td>Each time a user tries to verify an MFA factor.</td><td>Returns a decision on whether to reject the attempt and future ones, or to allow the user to keep trying.</td></tr><tr><td>Password Verification Attempt</td><td><code>password_verification_attempt</code></td><td>Each time a user tries to sign in with a password.</td><td>Return a decision whether to allow the user to reject the attempt, or to allow the user to keep trying.</td></tr></tbody></table>\n<p>Edit <code>config.toml</code> to set up the Auth Hook locally.</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"0\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rce9jtsn7qb6ra:-content-sql\" data-state=\"active\" id=\"radix-:Rce9jtsn7qb6ra:-trigger-sql\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>SQL</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rce9jtsn7qb6ra:-content-http\" data-state=\"inactive\" id=\"radix-:Rce9jtsn7qb6ra:-trigger-http\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>HTTP</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rce9jtsn7qb6ra:-trigger-sql\" id=\"radix-:Rce9jtsn7qb6ra:-content-sql\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>Modify the <code>auth.hook.&lt;hook_name&gt;</code> field and set <code>uri</code> to a value of <code>pg-functions://postgres/&lt;schema&gt;/&lt;function_name&gt;</code></p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"text\" style=\"width: 926px; height: 97px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 95px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 57px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 189px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span>[auth.hook.&lt;hook_name&gt;]</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 189px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span>enabled = true</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 189px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span>uri = \"pg-functions://....\"</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div><p>You need to assign additional permissions so that Supabase Auth can access the hook as well as the tables it interacts with.</p><p>The <code>supabase_auth_admin</code> role does not have permissions to the <code>public</code> schema. You need to grant the role permission to execute your hook:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"sql\" style=\"width: 926px; height: 97px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 95px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 57px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 315px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">grant execute</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 315px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  on function </span><span style=\"color: var(--ch-2);\">public</span><span style=\"color: var(--ch-4);\">.</span><span style=\"color: var(--ch-2);\">custom_access_token_hook</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 315px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  to</span><span style=\"color: var(--ch-4);\"> supabase_auth_admin;</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div><p>You also need to grant usage to <code>supabase_auth_admin</code>:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"sql\" style=\"width: 926px; height: 59px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 57px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 19px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 364px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">grant</span><span style=\"color: var(--ch-4);\"> usage </span><span style=\"color: var(--ch-7);\">on schema</span><span style=\"color: var(--ch-4);\"> public </span><span style=\"color: var(--ch-7);\">to</span><span style=\"color: var(--ch-4);\"> supabase_auth_admin;</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div><p>Also revoke permissions from the <code>authenticated</code> and <code>anon</code> roles to ensure the function is not accessible by Supabase Serverless APIs.</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"sql\" style=\"width: 926px; height: 97px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 95px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 57px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 315px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">revoke execute</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 315px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  on function </span><span style=\"color: var(--ch-2);\">public</span><span style=\"color: var(--ch-4);\">.</span><span style=\"color: var(--ch-2);\">custom_access_token_hook</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 315px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  from</span><span style=\"color: var(--ch-4);\"> authenticated, anon;</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div><p>For security, we recommend against the use the <code>security definer</code> tag. The <code>security definer</code> tag specifies that the function is to be executed with the privileges of the user that owns it. When a function is created via the Supabase dashboard with the tag, it will have the extensive permissions of the <code>postgres</code> role which make it easier for undesirable actions to occur.</p><p>We recommend that you do not use any tag and explicitly grant permissions to <code>supabase_auth_admin</code> as described above.</p><p>Read more about <code>security definer</code> tag <a href=\"/docs/guides/database/functions#security-definer-vs-invoker\">in our database guide</a>.</p><p>There are no restrictions as to what language can be used to write a Postgres Hook. If <a href=\"https://www.postgresql.org/docs/current/plpgsql.html\">PL/pgSQL</a> is too difficult consider using the <a href=\"/docs/guides/database/extensions/plv8\">plv8</a> extension which lets you use JavaScript to define functions.</p><p>Once done, save your Auth Hook as a migration in order to version the Auth Hook and share it with other team members. Run <a href=\"/docs/reference/cli/supabase-migration-new\"><code>supabase migration new</code></a> to create a migration.</p><div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>If you're using the Supabase SQL Editor, there's an issue when using the <code>?</code> (<em>Does the string exist as a top-level key within the JSON value?</em>) operator. Use a direct connection to the database if you need to use it when defining a function.</p></div></div><p>Here is an example hook signature:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"sql\" style=\"width: 926px; height: 249px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 247px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 209px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 497px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">create or replace function </span><span style=\"color: var(--ch-5);\">public</span><span style=\"color: var(--ch-4);\">.custom_access_token_hook(</span><span style=\"color: var(--ch-7);\">event</span><span style=\"color: var(--ch-4);\"> jsonb)</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 497px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">returns</span><span style=\"color: var(--ch-4);\"> jsonb</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 497px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">language</span><span style=\"color: var(--ch-4);\"> plpgsql</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 497px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">as</span><span style=\"color: var(--ch-4);\"> $$</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 76px); width: 31.5px; opacity: 0.99;\">5</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 76px); width: 497px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">declare</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 95px); width: 31.5px; opacity: 0.99;\">6</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 95px); width: 497px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-1);\">  -- Insert variables here</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 114px); width: 31.5px; opacity: 0.99;\">7</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 114px); width: 497px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">begin</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 133px); width: 31.5px; opacity: 0.99;\">8</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 133px); width: 497px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-1);\">  -- Insert logic here</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 152px); width: 31.5px; opacity: 0.99;\">9</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 152px); width: 497px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  return event</span><span style=\"color: var(--ch-4);\">;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 171px); width: 31.5px; opacity: 0.99;\">10</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 171px); width: 497px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">end</span><span style=\"color: var(--ch-4);\">;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 190px); width: 31.5px; opacity: 0.99;\">11</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 190px); width: 497px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">$$;</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div><p>You can visit <code>SQL Editor &gt; Templates</code> for hook templates.</p></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rce9jtsn7qb6ra:-trigger-http\" hidden=\"\" id=\"radix-:Rce9jtsn7qb6ra:-content-http\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h3 id=\"deploying\" class=\"group scroll-mt-24\">Deploying<a href=\"#deploying\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>In the dashboard, navigate to <a href=\"/dashboard/project/_/auth/hooks\"><code>Authentication &gt; Hooks</code></a> and select the appropriate function type (SQL or HTTP) from the dropdown menu.</p>\n<h3 id=\"error-handling\" class=\"group scroll-mt-24\">Error Handling<a href=\"#error-handling\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>You should return an error when facing a runtime error. Runtime errors are specific to your application and arise from specific business rules rather than programmer errors.</p>\n<p>Runtime errors could happen when:</p>\n<ul>\n<li>The user does not have appropriate permissions</li>\n<li>The event payload received does not have required claims.</li>\n<li>The user has performed an action which violates a business rule.</li>\n<li>The email or phone provider used in the webhook returned an error.</li>\n</ul>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"0\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Re69jtsn7qb6ra:-content-sql\" data-state=\"active\" id=\"radix-:Re69jtsn7qb6ra:-trigger-sql\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>SQL</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Re69jtsn7qb6ra:-content-http\" data-state=\"inactive\" id=\"radix-:Re69jtsn7qb6ra:-trigger-http\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>HTTP</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Re69jtsn7qb6ra:-trigger-sql\" id=\"radix-:Re69jtsn7qb6ra:-content-sql\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>The error is a JSON object and has the following properties:</p><ul>\n<li><code>error</code> An object that contains information about the error.<!-- -->\n<ul>\n<li><code>http_code</code> A number indicating the HTTP code to be returned. If not set, the code is HTTP 500 Internal Server Error.</li>\n<li><code>message</code> A message to be returned in the HTTP response. Required.</li>\n</ul>\n</li>\n</ul><p>Here's an example:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"json\" style=\"width: 926px; height: 154px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 152px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 114px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 476px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">{</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 476px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">  \"error\"</span><span style=\"color: var(--ch-4);\">: {</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 476px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">    \"http_code\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-2);\">429</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 476px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-6);\">    \"message\"</span><span style=\"color: var(--ch-4);\">: </span><span style=\"color: var(--ch-8);\">\"You can only verify a factor once every 10 seconds.\"</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 76px); width: 31.5px; opacity: 0.99;\">5</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 76px); width: 476px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  }</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 95px); width: 31.5px; opacity: 0.99;\">6</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 95px); width: 476px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">}</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div><p>Errors returned from a Postgres Hook are not retry-able. When an error is returned, the error is propagated from the hook to Supabase Auth and translated into a HTTP error which is returned to your application. Supabase Auth will only take into account the error and disregard the rest of the payload.</p></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Re69jtsn7qb6ra:-trigger-http\" hidden=\"\" id=\"radix-:Re69jtsn7qb6ra:-content-http\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p>Outside of runtime errors, both HTTP Hooks and Postgres Hooks return timeout errors. Postgres Hooks have <!-- -->2<!-- --> seconds to complete processing while HTTP Hooks should complete in <!-- -->5<!-- --> seconds. Both HTTP Hooks and Postgres Hooks are run in a transaction do limit the duration of execution to avoid delays in authentication process.</p>\n<h2 id=\"available-hooks\" class=\"group scroll-mt-24\">Available Hooks<a href=\"#available-hooks\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Each Hook description contains an example JSONSchema which you can use in conjunction with <a href=\"https://json-schema-faker.js.org/\">JSONSchema Faker</a> in order to generate a mock payload. For HTTP Hooks, you can also use <a href=\"https://www.standardwebhooks.com/simulate\">the Standard Webhooks Testing Tool</a> to simulate a request.</p>\n<div class=\"grid md:grid-cols-12 gap-4 not-prose\"><div class=\"col-span-4\"><a href=\"/docs/guides/auth/auth-hooks/custom-access-token-hook\"><div class=\"relative h-full group cursor-pointer overflow-hidden border rounded-lg text-left hover:border-strong bg-surface-75 transition\"><div class=\"px-8 pb-8 relative flex flex-col h-full gap-2 pt-8\"><div class=\"flex items-center gap-3\"><p class=\"text-base text-foreground\">Custom Access Token</p></div><span class=\"text-sm text-foreground-light flex-grow\">Customize the access token issued by Supabase Auth</span></div></div></a></div><div class=\"col-span-4\"><a href=\"/docs/guides/auth/auth-hooks/send-sms-hook\"><div class=\"relative h-full group cursor-pointer overflow-hidden border rounded-lg text-left hover:border-strong bg-surface-75 transition\"><div class=\"px-8 pb-8 relative flex flex-col h-full gap-2 pt-8\"><div class=\"flex items-center gap-3\"><p class=\"text-base text-foreground\">Send SMS</p></div><span class=\"text-sm text-foreground-light flex-grow\">Use a custom SMS provider to send authentication messages</span></div></div></a></div><div class=\"col-span-4\"><a href=\"/docs/guides/auth/auth-hooks/send-email-hook\"><div class=\"relative h-full group cursor-pointer overflow-hidden border rounded-lg text-left hover:border-strong bg-surface-75 transition\"><div class=\"px-8 pb-8 relative flex flex-col h-full gap-2 pt-8\"><div class=\"flex items-center gap-3\"><p class=\"text-base text-foreground\">Send Email</p></div><span class=\"text-sm text-foreground-light flex-grow\">Use a custom email provider to send authentication messages</span></div></div></a></div><div class=\"col-span-4\"><a href=\"/docs/guides/auth/auth-hooks/mfa-verification-hook\"><div class=\"relative h-full group cursor-pointer overflow-hidden border rounded-lg text-left hover:border-strong bg-surface-75 transition\"><div class=\"px-8 pb-8 relative flex flex-col h-full gap-2 pt-8\"><div class=\"flex items-center gap-3\"><p class=\"text-base text-foreground\">MFA Verification</p></div><span class=\"text-sm text-foreground-light flex-grow\">Add additional checks to the MFA verification flow</span></div></div></a></div><div class=\"col-span-4\"><a href=\"/docs/guides/auth/auth-hooks/password-verification-hook\"><div class=\"relative h-full group cursor-pointer overflow-hidden border rounded-lg text-left hover:border-strong bg-surface-75 transition\"><div class=\"px-8 pb-8 relative flex flex-col h-full gap-2 pt-8\"><div class=\"flex items-center gap-3\"><p class=\"text-base text-foreground\">Password verification</p></div><span class=\"text-sm text-foreground-light flex-grow\">Add additional checks to the password verification flow</span></div></div></a></div></div></article></div><div class=\"border-l thin-scrollbar overflow-y-auto px-2 hidden md:block col-span-3 self-start sticky top-[calc(var(--header-height)+1px+2rem)] max-h-[calc(100vh-var(--header-height)-3rem)]\"><section class=\"@container px-5 mb-6\" aria-labelledby=\"feedback-title\"><h3 id=\"feedback-title\" class=\"block font-mono text-xs uppercase text-foreground mb-4\">Is this helpful?</h3><div class=\"relative flex flex-col gap-y-4 mb-2 @[12rem]:flex-row @[12rem]:items-center\"><div class=\"relative flex gap-[var(--container-flex-gap)] items-center\" style=\"--container-flex-gap: 0.5rem;\"><button data-size=\"tiny\" type=\"button\" class=\"relative justify-center cursor-pointer inline-flex items-center space-x-2 text-center font-regular ease-out duration-200 outline-none transition-all outline-0 focus-visible:outline-4 focus-visible:outline-offset-1 border text-foreground bg-transparent border-strong focus-visible:outline-border-strong data-[state=open]:border-stronger data-[state=open]:outline-border-strong text-xs py-1 h-[26px] rounded-full px-1 hover:text-brand-600 hover:border-brand-500 [transition-property:opacity,transform,color] [transition-duration:150ms,300ms,300ms] motion-reduce:[transition-duration:150ms,1ms,300ms]\"> <span class=\"truncate\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"3\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-check\"><path d=\"M20 6 9 17l-5-5\"></path></svg><span class=\"sr-only\">Yes</span></span> </button><button data-size=\"tiny\" type=\"button\" class=\"relative justify-center cursor-pointer inline-flex items-center space-x-2 text-center font-regular ease-out duration-200 outline-none transition-all outline-0 focus-visible:outline-4 focus-visible:outline-offset-1 border text-foreground bg-transparent border-strong focus-visible:outline-border-strong data-[state=open]:border-stronger data-[state=open]:outline-border-strong text-xs py-1 h-[26px] rounded-full px-1 hover:text-warning-600 hover:border-warning-500 [transition-property:opacity,transform,color] [transition-duration:150ms,300ms,300ms] motion-reduce:[transition-duration:150ms,1ms,300ms]\"> <span class=\"truncate\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"3\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-x\"><path d=\"M18 6 6 18\"></path><path d=\"m6 6 12 12\"></path></svg><span class=\"sr-only\">No</span></span> </button></div><div class=\"flex flex-col gap-1 text-xs opacity-0 invisible text-left -translate-x-[0.25rem] @[12rem]:-translate-x-[1.25rem] [transition-property:opacity,transform] [transition-duration:150ms,300ms] motion-reduce:[transition-duration:150ms,1ms] delay-300\"><span class=\"text-foreground-light\">Thanks for your feedback!</span></div></div></section><span class=\"block font-mono text-xs uppercase text-foreground px-5 mb-6\">On this page</span><ul class=\"toc-menu list-none pl-5 text-[0.8rem] grid gap-2\"><li class=\"\"><a href=\"#what-is-a-hook\" class=\"text-foreground-lighter hover:text-brand-link transition-colors\">What is a hook</a></li><li class=\"\"><a href=\"#security-model\" class=\"text-foreground-lighter hover:text-brand-link transition-colors\">Security Model</a></li><li class=\"\"><a href=\"#using-hooks\" class=\"text-foreground-lighter hover:text-brand-link transition-colors\">Using Hooks</a></li><li class=\"ml-4\"><a href=\"#developing\" class=\"text-foreground-lighter hover:text-brand-link transition-colors\">Developing</a></li><li class=\"ml-4\"><a href=\"#deploying\" class=\"text-foreground-lighter hover:text-brand-link transition-colors\">Deploying</a></li><li class=\"ml-4\"><a href=\"#error-handling\" class=\"text-foreground-lighter hover:text-brand-link transition-colors\">Error Handling</a></li><li class=\"\"><a href=\"#available-hooks\" class=\"text-foreground-lighter hover:text-brand-link transition-colors\">Available Hooks</a></li></ul></div></div></div><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div><next-route-announcer style=\"position: absolute;\"></next-route-announcer><section aria-label=\"Notifications alt+T\" tabindex=\"-1\"><ol dir=\"ltr\" tabindex=\"-1\" class=\"toaster group pointer-events-auto\" data-sonner-toaster=\"true\" data-theme=\"light\" data-y-position=\"top\" data-x-position=\"right\" style=\"--front-toast-height: 112px; --offset: 32px; --width: 356px; --gap: 14px; font-family: inherit;\"></ol><ol dir=\"ltr\" tabindex=\"-1\" class=\"toaster group pointer-events-auto\" data-sonner-toaster=\"true\" data-theme=\"light\" data-y-position=\"bottom\" data-x-position=\"right\" style=\"--front-toast-height: 112px; --offset: 32px; --width: 356px; --gap: 14px; font-family: inherit;\"><li aria-live=\"polite\" aria-atomic=\"true\" role=\"status\" tabindex=\"0\" class=\"group toast w-full rounded-md py-3 px-5 flex gap-2 items-start font-normal text-sm group-[.toaster]:bg-overlay group-[.toaster]:text-foreground group-[.toaster]:border group-[.toaster]:border-overlay group-[.toaster]:shadow-lg\" data-sonner-toast=\"\" data-styled=\"false\" data-mounted=\"true\" data-promise=\"false\" data-removed=\"false\" data-visible=\"true\" data-y-position=\"bottom\" data-x-position=\"right\" data-index=\"0\" data-front=\"true\" data-swiping=\"false\" data-dismissible=\"true\" data-swipe-out=\"false\" data-expanded=\"false\" style=\"--index: 0; --toasts-before: 0; --z-index: 1; --offset: 0px; --initial-height: 112px;\"><button aria-label=\"Close toast\" data-disabled=\"false\" data-close-button=\"true\" class=\"absolute right-2 top-2 rounded-md text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-destructive-300 group-[.destructive]:hover:text-destructive-50 group-[.destructive]:focus:ring-destructive-400 group-[.destructive]:focus:ring-offset-destructive-600 left-auto transform-none bg-transparent border-0 border-transparent hover:!bg-transparent hover:border-transparent\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line></svg></button><div class=\"space-y-3 py-1 flex flex-col w-full\"><div><p class=\"text-foreground\">We only collect analytics essential to ensuring smooth operation of our services. <a class=\"inline sm:hidden underline text-light\" target=\"_blank\" rel=\"noreferrer\" href=\"https://supabase.com/privacy\">Learn more</a></p></div><div class=\"flex items-center space-x-2\"><button data-size=\"tiny\" type=\"button\" class=\"relative justify-center cursor-pointer inline-flex items-center space-x-2 text-center font-regular ease-out duration-200 rounded-md outline-none transition-all outline-0 focus-visible:outline-4 focus-visible:outline-offset-1 border text-foreground bg-alternative dark:bg-muted hover:bg-selection border-strong hover:border-stronger focus-visible:outline-brand-600 data-[state=open]:bg-selection data-[state=open]:outline-brand-600 data-[state=open]:border-button-hover text-xs px-2.5 py-1 h-[26px]\"> <span class=\"truncate\">Accept</span> </button><button data-size=\"tiny\" type=\"button\" class=\"relative justify-center cursor-pointer inline-flex items-center space-x-2 text-center font-regular ease-out duration-200 rounded-md outline-none transition-all outline-0 focus-visible:outline-4 focus-visible:outline-offset-1 border text-foreground hover:bg-surface-300 shadow-none focus-visible:outline-border-strong data-[state=open]:bg-surface-300 data-[state=open]:outline-border-strong border-transparent text-xs px-2.5 py-1 h-[26px]\"> <span class=\"truncate\">Opt out</span> </button><a target=\"_blank\" rel=\"noreferrer\" data-size=\"tiny\" type=\"button\" class=\"relative justify-center cursor-pointer items-center space-x-2 text-center font-regular ease-out duration-200 rounded-md outline-none transition-all outline-0 focus-visible:outline-4 focus-visible:outline-offset-1 border hover:bg-surface-300 shadow-none focus-visible:outline-border-strong data-[state=open]:bg-surface-300 data-[state=open]:outline-border-strong border-transparent text-xs px-2.5 py-1 h-[26px] hidden sm:block text-light hover:text-foreground\" href=\"https://supabase.com/privacy\"><span class=\"truncate\">Learn more</span></a></div></div></li></ol></section></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-hooks",
        "title": "Auth Hooks | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Auth%20Hooks&description=undefined",
        "ogTitle": "Auth Hooks | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-hooks",
        "description": "Use HTTP or Postgres Functions to customize your authentication flow",
        "modifiedTime": "2024-09-10T20:36:24.980Z",
        "ogDescription": "Use HTTP or Postgres Functions to customize your authentication flow",
        "publishedTime": "2024-09-10T20:36:24.980Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# User sessions\n\n* * *\n\nSupabase Auth provides fine-grained control over your user's sessions.\n\nSome security sensitive applications, or those that need to be SOC 2, HIPAA, PCI-DSS or ISO27000 compliant will require some sort of additional session controls to enforce timeouts or provide additional security guarantees. Supabase Auth makes it easy to build compliant applications.\n\n## What is a session? [\\#](\\#what-is-a-session)\n\nA session is created when a user signs in. By default, it lasts indefinitely and a user can have an unlimited number of active sessions on as many devices.\n\nA session is represented by the Supabase Auth access token in the form of a JWT, and a refresh token which is a unique string.\n\nAccess tokens are designed to be short lived, usually between 5 minutes and 1 hour while refresh tokens never expire but can only be used once. You can exchange a refresh token only once to get a new access and refresh token pair.\n\nThis process is called **refreshing the session.**\n\nA session terminates, depending on configuration, when:\n\n- The user clicks sign out.\n- The user changes their password or performs a security sensitive action.\n- It times out due to inactivity.\n- It reaches its maximum lifetime.\n- A user signs in on another device.\n\n## Access token (JWT) claims [\\#](\\#access-token-jwt-claims)\n\nEvery access token contains a `session_id` claim, a UUID, uniquely identifying the session of the user. You can correlate this ID with the primary key of the `auth.sessions` table.\n\n## Initiating a session [\\#](\\#initiating-a-session)\n\nA session is initiated when a user signs in. The session is stored in the `auth.sessions` table, and your app should receive the access and refresh tokens.\n\nThere are two flows for initiating a session and receiving the tokens:\n\n- [Implicit flow](/docs/guides/auth/sessions/implicit-flow)\n- [PKCE flow](/docs/guides/auth/sessions/pkce-flow)\n\n## Limiting session lifetime and number of allowed sessions per user [\\#](\\#limiting-session-lifetime-and-number-of-allowed-sessions-per-user)\n\nThis feature is only available on Pro Plans and up.\n\nSupabase Auth can be configured to limit the lifetime of a user's session. By default, all sessions are active until the user signs out or performs some other action that terminates a session.\n\nIn some applications, it's useful or required for security to ensure that users authenticate often, or that sessions are not left active on devices for too long.\n\nThere are three ways to limit the lifetime of a session:\n\n- Time-boxed sessions, which terminate after a fixed amount of time.\n- Set an inactivity timeout, which terminates sessions that haven't been refreshed within the timeout duration.\n- Enforce a single-session per user, which only keeps the most recently active session.\n\nTo make sure that users are required to re-authenticate periodically, you can set a positive value for the **Time-box user sessions** option in the [Auth settings](/dashboard/project/_/settings/auth) for your project.\n\nTo make sure that sessions expire after a period of inactivity, you can set a positive duration for the **Inactivity timeout** option in the [Auth settings](/dashboard/project/_/settings/auth).\n\nYou can also enforce only one active session per user per device or browser. When this is enabled, the session from the most recent sign in will remain active, while the rest are terminated. Enable this via the _Single session per user_ option in the [Auth settings](/dashboard/project/_/settings/auth).\n\nSessions are not proactively destroyed when you change these settings, but rather the check is enforced whenever a session is refreshed next. This can confuse developers because the actual duration of a session is the configured timeout plus the JWT expiration time. For single session per user, the effect will only be noticed at intervals of the JWT expiration time. Please make sure you adjust this setting depending on your needs. We do not recommend going below 5 minutes for the JWT expiration time.\n\nOtherwise sessions are progressively deleted from the database 24 hours after they expire, which prevents you from causing a high load on your project by accident and allows you some freedom to undo changes without adversely affecting all users.\n\n## Frequently asked questions [\\#](\\#frequently-asked-questions)\n\n### What are recommended values for access token (JWT) expiration? [\\#](\\#what-are-recommended-values-for-access-token-jwt-expiration)\n\nMost applications should use the default expiration time of 1 hour. This can be customized in your project's [Auth settings](/dashboard/project/_/settings/auth) in the Advanced Settings section.\n\nSetting a value over 1 hour is generally discouraged for security reasons, but it may make sense in certain situations.\n\nValues below 5 minutes, and especially below 2 minutes, should not be used in most situations because:\n\n- The shorter the expiration time, the more frequently refresh tokens are used, which increases the load on the Auth server.\n- Time is not absolute. Servers can often be off sync for tens of seconds, but user devices like laptops, desktops or mobile devices can sometimes be off by minutes or even hours. Having too short expiration time can cause difficult-to-debug errors due to clock skew.\n- Supabase's client libraries always try to refresh the session ahead of time, which won't be possible if the expiration time is too short.\n- Access tokens should generally be valid for at least as long as the longest running request in your application. This helps you avoid issues where the access token becomes invalid midway through processing.\n\n### What is refresh token reuse detection and what does it protect from? [\\#](\\#what-is-refresh-token-reuse-detection-and-what-does-it-protect-from)\n\nAs your users continue using your app, refresh tokens are being constantly exchanged for new access tokens.\n\nThe general rule is that a refresh token can only be used once. However, strictly enforcing this can cause certain issues to arise. There are two exceptions to this design to prevent the early and unexpected termination of user's sessions:\n\n- A refresh token can be used more than once within a defined reuse interval. By default this is 10 seconds and we do not recommend changing this value. This exception is granted for legitimate situations such as:\n  - Using server-side rendering where the same refresh token needs to be reused on the server and soon after on the client\n  - To allow some leeway for bugs or issues with serializing access to the refresh token request\n- If the parent of the currently active refresh token for the user's session is being used, the active token will be returned. This exception solves an important and often common situation:\n  - All clients such as browsers, mobile or desktop apps, and even some servers are inherently unreliable due to network issues. A request does not indicate that they received a response or even processed the response they received.\n  - If a refresh token is revoked after being used only once, and the response wasn't received and processed by the client, when the client comes back online, it will attempt to use the refresh token that was already used. Since this might happen outside of the reuse interval, it can cause sudden and unexpected session termination.\n\nShould the reuse attempt not fall under these two exceptions, the whole session is regarded as terminated and all refresh tokens belonging to it are marked as revoked. You can disable this behavior in the Advanced Settings of the [Auth settings](/dashboard/project/_/settings/auth) page, though it is generally not recommended.\n\nThe purpose of this mechanism is to guard against potential security issues where a refresh token could have been stolen from the user, for example by exposing it accidentally in logs that leak (like logging cookies, request bodies or URL params) or via vulnerable third-party servers. It does not guard against the case where a user's session is stolen from their device.\n\n### What are the benefits of using access and refresh tokens instead of traditional sessions? [\\#](\\#what-are-the-benefits-of-using-access-and-refresh-tokens-instead-of-traditional-sessions)\n\nTraditionally user sessions were implemented by using a unique string stored in cookies that identified the authorization that the user had on a specific browser. Applications would use this unique string to constantly fetch the attached user information on every API call.\n\nThis approach has some tradeoffs compared to using a JWT-based approach:\n\n- If the authentication server or its database crashes or is unavailable for even a few seconds, the whole application goes down. Scheduling maintenance or dealing with transient errors becomes very challenging.\n- A failing authentication server can cause a chain of failures across other systems and APIs, paralyzing the whole application system.\n- All requests that require authentication has to be routed through the authentication, which adds an additional latency overhead to all requests.\n\nSupabase Auth prefers a JWT-based approach using access and refresh tokens are because the session information is encoded in a short-lived token -- the access token -- which can be transferred across APIs and systems without relying on the availability or performance of a central server. An application can thus tolerate transient failures or performance issues a lot better. By trying to refresh the access token ahead of time, your application can safely continue to function even with larger outages.\n\nIt's better for cost optimization and scaling as well, as the authentication system's servers and database only handle traffic for this use case.\n\n### How do I make sure that an access token (JWT) cannot be used after a user clicks sign out? [\\#](\\#how-do-i-make-sure-that-an-access-token-jwt-cannot-be-used-after-a-user-clicks-sign-out)\n\nMost applications rarely need such strong guarantees. Consider adjusting the JWT expiry time to an acceptable value. If this is still necessary, you should try to use this validation logic only for the most sensitive actions within your application.\n\nWhen a user signs out, the sessions affected by the logout are removed from the database entirely. You can check that the `session_id` claim in the JWT corresponds to a row in the `auth.sessions` table. If such a row does not exist, it means that the user has logged out.\n\nNote that sessions are not proactively terminated when their maximum lifetime (time-box) or inactivity timeout are reached. These sessions are cleaned up progressively 24 hours after reaching that status. This allows you to tweak the values or roll back changes without causing unintended user friction.\n\n### Can I use HTTP-Only cookies to store the access and refresh tokens? [\\#](\\#can-i-use-http-only-cookies-to-store-the-access-and-refresh-tokens)\n\nThis is possible, but only for apps that use the traditional server-only web app approach where all of the application logic is implemented on the server and it returns rendered HTML only.\n\nIf your app uses any client side JavaScript to build a rich user experience, using HTTP-Only cookies is not feasible since only your server will be able to read and refresh the session of the user. The browser will not have access to the access and refresh tokens.\n\nBecause of this, the Supabase JavaScript libraries provide only limited support. You can override the `storage` option when creating the Supabase client **on the server** to store the values in cookies or your preferred storage choice, for example:\n\n`\n_10\nimport { createClient } from '@supabase/supabase-js'\n_10\n_10\nconst supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {\n_10\nauth: {\n_10\n    storage: customStorageObject,\n_10\n},\n_10\n})\n`\n\nThe `customStorageObject` should implement the `getItem`, `setItem`, and `removeItem` methods from the [`Storage` interface](https://developer.mozilla.org/en-US/docs/Web/API/Storage). Async versions of these methods are also supported.\n\nWhen using cookies to store access and refresh tokens, make sure that the [`Expires` or `Max-Age` attributes](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#attributes) of the cookies is set to a timestamp very far into the future. Browsers will clear the cookies, but the session will remain active in Supabase Auth. Therefore it's best to let Supabase Auth control the validity of these tokens and instruct the browser to always store the cookies indefinitely.",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">User sessions</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>Supabase Auth provides fine-grained control over your user's sessions.</p>\n<p>Some security sensitive applications, or those that need to be SOC 2, HIPAA, PCI-DSS or ISO27000 compliant will require some sort of additional session controls to enforce timeouts or provide additional security guarantees. Supabase Auth makes it easy to build compliant applications.</p>\n<h2 id=\"what-is-a-session\" class=\"group scroll-mt-24\">What is a session?<a href=\"#what-is-a-session\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>A session is created when a user signs in. By default, it lasts indefinitely and a user can have an unlimited number of active sessions on as many devices.</p>\n<p>A session is represented by the Supabase Auth access token in the form of a JWT, and a refresh token which is a unique string.</p>\n<p>Access tokens are designed to be short lived, usually between 5 minutes and 1 hour while refresh tokens never expire but can only be used once. You can exchange a refresh token only once to get a new access and refresh token pair.</p>\n<p>This process is called <strong>refreshing the session.</strong></p>\n<p>A session terminates, depending on configuration, when:</p>\n<ul>\n<li>The user clicks sign out.</li>\n<li>The user changes their password or performs a security sensitive action.</li>\n<li>It times out due to inactivity.</li>\n<li>It reaches its maximum lifetime.</li>\n<li>A user signs in on another device.</li>\n</ul>\n<h2 id=\"access-token-jwt-claims\" class=\"group scroll-mt-24\">Access token (JWT) claims<a href=\"#access-token-jwt-claims\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Every access token contains a <code>session_id</code> claim, a UUID, uniquely identifying the session of the user. You can correlate this ID with the primary key of the <code>auth.sessions</code> table.</p>\n<h2 id=\"initiating-a-session\" class=\"group scroll-mt-24\">Initiating a session<a href=\"#initiating-a-session\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>A session is initiated when a user signs in. The session is stored in the <code>auth.sessions</code> table, and your app should receive the access and refresh tokens.</p>\n<p>There are two flows for initiating a session and receiving the tokens:</p>\n<ul>\n<li><a href=\"/docs/guides/auth/sessions/implicit-flow\">Implicit flow</a></li>\n<li><a href=\"/docs/guides/auth/sessions/pkce-flow\">PKCE flow</a></li>\n</ul>\n<h2 id=\"limiting-session-lifetime-and-number-of-allowed-sessions-per-user\" class=\"group scroll-mt-24\">Limiting session lifetime and number of allowed sessions per user<a href=\"#limiting-session-lifetime-and-number-of-allowed-sessions-per-user\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text-foreground [&amp;>svg]:text-background [&amp;>svg]:bg-foreground mb-2 [&amp;_svg]:bg-foreground-muted [&amp;_svg]:text-background-muted bg-surface-200/25 border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>This feature is only available on Pro Plans and up.</p></div></div>\n<p>Supabase Auth can be configured to limit the lifetime of a user's session. By default, all sessions are active until the user signs out or performs some other action that terminates a session.</p>\n<p>In some applications, it's useful or required for security to ensure that users authenticate often, or that sessions are not left active on devices for too long.</p>\n<p>There are three ways to limit the lifetime of a session:</p>\n<ul>\n<li>Time-boxed sessions, which terminate after a fixed amount of time.</li>\n<li>Set an inactivity timeout, which terminates sessions that haven't been refreshed within the timeout duration.</li>\n<li>Enforce a single-session per user, which only keeps the most recently active session.</li>\n</ul>\n<p>To make sure that users are required to re-authenticate periodically, you can set a positive value for the <strong>Time-box user sessions</strong> option in the <a href=\"/dashboard/project/_/settings/auth\">Auth settings</a> for your project.</p>\n<p>To make sure that sessions expire after a period of inactivity, you can set a positive duration for the <strong>Inactivity timeout</strong> option in the <a href=\"/dashboard/project/_/settings/auth\">Auth settings</a>.</p>\n<p>You can also enforce only one active session per user per device or browser. When this is enabled, the session from the most recent sign in will remain active, while the rest are terminated. Enable this via the <em>Single session per user</em> option in the <a href=\"/dashboard/project/_/settings/auth\">Auth settings</a>.</p>\n<p>Sessions are not proactively destroyed when you change these settings, but rather the check is enforced whenever a session is refreshed next. This can confuse developers because the actual duration of a session is the configured timeout plus the JWT expiration time. For single session per user, the effect will only be noticed at intervals of the JWT expiration time. Please make sure you adjust this setting depending on your needs. We do not recommend going below 5 minutes for the JWT expiration time.</p>\n<p>Otherwise sessions are progressively deleted from the database 24 hours after they expire, which prevents you from causing a high load on your project by accident and allows you some freedom to undo changes without adversely affecting all users.</p>\n<h2 id=\"frequently-asked-questions\" class=\"group scroll-mt-24\">Frequently asked questions<a href=\"#frequently-asked-questions\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<h3 id=\"what-are-recommended-values-for-access-token-jwt-expiration\" class=\"group scroll-mt-24\">What are recommended values for access token (JWT) expiration?<a href=\"#what-are-recommended-values-for-access-token-jwt-expiration\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Most applications should use the default expiration time of 1 hour. This can be customized in your project's <a href=\"/dashboard/project/_/settings/auth\">Auth settings</a> in the Advanced Settings section.</p>\n<p>Setting a value over 1 hour is generally discouraged for security reasons, but it may make sense in certain situations.</p>\n<p>Values below 5 minutes, and especially below 2 minutes, should not be used in most situations because:</p>\n<ul>\n<li>The shorter the expiration time, the more frequently refresh tokens are used, which increases the load on the Auth server.</li>\n<li>Time is not absolute. Servers can often be off sync for tens of seconds, but user devices like laptops, desktops or mobile devices can sometimes be off by minutes or even hours. Having too short expiration time can cause difficult-to-debug errors due to clock skew.</li>\n<li>Supabase's client libraries always try to refresh the session ahead of time, which won't be possible if the expiration time is too short.</li>\n<li>Access tokens should generally be valid for at least as long as the longest running request in your application. This helps you avoid issues where the access token becomes invalid midway through processing.</li>\n</ul>\n<h3 id=\"what-is-refresh-token-reuse-detection-and-what-does-it-protect-from\" class=\"group scroll-mt-24\">What is refresh token reuse detection and what does it protect from?<a href=\"#what-is-refresh-token-reuse-detection-and-what-does-it-protect-from\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>As your users continue using your app, refresh tokens are being constantly exchanged for new access tokens.</p>\n<p>The general rule is that a refresh token can only be used once. However, strictly enforcing this can cause certain issues to arise. There are two exceptions to this design to prevent the early and unexpected termination of user's sessions:</p>\n<ul>\n<li>A refresh token can be used more than once within a defined reuse interval. By default this is 10 seconds and we do not recommend changing this value. This exception is granted for legitimate situations such as:<!-- -->\n<ul>\n<li>Using server-side rendering where the same refresh token needs to be reused on the server and soon after on the client</li>\n<li>To allow some leeway for bugs or issues with serializing access to the refresh token request</li>\n</ul>\n</li>\n<li>If the parent of the currently active refresh token for the user's session is being used, the active token will be returned. This exception solves an important and often common situation:<!-- -->\n<ul>\n<li>All clients such as browsers, mobile or desktop apps, and even some servers are inherently unreliable due to network issues. A request does not indicate that they received a response or even processed the response they received.</li>\n<li>If a refresh token is revoked after being used only once, and the response wasn't received and processed by the client, when the client comes back online, it will attempt to use the refresh token that was already used. Since this might happen outside of the reuse interval, it can cause sudden and unexpected session termination.</li>\n</ul>\n</li>\n</ul>\n<p>Should the reuse attempt not fall under these two exceptions, the whole session is regarded as terminated and all refresh tokens belonging to it are marked as revoked. You can disable this behavior in the Advanced Settings of the <a href=\"/dashboard/project/_/settings/auth\">Auth settings</a> page, though it is generally not recommended.</p>\n<p>The purpose of this mechanism is to guard against potential security issues where a refresh token could have been stolen from the user, for example by exposing it accidentally in logs that leak (like logging cookies, request bodies or URL params) or via vulnerable third-party servers. It does not guard against the case where a user's session is stolen from their device.</p>\n<h3 id=\"what-are-the-benefits-of-using-access-and-refresh-tokens-instead-of-traditional-sessions\" class=\"group scroll-mt-24\">What are the benefits of using access and refresh tokens instead of traditional sessions?<a href=\"#what-are-the-benefits-of-using-access-and-refresh-tokens-instead-of-traditional-sessions\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Traditionally user sessions were implemented by using a unique string stored in cookies that identified the authorization that the user had on a specific browser. Applications would use this unique string to constantly fetch the attached user information on every API call.</p>\n<p>This approach has some tradeoffs compared to using a JWT-based approach:</p>\n<ul>\n<li>If the authentication server or its database crashes or is unavailable for even a few seconds, the whole application goes down. Scheduling maintenance or dealing with transient errors becomes very challenging.</li>\n<li>A failing authentication server can cause a chain of failures across other systems and APIs, paralyzing the whole application system.</li>\n<li>All requests that require authentication has to be routed through the authentication, which adds an additional latency overhead to all requests.</li>\n</ul>\n<p>Supabase Auth prefers a JWT-based approach using access and refresh tokens are because the session information is encoded in a short-lived token -- the access token -- which can be transferred across APIs and systems without relying on the availability or performance of a central server. An application can thus tolerate transient failures or performance issues a lot better. By trying to refresh the access token ahead of time, your application can safely continue to function even with larger outages.</p>\n<p>It's better for cost optimization and scaling as well, as the authentication system's servers and database only handle traffic for this use case.</p>\n<h3 id=\"how-do-i-make-sure-that-an-access-token-jwt-cannot-be-used-after-a-user-clicks-sign-out\" class=\"group scroll-mt-24\">How do I make sure that an access token (JWT) cannot be used after a user clicks sign out?<a href=\"#how-do-i-make-sure-that-an-access-token-jwt-cannot-be-used-after-a-user-clicks-sign-out\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Most applications rarely need such strong guarantees. Consider adjusting the JWT expiry time to an acceptable value. If this is still necessary, you should try to use this validation logic only for the most sensitive actions within your application.</p>\n<p>When a user signs out, the sessions affected by the logout are removed from the database entirely. You can check that the <code>session_id</code> claim in the JWT corresponds to a row in the <code>auth.sessions</code> table. If such a row does not exist, it means that the user has logged out.</p>\n<p>Note that sessions are not proactively terminated when their maximum lifetime (time-box) or inactivity timeout are reached. These sessions are cleaned up progressively 24 hours after reaching that status. This allows you to tweak the values or roll back changes without causing unintended user friction.</p>\n<h3 id=\"can-i-use-http-only-cookies-to-store-the-access-and-refresh-tokens\" class=\"group scroll-mt-24\">Can I use HTTP-Only cookies to store the access and refresh tokens?<a href=\"#can-i-use-http-only-cookies-to-store-the-access-and-refresh-tokens\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>This is possible, but only for apps that use the traditional server-only web app approach where all of the application logic is implemented on the server and it returns rendered HTML only.</p>\n<p>If your app uses any client side JavaScript to build a rich user experience, using HTTP-Only cookies is not feasible since only your server will be able to read and refresh the session of the user. The browser will not have access to the access and refresh tokens.</p>\n<p>Because of this, the Supabase JavaScript libraries provide only limited support. You can override the <code>storage</code> option when creating the Supabase client <strong>on the server</strong> to store the values in cookies or your preferred storage choice, for example:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createClient } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  auth: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    storage: customStorageObject,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><br></code></div></div>\n<p>The <code>customStorageObject</code> should implement the <code>getItem</code>, <code>setItem</code>, and <code>removeItem</code> methods from the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Storage\"><code>Storage</code> interface</a>. Async versions of these methods are also supported.</p>\n<p>When using cookies to store access and refresh tokens, make sure that the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#attributes\"><code>Expires</code> or <code>Max-Age</code> attributes</a> of the cookies is set to a timestamp very far into the future. Browsers will clear the cookies, but the session will remain active in Supabase Auth. Therefore it's best to let Supabase Auth control the validity of these tokens and instruct the browser to always store the cookies indefinitely.</p></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/sessions",
        "title": "User sessions | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=User%20sessions&description=undefined",
        "ogTitle": "User sessions | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/sessions",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Anonymous Sign-Ins\n\n## Create and use anonymous users to authenticate with Supabase\n\n* * *\n\n[Enable Anonymous Sign-Ins](/dashboard/project/_/settings/auth) to build apps which provide users an authenticated experience without requiring users to enter an email address, password, use an OAuth provider or provide any other PII (Personally Identifiable Information). Later, when ready, the user can link an authentication method to their account.\n\n##### Anonymous user vs the anon key\n\nCalling `signInAnonymously()` creates an anonymous user. It's just like a permanent user, except the user can't access their account if they sign out, clear browsing data, or use another device.\n\nLike permanent users, the `authenticated` Postgres role will be used when using the Data APIs to access your project. JWTs for these users will have an `is_anonymous` claim which you can use to distinguish in RLS policies.\n\nThis is different from the `anon` API key which does not create a user and can be used to implement public access to your database as it uses the `anonymous` Postgres role.\n\nAnonymous sign-ins can be used to build:\n\n- E-commerce applications, such as shopping carts before check-out\n- Full-feature demos without collecting personal information\n- Temporary or throw-away accounts\n\nReview your existing RLS policies before enabling anonymous sign-ins. Anonymous users use the `authenticated` role. To distinguish between anonymous users and permanent users, your policies need to check the `is_anonymous` field of the user's JWT.\n\nSee the [Access control section](#access-control) for more details.\n\n##### Use Dynamic Rendering with Next.js\n\nThe Supabase team has received reports of user metadata being cached across unique anonymous users as a result of Next.js static page rendering. For the best user experience, utilize dynamic page rendering.\n\n##### Self hosting and local development\n\nFor self-hosting, you can update your project configuration using the files and environment variables provided. See the [local development docs](/docs/guides/cli/config) for more details.\n\n## Sign in anonymously [\\#](\\#sign-in-anonymously)\n\nJavaScriptFlutterSwiftKotlinPython\n\nCall the [`signInAnonymously()`](/docs/reference/javascript/auth-signinanonymously) method:\n\n`\n_10\nconst { data, error } = await supabase.auth.signInAnonymously()\n`\n\n## Convert an anonymous user to a permanent user [\\#](\\#convert-an-anonymous-user-to-a-permanent-user)\n\nConverting an anonymous user to a permanent user requires [linking an identity](/docs/guides/auth/auth-identity-linking#manual-linking-beta) to the user. This requires you to [enable manual linking](/dashboard/project/_/settings/auth) in your Supabase project.\n\n### Link an Email / Phone identity [\\#](\\#link-an-email--phone-identity)\n\nJavaScriptFlutterSwiftKotlinPython\n\nYou can use the [`updateUser()`](/docs/reference/javascript/auth-updateuser) method to link an email or phone identity to the anonymous user. To add a password for the anonymous user, the user's email or phone number needs to be verified first.\n\n`\n_10\nconst { data, error } = await supabase.auth.updateUser({ email: 'example@email.com' })\n_10\n_10\n// verify the user's email by clicking on the email change link\n_10\n// or entering the 6-digit OTP sent to the email address\n_10\n_10\n// once the user has been verified, update the password\n_10\nconst { data, error } = await supabase.auth.updateUser({ password: 'password' })\n`\n\n### Link an OAuth identity [\\#](\\#link-an-oauth-identity)\n\nJavaScriptFlutterSwiftKotlinPython\n\nYou can use the [`linkIdentity()`](/docs/reference/javascript/auth-linkidentity) method to link an oauth identity to the anonymous user.\n\n`\n_10\nconst { data, error } = await supabase.auth.linkIdentity({ provider: 'google' })\n`\n\n## Access control [\\#](\\#access-control)\n\nAn anonymous user assumes the `authenticated` role just like a permanent user. You can use row-level security (RLS) policies to differentiate between an anonymous user and a permanent user by checking for the `is_anonymous` claim in the JWT returned by `auth.jwt()`:\n\n`\n_10\ncreate policy \"Only permanent users can post to the news feed\"\n_10\non news_feed as restrictive for insert\n_10\nto authenticated\n_10\nwith check ((select (auth.jwt()->>'is_anonymous')::boolean) is false );\n_10\n_10\ncreate policy \"Anonymous and permanent users can view the news feed\"\n_10\non news_feed for select\n_10\nto authenticated\n_10\nusing ( true );\n`\n\n##### Use restrictive policies\n\nRLS policies are permissive by default, which means that they are combined using an \"OR\" operator when multiple policies are applied. It is important to construct restrictive policies to ensure that the checks for an anonymous user are always enforced when combined with other policies.\n\n## Resolving identity conflicts [\\#](\\#resolving-identity-conflicts)\n\nDepending on your application requirements, data conflicts can arise when an anonymous user is converted to a permanent user. For example, in the context of an e-commerce application, an anonymous user would be allowed to add items to the shopping cart without signing up / signing in. When they decide to sign-in to an existing account, you will need to decide how you want to resolve data conflicts in the shopping cart:\n\n1. Overwrite the items in the cart with those in the existing account\n2. Overwrite the items in the cart with those from the anonymous user\n3. Merge the items in the cart together\n\n## Abuse prevention and rate limits [\\#](\\#abuse-prevention-and-rate-limits)\n\nSince anonymous users are stored in your database, bad actors can abuse the endpoint to increase your database size drastically. It is strongly recommended to [enable invisible Captcha or Cloudflare Turnstile](/docs/guides/auth/auth-captcha) to prevent abuse for anonymous sign-ins. An IP-based rate limit is enforced at 30 requests per hour which can be modified in your [dashboard](/dashboard/project/_/auth/rate-limits). You can refer to the full list of rate limits [here](/docs/guides/platform/going-into-prod#rate-limiting-resource-allocation--abuse-prevention).\n\n## Automatic cleanup [\\#](\\#automatic-cleanup)\n\nAutomatic cleanup of anonymous users is currently not available. Instead, you can delete anonymous users from your project by running the following SQL:\n\n`\n_10\n-- deletes anonymous users created more than 30 days ago\n_10\ndelete from auth.users\n_10\nwhere is_anonymous is true and created_at < now() - interval '30 days';\n`\n\n## Resources [\\#](\\#resources)\n\n- [Supabase - Get started for free](https://supabase.com)\n- [Supabase JS Client](https://github.com/supabase/supabase-js)\n- [Supabase Flutter Client](https://github.com/supabase/supabase-flutter)\n- [Supabase Kotlin Client](https://github.com/supabase-community/supabase-kt)",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Anonymous Sign-Ins</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Create and use anonymous users to authenticate with Supabase</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<p><a href=\"/dashboard/project/_/settings/auth\">Enable Anonymous Sign-Ins</a> to build apps which provide users an authenticated experience without requiring users to enter an email address, password, use an OAuth provider or provide any other PII (Personally Identifiable Information). Later, when ready, the user can link an authentication method to their account.</p>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text-foreground [&amp;>svg]:text-background [&amp;>svg]:bg-foreground mb-2 [&amp;_svg]:bg-foreground-muted [&amp;_svg]:text-background-muted bg-surface-200/25 border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z\"></path></svg><h5 class=\"mb-1 text mt-0.5 flex gap-3 text-sm [&amp;_p]:mb-1.5 [&amp;_p]:mt-0\">Anonymous user vs the anon key</h5><div class=\"text-sm [&amp;_p]:leading-relaxed text-foreground-light font-normal mt-3 [&amp;_p]:mb-1.5 [&amp;_p]:mt-0\"><p>Calling <code>signInAnonymously()</code> creates an anonymous user. It's just like a permanent user, except the user can't access their account if they sign out, clear browsing data, or use another device.</p><p>Like permanent users, the <code>authenticated</code> Postgres role will be used when using the Data APIs to access your project. JWTs for these users will have an <code>is_anonymous</code> claim which you can use to distinguish in RLS policies.</p><p>This is different from the <code>anon</code> API key which does not create a user and can be used to implement public access to your database as it uses the <code>anonymous</code> Postgres role.</p></div></div>\n<p>Anonymous sign-ins can be used to build:</p>\n<ul>\n<li>E-commerce applications, such as shopping carts before check-out</li>\n<li>Full-feature demos without collecting personal information</li>\n<li>Temporary or throw-away accounts</li>\n</ul>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>Review your existing RLS policies before enabling anonymous sign-ins. Anonymous users use the <code>authenticated</code> role. To distinguish between anonymous users and permanent users, your policies need to check the <code>is_anonymous</code> field of the user's JWT.</p><p>See the <a href=\"#access-control\">Access control section</a> for more details.</p></div></div>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><h5 class=\"mb-1 text mt-0.5 flex gap-3 text-sm [&amp;_p]:mb-1.5 [&amp;_p]:mt-0\">Use Dynamic Rendering with Next.js</h5><div class=\"text-sm [&amp;_p]:leading-relaxed text-foreground-light font-normal mt-3 [&amp;_p]:mb-1.5 [&amp;_p]:mt-0\"><p>The Supabase team has received reports of user metadata being cached across unique anonymous users as a result of Next.js static page rendering. For the best user experience, utilize dynamic page rendering.</p></div></div>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text-foreground [&amp;>svg]:text-background [&amp;>svg]:bg-foreground mb-2 [&amp;_svg]:bg-foreground-muted [&amp;_svg]:text-background-muted bg-surface-200/25 border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z\"></path></svg><h5 class=\"mb-1 text mt-0.5 flex gap-3 text-sm [&amp;_p]:mb-1.5 [&amp;_p]:mt-0\">Self hosting and local development</h5><div class=\"text-sm [&amp;_p]:leading-relaxed text-foreground-light font-normal mt-3 [&amp;_p]:mb-1.5 [&amp;_p]:mt-0\"><p>For self-hosting, you can update your project configuration using the files and environment variables provided. See the <a href=\"/docs/guides/cli/config\">local development docs</a> for more details.</p></div></div>\n<h2 id=\"sign-in-anonymously\" class=\"group scroll-mt-24\">Sign in anonymously<a href=\"#sign-in-anonymously\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rae9jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Rae9jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rae9jtsn7qb6ra:-content-dart\" data-state=\"inactive\" id=\"radix-:Rae9jtsn7qb6ra:-trigger-dart\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Flutter</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rae9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Rae9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rae9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:Rae9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rae9jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:Rae9jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rae9jtsn7qb6ra:-trigger-js\" id=\"radix-:Rae9jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>Call the <a href=\"/docs/reference/javascript/auth-signinanonymously\"><code>signInAnonymously()</code></a> method:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const { data, error } = await supabase.auth.signInAnonymously()</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rae9jtsn7qb6ra:-trigger-dart\" hidden=\"\" id=\"radix-:Rae9jtsn7qb6ra:-content-dart\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rae9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Rae9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rae9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:Rae9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rae9jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:Rae9jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h2 id=\"convert-an-anonymous-user-to-a-permanent-user\" class=\"group scroll-mt-24\">Convert an anonymous user to a permanent user<a href=\"#convert-an-anonymous-user-to-a-permanent-user\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Converting an anonymous user to a permanent user requires <a href=\"/docs/guides/auth/auth-identity-linking#manual-linking-beta\">linking an identity</a> to the user. This requires you to <a href=\"/dashboard/project/_/settings/auth\">enable manual linking</a> in your Supabase project.</p>\n<h3 id=\"link-an-email--phone-identity\" class=\"group scroll-mt-24\">Link an Email / Phone identity<a href=\"#link-an-email--phone-identity\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rbe9jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Rbe9jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbe9jtsn7qb6ra:-content-dart\" data-state=\"inactive\" id=\"radix-:Rbe9jtsn7qb6ra:-trigger-dart\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Flutter</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbe9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Rbe9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbe9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:Rbe9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbe9jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:Rbe9jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbe9jtsn7qb6ra:-trigger-js\" id=\"radix-:Rbe9jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>You can use the <a href=\"/docs/reference/javascript/auth-updateuser\"><code>updateUser()</code></a> method to link an email or phone identity to the anonymous user. To add a password for the anonymous user, the user's email or phone number needs to be verified first.</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const { data, error } = await supabase.auth.updateUser({ email: 'example@email.com' })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>// verify the user's email by clicking on the email change link</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>// or entering the 6-digit OTP sent to the email address</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>// once the user has been verified, update the password</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const { data, error } = await supabase.auth.updateUser({ password: 'password' })</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbe9jtsn7qb6ra:-trigger-dart\" hidden=\"\" id=\"radix-:Rbe9jtsn7qb6ra:-content-dart\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbe9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Rbe9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbe9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:Rbe9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbe9jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:Rbe9jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h3 id=\"link-an-oauth-identity\" class=\"group scroll-mt-24\">Link an OAuth identity<a href=\"#link-an-oauth-identity\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rbu9jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Rbu9jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbu9jtsn7qb6ra:-content-dart\" data-state=\"inactive\" id=\"radix-:Rbu9jtsn7qb6ra:-trigger-dart\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Flutter</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbu9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Rbu9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbu9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:Rbu9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbu9jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:Rbu9jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbu9jtsn7qb6ra:-trigger-js\" id=\"radix-:Rbu9jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>You can use the <a href=\"/docs/reference/javascript/auth-linkidentity\"><code>linkIdentity()</code></a> method to link an oauth identity to the anonymous user.</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const { data, error } = await supabase.auth.linkIdentity({ provider: 'google' })</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbu9jtsn7qb6ra:-trigger-dart\" hidden=\"\" id=\"radix-:Rbu9jtsn7qb6ra:-content-dart\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbu9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Rbu9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbu9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:Rbu9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbu9jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:Rbu9jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h2 id=\"access-control\" class=\"group scroll-mt-24\">Access control<a href=\"#access-control\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>An anonymous user assumes the <code>authenticated</code> role just like a permanent user. You can use row-level security (RLS) policies to differentiate between an anonymous user and a permanent user by checking for the <code>is_anonymous</code> claim in the JWT returned by <code>auth.jwt()</code>:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>create policy \"Only permanent users can post to the news feed\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>on news_feed as restrictive for insert</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>to authenticated</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>with check ((select (auth.jwt()-&gt;&gt;'is_anonymous')::boolean) is false );</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>create policy \"Anonymous and permanent users can view the news feed\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>on news_feed for select</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>to authenticated</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>using ( true );</span></div></div><br></code></div></div>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text-foreground [&amp;>svg]:text-background [&amp;>svg]:bg-foreground mb-2 [&amp;_svg]:bg-foreground-muted [&amp;_svg]:text-background-muted bg-surface-200/25 border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z\"></path></svg><h5 class=\"mb-1 text mt-0.5 flex gap-3 text-sm [&amp;_p]:mb-1.5 [&amp;_p]:mt-0\">Use restrictive policies</h5><div class=\"text-sm [&amp;_p]:leading-relaxed text-foreground-light font-normal mt-3 [&amp;_p]:mb-1.5 [&amp;_p]:mt-0\"><p>RLS policies are permissive by default, which means that they are combined using an \"OR\" operator when multiple policies are applied. It is important to construct restrictive policies to ensure that the checks for an anonymous user are always enforced when combined with other policies.</p></div></div>\n<h2 id=\"resolving-identity-conflicts\" class=\"group scroll-mt-24\">Resolving identity conflicts<a href=\"#resolving-identity-conflicts\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Depending on your application requirements, data conflicts can arise when an anonymous user is converted to a permanent user. For example, in the context of an e-commerce application, an anonymous user would be allowed to add items to the shopping cart without signing up / signing in. When they decide to sign-in to an existing account, you will need to decide how you want to resolve data conflicts in the shopping cart:</p>\n<ol>\n<li>Overwrite the items in the cart with those in the existing account</li>\n<li>Overwrite the items in the cart with those from the anonymous user</li>\n<li>Merge the items in the cart together</li>\n</ol>\n<h2 id=\"abuse-prevention-and-rate-limits\" class=\"group scroll-mt-24\">Abuse prevention and rate limits<a href=\"#abuse-prevention-and-rate-limits\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Since anonymous users are stored in your database, bad actors can abuse the endpoint to increase your database size drastically. It is strongly recommended to <a href=\"/docs/guides/auth/auth-captcha\">enable invisible Captcha or Cloudflare Turnstile</a> to prevent abuse for anonymous sign-ins. An IP-based rate limit is enforced at 30 requests per hour which can be modified in your <a href=\"/dashboard/project/_/auth/rate-limits\">dashboard</a>. You can refer to the full list of rate limits <a href=\"/docs/guides/platform/going-into-prod#rate-limiting-resource-allocation--abuse-prevention\">here</a>.</p>\n<h2 id=\"automatic-cleanup\" class=\"group scroll-mt-24\">Automatic cleanup<a href=\"#automatic-cleanup\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Automatic cleanup of anonymous users is currently not available. Instead, you can delete anonymous users from your project by running the following SQL:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>-- deletes anonymous users created more than 30 days ago</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>delete from auth.users</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>where is_anonymous is true and created_at &lt; now() - interval '30 days';</span></div></div><br></code></div></div>\n<h2 id=\"resources\" class=\"group scroll-mt-24\">Resources<a href=\"#resources\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<ul>\n<li><a href=\"https://supabase.com\">Supabase - Get started for free</a></li>\n<li><a href=\"https://github.com/supabase/supabase-js\">Supabase JS Client</a></li>\n<li><a href=\"https://github.com/supabase/supabase-flutter\">Supabase Flutter Client</a></li>\n<li><a href=\"https://github.com/supabase-community/supabase-kt\">Supabase Kotlin Client</a></li>\n</ul></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-anonymous",
        "title": "Anonymous Sign-Ins | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Anonymous%20Sign-Ins&description=undefined",
        "ogTitle": "Anonymous Sign-Ins | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-anonymous",
        "description": "Create and use anonymous users to authenticate with Supabase",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "ogDescription": "Create and use anonymous users to authenticate with Supabase",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Auth UI\n\n* * *\n\nAs of 7th Feb 2024, [this repository](https://github.com/supabase-community/auth-ui) is no longer maintained by the Supabase Team. At the moment, the team does not have capacity to give the expected level of care to this repository. We may revisit Auth UI in the future but regrettably have to leave it on hold for now as we focus on other priorities such as improving the Server-Side Rendering (SSR) package and advanced Auth primitives.\n\nAuth UI is a pre-built React component for authenticating users.\nIt supports custom themes and extensible styles to match your brand and aesthetic.\n\n## Set up Auth UI [\\#](\\#set-up-auth-ui)\n\nInstall the latest version of [supabase-js](/docs/reference/javascript) and the Auth UI package:\n\n`\n_10\nnpm install @supabase/supabase-js @supabase/auth-ui-react @supabase/auth-ui-shared\n`\n\n### Import the Auth component [\\#](\\#import-the-auth-component)\n\nPass `supabaseClient` from `@supabase/supabase-js` as a prop to the component.\n\n/src/index.js\n\n`\n_10\nimport { createClient } from '@supabase/supabase-js'\n_10\nimport { Auth } from '@supabase/auth-ui-react'\n_10\n_10\nconst supabase = createClient('<INSERT PROJECT URL>', '<INSERT PROJECT ANON API KEY>')\n_10\n_10\nconst App = () => <Auth supabaseClient={supabase} />\n`\n\nThis renders the Auth component without any styling.\nWe recommend using one of the predefined themes to style the UI.\nImport the theme you want to use and pass it to the `appearance.theme` prop.\n\n`\n_18\nimport { Auth } from '@supabase/auth-ui-react'\n_18\nimport {\n_18\n// Import predefined theme\n_18\nThemeSupa,\n_18\n} from '@supabase/auth-ui-shared'\n_18\n_18\nconst supabase = createClient(\n_18\n'<INSERT PROJECT URL>',\n_18\n'<INSERT PROJECT ANON API KEY>'\n_18\n)\n_18\n_18\nconst App = () => (\n_18\n<Auth\n_18\n    supabaseClient={supabase}\n_18\n    {/* Apply predefined theme */}\n_18\n    appearance={{ theme: ThemeSupa }}\n_18\n/>\n_18\n)\n`\n\n### Social providers [\\#](\\#social-providers)\n\nThe Auth component also supports login with [official social providers](../../auth#providers).\n\n`\n_13\nimport { createClient } from '@supabase/supabase-js'\n_13\nimport { Auth } from '@supabase/auth-ui-react'\n_13\nimport { ThemeSupa } from '@supabase/auth-ui-shared'\n_13\n_13\nconst supabase = createClient('<INSERT PROJECT URL>', '<INSERT PROJECT ANON API KEY>')\n_13\n_13\nconst App = () => (\n_13\n<Auth\n_13\n    supabaseClient={supabase}\n_13\n    appearance={{ theme: ThemeSupa }}\n_13\n    providers={['google', 'facebook', 'twitter']}\n_13\n/>\n_13\n)\n`\n\n### Options [\\#](\\#options)\n\nOptions are available via `queryParams`:\n\n`\n_10\n<Auth\n_10\nsupabaseClient={supabase}\n_10\nproviders={['google']}\n_10\nqueryParams={{\n_10\n    access_type: 'offline',\n_10\n    prompt: 'consent',\n_10\n    hd: 'domain.com',\n_10\n}}\n_10\nonlyThirdPartyProviders\n_10\n/>\n`\n\n### Provider scopes [\\#](\\#provider-scopes)\n\nProvider Scopes can be requested through `providerScope`;\n\n`\n_12\n<Auth\n_12\nsupabaseClient={supabase}\n_12\nproviders={['google']}\n_12\nqueryParams={{\n_12\n    access_type: 'offline',\n_12\n    prompt: 'consent',\n_12\n    hd: 'domain.com',\n_12\n}}\n_12\nproviderScopes={{\n_12\n    google: 'https://www.googleapis.com/auth/calendar.readonly',\n_12\n}}\n_12\n/>\n`\n\n### Supported views [\\#](\\#supported-views)\n\nThe Auth component is currently shipped with the following views:\n\n- [Email Login](../auth-email)\n- [Magic Link login](../auth-magic-link)\n- [Social Login](../social-login)\n- Update password\n- Forgotten password\n\nWe are planning on adding more views in the future. Follow along on that [repo](https://github.com/supabase/auth-ui).\n\n## Customization [\\#](\\#customization)\n\nThere are several ways to customize Auth UI:\n\n- Use one of the [predefined themes](#predefined-themes) that comes with Auth UI\n- Extend a theme by [overriding the variable tokens](#override-themes) in a theme\n- [Create your own theme](#create-theme)\n- [Use your own CSS classes](#custom-css-classes)\n- [Use inline styles](#custom-inline-styles)\n- [Use your own labels](#custom-labels)\n\n### Predefined themes [\\#](\\#predefined-themes)\n\nAuth UI comes with several themes to customize the appearance. Each predefined theme comes with at least two variations, a `default` variation, and a `dark` variation. You can switch between these themes using the `theme` prop. Import the theme you want to use and pass it to the `appearance.theme` prop.\n\n`\n_16\nimport { createClient } from '@supabase/supabase-js'\n_16\nimport { Auth } from '@supabase/auth-ui-react'\n_16\nimport { ThemeSupa } from '@supabase/auth-ui-shared'\n_16\n_16\nconst supabase = createClient(\n_16\n'<INSERT PROJECT URL>',\n_16\n'<INSERT PROJECT ANON API KEY>'\n_16\n)\n_16\n_16\nconst App = () => (\n_16\n<Auth\n_16\n    supabaseClient={supabase}\n_16\n    {/* Apply predefined theme */}\n_16\n    appearance={{ theme: ThemeSupa }}\n_16\n/>\n_16\n)\n`\n\nCurrently there is only one predefined theme available, but we plan to add more.\n\n### Switch theme variations [\\#](\\#switch-theme-variations)\n\nAuth UI comes with two theme variations: `default` and `dark`. You can switch between these themes with the `theme` prop.\n\n`\n_17\nimport { createClient } from '@supabase/supabase-js'\n_17\nimport { Auth } from '@supabase/auth-ui-react'\n_17\nimport { ThemeSupa } from '@supabase/auth-ui-shared'\n_17\n_17\nconst supabase = createClient(\n_17\n'<INSERT PROJECT URL>',\n_17\n'<INSERT PROJECT ANON API KEY>'\n_17\n)\n_17\n_17\nconst App = () => (\n_17\n<Auth\n_17\n    supabaseClient={supabase}\n_17\n    appearance={{ theme: ThemeSupa }}\n_17\n    {/* Set theme to dark */}\n_17\n    theme=\"dark\"\n_17\n/>\n_17\n)\n`\n\nIf you don't pass a value to `theme` it uses the `\"default\"` theme. You can pass `\"dark\"` to the theme prop to switch to the `dark` theme. If your theme has other variations, use the name of the variation in this prop.\n\n### Override themes [\\#](\\#override-themes)\n\nAuth UI themes can be overridden using variable tokens. See the [list of variable tokens](https://github.com/supabase/auth-ui/blob/main/packages/shared/src/theming/Themes.ts).\n\n`\n_22\nimport { createClient } from '@supabase/supabase-js'\n_22\nimport { Auth } from '@supabase/auth-ui-react'\n_22\nimport { ThemeSupa } from '@supabase/auth-ui-shared'\n_22\n_22\nconst supabase = createClient('<INSERT PROJECT URL>', '<INSERT PROJECT ANON API KEY>')\n_22\n_22\nconst App = () => (\n_22\n<Auth\n_22\n    supabaseClient={supabase}\n_22\n    appearance={{\n_22\n      theme: ThemeSupa,\n_22\n      variables: {\n_22\n        default: {\n_22\n          colors: {\n_22\n            brand: 'red',\n_22\n            brandAccent: 'darkred',\n_22\n          },\n_22\n        },\n_22\n      },\n_22\n    }}\n_22\n/>\n_22\n)\n`\n\nIf you created your own theme, you may not need to override any of them.\n\n### Create your own theme [\\#](\\#create-theme)\n\nYou can create your own theme by following the same structure within a `appearance.theme` property.\nSee the list of [tokens within a theme](https://github.com/supabase/auth-ui/blob/main/packages/shared/src/theming/Themes.ts).\n\n/src/index.js\n\n`\n_40\nimport { createClient } from '@supabase/supabase-js'\n_40\nimport { Auth } from '@supabase/auth-ui-react'\n_40\n_40\nconst supabase = createClient('<INSERT PROJECT URL>', '<INSERT PROJECT ANON API KEY>')\n_40\n_40\nconst customTheme = {\n_40\ndefault: {\n_40\n    colors: {\n_40\n      brand: 'hsl(153 60.0% 53.0%)',\n_40\n      brandAccent: 'hsl(154 54.8% 45.1%)',\n_40\n      brandButtonText: 'white',\n_40\n      // ..\n_40\n    },\n_40\n},\n_40\ndark: {\n_40\n    colors: {\n_40\n      brandButtonText: 'white',\n_40\n      defaultButtonBackground: '#2e2e2e',\n_40\n      defaultButtonBackgroundHover: '#3e3e3e',\n_40\n      //..\n_40\n    },\n_40\n},\n_40\n// You can also add more theme variations with different names.\n_40\nevenDarker: {\n_40\n    colors: {\n_40\n      brandButtonText: 'white',\n_40\n      defaultButtonBackground: '#1e1e1e',\n_40\n      defaultButtonBackgroundHover: '#2e2e2e',\n_40\n      //..\n_40\n    },\n_40\n},\n_40\n}\n_40\n_40\nconst App = () => (\n_40\n<Auth\n_40\n    supabaseClient={supabase}\n_40\n    theme=\"default\" // can also be \"dark\" or \"evenDarker\"\n_40\n    appearance={{ theme: customTheme }}\n_40\n/>\n_40\n)\n`\n\nYou can switch between different variations of your theme with the [\"theme\" prop](#switch-theme-variations).\n\n### Custom CSS classes [\\#](\\#custom-css-classes)\n\nYou can use custom CSS classes for the following elements:\n`\"button\"`, `\"container\"`, `\"anchor\"`, `\"divider\"`, `\"label\"`, `\"input\"`, `\"loader\"`, `\"message\"`.\n\n/src/index.js\n\n`\n_20\nimport { createClient } from '@supabase/supabase-js'\n_20\nimport { Auth } from '@supabase/auth-ui-react'\n_20\n_20\nconst supabase = createClient('<INSERT PROJECT URL>', '<INSERT PROJECT ANON API KEY>')\n_20\n_20\nconst App = () => (\n_20\n<Auth\n_20\n    supabaseClient={supabase}\n_20\n    appearance={{\n_20\n      // If you want to extend the default styles instead of overriding it, set this to true\n_20\n      extend: false,\n_20\n      // Your custom classes\n_20\n      className: {\n_20\n        anchor: 'my-awesome-anchor',\n_20\n        button: 'my-awesome-button',\n_20\n        //..\n_20\n      },\n_20\n    }}\n_20\n/>\n_20\n)\n`\n\n### Custom inline CSS [\\#](\\#custom-inline-styles)\n\nYou can use custom CSS inline styles for the following elements:\n`\"button\"`, `\"container\"`, `\"anchor\"`, `\"divider\"`, `\"label\"`, `\"input\"`, `\"loader\"`, `\"message\"`.\n\n/src/index.js\n\n`\n_17\nimport { createClient } from '@supabase/supabase-js'\n_17\nimport { Auth } from '@supabase/auth-ui-react'\n_17\n_17\nconst supabase = createClient('<INSERT PROJECT URL>', '<INSERT PROJECT ANON API KEY>')\n_17\n_17\nconst App = () => (\n_17\n<Auth\n_17\n    supabaseClient={supabase}\n_17\n    appearance={{\n_17\n      style: {\n_17\n        button: { background: 'red', color: 'white' },\n_17\n        anchor: { color: 'blue' },\n_17\n        //..\n_17\n      },\n_17\n    }}\n_17\n/>\n_17\n)\n`\n\n### Custom labels [\\#](\\#custom-labels)\n\nYou can use custom labels with `localization.variables` like so:\n\n`\n_18\nimport { createClient } from '@supabase/supabase-js'\n_18\nimport { Auth } from '@supabase/auth-ui-react'\n_18\n_18\nconst supabase = createClient('<INSERT PROJECT URL>', '<INSERT PROJECT ANON API KEY>')\n_18\n_18\nconst App = () => (\n_18\n<Auth\n_18\n    supabaseClient={supabase}\n_18\n    localization={{\n_18\n      variables: {\n_18\n        sign_in: {\n_18\n          email_label: 'Your email address',\n_18\n          password_label: 'Your strong password',\n_18\n        },\n_18\n      },\n_18\n    }}\n_18\n/>\n_18\n)\n`\n\nA full list of the available variables is below:\n\nSign UpSign InMagic LinkForgotten PasswordUpdate PasswordVerify OTP\n\n| Label Tag | Default Label |\n| --- | --- |\n| `email_label` | Email address |\n| `password_label` | Create a Password |\n| `email_input_placeholder` | Your email address |\n| `password_input_placeholder` | Your password |\n| `button_label` | Sign up |\n| `loading_button_label` | Signing up ... |\n| `social_provider_text` | Sign in with `{{provider}}` |\n| `link_text` | Don't have an account? Sign up |\n| `confirmation_text` | Check your email for the confirmation link |\n\nCurrently, translating error messages (e.g. \"Invalid credentials\") is not supported. Check [related issue.](https://github.com/supabase/auth-ui/issues/86)\n\n### Hiding links [\\#](\\#hiding-links)\n\nYou can hide links by setting the `showLinks` prop to `false`\n\n`\n_10\nimport { createClient } from '@supabase/supabase-js'\n_10\nimport { Auth } from '@supabase/auth-ui-react'\n_10\n_10\nconst supabase = createClient('<INSERT PROJECT URL>', '<INSERT PROJECT ANON API KEY>')\n_10\n_10\nconst App = () => <Auth supabaseClient={supabase} showLinks={false} />\n`\n\nSetting `showLinks` to `false` will hide the following links:\n\n- Don't have an account? Sign up\n- Already have an account? Sign in\n- Send a magic link email\n- Forgot your password?\n\n### Sign in and Sign up views [\\#](\\#sign-in-and-sign-up-views)\n\nAdd `sign_in` or `sign_up` views with the `view` prop:\n\n`\n_10\n<Auth\n_10\nsupabaseClient={supabase}\n_10\nview=\"sign_up\"\n_10\n/>\n`",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Auth UI</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>As of 7th Feb 2024, <a href=\"https://github.com/supabase-community/auth-ui\">this repository</a> is no longer maintained by the Supabase Team. At the moment, the team does not have capacity to give the expected level of care to this repository. We may revisit Auth UI in the future but regrettably have to leave it on hold for now as we focus on other priorities such as improving the Server-Side Rendering (SSR) package and advanced Auth primitives.</p></div></div>\n<p>Auth UI is a pre-built React component for authenticating users.\nIt supports custom themes and extensible styles to match your brand and aesthetic.</p>\n<video width=\"99%\" muted=\"\" playsinline=\"\" controls=\"\"><source src=\"https://supabase.com/images/blog/lw5-one-more/auth-ui-demo.mp4\" type=\"video/mp4\"></video>\n<h2 id=\"set-up-auth-ui\" class=\"group scroll-mt-24\">Set up Auth UI<a href=\"#set-up-auth-ui\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Install the latest version of <a href=\"/docs/reference/javascript\">supabase-js</a> and the Auth UI package:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>npm install @supabase/supabase-js @supabase/auth-ui-react @supabase/auth-ui-shared</span></div></div><br></code></div></div>\n<h3 id=\"import-the-auth-component\" class=\"group scroll-mt-24\">Import the Auth component<a href=\"#import-the-auth-component\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Pass <code>supabaseClient</code> from <code>@supabase/supabase-js</code> as a prop to the component.</p>\n<div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"/src/index.js\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">/src/</span>index.js</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createClient } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Auth } from '@supabase/auth-ui-react'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const supabase = createClient('&lt;INSERT PROJECT URL&gt;', '&lt;INSERT PROJECT ANON API KEY&gt;')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const App = () =&gt; &lt;Auth supabaseClient={supabase} /&gt;</span></div></div><br></code></div></div></div></div>\n<p>This renders the Auth component without any styling.\nWe recommend using one of the predefined themes to style the UI.\nImport the theme you want to use and pass it to the <code>appearance.theme</code> prop.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Auth } from '@supabase/auth-ui-react'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>import {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  // Import predefined theme</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  ThemeSupa,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>} from '@supabase/auth-ui-shared'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>const supabase = createClient(</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  '&lt;INSERT PROJECT URL&gt;',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  '&lt;INSERT PROJECT ANON API KEY&gt;'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>const App = () =&gt; (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;Auth</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>    supabaseClient={supabase}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>    {/* Apply predefined theme */}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>    appearance={{ theme: ThemeSupa }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>)</span></div></div><br></code></div></div>\n<h3 id=\"social-providers\" class=\"group scroll-mt-24\">Social providers<a href=\"#social-providers\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>The Auth component also supports login with <a href=\"../../auth#providers\">official social providers</a>.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createClient } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Auth } from '@supabase/auth-ui-react'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>import { ThemeSupa } from '@supabase/auth-ui-shared'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>const supabase = createClient('&lt;INSERT PROJECT URL&gt;', '&lt;INSERT PROJECT ANON API KEY&gt;')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>const App = () =&gt; (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;Auth</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>    supabaseClient={supabase}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>    appearance={{ theme: ThemeSupa }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>    providers={['google', 'facebook', 'twitter']}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>  /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->13</span><div style=\"display:inline-block;margin-left:16px\"><span>)</span></div></div><br></code></div></div>\n<h3 id=\"options\" class=\"group scroll-mt-24\">Options<a href=\"#options\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Options are available via <code>queryParams</code>:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;Auth</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  supabaseClient={supabase}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  providers={['google']}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  queryParams={{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    access_type: 'offline',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    prompt: 'consent',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    hd: 'domain.com',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  onlyThirdPartyProviders</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>/&gt;</span></div></div><br></code></div></div>\n<h3 id=\"provider-scopes\" class=\"group scroll-mt-24\">Provider scopes<a href=\"#provider-scopes\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Provider Scopes can be requested through <code>providerScope</code>;</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->12</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;Auth</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->12</span><div style=\"display:inline-block;margin-left:16px\"><span>  supabaseClient={supabase}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->12</span><div style=\"display:inline-block;margin-left:16px\"><span>  providers={['google']}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->12</span><div style=\"display:inline-block;margin-left:16px\"><span>  queryParams={{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->12</span><div style=\"display:inline-block;margin-left:16px\"><span>    access_type: 'offline',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->12</span><div style=\"display:inline-block;margin-left:16px\"><span>    prompt: 'consent',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->12</span><div style=\"display:inline-block;margin-left:16px\"><span>    hd: 'domain.com',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->12</span><div style=\"display:inline-block;margin-left:16px\"><span>  }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->12</span><div style=\"display:inline-block;margin-left:16px\"><span>  providerScopes={{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->12</span><div style=\"display:inline-block;margin-left:16px\"><span>    google: 'https://www.googleapis.com/auth/calendar.readonly',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->12</span><div style=\"display:inline-block;margin-left:16px\"><span>  }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->12</span><div style=\"display:inline-block;margin-left:16px\"><span>/&gt;</span></div></div><br></code></div></div>\n<h3 id=\"supported-views\" class=\"group scroll-mt-24\">Supported views<a href=\"#supported-views\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>The Auth component is currently shipped with the following views:</p>\n<ul>\n<li><a href=\"../auth-email\">Email Login</a></li>\n<li><a href=\"../auth-magic-link\">Magic Link login</a></li>\n<li><a href=\"../social-login\">Social Login</a></li>\n<li>Update password</li>\n<li>Forgotten password</li>\n</ul>\n<p>We are planning on adding more views in the future. Follow along on that <a href=\"https://github.com/supabase/auth-ui\">repo</a>.</p>\n<h2 id=\"customization\" class=\"group scroll-mt-24\">Customization<a href=\"#customization\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>There are several ways to customize Auth UI:</p>\n<ul>\n<li>Use one of the <a href=\"#predefined-themes\">predefined themes</a> that comes with Auth UI</li>\n<li>Extend a theme by <a href=\"#override-themes\">overriding the variable tokens</a> in a theme</li>\n<li><a href=\"#create-theme\">Create your own theme</a></li>\n<li><a href=\"#custom-css-classes\">Use your own CSS classes</a></li>\n<li><a href=\"#custom-inline-styles\">Use inline styles</a></li>\n<li><a href=\"#custom-labels\">Use your own labels</a></li>\n</ul>\n<h3 id=\"predefined-themes\" class=\"group scroll-mt-24\">Predefined themes<a href=\"#predefined-themes\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Auth UI comes with several themes to customize the appearance. Each predefined theme comes with at least two variations, a <code>default</code> variation, and a <code>dark</code> variation. You can switch between these themes using the <code>theme</code> prop. Import the theme you want to use and pass it to the <code>appearance.theme</code> prop.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->16</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createClient } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->16</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Auth } from '@supabase/auth-ui-react'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->16</span><div style=\"display:inline-block;margin-left:16px\"><span>import { ThemeSupa } from '@supabase/auth-ui-shared'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->16</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->16</span><div style=\"display:inline-block;margin-left:16px\"><span>const supabase = createClient(</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->16</span><div style=\"display:inline-block;margin-left:16px\"><span>  '&lt;INSERT PROJECT URL&gt;',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->16</span><div style=\"display:inline-block;margin-left:16px\"><span>  '&lt;INSERT PROJECT ANON API KEY&gt;'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->16</span><div style=\"display:inline-block;margin-left:16px\"><span>)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->16</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->16</span><div style=\"display:inline-block;margin-left:16px\"><span>const App = () =&gt; (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->16</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;Auth</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->16</span><div style=\"display:inline-block;margin-left:16px\"><span>    supabaseClient={supabase}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->16</span><div style=\"display:inline-block;margin-left:16px\"><span>    {/* Apply predefined theme */}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->16</span><div style=\"display:inline-block;margin-left:16px\"><span>    appearance={{ theme: ThemeSupa }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->16</span><div style=\"display:inline-block;margin-left:16px\"><span>  /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->16</span><div style=\"display:inline-block;margin-left:16px\"><span>)</span></div></div><br></code></div></div>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text-foreground [&amp;>svg]:text-background [&amp;>svg]:bg-foreground mb-2 [&amp;_svg]:bg-foreground-muted [&amp;_svg]:text-background-muted bg-surface-200/25 border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>Currently there is only one predefined theme available, but we plan to add more.</p></div></div>\n<h3 id=\"switch-theme-variations\" class=\"group scroll-mt-24\">Switch theme variations<a href=\"#switch-theme-variations\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Auth UI comes with two theme variations: <code>default</code> and <code>dark</code>. You can switch between these themes with the <code>theme</code> prop.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createClient } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Auth } from '@supabase/auth-ui-react'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>import { ThemeSupa } from '@supabase/auth-ui-shared'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>const supabase = createClient(</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>  '&lt;INSERT PROJECT URL&gt;',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>  '&lt;INSERT PROJECT ANON API KEY&gt;'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>const App = () =&gt; (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;Auth</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>    supabaseClient={supabase}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>    appearance={{ theme: ThemeSupa }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>    {/* Set theme to dark */}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>    theme=\"dark\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>  /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>)</span></div></div><br></code></div></div>\n<p>If you don't pass a value to <code>theme</code> it uses the <code>\"default\"</code> theme. You can pass <code>\"dark\"</code> to the theme prop to switch to the <code>dark</code> theme. If your theme has other variations, use the name of the variation in this prop.</p>\n<h3 id=\"override-themes\" class=\"group scroll-mt-24\">Override themes<a href=\"#override-themes\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Auth UI themes can be overridden using variable tokens. See the <a href=\"https://github.com/supabase/auth-ui/blob/main/packages/shared/src/theming/Themes.ts\">list of variable tokens</a>.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createClient } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Auth } from '@supabase/auth-ui-react'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>import { ThemeSupa } from '@supabase/auth-ui-shared'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>const supabase = createClient('&lt;INSERT PROJECT URL&gt;', '&lt;INSERT PROJECT ANON API KEY&gt;')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>const App = () =&gt; (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;Auth</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>    supabaseClient={supabase}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>    appearance={{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>      theme: ThemeSupa,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>      variables: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>        default: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>          colors: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>            brand: 'red',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>            brandAccent: 'darkred',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>          },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>        },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>      },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>    }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>  /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->22</span><div style=\"display:inline-block;margin-left:16px\"><span>)</span></div></div><br></code></div></div>\n<p>If you created your own theme, you may not need to override any of them.</p>\n<h3 id=\"create-theme\" class=\"group scroll-mt-24\">Create your own theme <a href=\"#create-theme\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>You can create your own theme by following the same structure within a <code>appearance.theme</code> property.\nSee the list of <a href=\"https://github.com/supabase/auth-ui/blob/main/packages/shared/src/theming/Themes.ts\">tokens within a theme</a>.</p>\n<div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"/src/index.js\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">/src/</span>index.js</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createClient } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Auth } from '@supabase/auth-ui-react'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>const supabase = createClient('&lt;INSERT PROJECT URL&gt;', '&lt;INSERT PROJECT ANON API KEY&gt;')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>const customTheme = {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>  default: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>    colors: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>      brand: 'hsl(153 60.0% 53.0%)',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>      brandAccent: 'hsl(154 54.8% 45.1%)',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>      brandButtonText: 'white',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>      // ..</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>    },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>  },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>  dark: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>    colors: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>      brandButtonText: 'white',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>      defaultButtonBackground: '#2e2e2e',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>      defaultButtonBackgroundHover: '#3e3e3e',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>      //..</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>    },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>  },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>  // You can also add more theme variations with different names.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>  evenDarker: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>    colors: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>      brandButtonText: 'white',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>      defaultButtonBackground: '#1e1e1e',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>      defaultButtonBackgroundHover: '#2e2e2e',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>      //..</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>    },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>  },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>const App = () =&gt; (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;Auth</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>    supabaseClient={supabase}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>    theme=\"default\" // can also be \"dark\" or \"evenDarker\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>    appearance={{ theme: customTheme }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>  /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->40</span><div style=\"display:inline-block;margin-left:16px\"><span>)</span></div></div><br></code></div></div></div></div>\n<p>You can switch between different variations of your theme with the <a href=\"#switch-theme-variations\">\"theme\" prop</a>.</p>\n<h3 id=\"custom-css-classes\" class=\"group scroll-mt-24\">Custom CSS classes <a href=\"#custom-css-classes\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>You can use custom CSS classes for the following elements:\n<code>\"button\"</code>, <code>\"container\"</code>, <code>\"anchor\"</code>, <code>\"divider\"</code>, <code>\"label\"</code>, <code>\"input\"</code>, <code>\"loader\"</code>, <code>\"message\"</code>.</p>\n<div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"/src/index.js\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">/src/</span>index.js</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createClient } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Auth } from '@supabase/auth-ui-react'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>const supabase = createClient('&lt;INSERT PROJECT URL&gt;', '&lt;INSERT PROJECT ANON API KEY&gt;')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>const App = () =&gt; (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;Auth</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>    supabaseClient={supabase}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>    appearance={{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>      // If you want to extend the default styles instead of overriding it, set this to true</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>      extend: false,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>      // Your custom classes</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>      className: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>        anchor: 'my-awesome-anchor',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>        button: 'my-awesome-button',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>        //..</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>      },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>    }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>  /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->20</span><div style=\"display:inline-block;margin-left:16px\"><span>)</span></div></div><br></code></div></div></div></div>\n<h3 id=\"custom-inline-styles\" class=\"group scroll-mt-24\">Custom inline CSS <a href=\"#custom-inline-styles\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>You can use custom CSS inline styles for the following elements:\n<code>\"button\"</code>, <code>\"container\"</code>, <code>\"anchor\"</code>, <code>\"divider\"</code>, <code>\"label\"</code>, <code>\"input\"</code>, <code>\"loader\"</code>, <code>\"message\"</code>.</p>\n<div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"/src/index.js\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">/src/</span>index.js</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createClient } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Auth } from '@supabase/auth-ui-react'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>const supabase = createClient('&lt;INSERT PROJECT URL&gt;', '&lt;INSERT PROJECT ANON API KEY&gt;')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>const App = () =&gt; (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;Auth</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>    supabaseClient={supabase}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>    appearance={{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>      style: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>        button: { background: 'red', color: 'white' },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>        anchor: { color: 'blue' },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>        //..</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>      },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>    }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>  /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>)</span></div></div><br></code></div></div></div></div>\n<h3 id=\"custom-labels\" class=\"group scroll-mt-24\">Custom labels <a href=\"#custom-labels\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>You can use custom labels with <code>localization.variables</code> like so:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createClient } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Auth } from '@supabase/auth-ui-react'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>const supabase = createClient('&lt;INSERT PROJECT URL&gt;', '&lt;INSERT PROJECT ANON API KEY&gt;')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>const App = () =&gt; (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;Auth</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>    supabaseClient={supabase}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>    localization={{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>      variables: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>        sign_in: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>          email_label: 'Your email address',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>          password_label: 'Your strong password',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>        },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>      },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>    }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>)</span></div></div><br></code></div></div>\n<p>A full list of the available variables is below:</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rtm9jtsn7qb6ra:-content-sign-up\" data-state=\"active\" id=\"radix-:Rtm9jtsn7qb6ra:-trigger-sign-up\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Sign Up</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rtm9jtsn7qb6ra:-content-sign-in\" data-state=\"inactive\" id=\"radix-:Rtm9jtsn7qb6ra:-trigger-sign-in\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Sign In</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rtm9jtsn7qb6ra:-content-magic_link\" data-state=\"inactive\" id=\"radix-:Rtm9jtsn7qb6ra:-trigger-magic_link\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Magic Link</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rtm9jtsn7qb6ra:-content-forgotten-password\" data-state=\"inactive\" id=\"radix-:Rtm9jtsn7qb6ra:-trigger-forgotten-password\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Forgotten Password</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rtm9jtsn7qb6ra:-content-update-password\" data-state=\"inactive\" id=\"radix-:Rtm9jtsn7qb6ra:-trigger-update-password\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Update Password</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rtm9jtsn7qb6ra:-content-verify-otp\" data-state=\"inactive\" id=\"radix-:Rtm9jtsn7qb6ra:-trigger-verify-otp\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Verify OTP</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rtm9jtsn7qb6ra:-trigger-sign-up\" id=\"radix-:Rtm9jtsn7qb6ra:-content-sign-up\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><table><thead><tr><th>Label Tag</th><th>Default Label</th></tr></thead><tbody><tr><td><code>email_label</code></td><td>Email address</td></tr><tr><td><code>password_label</code></td><td>Create a Password</td></tr><tr><td><code>email_input_placeholder</code></td><td>Your email address</td></tr><tr><td><code>password_input_placeholder</code></td><td>Your password</td></tr><tr><td><code>button_label</code></td><td>Sign up</td></tr><tr><td><code>loading_button_label</code></td><td>Signing up ...</td></tr><tr><td><code>social_provider_text</code></td><td>Sign in with <code>{{provider}}</code></td></tr><tr><td><code>link_text</code></td><td>Don't have an account? Sign up</td></tr><tr><td><code>confirmation_text</code></td><td>Check your email for the confirmation link</td></tr></tbody></table></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rtm9jtsn7qb6ra:-trigger-sign-in\" hidden=\"\" id=\"radix-:Rtm9jtsn7qb6ra:-content-sign-in\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rtm9jtsn7qb6ra:-trigger-magic_link\" hidden=\"\" id=\"radix-:Rtm9jtsn7qb6ra:-content-magic_link\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rtm9jtsn7qb6ra:-trigger-forgotten-password\" hidden=\"\" id=\"radix-:Rtm9jtsn7qb6ra:-content-forgotten-password\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rtm9jtsn7qb6ra:-trigger-update-password\" hidden=\"\" id=\"radix-:Rtm9jtsn7qb6ra:-content-update-password\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rtm9jtsn7qb6ra:-trigger-verify-otp\" hidden=\"\" id=\"radix-:Rtm9jtsn7qb6ra:-content-verify-otp\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>Currently, translating error messages (e.g. \"Invalid credentials\") is not supported. Check <a href=\"https://github.com/supabase/auth-ui/issues/86\">related issue.</a></p></div></div>\n<h3 id=\"hiding-links\" class=\"group scroll-mt-24\">Hiding links <a href=\"#hiding-links\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>You can hide links by setting the <code>showLinks</code> prop to <code>false</code></p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createClient } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Auth } from '@supabase/auth-ui-react'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const supabase = createClient('&lt;INSERT PROJECT URL&gt;', '&lt;INSERT PROJECT ANON API KEY&gt;')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const App = () =&gt; &lt;Auth supabaseClient={supabase} showLinks={false} /&gt;</span></div></div><br></code></div></div>\n<p>Setting <code>showLinks</code> to <code>false</code> will hide the following links:</p>\n<ul>\n<li>Don't have an account? Sign up</li>\n<li>Already have an account? Sign in</li>\n<li>Send a magic link email</li>\n<li>Forgot your password?</li>\n</ul>\n<h3 id=\"sign-in-and-sign-up-views\" class=\"group scroll-mt-24\">Sign in and Sign up views<a href=\"#sign-in-and-sign-up-views\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Add <code>sign_in</code> or <code>sign_up</code> views with the <code>view</code> prop:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;Auth</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  supabaseClient={supabase}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  view=\"sign_up\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>/&gt;</span></div></div><br></code></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-helpers/auth-ui",
        "title": "Auth UI | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Auth%20UI&description=A%20prebuilt%2C%20customizable%20React%20component%20for%20authenticating%20users.",
        "ogTitle": "Auth UI | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-helpers/auth-ui",
        "description": "A prebuilt, customizable React component for authenticating users.",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "ogDescription": "A prebuilt, customizable React component for authenticating users.",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Passwordless email logins\n\n## Email logins using Magic Links or One-Time Passwords (OTPs)\n\n* * *\n\nSupabase Auth provides several passwordless login methods. Passwordless logins allow users to sign in without a password, by clicking a confirmation link or entering a verification code.\n\nPasswordless login can:\n\n- Improve the user experience by not requiring users to create and remember a password\n- Increase security by reducing the risk of password-related security breaches\n- Reduce support burden of dealing with password resets and other password-related flows\n\nSupabase Auth offers two passwordless login methods that use the user's email address:\n\n- [Magic Link](#with-magic-link)\n- [OTP](#with-otp)\n\n## With Magic Link [\\#](\\#with-magic-link)\n\nMagic Links are a form of passwordless login where users click on a link sent to their email address to log in to their accounts. Magic Links only work with email addresses and are one-time use only.\n\n### Enabling Magic Link [\\#](\\#enabling-magic-link)\n\nEmail authentication methods, including Magic Links, are enabled by default.\n\nConfigure the Site URL and any additional redirect URLs. These are the only URLs that are allowed as redirect destinations after the user clicks a Magic Link. You can change the URLs on the [Auth Providers page](/dashboard/project/_/auth/providers) for hosted projects, or in the [configuration file](/docs/guides/cli/config#auth.additional_redirect_urls) for self-hosted projects.\n\nBy default, a user can only request a magic link once every 60 seconds and they expire after 1 hour.\n\n### Signing in with Magic Link [\\#](\\#signing-in-with-magic-link)\n\nCall the \"sign in with OTP\" method from the client library.\n\nThough the method is labelled \"OTP\", it sends a Magic Link by default. The two methods differ only in the content of the confirmation email sent to the user.\n\nIf the user hasn't signed up yet, they are automatically signed up by default. To prevent this, set the `shouldCreateUser` option to `false`.\n\nJavaScriptExpo React NativeDartSwiftKotlinPython\n\n`\n_10\nasync function signInWithEmail() {\n_10\nconst { data, error } = await supabase.auth.signInWithOtp({\n_10\n    email: 'example@email.com',\n_10\n    options: {\n_10\n      // set this to false if you do not want the user to be automatically signed up\n_10\n      shouldCreateUser: false,\n_10\n      emailRedirectTo: 'https://example.com/welcome',\n_10\n    },\n_10\n})\n_10\n}\n`\n\nThat's it for the implicit flow.\n\nIf you're using PKCE flow, edit the Magic Link [email template](/docs/guides/auth/auth-email-templates) to send a token hash:\n\n`\n_10\n<h2>Magic Link</h2>\n_10\n_10\n<p>Follow this link to login:</p>\n_10\n<p><a href=\"{{ .SiteURL }}/auth/confirm?token_hash={{ .TokenHash }}&type=magiclink\">Log In</a></p>\n`\n\nAt the `/auth/confirm` endpoint, exchange the hash for the session:\n\n`\n_10\nconst { error } = await supabase.auth.verifyOtp({ token_hash, type })\n`\n\n## With OTP [\\#](\\#with-otp)\n\nEmail one-time passwords (OTP) are a form of passwordless login where users key in a six digit code sent to their email address to log in to their accounts.\n\n### Enabling Email OTP [\\#](\\#enabling-email-otp)\n\nEmail authentication methods, including Email OTPs, are enabled by default.\n\nEmail OTPs share an implementation with Magic Links. To send an OTP instead of a Magic Link, alter the **Magic Link** email template. For a hosted Supabase project, go to [Email Templates](/dashboard/project/_/auth/templates) in the Dashboard. For a self-hosted project or local development, see the [Email Templates guide](/docs/guides/auth/auth-email-templates).\n\nModify the template to include the `{{ .Token }}` variable, for example:\n\n`\n_10\n<h2>One time login code</h2>\n_10\n_10\n<p>Please enter this code: {{ .Token }}</p>\n`\n\nBy default, a user can only request an OTP once every 60 seconds and they expire after 1 hour. This is configurable via `Auth > Providers > Email > Email OTP Expiration`. An expiry duration of more than 86400 seconds (one day) is disallowed to guard against brute force attacks. The longer an OTP remains valid, the more time an attacker has to attempt brute force attacks. If the OTP is valid for several days, an attacker might have more opportunities to guess the correct OTP through repeated attempts.\n\n### Signing in with Email OTP [\\#](\\#signing-in-with-email-otp)\n\n#### Step 1: Send the user an OTP code [\\#](\\#step-1-send-the-user-an-otp-code)\n\nGet the user's email and call the \"sign in with OTP\" method from your client library.\n\nIf the user hasn't signed up yet, they are automatically signed up by default. To prevent this, set the `shouldCreateUser` option to `false`.\n\nJavaScriptDartSwiftKotlinPython\n\n`\n_10\nconst { data, error } = await supabase.auth.signInWithOtp({\n_10\nemail: 'example@email.com',\n_10\noptions: {\n_10\n    // set this to false if you do not want the user to be automatically signed up\n_10\n    shouldCreateUser: false,\n_10\n},\n_10\n})\n`\n\nIf the request is successful, you receive a response with `error: null` and a `data` object where both `user` and `session` are null. Let the user know to check their email inbox.\n\n`\n_10\n{\n_10\n\"data\": {\n_10\n    \"user\": null,\n_10\n    \"session\": null\n_10\n},\n_10\n\"error\": null\n_10\n}\n`\n\n#### Step 2: Verify the OTP to create a session [\\#](\\#step-2-verify-the-otp-to-create-a-session)\n\nProvide an input field for the user to enter their one-time code.\n\nCall the \"verify OTP\" method from your client library with the user's email address, the code, and a type of `email`:\n\nJavaScriptSwiftKotlinPython\n\n`\n_10\nconst {\n_10\ndata: { session },\n_10\nerror,\n_10\n} = await supabase.auth.verifyOtp({\n_10\nemail,\n_10\ntoken: '123456',\n_10\ntype: 'email',\n_10\n})\n`\n\nIf successful, the user is now logged in, and you receive a valid session that looks like:\n\n`\n_10\n{\n_10\n\"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNjI3MjkxNTc3LCJzdWIiOiJmYTA2NTQ1Zi1kYmI1LTQxY2EtYjk1NC1kOGUyOTg4YzcxOTEiLCJlbWFpbCI6IiIsInBob25lIjoiNjU4NzUyMjAyOSIsImFwcF9tZXRhZGF0YSI6eyJwcm92aWRlciI6InBob25lIn0sInVzZXJfbWV0YWRhdGEiOnt9LCJyb2xlIjoiYXV0aGVudGljYXRlZCJ9.1BqRi0NbS_yr1f6hnr4q3s1ylMR3c1vkiJ4e_N55dhM\",\n_10\n\"token_type\": \"bearer\",\n_10\n\"expires_in\": 3600,\n_10\n\"refresh_token\": \"LSp8LglPPvf0DxGMSj-vaQ\",\n_10\n\"user\": {...}\n_10\n}\n`",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Passwordless email logins</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Email logins using Magic Links or One-Time Passwords (OTPs)</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>Supabase Auth provides several passwordless login methods. Passwordless logins allow users to sign in without a password, by clicking a confirmation link or entering a verification code.</p>\n<p>Passwordless login can:</p>\n<ul>\n<li>Improve the user experience by not requiring users to create and remember a password</li>\n<li>Increase security by reducing the risk of password-related security breaches</li>\n<li>Reduce support burden of dealing with password resets and other password-related flows</li>\n</ul>\n<p>Supabase Auth offers two passwordless login methods that use the user's email address:</p>\n<ul>\n<li><a href=\"#with-magic-link\">Magic Link</a></li>\n<li><a href=\"#with-otp\">OTP</a></li>\n</ul>\n<h2 id=\"with-magic-link\" class=\"group scroll-mt-24\">With Magic Link<a href=\"#with-magic-link\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Magic Links are a form of passwordless login where users click on a link sent to their email address to log in to their accounts. Magic Links only work with email addresses and are one-time use only.</p>\n<h3 id=\"enabling-magic-link\" class=\"group scroll-mt-24\">Enabling Magic Link<a href=\"#enabling-magic-link\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Email authentication methods, including Magic Links, are enabled by default.</p>\n<p>Configure the Site URL and any additional redirect URLs. These are the only URLs that are allowed as redirect destinations after the user clicks a Magic Link. You can change the URLs on the <a href=\"/dashboard/project/_/auth/providers\">Auth Providers page</a> for hosted projects, or in the <a href=\"/docs/guides/cli/config#auth.additional_redirect_urls\">configuration file</a> for self-hosted projects.</p>\n<p>By default, a user can only request a magic link once every <!-- -->60 seconds<!-- --> and they expire after <!-- -->1 hour<!-- -->.</p>\n<h3 id=\"signing-in-with-magic-link\" class=\"group scroll-mt-24\">Signing in with Magic Link<a href=\"#signing-in-with-magic-link\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Call the \"sign in with OTP\" method from the client library.</p>\n<p>Though the method is labelled \"OTP\", it sends a Magic Link by default. The two methods differ only in the content of the confirmation email sent to the user.</p>\n<p>If the user hasn't signed up yet, they are automatically signed up by default. To prevent this, set the <code>shouldCreateUser</code> option to <code>false</code>.</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rk69jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Rk69jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rk69jtsn7qb6ra:-content-react-native\" data-state=\"inactive\" id=\"radix-:Rk69jtsn7qb6ra:-trigger-react-native\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Expo React Native</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rk69jtsn7qb6ra:-content-dart\" data-state=\"inactive\" id=\"radix-:Rk69jtsn7qb6ra:-trigger-dart\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Dart</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rk69jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Rk69jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rk69jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:Rk69jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rk69jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:Rk69jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rk69jtsn7qb6ra:-trigger-js\" id=\"radix-:Rk69jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>async function signInWithEmail() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  const { data, error } = await supabase.auth.signInWithOtp({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    email: 'example@email.com',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    options: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>      // set this to false if you do not want the user to be automatically signed up</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>      shouldCreateUser: false,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>      emailRedirectTo: 'https://example.com/welcome',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rk69jtsn7qb6ra:-trigger-react-native\" hidden=\"\" id=\"radix-:Rk69jtsn7qb6ra:-content-react-native\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rk69jtsn7qb6ra:-trigger-dart\" hidden=\"\" id=\"radix-:Rk69jtsn7qb6ra:-content-dart\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rk69jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Rk69jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rk69jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:Rk69jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rk69jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:Rk69jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p>That's it for the implicit flow.</p>\n<p>If you're using PKCE flow, edit the Magic Link <a href=\"/docs/guides/auth/auth-email-templates\">email template</a> to send a token hash:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;h2&gt;Magic Link&lt;/h2&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;p&gt;Follow this link to login:&lt;/p&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;p&gt;&lt;a href=\"{{ .SiteURL }}/auth/confirm?token_hash={{ .TokenHash }}&amp;type=magiclink\"&gt;Log In&lt;/a&gt;&lt;/p&gt;</span></div></div><br></code></div></div>\n<p>At the <code>/auth/confirm</code> endpoint, exchange the hash for the session:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const { error } = await supabase.auth.verifyOtp({ token_hash, type })</span></div></div><br></code></div></div>\n<h2 id=\"with-otp\" class=\"group scroll-mt-24\">With OTP<a href=\"#with-otp\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Email one-time passwords (OTP) are a form of passwordless login where users key in a six digit code sent to their email address to log in to their accounts.</p>\n<h3 id=\"enabling-email-otp\" class=\"group scroll-mt-24\">Enabling Email OTP<a href=\"#enabling-email-otp\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Email authentication methods, including Email OTPs, are enabled by default.</p>\n<p>Email OTPs share an implementation with Magic Links. To send an OTP instead of a Magic Link, alter the <strong>Magic Link</strong> email template. For a hosted Supabase project, go to <a href=\"/dashboard/project/_/auth/templates\">Email Templates</a> in the Dashboard. For a self-hosted project or local development, see the <a href=\"/docs/guides/auth/auth-email-templates\">Email Templates guide</a>.</p>\n<p>Modify the template to include the <code>{{ .Token }}</code> variable, for example:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;h2&gt;One time login code&lt;/h2&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;p&gt;Please enter this code: {{ .Token }}&lt;/p&gt;</span></div></div><br></code></div></div>\n<p>By default, a user can only request an OTP once every <!-- -->60 seconds<!-- --> and they expire after <!-- -->1 hour<!-- -->. This is configurable via <code>Auth &gt; Providers &gt; Email &gt; Email OTP Expiration</code>. An expiry duration of more than 86400 seconds (one day) is disallowed to guard against brute force attacks. The longer an OTP remains valid, the more time an attacker has to attempt brute force attacks. If the OTP is valid for several days, an attacker might have more opportunities to guess the correct OTP through repeated attempts.</p>\n<h3 id=\"signing-in-with-email-otp\" class=\"group scroll-mt-24\">Signing in with Email OTP<a href=\"#signing-in-with-email-otp\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<h4 id=\"step-1-send-the-user-an-otp-code\" class=\"group scroll-mt-24\">Step 1: Send the user an OTP code<a href=\"#step-1-send-the-user-an-otp-code\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h4>\n<p>Get the user's email and call the \"sign in with OTP\" method from your client library.</p>\n<p>If the user hasn't signed up yet, they are automatically signed up by default. To prevent this, set the <code>shouldCreateUser</code> option to <code>false</code>.</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rom9jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Rom9jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rom9jtsn7qb6ra:-content-dart\" data-state=\"inactive\" id=\"radix-:Rom9jtsn7qb6ra:-trigger-dart\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Dart</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rom9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Rom9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rom9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:Rom9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rom9jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:Rom9jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rom9jtsn7qb6ra:-trigger-js\" id=\"radix-:Rom9jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const { data, error } = await supabase.auth.signInWithOtp({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  email: 'example@email.com',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  options: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    // set this to false if you do not want the user to be automatically signed up</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    shouldCreateUser: false,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rom9jtsn7qb6ra:-trigger-dart\" hidden=\"\" id=\"radix-:Rom9jtsn7qb6ra:-content-dart\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rom9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Rom9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rom9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:Rom9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rom9jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:Rom9jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p>If the request is successful, you receive a response with <code>error: null</code> and a <code>data</code> object where both <code>user</code> and <code>session</code> are null. Let the user know to check their email inbox.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"data\": {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"user\": null,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"session\": null</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"error\": null</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div>\n<h4 id=\"step-2-verify-the-otp-to-create-a-session\" class=\"group scroll-mt-24\">Step 2: Verify the OTP to create a session<a href=\"#step-2-verify-the-otp-to-create-a-session\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h4>\n<p>Provide an input field for the user to enter their one-time code.</p>\n<p>Call the \"verify OTP\" method from your client library with the user's email address, the code, and a type of <code>email</code>:</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rq69jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Rq69jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rq69jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Rq69jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rq69jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:Rq69jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rq69jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:Rq69jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rq69jtsn7qb6ra:-trigger-js\" id=\"radix-:Rq69jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  data: { session },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  error,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>} = await supabase.auth.verifyOtp({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  email,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  token: '123456',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  type: 'email',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rq69jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Rq69jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rq69jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:Rq69jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rq69jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:Rq69jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p>If successful, the user is now logged in, and you receive a valid session that looks like:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNjI3MjkxNTc3LCJzdWIiOiJmYTA2NTQ1Zi1kYmI1LTQxY2EtYjk1NC1kOGUyOTg4YzcxOTEiLCJlbWFpbCI6IiIsInBob25lIjoiNjU4NzUyMjAyOSIsImFwcF9tZXRhZGF0YSI6eyJwcm92aWRlciI6InBob25lIn0sInVzZXJfbWV0YWRhdGEiOnt9LCJyb2xlIjoiYXV0aGVudGljYXRlZCJ9.1BqRi0NbS_yr1f6hnr4q3s1ylMR3c1vkiJ4e_N55dhM\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"token_type\": \"bearer\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"expires_in\": 3600,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"refresh_token\": \"LSp8LglPPvf0DxGMSj-vaQ\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"user\": {...}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-email-passwordless",
        "title": "Passwordless email logins | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Passwordless%20email%20logins&description=undefined",
        "ogTitle": "Passwordless email logins | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-email-passwordless",
        "description": "Email logins using Magic Links or One-Time Passwords (OTPs)",
        "modifiedTime": "2024-09-10T20:36:24.980Z",
        "ogDescription": "Email logins using Magic Links or One-Time Passwords (OTPs)",
        "publishedTime": "2024-09-10T20:36:24.980Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Signing out\n\n## Signing out a user\n\n* * *\n\nSigning out a user works the same way no matter what method they used to sign in.\n\nCall the sign out method from the client library. It removes the active session and clears Auth data from the storage medium.\n\nJavaScriptDartSwiftKotlinPython\n\n`\n_10\nasync function signOut() {\n_10\nconst { error } = await supabase.auth.signOut()\n_10\n}\n`\n\n## Sign out and scopes [\\#](\\#sign-out-and-scopes)\n\nSupabase Auth allows you to specify three different scopes for when a user invokes the [sign out API](/docs/reference/javascript/auth-signout) in your application:\n\n- `global` (default) when all sessions active for the user are terminated.\n- `local` which only terminates the current session for the user but keep sessions on other devices or browsers active.\n- `others` to terminate all but the current session for the user.\n\nYou can invoke these by providing the `scope` option:\n\nJavaScriptDartKotlin\n\n`\n_10\n// defaults to the global scope\n_10\nawait supabase.auth.signOut()\n_10\n_10\n// sign out from the current session only\n_10\nawait supabase.auth.signOut({ scope: 'local' })\n`\n\nUpon sign out, all refresh tokens and potentially other database objects related to the affected sessions are destroyed and the client library removes the session stored in the local storage medium.\n\nAccess Tokens of revoked sessions remain valid until their expiry time, encoded in the `exp` claim. The user won't be immediately logged out and will only be logged out when the Access Token expires.",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Signing out</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Signing out a user</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>Signing out a user works the same way no matter what method they used to sign in.</p>\n<p>Call the sign out method from the client library. It removes the active session and clears Auth data from the storage medium.</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R4u9jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:R4u9jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R4u9jtsn7qb6ra:-content-dart\" data-state=\"inactive\" id=\"radix-:R4u9jtsn7qb6ra:-trigger-dart\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Dart</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R4u9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:R4u9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R4u9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:R4u9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R4u9jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:R4u9jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R4u9jtsn7qb6ra:-trigger-js\" id=\"radix-:R4u9jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>async function signOut() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  const { error } = await supabase.auth.signOut()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R4u9jtsn7qb6ra:-trigger-dart\" hidden=\"\" id=\"radix-:R4u9jtsn7qb6ra:-content-dart\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R4u9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:R4u9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R4u9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:R4u9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R4u9jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:R4u9jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h2 id=\"sign-out-and-scopes\" class=\"group scroll-mt-24\">Sign out and scopes<a href=\"#sign-out-and-scopes\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Supabase Auth allows you to specify three different scopes for when a user invokes the <a href=\"/docs/reference/javascript/auth-signout\">sign out API</a> in your application:</p>\n<ul>\n<li><code>global</code> (default) when all sessions active for the user are terminated.</li>\n<li><code>local</code> which only terminates the current session for the user but keep sessions on other devices or browsers active.</li>\n<li><code>others</code> to terminate all but the current session for the user.</li>\n</ul>\n<p>You can invoke these by providing the <code>scope</code> option:</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R669jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:R669jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R669jtsn7qb6ra:-content-dart\" data-state=\"inactive\" id=\"radix-:R669jtsn7qb6ra:-trigger-dart\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Dart</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R669jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:R669jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R669jtsn7qb6ra:-trigger-js\" id=\"radix-:R669jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>// defaults to the global scope</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>await supabase.auth.signOut()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>// sign out from the current session only</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>await supabase.auth.signOut({ scope: 'local' })</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R669jtsn7qb6ra:-trigger-dart\" hidden=\"\" id=\"radix-:R669jtsn7qb6ra:-content-dart\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R669jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:R669jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p>Upon sign out, all refresh tokens and potentially other database objects related to the affected sessions are destroyed and the client library removes the session stored in the local storage medium.</p>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>Access Tokens of revoked sessions remain valid until their expiry time, encoded in the <code>exp</code> claim. The user won't be immediately logged out and will only be logged out when the Access Token expires.</p></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/signout",
        "title": "Signing out | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Signing%20out&description=undefined",
        "ogTitle": "Signing out | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/signout",
        "description": "Signing out a user",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "ogDescription": "Signing out a user",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Advanced guide\n\n## Details about SSR Auth flows and implementation for advanced users.\n\n* * *\n\nWhen a user authenticates with Supabase Auth, two pieces of information are issued by the server:\n\n1. **Access token** in the form of a JWT.\n2. **Refresh token** which is a randomly generated string.\n\nThe default behavior if you're not using SSR is to store this information in local storage. Local storage isn't accessible by the server, so for SSR, the tokens instead need to be stored in a secure cookie. The cookie can then be passed back and forth between your app code in the client and your app code in the server.\n\nIf you're not using SSR, you might also be using the [implicit flow](/docs/guides/auth/sessions/implicit-flow) to get the access and refresh tokens. The server can't access the tokens in this flow, so for SSR, you should change to the [PKCE flow](/docs/guides/auth/sessions/pkce-flow). You can change the flow type when initiating your Supabase client if your client library provides this option.\n\nIn the `@supabase/ssr` package, Supabase clients are initiated to use the PKCE flow by default. They are also automatically configured to handle the saving and retrieval of session information in cookies.\n\n## How it works [\\#](\\#how-it-works)\n\nIn the PKCE flow, a redirect is made to your app, with an Auth Code contained in the URL. When you exchange this code using `exchangeCodeForSession`, you receive the session information, which contains the access and refresh tokens.\n\nTo maintain the session, these tokens must be stored in a storage medium securely shared between client and server, which is traditionally cookies. Whenever the session is refreshed, the auth and refresh tokens in the shared storage medium must be updated. Supabase client libraries provide a customizable `storage` option when a client is initiated, allowing you to change where tokens are stored.\n\nFor an implementation example, see the [@supabase/ssr](https://github.com/supabase/auth-helpers/blob/main/packages/ssr/src/index.ts) package.\n\n## Frequently asked questions [\\#](\\#frequently-asked-questions)\n\n### No session on the server side with Next.js route prefetching? [\\#](\\#no-session-on-the-server-side-with-nextjs-route-prefetching)\n\nWhen you use route prefetching in Next.js using `<Link href=\"/...\">` components or the `Router.push()` APIs can send server-side requests before the browser processes the access and refresh tokens. This means that those requests may not have any cookies set and your server code will render unauthenticated content.\n\nTo improve experience for your users, we recommend redirecting users to one specific page after sign-in that does not include any route prefetching from Next.js. Once the Supabase client library running in the browser has obtained the access and refresh tokens from the URL fragment, you can send users to any pages that use prefetching.\n\n### How do I make the cookies `HttpOnly`? [\\#](\\#how-do-i-make-the-cookies-httponly-)\n\nThis is not necessary. Both the access token and refresh token are designed to be passed around to different components in your application. The browser-based side of your application needs access to the refresh token to properly maintain a browser session anyway.\n\n### My server is getting invalid refresh token errors. What's going on? [\\#](\\#my-server-is-getting-invalid-refresh-token-errors-whats-going-on)\n\nIt is likely that the refresh token sent from the browser to your server is stale. Make sure the `onAuthStateChange` listener callback is free of bugs and is registered relatively early in your application's lifetime\n\nWhen you receive this error on the server-side, try to defer rendering to the browser where the client library can access an up-to-date refresh token and present the user with a better experience.\n\n### Should I set a shorter `Max-Age` parameter on the cookies? [\\#](\\#should-i-set-a-shorter-max-age-parameter-on-the-cookies)\n\nThe `Max-Age` or `Expires` cookie parameters only control whether the browser sends the value to the server. Since a refresh token represents the long-lived authentication session of the user on that browser, setting a short `Max-Age` or `Expires` parameter on the cookies only results in a degraded user experience.\n\nThe only way to ensure that a user has logged out or their session has ended is to get the user's details with `getUser()`.\n\n### What should I use for the `SameSite` property? [\\#](\\#what-should-i-use-for-the-samesite-property)\n\nMake sure you [understand the behavior of the property in different situations](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite) as some properties can degrade the user experience.\n\nA good default is to use `Lax` which sends cookies when users are navigating to your site. Cookies typically require the `Secure` attribute, which only sends them over HTTPS. However, this can be a problem when developing on `localhost`.\n\n### Can I use server-side rendering with a CDN or cache? [\\#](\\#can-i-use-server-side-rendering-with-a-cdn-or-cache)\n\nYes, but you need to be careful to include at least the refresh token cookie value in the cache key. Otherwise you may be accidentally serving pages with data belonging to different users!\n\nAlso be sure you set proper cache control headers. We recommend invalidating cache keys every hour or less.\n\n### Which authentication flows have PKCE support? [\\#](\\#which-authentication-flows-have-pkce-support)\n\nAt present, PKCE is supported on the Magic Link, OAuth, Sign Up, and Password Recovery routes. These correspond to the `signInWithOtp`, `signInWithOAuth`, `signUp`, and `resetPasswordForEmail` methods on the Supabase client library. When using PKCE with Phone and Email OTPs, there is no behavior change with respect to the implicit flow - an access token will be returned in the body when a request is successful.",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Advanced guide</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Details about SSR Auth flows and implementation for advanced users.</h2><hr class=\"not-prose border-t-0 border-b my-8\"><p>When a user authenticates with Supabase Auth, two pieces of information are issued by the server:</p>\n<ol>\n<li><strong>Access token</strong> in the form of a JWT.</li>\n<li><strong>Refresh token</strong> which is a randomly generated string.</li>\n</ol>\n<p>The default behavior if you're not using SSR is to store this information in local storage. Local storage isn't accessible by the server, so for SSR, the tokens instead need to be stored in a secure cookie. The cookie can then be passed back and forth between your app code in the client and your app code in the server.</p>\n<p>If you're not using SSR, you might also be using the <a href=\"/docs/guides/auth/sessions/implicit-flow\">implicit flow</a> to get the access and refresh tokens. The server can't access the tokens in this flow, so for SSR, you should change to the <a href=\"/docs/guides/auth/sessions/pkce-flow\">PKCE flow</a>. You can change the flow type when initiating your Supabase client if your client library provides this option.</p>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text-foreground [&amp;>svg]:text-background [&amp;>svg]:bg-foreground mb-2 [&amp;_svg]:bg-foreground-muted [&amp;_svg]:text-background-muted bg-surface-200/25 border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>In the <code>@supabase/ssr</code> package, Supabase clients are initiated to use the PKCE flow by default. They are also automatically configured to handle the saving and retrieval of session information in cookies.</p></div></div>\n<h2 id=\"how-it-works\" class=\"group scroll-mt-24\">How it works<a href=\"#how-it-works\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>In the PKCE flow, a redirect is made to your app, with an Auth Code contained in the URL. When you exchange this code using <code>exchangeCodeForSession</code>, you receive the session information, which contains the access and refresh tokens.</p>\n<p>To maintain the session, these tokens must be stored in a storage medium securely shared between client and server, which is traditionally cookies. Whenever the session is refreshed, the auth and refresh tokens in the shared storage medium must be updated. Supabase client libraries provide a customizable <code>storage</code> option when a client is initiated, allowing you to change where tokens are stored.</p>\n<p>For an implementation example, see the <a href=\"https://github.com/supabase/auth-helpers/blob/main/packages/ssr/src/index.ts\">@supabase/ssr</a> package.</p>\n<h2 id=\"frequently-asked-questions\" class=\"group scroll-mt-24\">Frequently asked questions<a href=\"#frequently-asked-questions\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<h3 id=\"no-session-on-the-server-side-with-nextjs-route-prefetching\" class=\"group scroll-mt-24\">No session on the server side with Next.js route prefetching?<a href=\"#no-session-on-the-server-side-with-nextjs-route-prefetching\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>When you use route prefetching in Next.js using <code>&lt;Link href=\"/...\"&gt;</code> components or the <code>Router.push()</code> APIs can send server-side requests before the browser processes the access and refresh tokens. This means that those requests may not have any cookies set and your server code will render unauthenticated content.</p>\n<p>To improve experience for your users, we recommend redirecting users to one specific page after sign-in that does not include any route prefetching from Next.js. Once the Supabase client library running in the browser has obtained the access and refresh tokens from the URL fragment, you can send users to any pages that use prefetching.</p>\n<h3 id=\"how-do-i-make-the-cookies-httponly-\" class=\"group scroll-mt-24\">How do I make the cookies <code>HttpOnly</code>?<a href=\"#how-do-i-make-the-cookies-httponly-\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>This is not necessary. Both the access token and refresh token are designed to be passed around to different components in your application. The browser-based side of your application needs access to the refresh token to properly maintain a browser session anyway.</p>\n<h3 id=\"my-server-is-getting-invalid-refresh-token-errors-whats-going-on\" class=\"group scroll-mt-24\">My server is getting invalid refresh token errors. What's going on?<a href=\"#my-server-is-getting-invalid-refresh-token-errors-whats-going-on\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>It is likely that the refresh token sent from the browser to your server is stale. Make sure the <code>onAuthStateChange</code> listener callback is free of bugs and is registered relatively early in your application's lifetime</p>\n<p>When you receive this error on the server-side, try to defer rendering to the browser where the client library can access an up-to-date refresh token and present the user with a better experience.</p>\n<h3 id=\"should-i-set-a-shorter-max-age-parameter-on-the-cookies\" class=\"group scroll-mt-24\">Should I set a shorter <code>Max-Age</code> parameter on the cookies?<a href=\"#should-i-set-a-shorter-max-age-parameter-on-the-cookies\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>The <code>Max-Age</code> or <code>Expires</code> cookie parameters only control whether the browser sends the value to the server. Since a refresh token represents the long-lived authentication session of the user on that browser, setting a short <code>Max-Age</code> or <code>Expires</code> parameter on the cookies only results in a degraded user experience.</p>\n<p>The only way to ensure that a user has logged out or their session has ended is to get the user's details with <code>getUser()</code>.</p>\n<h3 id=\"what-should-i-use-for-the-samesite-property\" class=\"group scroll-mt-24\">What should I use for the <code>SameSite</code> property?<a href=\"#what-should-i-use-for-the-samesite-property\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Make sure you <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite\">understand the behavior of the property in different situations</a> as some properties can degrade the user experience.</p>\n<p>A good default is to use <code>Lax</code> which sends cookies when users are navigating to your site. Cookies typically require the <code>Secure</code> attribute, which only sends them over HTTPS. However, this can be a problem when developing on <code>localhost</code>.</p>\n<h3 id=\"can-i-use-server-side-rendering-with-a-cdn-or-cache\" class=\"group scroll-mt-24\">Can I use server-side rendering with a CDN or cache?<a href=\"#can-i-use-server-side-rendering-with-a-cdn-or-cache\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Yes, but you need to be careful to include at least the refresh token cookie value in the cache key. Otherwise you may be accidentally serving pages with data belonging to different users!</p>\n<p>Also be sure you set proper cache control headers. We recommend invalidating cache keys every hour or less.</p>\n<h3 id=\"which-authentication-flows-have-pkce-support\" class=\"group scroll-mt-24\">Which authentication flows have PKCE support?<a href=\"#which-authentication-flows-have-pkce-support\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>At present, PKCE is supported on the Magic Link, OAuth, Sign Up, and Password Recovery routes. These correspond to the <code>signInWithOtp</code>, <code>signInWithOAuth</code>, <code>signUp</code>, and <code>resetPasswordForEmail</code> methods on the Supabase client library. When using PKCE with Phone and Email OTPs, there is no behavior change with respect to the implicit flow - an access token will be returned in the body when a request is successful.</p></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/server-side/advanced-guide",
        "title": "Advanced guide | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Advanced%20guide&description=undefined",
        "ogTitle": "Advanced guide | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/server-side/advanced-guide",
        "description": "Details about SSR Auth flows and implementation for advanced users.",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "ogDescription": "Details about SSR Auth flows and implementation for advanced users.",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Password-based Auth\n\n## Allow users to sign in with a password connected to their email or phone number.\n\n* * *\n\nUsers often expect to sign in to your site with a password. Supabase Auth helps you implement password-based auth safely, using secure configuration options and best practices for storing and verifying passwords.\n\nUsers can associate a password with their identity using their [email address](#with-email) or a [phone number](#with-phone).\n\n## With email [\\#](\\#with-email)\n\n### Enabling email and password-based authentication [\\#](\\#enabling-email-and-password-based-authentication)\n\nEmail authentication is enabled by default.\n\nYou can configure whether users need to verify their email to sign in. On hosted Supabase projects, this is true by default. On self-hosted projects or in local development, this is false by default.\n\nChange this setting on the [Auth Providers page](/dashboard/project/_/auth/providers) for hosted projects, or in the [configuration file](/docs/guides/cli/config#auth.email.enable_confirmations) for self-hosted projects.\n\n### Signing up with an email and password [\\#](\\#signing-up-with-an-email-and-password)\n\nThere are two possible flows for email signup: [implicit flow](/docs/guides/auth/sessions#implicit-flow) and [PKCE flow](/docs/guides/auth/sessions#pkce-flow). If you're using SSR, you're using the PKCE flow. If you're using client-only code, the default flow depends upon the client library. The implicit flow is the default in JavaScript and Dart, and the PKCE flow is the default in Swift.\n\nThe instructions in this section assume that email confirmations are enabled.\n\nImplicit flowPKCE flow\n\nThe implicit flow only works for client-only apps. Your site directly receives the access token after the user confirms their email.\n\nJavaScriptDartSwiftKotlinPython\n\nTo sign up the user, call [signUp()](/docs/reference/javascript/auth-signup) with their email address and password.\n\nYou can optionally specify a URL to redirect to after the user clicks the confirmation link. This URL must be configured as a [Redirect URL](/docs/guides/auth/redirect-urls), which you can do in the [dashboard](/dashboard/project/_/auth/url-configuration) for hosted projects, or in the [configuration file](/docs/guides/cli/config#auth.additional_redirect_urls) for self-hosted projects.\n\nIf you don't specify a redirect URL, the user is automatically redirected to your site URL. This defaults to `localhost:3000`, but you can also configure this.\n\n`\n_10\nasync function signUpNewUser() {\n_10\nconst { data, error } = await supabase.auth.signUp({\n_10\n    email: 'example@email.com',\n_10\n    password: 'example-password',\n_10\n    options: {\n_10\n      emailRedirectTo: 'https://example.com/welcome',\n_10\n    },\n_10\n})\n_10\n}\n`\n\n### Signing in with an email and password [\\#](\\#signing-in-with-an-email-and-password)\n\nJavaScriptDartSwiftKotlinPython\n\nWhen your user signs in, call [signInWithPassword()](/docs/reference/javascript/auth-signinwithpassword) with their email address and password:\n\n`\n_10\nasync function signInWithEmail() {\n_10\nconst { data, error } = await supabase.auth.signInWithPassword({\n_10\n    email: 'example@email.com',\n_10\n    password: 'example-password',\n_10\n})\n_10\n}\n`\n\n### Resetting a password [\\#](\\#resetting-a-password)\n\nImplicit flowPKCE flow\n\n#### Step 1: Create a reset password page [\\#](\\#step-1-create-a-reset-password-page)\n\nCreate a **reset password** page. This page should be publicly accessible.\n\nCollect the user's email address and request a password reset email. Specify the redirect URL, which should point to the URL of a **change password** page. This URL needs to be configured in your [redirect URLs](/docs/guides/auth/redirect-urls).\n\nJavaScriptSwiftKotlinPython\n\n`\n_10\nawait supabase.auth.resetPasswordForEmail('hello@example.com', {\n_10\nredirectTo: 'http://example.com/account/update-password',\n_10\n})\n`\n\n#### Step 2: Create a change password page [\\#](\\#step-2-create-a-change-password-page)\n\nCreate a **change password** page at the URL you specified in the previous step. This page should be accessible only to authenticated users.\n\nCollect the user's new password and call `updateUser` to update their password.\n\nJavaScriptSwiftKotlinPython\n\n`\n_10\nawait supabase.auth.updateUser({ password: new_password })\n`\n\n### Email sending [\\#](\\#email-sending)\n\nThe signup confirmation and password reset flows require an SMTP server to send emails.\n\nThe Supabase platform comes with a default email-sending service for you to try out. The service has a rate limit of 2 emails per hour, and availability is on a best-effort basis. For production use, you should consider configuring a custom SMTP server.\n\nConsider configuring a custom SMTP server for production.\n\nSee the [Custom SMTP guide](/docs/guides/auth/auth-smtp) for instructions.\n\n#### Local development with Inbucket [\\#](\\#local-development-with-inbucket)\n\nYou can test email flows on your local machine. The Supabase CLI automatically captures emails sent locally by using [Inbucket](https://github.com/inbucket/inbucket).\n\nIn your terminal, run `supabase status` to get the Inbucket URL. Go to this URL in your browser, and follow the instructions to find your emails.\n\n## With phone [\\#](\\#with-phone)\n\nYou can use a user's mobile phone number as an identifier, instead of an email address, when they sign up with a password.\n\nThis practice is usually discouraged because phone networks recycle mobile phone numbers. Anyone receiving a recycled phone number gets access to the original user's account. To mitigate this risk, [implement MFA](/docs/guides/auth/auth-mfa).\n\nProtect users who use a phone number as a password-based auth identifier by enabling MFA.\n\n### Enabling phone and password-based authentication [\\#](\\#enabling-phone-and-password-based-authentication)\n\nEnable phone authentication on the [Auth Providers page](/dashboard/project/_/auth/providers) for hosted Supabase projects.\n\nFor self-hosted projects or local development, use the [configuration file](/docs/guides/cli/config#auth.sms.enable_signup). See the configuration variables namespaced under `auth.sms`.\n\nIf you want users to confirm their phone number on signup, you need to set up an SMS provider. Each provider has its own configuration. Supported providers include MessageBird, Twilio, Vonage, and TextLocal (community-supported).\n\n### Configuring SMS Providers\n\n![MessageBird Icon](https://supabase.com/docs/img/icons/messagebird-icon.svg)\n\n##### MessageBird\n\n![Twilio Icon](https://supabase.com/docs/img/icons/twilio-icon.svg)\n\n##### Twilio\n\n![Vonage Icon](https://supabase.com/docs/img/icons/vonage-icon-light.svg)\n\n##### Vonage\n\n![Textlocal (Community Supported) Icon](https://supabase.com/docs/guides/auth/Community%20Supported)\n\n##### Textlocal (Community Supported)\n\n### Signing up with a phone number and password [\\#](\\#signing-up-with-a-phone-number-and-password)\n\nTo sign up the user, call [`signUp()`](/docs/reference/javascript/auth-signup) with their phone number and password:\n\nJavaScriptSwiftKotlinPythonHTTP\n\n`\n_10\nconst { data, error } = await supabase.auth.signUp({\n_10\nphone: '+13334445555',\n_10\npassword: 'some-password',\n_10\n})\n`\n\nIf you have phone verification turned on, the user receives an SMS with a 6-digit pin that you must verify within 60 seconds:\n\nJavaScriptSwiftKotlinPythonHTTP\n\nYou should present a form to the user so they can input the 6 digit pin, then send it along with the phone number to `verifyOtp`:\n\n`\n_10\nconst {\n_10\ndata: { session },\n_10\nerror,\n_10\n} = await supabase.auth.verifyOtp({\n_10\nphone: '+13334445555',\n_10\ntoken: '123456',\n_10\ntype: 'sms',\n_10\n})\n`\n\n### Signing in a with a phone number and password [\\#](\\#signing-in-a-with-a-phone-number-and-password)\n\nCall the function to sign in with the user's phone number and password:\n\nJavaScriptSwiftKotlinPythonHTTP\n\n`\n_10\nconst { user, error } = await supabase.auth.signInWithPassword({\n_10\nphone: '+13334445555',\n_10\npassword: 'some-password',\n_10\n})\n`",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Password-based Auth</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Allow users to sign in with a password connected to their email or phone number.</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>Users often expect to sign in to your site with a password. Supabase Auth helps you implement password-based auth safely, using secure configuration options and best practices for storing and verifying passwords.</p>\n<p>Users can associate a password with their identity using their <a href=\"#with-email\">email address</a> or a <a href=\"#with-phone\">phone number</a>.</p>\n<h2 id=\"with-email\" class=\"group scroll-mt-24\">With email<a href=\"#with-email\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<h3 id=\"enabling-email-and-password-based-authentication\" class=\"group scroll-mt-24\">Enabling email and password-based authentication<a href=\"#enabling-email-and-password-based-authentication\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Email authentication is enabled by default.</p>\n<p>You can configure whether users need to verify their email to sign in. On hosted Supabase projects, this is true by default. On self-hosted projects or in local development, this is false by default.</p>\n<p>Change this setting on the <a href=\"/dashboard/project/_/auth/providers\">Auth Providers page</a> for hosted projects, or in the <a href=\"/docs/guides/cli/config#auth.email.enable_confirmations\">configuration file</a> for self-hosted projects.</p>\n<h3 id=\"signing-up-with-an-email-and-password\" class=\"group scroll-mt-24\">Signing up with an email and password<a href=\"#signing-up-with-an-email-and-password\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>There are two possible flows for email signup: <a href=\"/docs/guides/auth/sessions#implicit-flow\">implicit flow</a> and <a href=\"/docs/guides/auth/sessions#pkce-flow\">PKCE flow</a>. If you're using SSR, you're using the PKCE flow. If you're using client-only code, the default flow depends upon the client library. The implicit flow is the default in JavaScript and Dart, and the PKCE flow is the default in Swift.</p>\n<p>The instructions in this section assume that email confirmations are enabled.</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Riu9jtsn7qb6ra:-content-implicit\" data-state=\"active\" id=\"radix-:Riu9jtsn7qb6ra:-trigger-implicit\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-base px-4 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Implicit flow</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Riu9jtsn7qb6ra:-content-pkce\" data-state=\"inactive\" id=\"radix-:Riu9jtsn7qb6ra:-trigger-pkce\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-base px-4 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>PKCE flow</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Riu9jtsn7qb6ra:-trigger-implicit\" id=\"radix-:Riu9jtsn7qb6ra:-content-implicit\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>The implicit flow only works for client-only apps. Your site directly receives the access token after the user confirms their email.</p><div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R6diu9jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:R6diu9jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R6diu9jtsn7qb6ra:-content-dart\" data-state=\"inactive\" id=\"radix-:R6diu9jtsn7qb6ra:-trigger-dart\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Dart</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R6diu9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:R6diu9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R6diu9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:R6diu9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R6diu9jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:R6diu9jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6diu9jtsn7qb6ra:-trigger-js\" id=\"radix-:R6diu9jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>To sign up the user, call <a href=\"/docs/reference/javascript/auth-signup\">signUp()</a> with their email address and password.</p><p>You can optionally specify a URL to redirect to after the user clicks the confirmation link. This URL must be configured as a <a href=\"/docs/guides/auth/redirect-urls\">Redirect URL</a>, which you can do in the <a href=\"/dashboard/project/_/auth/url-configuration\">dashboard</a> for hosted projects, or in the <a href=\"/docs/guides/cli/config#auth.additional_redirect_urls\">configuration file</a> for self-hosted projects.</p><p>If you don't specify a redirect URL, the user is automatically redirected to your site URL. This defaults to <code>localhost:3000</code>, but you can also configure this.</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>async function signUpNewUser() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  const { data, error } = await supabase.auth.signUp({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    email: 'example@email.com',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    password: 'example-password',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    options: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>      emailRedirectTo: 'https://example.com/welcome',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6diu9jtsn7qb6ra:-trigger-dart\" hidden=\"\" id=\"radix-:R6diu9jtsn7qb6ra:-content-dart\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6diu9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:R6diu9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6diu9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:R6diu9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6diu9jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:R6diu9jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Riu9jtsn7qb6ra:-trigger-pkce\" hidden=\"\" id=\"radix-:Riu9jtsn7qb6ra:-content-pkce\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h3 id=\"signing-in-with-an-email-and-password\" class=\"group scroll-mt-24\">Signing in with an email and password<a href=\"#signing-in-with-an-email-and-password\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rje9jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Rje9jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rje9jtsn7qb6ra:-content-dart\" data-state=\"inactive\" id=\"radix-:Rje9jtsn7qb6ra:-trigger-dart\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Dart</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rje9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Rje9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rje9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:Rje9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rje9jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:Rje9jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rje9jtsn7qb6ra:-trigger-js\" id=\"radix-:Rje9jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>When your user signs in, call <a href=\"/docs/reference/javascript/auth-signinwithpassword\">signInWithPassword()</a> with their email address and password:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>async function signInWithEmail() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  const { data, error } = await supabase.auth.signInWithPassword({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    email: 'example@email.com',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    password: 'example-password',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rje9jtsn7qb6ra:-trigger-dart\" hidden=\"\" id=\"radix-:Rje9jtsn7qb6ra:-content-dart\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rje9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Rje9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rje9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:Rje9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rje9jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:Rje9jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h3 id=\"resetting-a-password\" class=\"group scroll-mt-24\">Resetting a password<a href=\"#resetting-a-password\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rju9jtsn7qb6ra:-content-implicit\" data-state=\"active\" id=\"radix-:Rju9jtsn7qb6ra:-trigger-implicit\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Implicit flow</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rju9jtsn7qb6ra:-content-pkce\" data-state=\"inactive\" id=\"radix-:Rju9jtsn7qb6ra:-trigger-pkce\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>PKCE flow</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rju9jtsn7qb6ra:-trigger-implicit\" id=\"radix-:Rju9jtsn7qb6ra:-content-implicit\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><h4 id=\"step-1-create-a-reset-password-page\" class=\"group scroll-mt-24\">Step 1: Create a reset password page<a href=\"#step-1-create-a-reset-password-page\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h4><p>Create a <strong>reset password</strong> page. This page should be publicly accessible.</p><p>Collect the user's email address and request a password reset email. Specify the redirect URL, which should point to the URL of a <strong>change password</strong> page. This URL needs to be configured in your <a href=\"/docs/guides/auth/redirect-urls\">redirect URLs</a>.</p><div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rcdju9jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Rcdju9jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rcdju9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Rcdju9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rcdju9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:Rcdju9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rcdju9jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:Rcdju9jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rcdju9jtsn7qb6ra:-trigger-js\" id=\"radix-:Rcdju9jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>await supabase.auth.resetPasswordForEmail('hello@example.com', {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  redirectTo: 'http://example.com/account/update-password',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rcdju9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Rcdju9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rcdju9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:Rcdju9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rcdju9jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:Rcdju9jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div><h4 id=\"step-2-create-a-change-password-page\" class=\"group scroll-mt-24\">Step 2: Create a change password page<a href=\"#step-2-create-a-change-password-page\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h4><p>Create a <strong>change password</strong> page at the URL you specified in the previous step. This page should be accessible only to authenticated users.</p><p>Collect the user's new password and call <code>updateUser</code> to update their password.</p></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rju9jtsn7qb6ra:-trigger-pkce\" hidden=\"\" id=\"radix-:Rju9jtsn7qb6ra:-content-pkce\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rk69jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Rk69jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rk69jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Rk69jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rk69jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:Rk69jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rk69jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:Rk69jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rk69jtsn7qb6ra:-trigger-js\" id=\"radix-:Rk69jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>await supabase.auth.updateUser({ password: new_password })</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rk69jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Rk69jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rk69jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:Rk69jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rk69jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:Rk69jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h3 id=\"email-sending\" class=\"group scroll-mt-24\">Email sending<a href=\"#email-sending\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>The signup confirmation and password reset flows require an SMTP server to send emails.</p>\n<p>The Supabase platform comes with a default email-sending service for you to try out. The service has a rate limit of <!-- -->2<!-- --> emails per hour, and availability is on a best-effort basis. For production use, you should consider configuring a custom SMTP server.</p>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text-foreground [&amp;>svg]:text-background [&amp;>svg]:bg-foreground mb-2 [&amp;_svg]:bg-foreground-muted [&amp;_svg]:text-background-muted bg-surface-200/25 border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>Consider configuring a custom SMTP server for production.</p></div></div>\n<p>See the <a href=\"/docs/guides/auth/auth-smtp\">Custom SMTP guide</a> for instructions.</p>\n<h4 id=\"local-development-with-inbucket\" class=\"group scroll-mt-24\">Local development with Inbucket<a href=\"#local-development-with-inbucket\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h4>\n<p>You can test email flows on your local machine. The Supabase CLI automatically captures emails sent locally by using <a href=\"https://github.com/inbucket/inbucket\">Inbucket</a>.</p>\n<p>In your terminal, run <code>supabase status</code> to get the Inbucket URL. Go to this URL in your browser, and follow the instructions to find your emails.</p>\n<h2 id=\"with-phone\" class=\"group scroll-mt-24\">With phone<a href=\"#with-phone\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>You can use a user's mobile phone number as an identifier, instead of an email address, when they sign up with a password.</p>\n<p>This practice is usually discouraged because phone networks recycle mobile phone numbers. Anyone receiving a recycled phone number gets access to the original user's account. To mitigate this risk, <a href=\"/docs/guides/auth/auth-mfa\">implement MFA</a>.</p>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text [&amp;>svg]:text-destructive-200 [&amp;>svg]:bg-destructive-600 mb-2 [&amp;_svg]:bg-destructive [&amp;_svg]:text-white bg-alternative border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>Protect users who use a phone number as a password-based auth identifier by enabling MFA.</p></div></div>\n<h3 id=\"enabling-phone-and-password-based-authentication\" class=\"group scroll-mt-24\">Enabling phone and password-based authentication<a href=\"#enabling-phone-and-password-based-authentication\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Enable phone authentication on the <a href=\"/dashboard/project/_/auth/providers\">Auth Providers page</a> for hosted Supabase projects.</p>\n<p>For self-hosted projects or local development, use the <a href=\"/docs/guides/cli/config#auth.sms.enable_signup\">configuration file</a>. See the configuration variables namespaced under <code>auth.sms</code>.</p>\n<p>If you want users to confirm their phone number on signup, you need to set up an SMS provider. Each provider has its own configuration. Supported providers include MessageBird, Twilio, Vonage, and TextLocal (community-supported).</p>\n<!--$--><section aria-labelledby=\"sms-provider-configuration\"><h3 class=\"sr-only\" id=\"sms-provider-configuration\">Configuring SMS Providers</h3><div class=\"grid grid-cols-6 gap-10 not-prose py-8\"><button class=\"col-span-6 xl:col-span-3\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/messagebird-icon.svg\" alt=\"MessageBird Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">MessageBird</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></button><button class=\"col-span-6 xl:col-span-3\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/twilio-icon.svg\" alt=\"Twilio Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Twilio</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></button><button class=\"col-span-6 xl:col-span-3\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/vonage-icon-light.svg\" alt=\"Vonage Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Vonage</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></button><button class=\"col-span-6 xl:col-span-3\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/textlocal-icon.svg\" alt=\"Textlocal (Community Supported) Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Textlocal (Community Supported)</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></button></div></section><!--/$-->\n<h3 id=\"signing-up-with-a-phone-number-and-password\" class=\"group scroll-mt-24\">Signing up with a phone number and password<a href=\"#signing-up-with-a-phone-number-and-password\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>To sign up the user, call <a href=\"/docs/reference/javascript/auth-signup\"><code>signUp()</code></a> with their phone number and password:</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rp69jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Rp69jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rp69jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Rp69jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rp69jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:Rp69jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rp69jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:Rp69jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rp69jtsn7qb6ra:-content-http\" data-state=\"inactive\" id=\"radix-:Rp69jtsn7qb6ra:-trigger-http\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>HTTP</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rp69jtsn7qb6ra:-trigger-js\" id=\"radix-:Rp69jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const { data, error } = await supabase.auth.signUp({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  phone: '+13334445555',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  password: 'some-password',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rp69jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Rp69jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rp69jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:Rp69jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rp69jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:Rp69jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rp69jtsn7qb6ra:-trigger-http\" hidden=\"\" id=\"radix-:Rp69jtsn7qb6ra:-content-http\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p>If you have phone verification turned on, the user receives an SMS with a 6-digit pin that you must verify within 60 seconds:</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rpm9jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Rpm9jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rpm9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Rpm9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rpm9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:Rpm9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rpm9jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:Rpm9jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rpm9jtsn7qb6ra:-content-http\" data-state=\"inactive\" id=\"radix-:Rpm9jtsn7qb6ra:-trigger-http\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>HTTP</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rpm9jtsn7qb6ra:-trigger-js\" id=\"radix-:Rpm9jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>You should present a form to the user so they can input the 6 digit pin, then send it along with the phone number to <code>verifyOtp</code>:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  data: { session },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  error,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>} = await supabase.auth.verifyOtp({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  phone: '+13334445555',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  token: '123456',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  type: 'sms',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rpm9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Rpm9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rpm9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:Rpm9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rpm9jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:Rpm9jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rpm9jtsn7qb6ra:-trigger-http\" hidden=\"\" id=\"radix-:Rpm9jtsn7qb6ra:-content-http\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h3 id=\"signing-in-a-with-a-phone-number-and-password\" class=\"group scroll-mt-24\">Signing in a with a phone number and password<a href=\"#signing-in-a-with-a-phone-number-and-password\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Call the function to sign in with the user's phone number and password:</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rqe9jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Rqe9jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rqe9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Rqe9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rqe9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:Rqe9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rqe9jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:Rqe9jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rqe9jtsn7qb6ra:-content-http\" data-state=\"inactive\" id=\"radix-:Rqe9jtsn7qb6ra:-trigger-http\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>HTTP</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rqe9jtsn7qb6ra:-trigger-js\" id=\"radix-:Rqe9jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const { user, error } = await supabase.auth.signInWithPassword({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  phone: '+13334445555',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  password: 'some-password',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rqe9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Rqe9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rqe9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:Rqe9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rqe9jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:Rqe9jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rqe9jtsn7qb6ra:-trigger-http\" hidden=\"\" id=\"radix-:Rqe9jtsn7qb6ra:-content-http\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/passwords",
        "title": "Password-based Auth | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Password-based%20Auth&description=undefined",
        "ogTitle": "Password-based Auth | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/passwords",
        "description": "Allow users to sign in with a password connected to their email or phone number.",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "ogDescription": "Allow users to sign in with a password connected to their email or phone number.",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Supabase Auth with Next.js Pages Directory\n\n* * *\n\nThe `auth-helpers` package has been replaced with the `@supabase/ssr` package. We recommend setting up Auth for your Next.js app with `@supabase/ssr` instead. See the [Next.js Server-Side Auth guide](/docs/guides/auth/server-side/nextjs?router=pages) to learn how.\n\nSee legacy docs",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Supabase Auth with Next.js Pages Directory</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>The <code>auth-helpers</code> package has been replaced with the <code>@supabase/ssr</code> package. We recommend setting up Auth for your Next.js app with <code>@supabase/ssr</code> instead. See the <a href=\"/docs/guides/auth/server-side/nextjs?router=pages\">Next.js Server-Side Auth guide</a> to learn how.</p></div></div>\n<div class=\" flex flex-col space-y-3  text-foreground-light border-b mt-8 pb-2\" data-orientation=\"vertical\"><div><div data-state=\"closed\" data-orientation=\"vertical\" class=\" group first:rounded-tl-md first:rounded-tr-md last:rounded-bl-md last:rounded-br-md overflow-hidden will-change-transform \"><button type=\"button\" aria-controls=\"radix-:R1m9jtsn7qb6ra:\" aria-expanded=\"false\" data-state=\"closed\" data-orientation=\"vertical\" id=\"radix-:Rm9jtsn7qb6ra:\" class=\" flex flex-row gap-3 items-center w-full text-left cursor-pointer outline-none focus-visible:ring-1 focus-visible:z-10 ring-foreground-light  justify-between\" data-radix-collection-item=\"\">See legacy docs<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-down  text-foreground-lighter rotate-0 group-state-open:rotate-180 group-data-[state=open]:rotate-180 ease-&amp;lsqb;cubic-bezier(0.87,_0,_0.13,_1)&amp;rsqb; transition-transform duration-300 duration-200  order-last\" aria-hidden=\"true\"><path d=\"m6 9 6 6 6-6\"></path></svg></button><div data-state=\"closed\" id=\"radix-:R1m9jtsn7qb6ra:\" hidden=\"\" role=\"region\" aria-labelledby=\"radix-:Rm9jtsn7qb6ra:\" data-orientation=\"vertical\" class=\" data-open:animate-slide-down data-closed:animate-slide-up \" style=\"--radix-accordion-content-height:var(--radix-collapsible-content-height);--radix-accordion-content-width:var(--radix-collapsible-content-width)\"></div></div></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages",
        "title": "Supabase Auth with Next.js Pages Directory | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Supabase%20Auth%20with%20Next.js%20Pages%20Directory&description=Authentication%20helpers%20for%20Next.js%20API%20routes%2C%20middleware%2C%20and%20SSR%20in%20the%20Pages%20Directory.",
        "ogTitle": "Supabase Auth with Next.js Pages Directory | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages",
        "description": "Authentication helpers for Next.js API routes, middleware, and SSR in the Pages Directory.",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "ogDescription": "Authentication helpers for Next.js API routes, middleware, and SSR in the Pages Directory.",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Redirect URLs\n\n## Set up redirect urls with Supabase Auth.\n\n* * *\n\n## Overview [\\#](\\#overview)\n\nWhen using [passwordless sign-ins](/docs/reference/javascript/auth-signinwithotp) or [third-party providers](/docs/reference/javascript/auth-signinwithoauth#sign-in-using-a-third-party-provider-with-redirect), the Supabase client library methods provide a `redirectTo` parameter to specify where to redirect the user to after authentication. By default, the user will be redirected to the [`SITE_URL`](/docs/guides/auth/redirect-urls) but you can modify the `SITE_URL` or add additional redirect URLs to the allow list. Once you've added necessary URLs to the allow list, you can specify the URL you want the user to be redirected to in the `redirectTo` parameter.\n\nTo edit the allow list, go to the [URL Configuration](/dashboard/project/_/auth/url-configuration) page. In local development or self-hosted projects, use the [configuration file](/docs/guides/cli/config#auth.additional_redirect_urls).\n\n## Use wildcards in redirect URLs [\\#](\\#use-wildcards-in-redirect-urls)\n\nSupabase allows you to specify wildcards when adding redirect URLs to the [allow list](https://supabase.com/dashboard/project/_/auth/url-configuration). You can use wildcard match patterns to support preview URLs from providers like Netlify and Vercel.\n\n| Wildcard | Description |\n| --- | --- |\n| `*` | matches any sequence of non-separator characters |\n| `**` | matches any sequence of characters |\n| `?` | matches any single non-separator character |\n| `c` | matches character c (c != `*`, `**`, `?`, `\\`, `[`, `{`, `}`) |\\\n| `\\c` | matches character c |\\\n| `[!{ character-range }]` | matches any sequence of characters not in the `{ character-range }`. For example, `[!a-z]` will not match any characters ranging from a-z. |\\\n\\\nThe separator characters in a URL are defined as `.` and `/`. Use [this tool](https://www.digitalocean.com/community/tools/glob?comments=true&glob=http%3A%2F%2Flocalhost%3A3000%2F%2A%2A&matches=false&tests=http%3A%2F%2Flocalhost%3A3000&tests=http%3A%2F%2Flocalhost%3A3000%2F&tests=http%3A%2F%2Flocalhost%3A3000%2F%3Ftest%3Dtest&tests=http%3A%2F%2Flocalhost%3A3000%2Ftest-test%3Ftest%3Dtest&tests=http%3A%2F%2Flocalhost%3A3000%2Ftest%2Ftest%3Ftest%3Dtest) to test your patterns.\\\n\\\n##### Recommendation\\\n\\\nWhile the \"globstar\" ( `**`) is useful for local development and preview URLs, we recommend setting the exact redirect URL path for your site URL in production.\\\n\\\n### Redirect URL examples with wildcards [\\#](\\#redirect-url-examples-with-wildcards)\\\n\\\n| Redirect URL | Description |\\\n| --- | --- |\\\n| `http://localhost:3000/*` | matches `http://localhost:3000/foo`, `http://localhost:3000/bar` but not `http://localhost:3000/foo/bar` or `http://localhost:3000/foo/` (note the trailing slash) |\\\n| `http://localhost:3000/**` | matches `http://localhost:3000/foo`, `http://localhost:3000/bar` and `http://localhost:3000/foo/bar` |\\\n| `http://localhost:3000/?` | matches `http://localhost:3000/a` but not `http://localhost:3000/foo` |\\\n| `http://localhost:3000/[!a-z]` | matches `http://localhost:3000/1` but not `http://localhost:3000/a` |\\\n\\\n## Netlify preview URLs [\\#](\\#netlify-preview-urls)\\\n\\\nFor deployments with Netlify, set the `SITE_URL` to your official site URL. Add the following additional redirect URLs for local development and deployment previews:\\\n\\\n- `http://localhost:3000/**`\\\n- `https://**--my_org.netlify.app/**`\\\n\\\n## Vercel preview URLs [\\#](\\#vercel-preview-urls)\\\n\\\nFor deployments with Vercel, set the `SITE_URL` to your official site URL. Add the following additional redirect URLs for local development and deployment previews:\\\n\\\n- `http://localhost:3000/**`\\\n- `https://*-username.vercel.app/**`\\\n\\\nVercel provides an environment variable for the URL of the deployment called `NEXT_PUBLIC_VERCEL_URL`. See the [Vercel docs](https://vercel.com/docs/concepts/projects/environment-variables#system-environment-variables) for more details. You can use this variable to dynamically redirect depending on the environment. You should also set the value of the environment variable called NEXT\\_PUBLIC\\_SITE\\_URL, this should be set to your site URL in production environment to ensure that redirects function correctly.\\\n\\\n``\\\n_18\\\nconst getURL = () => {\\\n_18\\\nlet url =\\\n_18\\\n    process?.env?.NEXT_PUBLIC_SITE_URL ?? // Set this to your site URL in production env.\\\n_18\\\n    process?.env?.NEXT_PUBLIC_VERCEL_URL ?? // Automatically set by Vercel.\\\n_18\\\n    'http://localhost:3000/'\\\n_18\\\n// Make sure to include `https://` when not localhost.\\\n_18\\\nurl = url.startsWith('http') ? url : `https://${url}`\\\n_18\\\n// Make sure to include a trailing `/`.\\\n_18\\\nurl = url.endsWith('/') ? url : `${url}/`\\\n_18\\\nreturn url\\\n_18\\\n}\\\n_18\\\n_18\\\nconst { data, error } = await supabase.auth.signInWithOAuth({\\\n_18\\\nprovider: 'github',\\\n_18\\\noptions: {\\\n_18\\\n    redirectTo: getURL(),\\\n_18\\\n},\\\n_18\\\n})\\\n``\\\n\\\n## Email templates when using `redirectTo` [\\#](\\#email-templates-when-using-redirectto)\\\n\\\nWhen using a `redirectTo` option, you may need to replace the `{{ .SiteURL }}` with `{{ .RedirectTo }}` in your email templates. See the [Email Templates guide](/docs/guides/auth/auth-email-templates) for more information.\\\n\\\nFor example, change the following:\\\n\\\n`\\\n_10\\\n<!-- Old -->\\\n_10\\\n<a href=\"{{ .SiteURL }}/auth/confirm?token_hash={{ .TokenHash }}&type=signup\">Confirm your mail</a>\\\n_10\\\n_10\\\n<!-- New -->\\\n_10\\\n<a href=\"{{ .RedirectTo }}/auth/confirm?token_hash={{ .TokenHash }}&type=signup\"\\\n_10\\\n>Confirm your mail</a\\\n_10\\\n>\\\n`\\\n\\\n## Mobile deep linking URIs [\\#](\\#mobile-deep-linking-uris)\\\n\\\nFor mobile applications you can use deep linking URIs. For example, for your `SITE_URL` you can specify something like `com.supabase://login-callback/` and for additional redirect URLs something like `com.supabase.staging://login-callback/` if needed.\\\n\\\nRead more about deep linking and find code examples for different frameworks [here](/docs/guides/auth/native-mobile-deep-linking).\\\n\\\n## Error Handling [\\#](\\#error-handling)\\\n\\\nWhen authentication fails, the user will still be redirected to the redirect URL provided. However, the error details will be returned as query fragments in the URL. You can parse these query fragments and show a custom error message to the user. For example:\\\n\\\n`\\\n_10\\\nconst params = new URLSearchParams(window.location.hash.slice())\\\n_10\\\n_10\\\nif (params.get('error_code').startsWith('4')) {\\\n_10\\\n// show error message if error is a 4xx error\\\n_10\\\nwindow.alert(params.get('error_description'))\\\n_10\\\n}\\\n`",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Redirect URLs</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Set up redirect urls with Supabase Auth.</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<h2 id=\"overview\" class=\"group scroll-mt-24\">Overview<a href=\"#overview\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>When using <a href=\"/docs/reference/javascript/auth-signinwithotp\">passwordless sign-ins</a> or <a href=\"/docs/reference/javascript/auth-signinwithoauth#sign-in-using-a-third-party-provider-with-redirect\">third-party providers</a>, the Supabase client library methods provide a <code>redirectTo</code> parameter to specify where to redirect the user to after authentication. By default, the user will be redirected to the <a href=\"/docs/guides/auth/redirect-urls\"><code>SITE_URL</code></a> but you can modify the <code>SITE_URL</code> or add additional redirect URLs to the allow list. Once you've added necessary URLs to the allow list, you can specify the URL you want the user to be redirected to in the <code>redirectTo</code> parameter.</p>\n<p>To edit the allow list, go to the <a href=\"/dashboard/project/_/auth/url-configuration\">URL Configuration</a> page. In local development or self-hosted projects, use the <a href=\"/docs/guides/cli/config#auth.additional_redirect_urls\">configuration file</a>.</p>\n<h2 id=\"use-wildcards-in-redirect-urls\" class=\"group scroll-mt-24\">Use wildcards in redirect URLs<a href=\"#use-wildcards-in-redirect-urls\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Supabase allows you to specify wildcards when adding redirect URLs to the <a href=\"https://supabase.com/dashboard/project/_/auth/url-configuration\">allow list</a>. You can use wildcard match patterns to support preview URLs from providers like Netlify and Vercel.</p>\n<table><thead><tr><th>Wildcard</th><th>Description</th></tr></thead><tbody><tr><td><code>*</code></td><td>matches any sequence of non-separator characters</td></tr><tr><td><code>**</code></td><td>matches any sequence of characters</td></tr><tr><td><code>?</code></td><td>matches any single non-separator character</td></tr><tr><td><code>c</code></td><td>matches character c (c != <code>*</code>, <code>**</code>, <code>?</code>, <code>\\</code>, <code>[</code>, <code>{</code>, <code>}</code>)</td></tr><tr><td><code>\\c</code></td><td>matches character c</td></tr><tr><td><code>[!{ character-range }]</code></td><td>matches any sequence of characters not in the <code>{ character-range }</code>. For example, <code>[!a-z]</code> will not match any characters ranging from a-z.</td></tr></tbody></table>\n<p>The separator characters in a URL are defined as <code>.</code> and <code>/</code>. Use <a href=\"https://www.digitalocean.com/community/tools/glob?comments=true&amp;glob=http%3A%2F%2Flocalhost%3A3000%2F%2A%2A&amp;matches=false&amp;tests=http%3A%2F%2Flocalhost%3A3000&amp;tests=http%3A%2F%2Flocalhost%3A3000%2F&amp;tests=http%3A%2F%2Flocalhost%3A3000%2F%3Ftest%3Dtest&amp;tests=http%3A%2F%2Flocalhost%3A3000%2Ftest-test%3Ftest%3Dtest&amp;tests=http%3A%2F%2Flocalhost%3A3000%2Ftest%2Ftest%3Ftest%3Dtest\">this tool</a> to test your patterns.</p>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text-foreground [&amp;>svg]:text-background [&amp;>svg]:bg-foreground mb-2 [&amp;_svg]:bg-foreground-muted [&amp;_svg]:text-background-muted bg-surface-200/25 border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z\"></path></svg><h5 class=\"mb-1 text mt-0.5 flex gap-3 text-sm [&amp;_p]:mb-1.5 [&amp;_p]:mt-0\">Recommendation</h5><div class=\"text-sm [&amp;_p]:leading-relaxed text-foreground-light font-normal mt-3 [&amp;_p]:mb-1.5 [&amp;_p]:mt-0\"><p>While the \"globstar\" (<code>**</code>) is useful for local development and preview URLs, we recommend setting the exact redirect URL path for your site URL in production.</p></div></div>\n<h3 id=\"redirect-url-examples-with-wildcards\" class=\"group scroll-mt-24\">Redirect URL examples with wildcards<a href=\"#redirect-url-examples-with-wildcards\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<table><thead><tr><th>Redirect URL</th><th>Description</th></tr></thead><tbody><tr><td><code>http://localhost:3000/*</code></td><td>matches <code>http://localhost:3000/foo</code>, <code>http://localhost:3000/bar</code> but not <code>http://localhost:3000/foo/bar</code> or <code>http://localhost:3000/foo/</code> (note the trailing slash)</td></tr><tr><td><code>http://localhost:3000/**</code></td><td>matches <code>http://localhost:3000/foo</code>, <code>http://localhost:3000/bar</code> and <code>http://localhost:3000/foo/bar</code></td></tr><tr><td><code>http://localhost:3000/?</code></td><td>matches <code>http://localhost:3000/a</code> but not <code>http://localhost:3000/foo</code></td></tr><tr><td><code>http://localhost:3000/[!a-z]</code></td><td>matches <code>http://localhost:3000/1</code> but not <code>http://localhost:3000/a</code></td></tr></tbody></table>\n<h2 id=\"netlify-preview-urls\" class=\"group scroll-mt-24\">Netlify preview URLs<a href=\"#netlify-preview-urls\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>For deployments with Netlify, set the <code>SITE_URL</code> to your official site URL. Add the following additional redirect URLs for local development and deployment previews:</p>\n<ul>\n<li><code>http://localhost:3000/**</code></li>\n<li><code>https://**--my_org.netlify.app/**</code></li>\n</ul>\n<h2 id=\"vercel-preview-urls\" class=\"group scroll-mt-24\">Vercel preview URLs<a href=\"#vercel-preview-urls\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>For deployments with Vercel, set the <code>SITE_URL</code> to your official site URL. Add the following additional redirect URLs for local development and deployment previews:</p>\n<ul>\n<li><code>http://localhost:3000/**</code></li>\n<li><code>https://*-username.vercel.app/**</code></li>\n</ul>\n<p>Vercel provides an environment variable for the URL of the deployment called <code>NEXT_PUBLIC_VERCEL_URL</code>. See the <a href=\"https://vercel.com/docs/concepts/projects/environment-variables#system-environment-variables\">Vercel docs</a> for more details. You can use this variable to dynamically redirect depending on the environment. You should also set the value of the environment variable called NEXT_PUBLIC_SITE_URL, this should be set to your site URL in production environment to ensure that redirects function correctly.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>const getURL = () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  let url =</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>    process?.env?.NEXT_PUBLIC_SITE_URL ?? // Set this to your site URL in production env.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>    process?.env?.NEXT_PUBLIC_VERCEL_URL ?? // Automatically set by Vercel.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>    'http://localhost:3000/'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  // Make sure to include `https://` when not localhost.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  url = url.startsWith('http') ? url : `https://${url}`</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  // Make sure to include a trailing `/`.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  url = url.endsWith('/') ? url : `${url}/`</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  return url</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>const { data, error } = await supabase.auth.signInWithOAuth({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  provider: 'github',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  options: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>    redirectTo: getURL(),</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>  },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->18</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><br></code></div></div>\n<h2 id=\"email-templates-when-using-redirectto\" class=\"group scroll-mt-24\">Email templates when using <code>redirectTo</code><a href=\"#email-templates-when-using-redirectto\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>When using a <code>redirectTo</code> option, you may need to replace the <code>{{ .SiteURL }}</code> with <code>{{ .RedirectTo }}</code> in your email templates. See the <a href=\"/docs/guides/auth/auth-email-templates\">Email Templates guide</a> for more information.</p>\n<p>For example, change the following:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;!-- Old --&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;a href=\"{{ .SiteURL }}/auth/confirm?token_hash={{ .TokenHash }}&amp;type=signup\"&gt;Confirm your mail&lt;/a&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;!-- New --&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;a href=\"{{ .RedirectTo }}/auth/confirm?token_hash={{ .TokenHash }}&amp;type=signup\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  &gt;Confirm your mail&lt;/a</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&gt;</span></div></div><br></code></div></div>\n<h2 id=\"mobile-deep-linking-uris\" class=\"group scroll-mt-24\">Mobile deep linking URIs<a href=\"#mobile-deep-linking-uris\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>For mobile applications you can use deep linking URIs. For example, for your <code>SITE_URL</code> you can specify something like <code>com.supabase://login-callback/</code> and for additional redirect URLs something like <code>com.supabase.staging://login-callback/</code> if needed.</p>\n<p>Read more about deep linking and find code examples for different frameworks <a href=\"/docs/guides/auth/native-mobile-deep-linking\">here</a>.</p>\n<h2 id=\"error-handling\" class=\"group scroll-mt-24\">Error Handling<a href=\"#error-handling\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>When authentication fails, the user will still be redirected to the redirect URL provided. However, the error details will be returned as query fragments in the URL. You can parse these query fragments and show a custom error message to the user. For example:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const params = new URLSearchParams(window.location.hash.slice())</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>if (params.get('error_code').startsWith('4')) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  // show error message if error is a 4xx error</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  window.alert(params.get('error_description'))</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/redirect-urls",
        "title": "Redirect URLs | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Redirect%20URLs&description=Set%20up%20redirect%20urls%20with%20Supabase%20Auth.",
        "ogTitle": "Redirect URLs | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/redirect-urls",
        "description": "Set up redirect urls with Supabase Auth.",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "ogDescription": "Set up redirect urls with Supabase Auth.",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Multi-Factor Authentication (TOTP)\n\n* * *\n\n## How does app authenticator multi-factor authentication work? [\\#](\\#how-does-app-authenticator-multi-factor-authentication-work)\n\nApp Authenticator (TOTP) multi-factor authentication involves a timed one-time password generated from an authenticator app in the control of users. It uses a QR Code which to transmit a shared secret used to generate a One Time Password. A user can scan a QR code with their phone to capture a shared secret required for subsequent authentication.\n\nThe use of a QR code was [initially introduced by Google Authenticator](https://github.com/google/google-authenticator/wiki/Key-Uri-Format) but is now universally accepted by all authenticator apps. The QR code has an alternate representation in URI form following the `otpauth` scheme such as: `otpauth://totp/supabase:alice@supabase.com?secret=<secret>&issuer=supabase` which a user can manually input in cases where there is difficulty rendering a QR Code.\n\nBelow is a flow chart illustrating how the Enrollment, Challenge, and Verify APIs work in the context of MFA (TOTP).\n\n[TOTP MFA API](/docs/reference/javascript/auth-mfa-api) is free to use and is enabled on all Supabase projects by default.\n\n### Add enrollment flow [\\#](\\#add-enrollment-flow)\n\nAn enrollment flow provides a UI for users to set up additional authentication factors. Most applications add the enrollment flow in two places within their app:\n\n1. Right after login or sign up.\nThis lets users quickly set up MFA immediately after they log in or create an\naccount. We recommend encouraging all users to set up MFA if that makes sense\nfor your application. Many applications offer this as an opt-in step in an\neffort to reduce onboarding friction.\n2. From within a settings page.\nAllows users to set up, disable or modify their MFA settings.\n\nEnrolling a factor for use with MFA takes three steps:\n\n1. Call `supabase.auth.mfa.enroll()`.\nThis method returns a QR code and a secret. Display the QR\ncode to the user and ask them to scan it with their authenticator application.\nIf they are unable to scan the QR code, show the secret in plain text which\nthey can type or paste into their authenticator app.\n2. Calling the `supabase.auth.mfa.challenge()` API.\nThis prepares Supabase Auth to accept a verification code from the user\nand returns a challenge ID. In the case of Phone MFA this step also sends the verification code to the user.\n3. Calling the `supabase.auth.mfa.verify()` API.\nThis verifies that the user has indeed added the secret from step (1) into\ntheir app and is working correctly. If the verification succeeds, the factor\nimmediately becomes active for the user account. If not, you should repeat\nsteps 2 and 3.\n\n#### Example: React [\\#](\\#example-react)\n\nBelow is an example that creates a new `EnrollMFA` component that illustrates the important pieces of the MFA enrollment flow.\n\n- When the component appears on screen, the `supabase.auth.mfa.enroll()` API is\ncalled once to start the process of enrolling a new factor for the current\nuser.\n- This API returns a QR code in the SVG format, which is shown on screen using\na normal `<img>` tag by encoding the SVG as a data URL.\n- Once the user has scanned the QR code with their authenticator app, they\nshould enter the verification code within the `verifyCode` input field and\nclick on `Enable`.\n- A challenge is created using the `supabase.auth.mfa.challenge()` API and the\ncode from the user is submitted for verification using the\n`supabase.auth.mfa.verify()` challenge.\n- `onEnabled` is a callback that notifies the other components that enrollment\nhas completed.\n- `onCancelled` is a callback that notifies the other components that the user\nhas clicked the `Cancel` button.\n\n``\n_76\n/**\n_76\n* EnrollMFA shows a simple enrollment dialog. When shown on screen it calls\n_76\n* the `enroll` API. Each time a user clicks the Enable button it calls the\n_76\n* `challenge` and `verify` APIs to check if the code provided by the user is\n_76\n* valid.\n_76\n* When enrollment is successful, it calls `onEnrolled`. When the user clicks\n_76\n* Cancel the `onCancelled` callback is called.\n_76\n*/\n_76\nexport function EnrollMFA({\n_76\nonEnrolled,\n_76\nonCancelled,\n_76\n}: {\n_76\nonEnrolled: () => void\n_76\nonCancelled: () => void\n_76\n}) {\n_76\nconst [factorId, setFactorId] = useState('')\n_76\nconst [qr, setQR] = useState('') // holds the QR code image SVG\n_76\nconst [verifyCode, setVerifyCode] = useState('') // contains the code entered by the user\n_76\nconst [error, setError] = useState('') // holds an error message\n_76\n_76\nconst onEnableClicked = () => {\n_76\n    setError('')\n_76\n    ;(async () => {\n_76\n      const challenge = await supabase.auth.mfa.challenge({ factorId })\n_76\n      if (challenge.error) {\n_76\n        setError(challenge.error.message)\n_76\n        throw challenge.error\n_76\n      }\n_76\n_76\n      const challengeId = challenge.data.id\n_76\n_76\n      const verify = await supabase.auth.mfa.verify({\n_76\n        factorId,\n_76\n        challengeId,\n_76\n        code: verifyCode,\n_76\n      })\n_76\n      if (verify.error) {\n_76\n        setError(verify.error.message)\n_76\n        throw verify.error\n_76\n      }\n_76\n_76\n      onEnrolled()\n_76\n    })()\n_76\n}\n_76\n_76\nuseEffect(() => {\n_76\n    ;(async () => {\n_76\n      const { data, error } = await supabase.auth.mfa.enroll({\n_76\n        factorType: 'totp',\n_76\n      })\n_76\n      if (error) {\n_76\n        throw error\n_76\n      }\n_76\n_76\n      setFactorId(data.id)\n_76\n_76\n      // Supabase Auth returns an SVG QR code which you can convert into a data\n_76\n      // URL that you can place in an <img> tag.\n_76\n      setQR(data.totp.qr_code)\n_76\n    })()\n_76\n}, [])\n_76\n_76\nreturn (\n_76\n    <>\n_76\n      {error && <div className=\"error\">{error}</div>}\n_76\n      <img src={qr} />\n_76\n      <input\n_76\n        type=\"text\"\n_76\n        value={verifyCode}\n_76\n        onChange={(e) => setVerifyCode(e.target.value.trim())}\n_76\n      />\n_76\n      <input type=\"button\" value=\"Enable\" onClick={onEnableClicked} />\n_76\n      <input type=\"button\" value=\"Cancel\" onClick={onCancelled} />\n_76\n    </>\n_76\n)\n_76\n}\n``\n\n### Add a challenge step to login [\\#](\\#add-a-challenge-step-to-login)\n\nOnce a user has logged in via their first factor (email+password, magic link, one time password, social login etc.) you need to perform a check if any additional factors need to be verified.\n\nThis can be done by using the `supabase.auth.mfa.getAuthenticatorAssuranceLevel()` API. When the user signs in and is redirected back to your app, you should call this method to extract the user's current and next authenticator assurance level (AAL).\n\nTherefore if you receive a `currentLevel` which is `aal1` but a `nextLevel` of `aal2`, the user should be given the option to go through MFA.\n\nBelow is a table that explains the combined meaning.\n\n| Current Level | Next Level | Meaning |\n| --: | :-- | :-- |\n| `aal1` | `aal1` | User does not have MFA enrolled. |\n| `aal1` | `aal2` | User has an MFA factor enrolled but has not verified it. |\n| `aal2` | `aal2` | User has verified their MFA factor. |\n| `aal2` | `aal1` | User has disabled their MFA factor. (Stale JWT.) |\n\n#### Example: React [\\#](\\#example-react)\n\nAdding the challenge step to login depends heavily on the architecture of your app. However, a fairly common way to structure React apps is to have a large component (often named `App`) which contains most of the authenticated application logic.\n\nThis example will wrap this component with logic that will show an MFA challenge screen if necessary, before showing the full application. This is illustrated in the `AppWithMFA` example below.\n\n`\n_33\nfunction AppWithMFA() {\n_33\nconst [readyToShow, setReadyToShow] = useState(false)\n_33\nconst [showMFAScreen, setShowMFAScreen] = useState(false)\n_33\n_33\nuseEffect(() => {\n_33\n    ;(async () => {\n_33\n      try {\n_33\n        const { data, error } = await supabase.auth.mfa.getAuthenticatorAssuranceLevel()\n_33\n        if (error) {\n_33\n          throw error\n_33\n        }\n_33\n_33\n        console.log(data)\n_33\n_33\n        if (data.nextLevel === 'aal2' && data.nextLevel !== data.currentLevel) {\n_33\n          setShowMFAScreen(true)\n_33\n        }\n_33\n      } finally {\n_33\n        setReadyToShow(true)\n_33\n      }\n_33\n    })()\n_33\n}, [])\n_33\n_33\nif (readyToShow) {\n_33\n    if (showMFAScreen) {\n_33\n      return <AuthMFA />\n_33\n    }\n_33\n_33\n    return <App />\n_33\n}\n_33\n_33\nreturn <></>\n_33\n}\n`\n\n- `supabase.auth.mfa.getAuthenticatorAssuranceLevel()` does return a promise.\nDon't worry, this is a very fast method (microseconds) as it rarely uses the\nnetwork.\n- `readyToShow` only makes sure the AAL check completes before showing any\napplication UI to the user.\n- If the current level can be upgraded to the next one, the MFA screen is\nshown.\n- Once the challenge is successful, the `App` component is finally rendered on\nscreen.\n\nBelow is the component that implements the challenge and verify logic.\n\n`\n_53\nfunction AuthMFA() {\n_53\nconst [verifyCode, setVerifyCode] = useState('')\n_53\nconst [error, setError] = useState('')\n_53\n_53\nconst onSubmitClicked = () => {\n_53\n    setError('')\n_53\n    ;(async () => {\n_53\n      const factors = await supabase.auth.mfa.listFactors()\n_53\n      if (factors.error) {\n_53\n        throw factors.error\n_53\n      }\n_53\n_53\n      const totpFactor = factors.data.totp[0]\n_53\n_53\n      if (!totpFactor) {\n_53\n        throw new Error('No TOTP factors found!')\n_53\n      }\n_53\n_53\n      const factorId = totpFactor.id\n_53\n_53\n      const challenge = await supabase.auth.mfa.challenge({ factorId })\n_53\n      if (challenge.error) {\n_53\n        setError(challenge.error.message)\n_53\n        throw challenge.error\n_53\n      }\n_53\n_53\n      const challengeId = challenge.data.id\n_53\n_53\n      const verify = await supabase.auth.mfa.verify({\n_53\n        factorId,\n_53\n        challengeId,\n_53\n        code: verifyCode,\n_53\n      })\n_53\n      if (verify.error) {\n_53\n        setError(verify.error.message)\n_53\n        throw verify.error\n_53\n      }\n_53\n    })()\n_53\n}\n_53\n_53\nreturn (\n_53\n    <>\n_53\n      <div>Please enter the code from your authenticator app.</div>\n_53\n      {error && <div className=\"error\">{error}</div>}\n_53\n      <input\n_53\n        type=\"text\"\n_53\n        value={verifyCode}\n_53\n        onChange={(e) => setVerifyCode(e.target.value.trim())}\n_53\n      />\n_53\n      <input type=\"button\" value=\"Submit\" onClick={onSubmitClicked} />\n_53\n    </>\n_53\n)\n_53\n}\n`\n\n- You can extract the available MFA factors for the user by calling\n`supabase.auth.mfa.listFactors()`. Don't worry this method is also very quick\nand rarely uses the network.\n- If `listFactors()` returns more than one factor (or of a different type) you\nshould present the user with a choice. For simplicity this is not shown in\nthe example.\n- Each time the user presses the \"Submit\" button a new challenge is created for\nthe chosen factor (in this case the first one) and it is immediately\nverified. Any errors are displayed to the user.\n- On successful verification, the client library will refresh the session in\nthe background automatically and finally call the `onSuccess` callback, which\nwill show the authenticated `App` component on screen.\n\n## Frequently asked questions [\\#](\\#frequently-asked-questions)\n\nWhat's inside the QR code?\n\nHow long is the TOTP code valid for?",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Multi-Factor Authentication (TOTP)</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<h2 id=\"how-does-app-authenticator-multi-factor-authentication-work\" class=\"group scroll-mt-24\">How does app authenticator multi-factor authentication work?<a href=\"#how-does-app-authenticator-multi-factor-authentication-work\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>App Authenticator (TOTP) multi-factor authentication involves a timed one-time password generated from an authenticator app in the control of users. It uses a QR Code which to transmit a shared secret used to generate a One Time Password. A user can scan a QR code with their phone to capture a shared secret required for subsequent authentication.</p>\n<p>The use of a QR code was <a href=\"https://github.com/google/google-authenticator/wiki/Key-Uri-Format\">initially introduced by Google Authenticator</a> but is now universally accepted by all authenticator apps. The QR code has an alternate representation in URI form following the <code>otpauth</code> scheme such as: <code>otpauth://totp/supabase:alice@supabase.com?secret=&lt;secret&gt;&amp;issuer=supabase</code> which a user can manually input in cases where there is difficulty rendering a QR Code.</p>\n<p>Below is a flow chart illustrating how the Enrollment, Challenge, and Verify APIs work in the context of MFA (TOTP).</p>\n<!-- -->\n<p><a href=\"/docs/reference/javascript/auth-mfa-api\">TOTP MFA API</a> is free to use and is enabled on all Supabase projects by default.</p>\n<h3 id=\"add-enrollment-flow\" class=\"group scroll-mt-24\">Add enrollment flow<a href=\"#add-enrollment-flow\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>An enrollment flow provides a UI for users to set up additional authentication factors. Most applications add the enrollment flow in two places within their app:</p>\n<ol>\n<li>Right after login or sign up.\nThis lets users quickly set up MFA immediately after they log in or create an\naccount. We recommend encouraging all users to set up MFA if that makes sense\nfor your application. Many applications offer this as an opt-in step in an\neffort to reduce onboarding friction.</li>\n<li>From within a settings page.\nAllows users to set up, disable or modify their MFA settings.</li>\n</ol>\n<p>Enrolling a factor for use with MFA takes three steps:</p>\n<ol>\n<li>Call <code>supabase.auth.mfa.enroll()</code>.\nThis method returns a QR code and a secret. Display the QR\ncode to the user and ask them to scan it with their authenticator application.\nIf they are unable to scan the QR code, show the secret in plain text which\nthey can type or paste into their authenticator app.</li>\n<li>Calling the <code>supabase.auth.mfa.challenge()</code> API.\nThis prepares Supabase Auth to accept a verification code from the user\nand returns a challenge ID. In the case of Phone MFA this step also sends the verification code to the user.</li>\n<li>Calling the <code>supabase.auth.mfa.verify()</code> API.\nThis verifies that the user has indeed added the secret from step (1) into\ntheir app and is working correctly. If the verification succeeds, the factor\nimmediately becomes active for the user account. If not, you should repeat\nsteps 2 and 3.</li>\n</ol>\n<h4 id=\"example-react\" class=\"group scroll-mt-24\">Example: React<a href=\"#example-react\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h4>\n<p>Below is an example that creates a new <code>EnrollMFA</code> component that illustrates the important pieces of the MFA enrollment flow.</p>\n<ul>\n<li>When the component appears on screen, the <code>supabase.auth.mfa.enroll()</code> API is\ncalled once to start the process of enrolling a new factor for the current\nuser.</li>\n<li>This API returns a QR code in the SVG format, which is shown on screen using\na normal <code>&lt;img&gt;</code> tag by encoding the SVG as a data URL.</li>\n<li>Once the user has scanned the QR code with their authenticator app, they\nshould enter the verification code within the <code>verifyCode</code> input field and\nclick on <code>Enable</code>.</li>\n<li>A challenge is created using the <code>supabase.auth.mfa.challenge()</code> API and the\ncode from the user is submitted for verification using the\n<code>supabase.auth.mfa.verify()</code> challenge.</li>\n<li><code>onEnabled</code> is a callback that notifies the other components that enrollment\nhas completed.</li>\n<li><code>onCancelled</code> is a callback that notifies the other components that the user\nhas clicked the <code>Cancel</code> button.</li>\n</ul>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>/**</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span> * EnrollMFA shows a simple enrollment dialog. When shown on screen it calls</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span> * the `enroll` API. Each time a user clicks the Enable button it calls the</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span> * `challenge` and `verify` APIs to check if the code provided by the user is</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span> * valid.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span> * When enrollment is successful, it calls `onEnrolled`. When the user clicks</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span> * Cancel the `onCancelled` callback is called.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span> */</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>export function EnrollMFA({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>  onEnrolled,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>  onCancelled,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>}: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>  onEnrolled: () =&gt; void</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>  onCancelled: () =&gt; void</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>}) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [factorId, setFactorId] = useState('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [qr, setQR] = useState('') // holds the QR code image SVG</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [verifyCode, setVerifyCode] = useState('') // contains the code entered by the user</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [error, setError] = useState('') // holds an error message</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>  const onEnableClicked = () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>    setError('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>    ;(async () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      const challenge = await supabase.auth.mfa.challenge({ factorId })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      if (challenge.error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>        setError(challenge.error.message)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>        throw challenge.error</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      const challengeId = challenge.data.id</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      const verify = await supabase.auth.mfa.verify({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>        factorId,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>        challengeId,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>        code: verifyCode,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      if (verify.error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>        setError(verify.error.message)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>        throw verify.error</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      onEnrolled()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>    })()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>  useEffect(() =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>    ;(async () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      const { data, error } = await supabase.auth.mfa.enroll({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>        factorType: 'totp',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      if (error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>        throw error</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      setFactorId(data.id)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      // Supabase Auth returns an SVG QR code which you can convert into a data</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      // URL that you can place in an &lt;img&gt; tag.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      setQR(data.totp.qr_code)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>    })()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>  }, [])</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>  return (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      {error &amp;&amp; &lt;div className=\"error\"&gt;{error}&lt;/div&gt;}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;img src={qr} /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;input</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>        type=\"text\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>        value={verifyCode}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>        onChange={(e) =&gt; setVerifyCode(e.target.value.trim())}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;input type=\"button\" value=\"Enable\" onClick={onEnableClicked} /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;input type=\"button\" value=\"Cancel\" onClick={onCancelled} /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;/&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>  )</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->76</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div>\n<h3 id=\"add-a-challenge-step-to-login\" class=\"group scroll-mt-24\">Add a challenge step to login<a href=\"#add-a-challenge-step-to-login\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Once a user has logged in via their first factor (email+password, magic link, one time password, social login etc.) you need to perform a check if any additional factors need to be verified.</p>\n<p>This can be done by using the <code>supabase.auth.mfa.getAuthenticatorAssuranceLevel()</code> API. When the user signs in and is redirected back to your app, you should call this method to extract the user's current and next authenticator assurance level (AAL).</p>\n<p>Therefore if you receive a <code>currentLevel</code> which is <code>aal1</code> but a <code>nextLevel</code> of <code>aal2</code>, the user should be given the option to go through MFA.</p>\n<p>Below is a table that explains the combined meaning.</p>\n<table><thead><tr><th align=\"right\">Current Level</th><th align=\"left\">Next Level</th><th align=\"left\">Meaning</th></tr></thead><tbody><tr><td align=\"right\"><code>aal1</code></td><td align=\"left\"><code>aal1</code></td><td align=\"left\">User does not have MFA enrolled.</td></tr><tr><td align=\"right\"><code>aal1</code></td><td align=\"left\"><code>aal2</code></td><td align=\"left\">User has an MFA factor enrolled but has not verified it.</td></tr><tr><td align=\"right\"><code>aal2</code></td><td align=\"left\"><code>aal2</code></td><td align=\"left\">User has verified their MFA factor.</td></tr><tr><td align=\"right\"><code>aal2</code></td><td align=\"left\"><code>aal1</code></td><td align=\"left\">User has disabled their MFA factor. (Stale JWT.)</td></tr></tbody></table>\n<h4 id=\"example-react\" class=\"group scroll-mt-24\">Example: React<a href=\"#example-react\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h4>\n<p>Adding the challenge step to login depends heavily on the architecture of your app. However, a fairly common way to structure React apps is to have a large component (often named <code>App</code>) which contains most of the authenticated application logic.</p>\n<p>This example will wrap this component with logic that will show an MFA challenge screen if necessary, before showing the full application. This is illustrated in the <code>AppWithMFA</code> example below.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>function AppWithMFA() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [readyToShow, setReadyToShow] = useState(false)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [showMFAScreen, setShowMFAScreen] = useState(false)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>  useEffect(() =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>    ;(async () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>      try {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>        const { data, error } = await supabase.auth.mfa.getAuthenticatorAssuranceLevel()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>        if (error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>          throw error</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>        }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>        console.log(data)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>        if (data.nextLevel === 'aal2' &amp;&amp; data.nextLevel !== data.currentLevel) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>          setShowMFAScreen(true)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>        }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>      } finally {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>        setReadyToShow(true)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>    })()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>  }, [])</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>  if (readyToShow) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>    if (showMFAScreen) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>      return &lt;AuthMFA /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>    return &lt;App /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>  return &lt;&gt;&lt;/&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div>\n<ul>\n<li><code>supabase.auth.mfa.getAuthenticatorAssuranceLevel()</code> does return a promise.\nDon't worry, this is a very fast method (microseconds) as it rarely uses the\nnetwork.</li>\n<li><code>readyToShow</code> only makes sure the AAL check completes before showing any\napplication UI to the user.</li>\n<li>If the current level can be upgraded to the next one, the MFA screen is\nshown.</li>\n<li>Once the challenge is successful, the <code>App</code> component is finally rendered on\nscreen.</li>\n</ul>\n<p>Below is the component that implements the challenge and verify logic.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>function AuthMFA() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [verifyCode, setVerifyCode] = useState('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [error, setError] = useState('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>  const onSubmitClicked = () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>    setError('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>    ;(async () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      const factors = await supabase.auth.mfa.listFactors()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      if (factors.error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>        throw factors.error</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      const totpFactor = factors.data.totp[0]</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      if (!totpFactor) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>        throw new Error('No TOTP factors found!')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      const factorId = totpFactor.id</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      const challenge = await supabase.auth.mfa.challenge({ factorId })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      if (challenge.error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>        setError(challenge.error.message)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>        throw challenge.error</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      const challengeId = challenge.data.id</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      const verify = await supabase.auth.mfa.verify({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>        factorId,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>        challengeId,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>        code: verifyCode,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      if (verify.error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>        setError(verify.error.message)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>        throw verify.error</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>    })()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>  return (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;div&gt;Please enter the code from your authenticator app.&lt;/div&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      {error &amp;&amp; &lt;div className=\"error\"&gt;{error}&lt;/div&gt;}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;input</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>        type=\"text\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>        value={verifyCode}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>        onChange={(e) =&gt; setVerifyCode(e.target.value.trim())}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;input type=\"button\" value=\"Submit\" onClick={onSubmitClicked} /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;/&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>  )</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->53</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div>\n<ul>\n<li>You can extract the available MFA factors for the user by calling\n<code>supabase.auth.mfa.listFactors()</code>. Don't worry this method is also very quick\nand rarely uses the network.</li>\n<li>If <code>listFactors()</code> returns more than one factor (or of a different type) you\nshould present the user with a choice. For simplicity this is not shown in\nthe example.</li>\n<li>Each time the user presses the \"Submit\" button a new challenge is created for\nthe chosen factor (in this case the first one) and it is immediately\nverified. Any errors are displayed to the user.</li>\n<li>On successful verification, the client library will refresh the session in\nthe background automatically and finally call the <code>onSuccess</code> callback, which\nwill show the authenticated <code>App</code> component on screen.</li>\n</ul>\n<h2 id=\"frequently-asked-questions\" class=\"group scroll-mt-24\">Frequently asked questions<a href=\"#frequently-asked-questions\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<div class=\" flex flex-col space-y-3  text-foreground-light mt-8 mb-6 [&amp;>div]:space-y-4\" data-orientation=\"vertical\"><div><div data-state=\"closed\" data-orientation=\"vertical\" class=\" group first:rounded-tl-md first:rounded-tr-md last:rounded-bl-md last:rounded-br-md overflow-hidden will-change-transform \"><button type=\"button\" aria-controls=\"radix-:R1fu9jtsn7qb6ra:\" aria-expanded=\"false\" data-state=\"closed\" data-orientation=\"vertical\" id=\"radix-:Rfu9jtsn7qb6ra:\" class=\" flex flex-row gap-3 items-center w-full text-left cursor-pointer outline-none focus-visible:ring-1 focus-visible:z-10 ring-foreground-light  justify-between\" data-radix-collection-item=\"\"><span class=\"text-foreground\">What's inside the QR code?</span><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-down  text-foreground-lighter rotate-0 group-state-open:rotate-180 group-data-[state=open]:rotate-180 ease-&amp;lsqb;cubic-bezier(0.87,_0,_0.13,_1)&amp;rsqb; transition-transform duration-300 duration-200  order-last\" aria-hidden=\"true\"><path d=\"m6 9 6 6 6-6\"></path></svg></button><div data-state=\"closed\" id=\"radix-:R1fu9jtsn7qb6ra:\" hidden=\"\" role=\"region\" aria-labelledby=\"radix-:Rfu9jtsn7qb6ra:\" data-orientation=\"vertical\" class=\" data-open:animate-slide-down data-closed:animate-slide-up \" style=\"--radix-accordion-content-height:var(--radix-collapsible-content-height);--radix-accordion-content-width:var(--radix-collapsible-content-width)\"></div></div><div data-state=\"closed\" data-orientation=\"vertical\" class=\" group first:rounded-tl-md first:rounded-tr-md last:rounded-bl-md last:rounded-br-md overflow-hidden will-change-transform \"><button type=\"button\" aria-controls=\"radix-:R1nu9jtsn7qb6ra:\" aria-expanded=\"false\" data-state=\"closed\" data-orientation=\"vertical\" id=\"radix-:Rnu9jtsn7qb6ra:\" class=\" flex flex-row gap-3 items-center w-full text-left cursor-pointer outline-none focus-visible:ring-1 focus-visible:z-10 ring-foreground-light  justify-between\" data-radix-collection-item=\"\"><span class=\"text-foreground\">How long is the TOTP code valid for?</span><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-down  text-foreground-lighter rotate-0 group-state-open:rotate-180 group-data-[state=open]:rotate-180 ease-&amp;lsqb;cubic-bezier(0.87,_0,_0.13,_1)&amp;rsqb; transition-transform duration-300 duration-200  order-last\" aria-hidden=\"true\"><path d=\"m6 9 6 6 6-6\"></path></svg></button><div data-state=\"closed\" id=\"radix-:R1nu9jtsn7qb6ra:\" hidden=\"\" role=\"region\" aria-labelledby=\"radix-:Rnu9jtsn7qb6ra:\" data-orientation=\"vertical\" class=\" data-open:animate-slide-down data-closed:animate-slide-up \" style=\"--radix-accordion-content-height:var(--radix-collapsible-content-height);--radix-accordion-content-width:var(--radix-collapsible-content-width)\"></div></div></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-mfa/totp",
        "title": "Multi-Factor Authentication (TOTP) | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Multi-Factor%20Authentication%20(TOTP)&description=Add%20an%20additional%20layer%20of%20security%20to%20your%20apps%20with%20TOTP%20multi-factor%20authentication.",
        "ogTitle": "Multi-Factor Authentication (TOTP) | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-mfa/totp",
        "description": "Add an additional layer of security to your apps with TOTP multi-factor authentication.",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "ogDescription": "Add an additional layer of security to your apps with TOTP multi-factor authentication.",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Use Supabase Auth with React Native\n\n## Learn how to use Supabase Auth with React Native\n\n* * *\n\n1\n\n### Create a new Supabase project\n\n[Launch a new project](https://supabase.com/dashboard) in the Supabase Dashboard.\n\nYour new database has a table for storing your users. You can see that this table is currently empty by running some SQL in the [SQL Editor](https://supabase.com/dashboard/project/_/sql).\n\nSQL\\_EDITOR\n\n`\n_10\nselect * from auth.users;\n`\n\n2\n\n### Create a React app\n\nCreate a React app using the `create-expo-app` command.\n\nTerminal\n\n`\n_10\nnpx create-expo-app -t expo-template-blank-typescript my-app\n`\n\n3\n\n### Install the Supabase client library\n\nInstall `supabase-js` and the required dependencies.\n\nTerminal\n\n`\n_10\ncd my-app && npx expo install @supabase/supabase-js @react-native-async-storage/async-storage @rneui/themed react-native-url-polyfill\n`\n\n4\n\n### Set up your login component\n\nCreate a helper file `lib/supabase.ts` that exports a Supabase client using your [Project URL and public API (anon) key](https://supabase.com/dashboard/project/_/settings/api).\n\nlib/supabase.ts\n\n``\n_29\nimport { AppState } from 'react-native'\n_29\nimport 'react-native-url-polyfill/auto'\n_29\nimport AsyncStorage from '@react-native-async-storage/async-storage'\n_29\nimport { createClient } from '@supabase/supabase-js'\n_29\n_29\nconst supabaseUrl = YOUR_REACT_NATIVE_SUPABASE_URL\n_29\nconst supabaseAnonKey = YOUR_REACT_NATIVE_SUPABASE_ANON_KEY\n_29\n_29\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n_29\nauth: {\n_29\n    storage: AsyncStorage,\n_29\n    autoRefreshToken: true,\n_29\n    persistSession: true,\n_29\n    detectSessionInUrl: false,\n_29\n},\n_29\n})\n_29\n_29\n// Tells Supabase Auth to continuously refresh the session automatically\n_29\n// if the app is in the foreground. When this is added, you will continue\n_29\n// to receive `onAuthStateChange` events with the `TOKEN_REFRESHED` or\n_29\n// `SIGNED_OUT` event if the user's session is terminated. This should\n_29\n// only be registered once.\n_29\nAppState.addEventListener('change', (state) => {\n_29\nif (state === 'active') {\n_29\n    supabase.auth.startAutoRefresh()\n_29\n} else {\n_29\n    supabase.auth.stopAutoRefresh()\n_29\n}\n_29\n})\n``\n\n5\n\n### Create a login component\n\nLet's set up a React Native component to manage logins and sign ups.\n\ncomponents/Auth.tsx\n\n`\n_83\nimport React, { useState } from 'react'\n_83\nimport { Alert, StyleSheet, View } from 'react-native'\n_83\nimport { supabase } from '../lib/supabase'\n_83\nimport { Button, Input } from '@rneui/themed'\n_83\n_83\nexport default function Auth() {\n_83\nconst [email, setEmail] = useState('')\n_83\nconst [password, setPassword] = useState('')\n_83\nconst [loading, setLoading] = useState(false)\n_83\n_83\nasync function signInWithEmail() {\n_83\n    setLoading(true)\n_83\n    const { error } = await supabase.auth.signInWithPassword({\n_83\n      email: email,\n_83\n      password: password,\n_83\n    })\n_83\n_83\n    if (error) Alert.alert(error.message)\n_83\n    setLoading(false)\n_83\n}\n_83\n_83\nasync function signUpWithEmail() {\n_83\n    setLoading(true)\n_83\n    const {\n_83\n      data: { session },\n_83\n      error,\n_83\n    } = await supabase.auth.signUp({\n_83\n      email: email,\n_83\n      password: password,\n_83\n    })\n_83\n_83\n    if (error) Alert.alert(error.message)\n_83\n    if (!session) Alert.alert('Please check your inbox for email verification!')\n_83\n    setLoading(false)\n_83\n}\n_83\n_83\nreturn (\n_83\n    <View style={styles.container}>\n_83\n      <View style={[styles.verticallySpaced, styles.mt20]}>\n_83\n        <Input\n_83\n          label=\"Email\"\n_83\n          leftIcon={{ type: 'font-awesome', name: 'envelope' }}\n_83\n          onChangeText={(text) => setEmail(text)}\n_83\n          value={email}\n_83\n          placeholder=\"email@address.com\"\n_83\n          autoCapitalize={'none'}\n_83\n        />\n_83\n      </View>\n_83\n      <View style={styles.verticallySpaced}>\n_83\n        <Input\n_83\n          label=\"Password\"\n_83\n          leftIcon={{ type: 'font-awesome', name: 'lock' }}\n_83\n          onChangeText={(text) => setPassword(text)}\n_83\n          value={password}\n_83\n          secureTextEntry={true}\n_83\n          placeholder=\"Password\"\n_83\n          autoCapitalize={'none'}\n_83\n        />\n_83\n      </View>\n_83\n      <View style={[styles.verticallySpaced, styles.mt20]}>\n_83\n        <Button title=\"Sign in\" disabled={loading} onPress={() => signInWithEmail()} />\n_83\n      </View>\n_83\n      <View style={styles.verticallySpaced}>\n_83\n        <Button title=\"Sign up\" disabled={loading} onPress={() => signUpWithEmail()} />\n_83\n      </View>\n_83\n    </View>\n_83\n)\n_83\n}\n_83\n_83\nconst styles = StyleSheet.create({\n_83\ncontainer: {\n_83\n    marginTop: 40,\n_83\n    padding: 12,\n_83\n},\n_83\nverticallySpaced: {\n_83\n    paddingTop: 4,\n_83\n    paddingBottom: 4,\n_83\n    alignSelf: 'stretch',\n_83\n},\n_83\nmt20: {\n_83\n    marginTop: 20,\n_83\n},\n_83\n})\n`\n\n6\n\n### Add the Auth component to your app\n\nAdd the `Auth` component to your `App.tsx` file. If the user is logged in, print the user id to the screen.\n\nApp.tsx\n\n`\n_28\nimport 'react-native-url-polyfill/auto'\n_28\nimport { useState, useEffect } from 'react'\n_28\nimport { supabase } from './lib/supabase'\n_28\nimport Auth from './components/Auth'\n_28\nimport Account from './components/Account'\n_28\nimport { View, Text } from 'react-native'\n_28\nimport { Session } from '@supabase/supabase-js'\n_28\n_28\nexport default function App() {\n_28\nconst [session, setSession] = useState<Session | null>(null)\n_28\n_28\nuseEffect(() => {\n_28\n    supabase.auth.getSession().then(({ data: { session } }) => {\n_28\n      setSession(session)\n_28\n    })\n_28\n_28\n    supabase.auth.onAuthStateChange((_event, session) => {\n_28\n      setSession(session)\n_28\n    })\n_28\n}, [])\n_28\n_28\nreturn (\n_28\n    <View>\n_28\n      <Auth />\n_28\n      {session && session.user && <Text>{session.user.id}</Text>}\n_28\n    </View>\n_28\n)\n_28\n}\n`\n\n7\n\n### Start the app\n\nStart the app, and follow the instructions in the terminal.\n\nTerminal\n\n`\n_10\nnpm start\n`",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Use Supabase Auth with React Native</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Learn how to use Supabase Auth with React Native</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<div class=\"py-8\"><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">1</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Create a new Supabase project</h3><p><a href=\"https://supabase.com/dashboard\">Launch a new project</a> in the Supabase Dashboard.</p><p>Your new database has a table for storing your users. You can see that this table is currently empty by running some SQL in the <a href=\"https://supabase.com/dashboard/project/_/sql\">SQL Editor</a>.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"SQL_EDITOR\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>SQL_EDITOR</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span> select * from auth.users;</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">2</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Create a React app</h3><p>Create a React app using the <code>create-expo-app</code> command.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"Terminal\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>Terminal</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>npx create-expo-app -t expo-template-blank-typescript my-app</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">3</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Install the Supabase client library</h3><p>Install <code>supabase-js</code> and the required dependencies.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"Terminal\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>Terminal</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>cd my-app &amp;&amp; npx expo install @supabase/supabase-js @react-native-async-storage/async-storage @rneui/themed react-native-url-polyfill</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">4</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Set up your login component</h3><p>Create a helper file <code>lib/supabase.ts</code> that exports a Supabase client using your <a href=\"https://supabase.com/dashboard/project/_/settings/api\">Project URL and public API (anon) key</a>.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"lib/supabase.ts\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">lib/</span>supabase.ts</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>import { AppState } from 'react-native'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>import 'react-native-url-polyfill/auto'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>import AsyncStorage from '@react-native-async-storage/async-storage'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>import { createClient } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>const supabaseUrl = YOUR_REACT_NATIVE_SUPABASE_URL</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>const supabaseAnonKey = YOUR_REACT_NATIVE_SUPABASE_ANON_KEY</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>export const supabase = createClient(supabaseUrl, supabaseAnonKey, {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>  auth: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>    storage: AsyncStorage,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>    autoRefreshToken: true,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>    persistSession: true,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>    detectSessionInUrl: false,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>  },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>// Tells Supabase Auth to continuously refresh the session automatically</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>// if the app is in the foreground. When this is added, you will continue</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>// to receive `onAuthStateChange` events with the `TOKEN_REFRESHED` or</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>// `SIGNED_OUT` event if the user's session is terminated. This should</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>// only be registered once.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>AppState.addEventListener('change', (state) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>  if (state === 'active') {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>    supabase.auth.startAutoRefresh()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>  } else {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>    supabase.auth.stopAutoRefresh()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->29</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">5</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Create a login component</h3><p>Let's set up a React Native component to manage logins and sign ups.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"components/Auth.tsx\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">components/</span>Auth.tsx</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>import React, { useState } from 'react'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Alert, StyleSheet, View } from 'react-native'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>import { supabase } from '../lib/supabase'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Button, Input } from '@rneui/themed'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>export default function Auth() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [email, setEmail] = useState('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [password, setPassword] = useState('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [loading, setLoading] = useState(false)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>  async function signInWithEmail() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    setLoading(true)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    const { error } = await supabase.auth.signInWithPassword({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>      email: email,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>      password: password,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    if (error) Alert.alert(error.message)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    setLoading(false)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>  async function signUpWithEmail() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    setLoading(true)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    const {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>      data: { session },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>      error,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    } = await supabase.auth.signUp({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>      email: email,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>      password: password,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    if (error) Alert.alert(error.message)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    if (!session) Alert.alert('Please check your inbox for email verification!')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    setLoading(false)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>  return (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;View style={styles.container}&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;View style={[styles.verticallySpaced, styles.mt20]}&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>        &lt;Input</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>          label=\"Email\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>          leftIcon={{ type: 'font-awesome', name: 'envelope' }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>          onChangeText={(text) =&gt; setEmail(text)}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>          value={email}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>          placeholder=\"email@address.com\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>          autoCapitalize={'none'}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>        /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;/View&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;View style={styles.verticallySpaced}&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>        &lt;Input</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>          label=\"Password\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>          leftIcon={{ type: 'font-awesome', name: 'lock' }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>          onChangeText={(text) =&gt; setPassword(text)}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>          value={password}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>          secureTextEntry={true}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>          placeholder=\"Password\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>          autoCapitalize={'none'}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>        /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;/View&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;View style={[styles.verticallySpaced, styles.mt20]}&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>        &lt;Button title=\"Sign in\" disabled={loading} onPress={() =&gt; signInWithEmail()} /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;/View&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;View style={styles.verticallySpaced}&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>        &lt;Button title=\"Sign up\" disabled={loading} onPress={() =&gt; signUpWithEmail()} /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;/View&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;/View&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>  )</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>const styles = StyleSheet.create({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>  container: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    marginTop: 40,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    padding: 12,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>  },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>  verticallySpaced: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    paddingTop: 4,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    paddingBottom: 4,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    alignSelf: 'stretch',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>  },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>  mt20: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>    marginTop: 20,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>  },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->83</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">6</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Add the Auth component to your app</h3><p>Add the <code>Auth</code> component to your <code>App.tsx</code> file. If the user is logged in, print the user id to the screen.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"App.tsx\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>App.tsx</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>import 'react-native-url-polyfill/auto'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>import { useState, useEffect } from 'react'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>import { supabase } from './lib/supabase'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>import Auth from './components/Auth'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>import Account from './components/Account'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>import { View, Text } from 'react-native'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Session } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>export default function App() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [session, setSession] = useState&lt;Session | null&gt;(null)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>  useEffect(() =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>    supabase.auth.getSession().then(({ data: { session } }) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>      setSession(session)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>    })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>    supabase.auth.onAuthStateChange((_event, session) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>      setSession(session)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>    })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>  }, [])</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>  return (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;View&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;Auth /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>      {session &amp;&amp; session.user &amp;&amp; &lt;Text&gt;{session.user.id}&lt;/Text&gt;}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;/View&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>  )</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->28</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">7</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Start the app</h3><p>Start the app, and follow the instructions in the terminal.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"Terminal\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>Terminal</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>npm start</span></div></div><br></code></div></div></div></div></div></div></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/quickstarts/react-native",
        "title": "Use Supabase Auth with React Native | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Use%20Supabase%20Auth%20with%20React%20Native&description=undefined",
        "ogTitle": "Use Supabase Auth with React Native | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/quickstarts/react-native",
        "description": "Learn how to use Supabase Auth with React Native",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "ogDescription": "Learn how to use Supabase Auth with React Native",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Email Templates\n\n## Learn how to manage the email templates in Supabase.\n\n* * *\n\nYou can customize the email messages used for the authentication flows. You can edit the following email templates:\n\n- Confirm signup\n- Invite user\n- Magic Link\n- Change Email Address\n- Reset Password\n\n## Terminology [\\#](\\#terminology)\n\nThe templating system provides the following variables for use:\n\n| Name | Description |\n| --- | --- |\n| `{{ .ConfirmationURL }}` | Contains the confirmation URL. For example, a signup confirmation URL would look like: `https://project-ref.supabase.co/auth/v1/verify?token={{ .TokenHash }}&type=signup&redirect_to=https://example.com/path` . |\n| `{{ .Token }}` | Contains a 6-digit One-Time-Password (OTP) that can be used instead of the `{{. ConfirmationURL }}` . |\n| `{{ .TokenHash }}` | Contains a hashed version of the `{{ .Token }}`. This is useful for constructing your own email link in the email template. |\n| `{{ .SiteURL }}` | Contains your application's Site URL. This can be configured in your project's [authentication settings](/dashboard/project/_/auth/url-configuration). |\n| `{{ .RedirectTo }}` | Contains the redirect URL passed when `signUp`, `signInWithOtp`, `signInWithOAuth`, `resetPasswordForEmail` or `inviteUserByEmail` is called. The redirect URL allow list can be configured in your project's [authentication settings](/dashboard/project/_/auth/url-configuration). |\n| `{{ .Data }}` | Contains metadata from `auth.users.user_metadata`. Use this to personalize the email message. |\n\n## Editing email templates [\\#](\\#editing-email-templates)\n\nOn hosted Supabase projects, edit your email templates on the [Email Templates](/dashboard/project/_/auth/templates) page. On self-hosted projects or in local development, edit your [configuration files](/docs/guides/cli/customizing-email-templates).\n\n## Mobile Deep Linking [\\#](\\#mobile-deep-linking)\n\nFor mobile applications, you might need to link or redirect to a specific page within your app. See the [Mobile Deep Linking guide](/docs/guides/auth/native-mobile-deep-linking) to set this up.\n\n## Limitations [\\#](\\#limitations)\n\n### Email prefetching [\\#](\\#email-prefetching)\n\nCertain email providers may have spam detection or other security features that prefetch URL links from incoming emails (e.g. [Safe Links in Microsoft Defender for Office 365](https://learn.microsoft.com/en-us/microsoft-365/security/office-365-security/safe-links-about?view=o365-worldwide)).\nIn this scenario, the `{{ .ConfirmationURL }}` sent will be consumed instantly which leads to a \"Token has expired or is invalid\" error.\nTo guard against this:\n\n- Use an email OTP instead by including `{{ .Token }}` in the email template.\n\n- Create your own custom email link to redirect the user to a page where they can click on a button to confirm the action.\nFor example, you can include the following in your email template:\n\n\n\n`\n_10\n<a href=\"{{ .SiteURL }}/confirm-signup?confirmation_url={{ .ConfirmationURL }}\"\n_10\n>Confirm your signup\n_10\n</a>\n`\n\n\n\nThe user should be brought to a page on your site where they can confirm the action by clicking a button.\nThe button should contain the actual confirmation link which can be obtained from parsing the `confirmation_url={{ .ConfirmationURL }}` query parameter in the URL.\n\n\n### Email tracking [\\#](\\#email-tracking)\n\nIf you are using an external email provider that enables \"email tracking\", the links inside the Supabase email templates will be overwritten and won't perform as expected. We recommend disabling email tracking to ensure email links are not overwritten.\n\n### Redirecting the user to a server-side endpoint [\\#](\\#redirecting-the-user-to-a-server-side-endpoint)\n\nIf you intend to use [Server-side rendering](/docs/guides/auth/server-side-rendering), you might want the email link to redirect the user to a server-side endpoint to check if they are authenticated before returning the page. However, the default email link will redirect the user after verification to the redirect URL with the session in the query fragments. Since the session is returned in the query fragments by default, you won't be able to access it on the server-side.\n\nYou can customize the email link in the email template to redirect the user to a server-side endpoint successfully. For example:\n\n`\n_10\n<a\n_10\nhref=\"https://api.example.com/v1/authenticate?token_hash={{ .TokenHash }}&type=invite&redirect_to={{ .RedirectTo }}\"\n_10\n>Accept the invite\n_10\n</a>\n`\n\nWhen the user clicks on the link, the request will hit `https://api.example.com/v1/authenticate` and you can grab the `token_hash`, `type` and `redirect_to` query parameters from the URL. Then, you can call the [`verifyOtp`](/docs/reference/javascript/auth-verifyotp) method to get back an authenticated session before redirecting the user back to the client. Since the `verifyOtp` method makes a `POST` request to Supabase Auth to verify the user, the session will be returned in the response body, which can be read by the server. For example:\n\n`\n_10\nconst { token_hash, type } = Object.fromEntries(new URLSearchParams(window.location.search))\n_10\nconst {\n_10\ndata: { session },\n_10\nerror,\n_10\n} = await supabase.auth.verifyOtp({ token_hash, type })\n_10\n_10\n// subsequently redirect the user back to the client using the redirect_to param\n_10\n// ...\n`\n\n## Customization [\\#](\\#customization)\n\nSupabase Auth makes use of [Go Templates](https://pkg.go.dev/text/template). This means it is possible to conditionally render information based on template properties.You may wish to checkout this [guide by Hugo](https://gohugo.io/templates/introduction/) for a guide on the templating language.\n\n### Send different email to early access users [\\#](\\#send-different-email-to-early-access-users)\n\nSend a different email to users who signed up via an early access domain ( `https://www.earlyaccess.trial.com`).\n\n`\n_14\n{{ if eq .Data.Domain \"https://www.example.com\" }}\n_14\n<h1>Welcome to Our Database Service!</h1>\n_14\n<p>Dear Developer,</p>\n_14\n<p>Welcome to Billy, the scalable developer platform!</p>\n_14\n<p>Best Regards,<br>\n_14\nBilly Team</p>\n_14\n{{ else if eq .Data.Domain \"https://www.earlyaccess.trial.com\" }}\n_14\n<h1>Welcome to Our Database Service!</h1>\n_14\n<p>Dear Developer,</p>\n_14\n<p>Welcome Billy, the scalable developer platform!</p>\n_14\n<p> As an early access member, you have access to select features like Point To Space Restoration.</p>\n_14\n<p>Best Regards,<br>\n_14\nBilly Team</p>\n_14\n{{ end }}\n`",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Email Templates</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Learn how to manage the email templates in Supabase.</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>You can customize the email messages used for the authentication flows. You can edit the following email templates:</p>\n<ul>\n<li>Confirm signup</li>\n<li>Invite user</li>\n<li>Magic Link</li>\n<li>Change Email Address</li>\n<li>Reset Password</li>\n</ul>\n<h2 id=\"terminology\" class=\"group scroll-mt-24\">Terminology<a href=\"#terminology\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>The templating system provides the following variables for use:</p>\n<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>{{ .ConfirmationURL }}</code></td><td>Contains the confirmation URL. For example, a signup confirmation URL would look like: <code>https://project-ref.supabase.co/auth/v1/verify?token={{ .TokenHash }}&amp;type=signup&amp;redirect_to=https://example.com/path</code> .</td></tr><tr><td><code>{{ .Token }}</code></td><td>Contains a 6-digit One-Time-Password (OTP) that can be used instead of the <code>{{. ConfirmationURL }}</code> .</td></tr><tr><td><code>{{ .TokenHash }}</code></td><td>Contains a hashed version of the <code>{{ .Token }}</code>. This is useful for constructing your own email link in the email template.</td></tr><tr><td><code>{{ .SiteURL }}</code></td><td>Contains your application's Site URL. This can be configured in your project's <a href=\"/dashboard/project/_/auth/url-configuration\">authentication settings</a>.</td></tr><tr><td><code>{{ .RedirectTo }}</code></td><td>Contains the redirect URL passed when <code>signUp</code>, <code>signInWithOtp</code>, <code>signInWithOAuth</code>, <code>resetPasswordForEmail</code> or <code>inviteUserByEmail</code> is called. The redirect URL allow list can be configured in your project's <a href=\"/dashboard/project/_/auth/url-configuration\">authentication settings</a>.</td></tr><tr><td><code>{{ .Data }}</code></td><td>Contains metadata from <code>auth.users.user_metadata</code>. Use this to personalize the email message.</td></tr></tbody></table>\n<h2 id=\"editing-email-templates\" class=\"group scroll-mt-24\">Editing email templates<a href=\"#editing-email-templates\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>On hosted Supabase projects, edit your email templates on the <a href=\"/dashboard/project/_/auth/templates\">Email Templates</a> page. On self-hosted projects or in local development, edit your <a href=\"/docs/guides/cli/customizing-email-templates\">configuration files</a>.</p>\n<h2 id=\"mobile-deep-linking\" class=\"group scroll-mt-24\">Mobile Deep Linking<a href=\"#mobile-deep-linking\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>For mobile applications, you might need to link or redirect to a specific page within your app. See the <a href=\"/docs/guides/auth/native-mobile-deep-linking\">Mobile Deep Linking guide</a> to set this up.</p>\n<h2 id=\"limitations\" class=\"group scroll-mt-24\">Limitations<a href=\"#limitations\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<h3 id=\"email-prefetching\" class=\"group scroll-mt-24\">Email prefetching<a href=\"#email-prefetching\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Certain email providers may have spam detection or other security features that prefetch URL links from incoming emails (e.g. <a href=\"https://learn.microsoft.com/en-us/microsoft-365/security/office-365-security/safe-links-about?view=o365-worldwide\">Safe Links in Microsoft Defender for Office 365</a>).\nIn this scenario, the <code>{{ .ConfirmationURL }}</code> sent will be consumed instantly which leads to a \"Token has expired or is invalid\" error.\nTo guard against this:</p>\n<ul>\n<li>\n<p>Use an email OTP instead by including <code>{{ .Token }}</code> in the email template.</p>\n</li>\n<li>\n<p>Create your own custom email link to redirect the user to a page where they can click on a button to confirm the action.\nFor example, you can include the following in your email template:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;a href=\"{{ .SiteURL }}/confirm-signup?confirmation_url={{ .ConfirmationURL }}\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  &gt;Confirm your signup</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;/a&gt;</span></div></div><br></code></div></div>\n<p>The user should be brought to a page on your site where they can confirm the action by clicking a button.\nThe button should contain the actual confirmation link which can be obtained from parsing the <code>confirmation_url={{ .ConfirmationURL }}</code> query parameter in the URL.</p>\n</li>\n</ul>\n<h3 id=\"email-tracking\" class=\"group scroll-mt-24\">Email tracking<a href=\"#email-tracking\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>If you are using an external email provider that enables \"email tracking\", the links inside the Supabase email templates will be overwritten and won't perform as expected. We recommend disabling email tracking to ensure email links are not overwritten.</p>\n<h3 id=\"redirecting-the-user-to-a-server-side-endpoint\" class=\"group scroll-mt-24\">Redirecting the user to a server-side endpoint<a href=\"#redirecting-the-user-to-a-server-side-endpoint\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>If you intend to use <a href=\"/docs/guides/auth/server-side-rendering\">Server-side rendering</a>, you might want the email link to redirect the user to a server-side endpoint to check if they are authenticated before returning the page. However, the default email link will redirect the user after verification to the redirect URL with the session in the query fragments. Since the session is returned in the query fragments by default, you won't be able to access it on the server-side.</p>\n<p>You can customize the email link in the email template to redirect the user to a server-side endpoint successfully. For example:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;a</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  href=\"https://api.example.com/v1/authenticate?token_hash={{ .TokenHash }}&amp;type=invite&amp;redirect_to={{ .RedirectTo }}\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  &gt;Accept the invite</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;/a&gt;</span></div></div><br></code></div></div>\n<p>When the user clicks on the link, the request will hit <code>https://api.example.com/v1/authenticate</code> and you can grab the <code>token_hash</code>, <code>type</code> and <code>redirect_to</code> query parameters from the URL. Then, you can call the <a href=\"/docs/reference/javascript/auth-verifyotp\"><code>verifyOtp</code></a> method to get back an authenticated session before redirecting the user back to the client. Since the <code>verifyOtp</code> method makes a <code>POST</code> request to Supabase Auth to verify the user, the session will be returned in the response body, which can be read by the server. For example:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const { token_hash, type } = Object.fromEntries(new URLSearchParams(window.location.search))</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  data: { session },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  error,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>} = await supabase.auth.verifyOtp({ token_hash, type })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>// subsequently redirect the user back to the client using the redirect_to param</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>// ...</span></div></div><br></code></div></div>\n<h2 id=\"customization\" class=\"group scroll-mt-24\">Customization<a href=\"#customization\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Supabase Auth makes use of <a href=\"https://pkg.go.dev/text/template\">Go Templates</a>. This means it is possible to conditionally render information based on template properties.You may wish to checkout this <a href=\"https://gohugo.io/templates/introduction/\">guide by Hugo</a> for a guide on the templating language.</p>\n<h3 id=\"send-different-email-to-early-access-users\" class=\"group scroll-mt-24\">Send different email to early access users<a href=\"#send-different-email-to-early-access-users\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Send a different email to users who signed up via an early access domain (<code>https://www.earlyaccess.trial.com</code>).</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>{{ if eq .Data.Domain \"https://www.example.com\" }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;h1&gt;Welcome to Our Database Service!&lt;/h1&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;p&gt;Dear Developer,&lt;/p&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;p&gt;Welcome to Billy, the scalable developer platform!&lt;/p&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;p&gt;Best Regards,&lt;br&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>Billy Team&lt;/p&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>{{ else if eq .Data.Domain \"https://www.earlyaccess.trial.com\" }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;h1&gt;Welcome to Our Database Service!&lt;/h1&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;p&gt;Dear Developer,&lt;/p&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;p&gt;Welcome Billy, the scalable developer platform!&lt;/p&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;p&gt; As an early access member, you have access to select features like Point To Space Restoration.&lt;/p&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>  &lt;p&gt;Best Regards,&lt;br&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>Billy Team&lt;/p&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->14</span><div style=\"display:inline-block;margin-left:16px\"><span>{{ end }}</span></div></div><br></code></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-email-templates",
        "title": "Email Templates | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Email%20Templates&description=Learn%20how%20to%20manage%20the%20email%20templates%20in%20Supabase.",
        "ogTitle": "Email Templates | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-email-templates",
        "description": "Learn how to manage the email templates in Supabase.",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "ogDescription": "Learn how to manage the email templates in Supabase.",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Server-Side Rendering\n\n## How SSR works with Supabase Auth.\n\n* * *\n\nSSR frameworks move rendering and data fetches to the server, to reduce client bundle size and execution time.\n\nSupabase Auth is fully compatible with SSR. You need to make a few changes to the configuration of your Supabase client, to store the user session in cookies instead of local storage. After setting up your Supabase client, follow the instructions for any flow in the How-To guides.\n\nMake sure to use the PKCE flow instructions where those differ from the implicit flow instructions. If no difference is mentioned, don't worry about this.\n\n## `@supabase/ssr` [\\#](\\#supabasessr)\n\nWe have developed an [`@supabase/ssr`](https://www.npmjs.com/package/@supabase/ssr) package to make setting up the Supabase client as simple as possible. This package is currently in beta. Adoption is recommended but be aware that the API is still unstable and may have breaking changes in the future.\n\nIf you're currently using the [Auth Helpers package](https://github.com/supabase/auth-helpers), the [docs are still available](/docs/guides/auth/auth-helpers), however we recommend migrating to the new `@supabase/ssr` package as this will be the recommended path moving forward.\n\n## Framework quickstarts [\\#](\\#framework-quickstarts)\n\n[![Next.js](https://supabase.com/docs/img/icons/nextjs-icon.svg)\\\\\n\\\\\nNext.js\\\\\n\\\\\nAutomatically configure Supabase in Next.js to use cookies, making your user and their session available on the client and server.](/docs/guides/auth/server-side/nextjs) [![SvelteKit](https://supabase.com/docs/img/icons/svelte-icon.svg)\\\\\n\\\\\nSvelteKit\\\\\n\\\\\nAutomatically configure Supabase in SvelteKit to use cookies, making your user and their session available on the client and server.](/docs/guides/auth/server-side/sveltekit)",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Server-Side Rendering</h1><h2 class=\"mt-3 text-xl text-foreground-light\">How SSR works with Supabase Auth.</h2><hr class=\"not-prose border-t-0 border-b my-8\"><p>SSR frameworks move rendering and data fetches to the server, to reduce client bundle size and execution time.</p>\n<p>Supabase Auth is fully compatible with SSR. You need to make a few changes to the configuration of your Supabase client, to store the user session in cookies instead of local storage. After setting up your Supabase client, follow the instructions for any flow in the How-To guides.</p>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text-foreground [&amp;>svg]:text-background [&amp;>svg]:bg-foreground mb-2 [&amp;_svg]:bg-foreground-muted [&amp;_svg]:text-background-muted bg-surface-200/25 border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>Make sure to use the PKCE flow instructions where those differ from the implicit flow instructions. If no difference is mentioned, don't worry about this.</p></div></div>\n<h2 id=\"supabasessr\" class=\"group scroll-mt-24\"><code>@supabase/ssr</code><a href=\"#supabasessr\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>We have developed an <a href=\"https://www.npmjs.com/package/@supabase/ssr\"><code>@supabase/ssr</code></a> package to make setting up the Supabase client as simple as possible. This package is currently in beta. Adoption is recommended but be aware that the API is still unstable and may have breaking changes in the future.</p>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text-foreground [&amp;>svg]:text-background [&amp;>svg]:bg-foreground mb-2 [&amp;_svg]:bg-foreground-muted [&amp;_svg]:text-background-muted bg-surface-200/25 border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>If you're currently using the <a href=\"https://github.com/supabase/auth-helpers\">Auth Helpers package</a>, the <a href=\"/docs/guides/auth/auth-helpers\">docs are still available</a>, however we recommend migrating to the new <code>@supabase/ssr</code> package as this will be the recommended path moving forward.</p></div></div>\n<h2 id=\"framework-quickstarts\" class=\"group scroll-mt-24\">Framework quickstarts<a href=\"#framework-quickstarts\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<div class=\"grid grid-cols-[repeat(auto-fit,minmax(300px,1fr))] gap-6 mb-6 not-prose\"><a href=\"/docs/guides/auth/server-side/nextjs\"><div class=\"relative h-full group cursor-pointer overflow-hidden border rounded-lg text-left border-muted hover:border-default bg-transparent transition\"><div class=\"px-8 pb-8 relative flex flex-col h-full gap-6 pt-8\"><div class=\"flex items-center gap-3\"><div class=\"shrink-0\"><img class=\"w-5\" alt=\"Next.js\" src=\"/docs/img/icons/nextjs-icon.svg\"></div><p class=\"text-base text-foreground\">Next.js</p></div><span class=\"text-sm text-foreground-light flex-grow\">Automatically configure Supabase in Next.js to use cookies, making your user and their session available on the client and server.</span></div></div></a><a href=\"/docs/guides/auth/server-side/sveltekit\"><div class=\"relative h-full group cursor-pointer overflow-hidden border rounded-lg text-left border-muted hover:border-default bg-transparent transition\"><div class=\"px-8 pb-8 relative flex flex-col h-full gap-6 pt-8\"><div class=\"flex items-center gap-3\"><div class=\"shrink-0\"><img class=\"w-5\" alt=\"SvelteKit\" src=\"/docs/img/icons/svelte-icon.svg\"></div><p class=\"text-base text-foreground\">SvelteKit</p></div><span class=\"text-sm text-foreground-light flex-grow\">Automatically configure Supabase in SvelteKit to use cookies, making your user and their session available on the client and server.</span></div></div></a></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/server-side",
        "title": "Server-Side Rendering | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Server-Side%20Rendering&description=undefined",
        "ogTitle": "Server-Side Rendering | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/server-side",
        "description": "How SSR works with Supabase Auth.",
        "modifiedTime": "2024-09-10T20:36:24.980Z",
        "ogDescription": "How SSR works with Supabase Auth.",
        "publishedTime": "2024-09-10T20:36:24.980Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Use Supabase Auth with React\n\n## Learn how to use Supabase Auth with React.js.\n\n* * *\n\n1\n\n### Create a new Supabase project\n\n[Launch a new project](https://supabase.com/dashboard) in the Supabase Dashboard.\n\nYour new database has a table for storing your users. You can see that this table is currently empty by running some SQL in the [SQL Editor](https://supabase.com/dashboard/project/_/sql).\n\nSQL\\_EDITOR\n\n`\n_10\nselect * from auth.users;\n`\n\n2\n\n### Create a React app\n\nCreate a React app using the `create-react-app` command.\n\nTerminal\n\n`\n_10\nnpx create-react-app my-app\n`\n\n3\n\n### Install the Supabase client library\n\nThe fastest way to get started is to use Supabase's `auth-ui-react` library which provides a convenient interface for working with Supabase Auth from a React app.\n\nNavigate to the React app and install the Supabase libraries.\n\nTerminal\n\n`\n_10\ncd my-app && npm install @supabase/supabase-js @supabase/auth-ui-react @supabase/auth-ui-shared\n`\n\n4\n\n### Set up your login component\n\nIn `index.js`, create a Supabase client using your [Project URL and public API (anon) key](https://supabase.com/dashboard/project/_/settings/api).\n\nYou can configure the Auth component to display whenever there is no session inside `supabase.auth.getSession()`\n\nsrc/index.js\n\n`\n_32\nimport './index.css'\n_32\nimport { useState, useEffect } from 'react'\n_32\nimport { createClient } from '@supabase/supabase-js'\n_32\nimport { Auth } from '@supabase/auth-ui-react'\n_32\nimport { ThemeSupa } from '@supabase/auth-ui-shared'\n_32\n_32\nconst supabase = createClient('https://<project>.supabase.co', '<your-anon-key>')\n_32\n_32\nexport default function App() {\n_32\n    const [session, setSession] = useState(null)\n_32\n_32\n    useEffect(() => {\n_32\n      supabase.auth.getSession().then(({ data: { session } }) => {\n_32\n        setSession(session)\n_32\n      })\n_32\n_32\n      const {\n_32\n        data: { subscription },\n_32\n      } = supabase.auth.onAuthStateChange((_event, session) => {\n_32\n        setSession(session)\n_32\n      })\n_32\n_32\n      return () => subscription.unsubscribe()\n_32\n    }, [])\n_32\n_32\n    if (!session) {\n_32\n      return (<Auth supabaseClient={supabase} appearance={{ theme: ThemeSupa }} />)\n_32\n    }\n_32\n    else {\n_32\n      return (<div>Logged in!</div>)\n_32\n    }\n_32\n}\n`\n\n5\n\n### Start the app\n\nStart the app, go to [http://localhost:3000](http://localhost:3000) in a browser, and open the browser console and you should be able to log in.\n\nTerminal\n\n`\n_10\nnpm start\n`",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Use Supabase Auth with React</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Learn how to use Supabase Auth with React.js.</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<div class=\"py-8\"><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">1</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Create a new Supabase project</h3><p><a href=\"https://supabase.com/dashboard\">Launch a new project</a> in the Supabase Dashboard.</p><p>Your new database has a table for storing your users. You can see that this table is currently empty by running some SQL in the <a href=\"https://supabase.com/dashboard/project/_/sql\">SQL Editor</a>.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"SQL_EDITOR\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>SQL_EDITOR</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span> select * from auth.users;</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">2</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Create a React app</h3><p>Create a React app using the <code>create-react-app</code> command.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"Terminal\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>Terminal</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>npx create-react-app my-app</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">3</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Install the Supabase client library</h3><p>The fastest way to get started is to use Supabase's <code>auth-ui-react</code> library which provides a convenient interface for working with Supabase Auth from a React app.</p><p>Navigate to the React app and install the Supabase libraries.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"Terminal\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>Terminal</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>cd my-app &amp;&amp; npm install @supabase/supabase-js @supabase/auth-ui-react @supabase/auth-ui-shared</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">4</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Set up your login component</h3><p>In <code>index.js</code>, create a Supabase client using your <a href=\"https://supabase.com/dashboard/project/_/settings/api\">Project URL and public API (anon) key</a>.</p><p>You can configure the Auth component to display whenever there is no session inside <code>supabase.auth.getSession()</code></p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"src/index.js\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">src/</span>index.js</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>  import './index.css'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>  import { useState, useEffect } from 'react'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>  import { createClient } from '@supabase/supabase-js'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>  import { Auth } from '@supabase/auth-ui-react'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>  import { ThemeSupa } from '@supabase/auth-ui-shared'</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>  const supabase = createClient('https://&lt;project&gt;.supabase.co', '&lt;your-anon-key&gt;')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>  export default function App() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    const [session, setSession] = useState(null)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    useEffect(() =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>      supabase.auth.getSession().then(({ data: { session } }) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>        setSession(session)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>      })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>      const {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>        data: { subscription },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>      } = supabase.auth.onAuthStateChange((_event, session) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>        setSession(session)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>      })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>      return () =&gt; subscription.unsubscribe()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    }, [])</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    if (!session) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>      return (&lt;Auth supabaseClient={supabase} appearance={{ theme: ThemeSupa }} /&gt;)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    else {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>      return (&lt;div&gt;Logged in!&lt;/div&gt;)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->32</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">5</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Start the app</h3><p>Start the app, go to <a href=\"http://localhost:3000\">http://localhost:3000</a> in a browser, and open the browser console and you should be able to log in.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"Terminal\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>Terminal</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>npm start</span></div></div><br></code></div></div></div></div></div></div></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/quickstarts/react",
        "title": "Use Supabase Auth with React | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Use%20Supabase%20Auth%20with%20React&description=undefined",
        "ogTitle": "Use Supabase Auth with React | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/quickstarts/react",
        "description": "Learn how to use Supabase Auth with React.js.",
        "modifiedTime": "2024-09-10T20:36:24.980Z",
        "ogDescription": "Learn how to use Supabase Auth with React.js.",
        "publishedTime": "2024-09-10T20:36:24.980Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Multi-Factor Authentication (Phone)\n\n* * *\n\n## How does phone multi-factor-authentication work? [\\#](\\#how-does-phone-multi-factor-authentication-work)\n\nPhone multi-factor authentication involves a shared code generated by Supabase Auth and the end user. The code is delivered via a messaging channel, such as SMS or WhatsApp, and the user uses the code to authenticate to Supabase Auth.\n\nThe phone messaging configuration for MFA is shared with [phone auth login](/docs/guides/auth/phone-login). The same provider configuration that is used for phone login is used for MFA. You can also use the [Send SMS Hook](/docs/guides/auth/auth-hooks/send-sms-hook) if you need to use an MFA (Phone) messaging provider different from what is supported natively.\n\nBelow is a flow chart illustrating how the Enrollment and Verify APIs work in the context of MFA (Phone).\n\nPhone MFA is part of the Auth Advanced MFA Add-on and costs an additional $75 per month for the first project in the organization and an additional $10 per month for additional projects.\n\n### Add enrollment flow [\\#](\\#add-enrollment-flow)\n\nAn enrollment flow provides a UI for users to set up additional authentication factors. Most applications add the enrollment flow in two places within their app:\n\n1. Right after login or sign up.\nThis allows users quickly set up Multi Factor Authentication (MFA) post login or account creation. Where possible, encourage all users to set up MFA. Many applications offer this as an opt-in step in an\neffort to reduce onboarding friction.\n2. From within a settings page.\nAllows users to set up, disable or modify their MFA settings.\n\nAs far as possible, maintain a generic flow that you can reuse in both cases with minor modifications.\n\nEnrolling a factor for use with MFA takes three steps for phone MFA:\n\n1. Call `supabase.auth.mfa.enroll()`.\n2. Calling the `supabase.auth.mfa.challenge()` API. This sends a code via SMS or WhatsApp and prepares Supabase Auth to accept a verification code from the user.\n3. Calling the `supabase.auth.mfa.verify()` API. `supabase.auth.mfa.challenge()` returns a challenge ID.\nThis verifies that the code issued by Supabase Auth matches the code input by the user. If the verification succeeds, the factor\nimmediately becomes active for the user account. If not, you should repeat\nsteps 2 and 3.\n\n#### Example: React [\\#](\\#example-react)\n\nBelow is an example that creates a new `EnrollMFA` component that illustrates the important pieces of the MFA enrollment flow.\n\n- When the component appears on screen, the `supabase.auth.mfa.enroll()` API is\ncalled once to start the process of enrolling a new factor for the current\nuser.\n- A challenge is created using the `supabase.auth.mfa.challenge()` API and the\ncode from the user is submitted for verification using the\n`supabase.auth.mfa.verify()` challenge.\n- `onEnabled` is a callback that notifies the other components that enrollment\nhas completed.\n- `onCancelled` is a callback that notifies the other components that the user\nhas clicked the `Cancel` button.\n\n`\n_84\nexport function EnrollMFA({\n_84\nonEnrolled,\n_84\nonCancelled,\n_84\n}: {\n_84\nonEnrolled: () => void\n_84\nonCancelled: () => void\n_84\n}) {\n_84\nconst [phoneNumber, setPhoneNumber] = useState('')\n_84\nconst [factorId, setFactorId] = useState('')\n_84\nconst [verifyCode, setVerifyCode] = useState('')\n_84\nconst [error, setError] = useState('')\n_84\nconst [challengeId, setChallengeId] = useState('')\n_84\n_84\nconst onEnableClicked = () => {\n_84\n    setError('')\n_84\n    ;(async () => {\n_84\n      const verify = await auth.mfa.verify({\n_84\n        factorId,\n_84\n        challengeId,\n_84\n        code: verifyCode,\n_84\n      })\n_84\n      if (verify.error) {\n_84\n        setError(verify.error.message)\n_84\n        throw verify.error\n_84\n      }\n_84\n_84\n      onEnrolled()\n_84\n    })()\n_84\n}\n_84\nconst onEnrollClicked = async () => {\n_84\n    setError('')\n_84\n    try {\n_84\n      const factor = await auth.mfa.enroll({\n_84\n        phone: phoneNumber,\n_84\n        factorType: 'phone',\n_84\n      })\n_84\n      if (factor.error) {\n_84\n        setError(factor.error.message)\n_84\n        throw factor.error\n_84\n      }\n_84\n_84\n      setFactorId(factor.data.id)\n_84\n    } catch (error) {\n_84\n      setError('Failed to Enroll the Factor.')\n_84\n    }\n_84\n}\n_84\n_84\nconst onSendOTPClicked = async () => {\n_84\n    setError('')\n_84\n    try {\n_84\n      const challenge = await auth.mfa.challenge({ factorId })\n_84\n      if (challenge.error) {\n_84\n        setError(challenge.error.message)\n_84\n        throw challenge.error\n_84\n      }\n_84\n_84\n      setChallengeId(challenge.data.id)\n_84\n    } catch (error) {\n_84\n      setError('Failed to resend the code.')\n_84\n    }\n_84\n}\n_84\n_84\nreturn (\n_84\n    <>\n_84\n      {error && <div className=\"error\">{error}</div>}\n_84\n      <input\n_84\n        type=\"text\"\n_84\n        placeholder=\"Phone Number\"\n_84\n        value={phoneNumber}\n_84\n        onChange={(e) => setPhoneNumber(e.target.value.trim())}\n_84\n      />\n_84\n      <input\n_84\n        type=\"text\"\n_84\n        placeholder=\"Verification Code\"\n_84\n        value={verifyCode}\n_84\n        onChange={(e) => setVerifyCode(e.target.value.trim())}\n_84\n      />\n_84\n      <input type=\"button\" value=\"Enroll\" onClick={onEnrollClicked} />\n_84\n      <input type=\"button\" value=\"Submit Code\" onClick={onEnableClicked} />\n_84\n      <input type=\"button\" value=\"Send OTP Code\" onClick={onSendOTPClicked} />\n_84\n      <input type=\"button\" value=\"Cancel\" onClick={onCancelled} />\n_84\n    </>\n_84\n)\n_84\n}\n`\n\n### Add a challenge step to login [\\#](\\#add-a-challenge-step-to-login)\n\nOnce a user has logged in via their first factor (email+password, magic link, one time password, social login etc.) you need to perform a check if any additional factors need to be verified.\n\nThis can be done by using the `supabase.auth.mfa.getAuthenticatorAssuranceLevel()` API. When the user signs in and is redirected back to your app, you should call this method to extract the user's current and next authenticator assurance level (AAL).\n\nTherefore if you receive a `currentLevel` which is `aal1` but a `nextLevel` of `aal2`, the user should be given the option to go through MFA.\n\nBelow is a table that explains the combined meaning.\n\n| Current Level | Next Level | Meaning |\n| --: | :-- | :-- |\n| `aal1` | `aal1` | User does not have MFA enrolled. |\n| `aal1` | `aal2` | User has an MFA factor enrolled but has not verified it. |\n| `aal2` | `aal2` | User has verified their MFA factor. |\n| `aal2` | `aal1` | User has disabled their MFA factor. (Stale JWT.) |\n\n#### Example: React [\\#](\\#example-react)\n\nAdding the challenge step to login depends heavily on the architecture of your app. However, a fairly common way to structure React apps is to have a large component (often named `App`) which contains most of the authenticated application logic.\n\nThis example will wrap this component with logic that will show an MFA challenge screen if necessary, before showing the full application. This is illustrated in the `AppWithMFA` example below.\n\n`\n_33\nfunction AppWithMFA() {\n_33\nconst [readyToShow, setReadyToShow] = useState(false)\n_33\nconst [showMFAScreen, setShowMFAScreen] = useState(false)\n_33\n_33\nuseEffect(() => {\n_33\n    ;(async () => {\n_33\n      try {\n_33\n        const { data, error } = await supabase.auth.mfa.getAuthenticatorAssuranceLevel()\n_33\n        if (error) {\n_33\n          throw error\n_33\n        }\n_33\n_33\n        console.log(data)\n_33\n_33\n        if (data.nextLevel === 'aal2' && data.nextLevel !== data.currentLevel) {\n_33\n          setShowMFAScreen(true)\n_33\n        }\n_33\n      } finally {\n_33\n        setReadyToShow(true)\n_33\n      }\n_33\n    })()\n_33\n}, [])\n_33\n_33\nif (readyToShow) {\n_33\n    if (showMFAScreen) {\n_33\n      return <AuthMFA />\n_33\n    }\n_33\n_33\n    return <App />\n_33\n}\n_33\n_33\nreturn <></>\n_33\n}\n`\n\n- `supabase.auth.mfa.getAuthenticatorAssuranceLevel()` does return a promise.\nDon't worry, this is a very fast method (microseconds) as it rarely uses the\nnetwork.\n- `readyToShow` only makes sure the AAL check completes before showing any\napplication UI to the user.\n- If the current level can be upgraded to the next one, the MFA screen is\nshown.\n- Once the challenge is successful, the `App` component is finally rendered on\nscreen.\n\nBelow is the component that implements the challenge and verify logic.\n\n`\n_72\nfunction AuthMFA() {\n_72\nconst [verifyCode, setVerifyCode] = useState('')\n_72\nconst [error, setError] = useState('')\n_72\nconst [factorId, setFactorId] = useState('')\n_72\nconst [challengeId, setChallengeId] = useState('')\n_72\nconst [phoneNumber, setPhoneNumber] = useState('')\n_72\n_72\nconst startChallenge = async () => {\n_72\n    setError('')\n_72\n    try {\n_72\n      const factors = await supabase.auth.mfa.listFactors()\n_72\n      if (factors.error) {\n_72\n        throw factors.error\n_72\n      }\n_72\n_72\n      const phoneFactor = factors.data.phone[0]\n_72\n_72\n      if (!phoneFactor) {\n_72\n        throw new Error('No phone factors found!')\n_72\n      }\n_72\n_72\n      const factorId = phoneFactor.id\n_72\n      setFactorId(factorId)\n_72\n      setPhoneNumber(phoneFactor.phone)\n_72\n_72\n      const challenge = await supabase.auth.mfa.challenge({ factorId })\n_72\n      if (challenge.error) {\n_72\n        setError(challenge.error.message)\n_72\n        throw challenge.error\n_72\n      }\n_72\n_72\n      setChallengeId(challenge.data.id)\n_72\n    } catch (error) {\n_72\n      setError(error.message)\n_72\n    }\n_72\n}\n_72\n_72\nconst verifyCode = async () => {\n_72\n    setError('')\n_72\n    try {\n_72\n      const verify = await supabase.auth.mfa.verify({\n_72\n        factorId,\n_72\n        challengeId,\n_72\n        code: verifyCode,\n_72\n      })\n_72\n      if (verify.error) {\n_72\n        setError(verify.error.message)\n_72\n        throw verify.error\n_72\n      }\n_72\n    } catch (error) {\n_72\n      setError(error.message)\n_72\n    }\n_72\n}\n_72\n_72\nreturn (\n_72\n    <>\n_72\n      <div>Please enter the code sent to your phone.</div>\n_72\n      {phoneNumber && <div>Phone number: {phoneNumber}</div>}\n_72\n      {error && <div className=\"error\">{error}</div>}\n_72\n      <input\n_72\n        type=\"text\"\n_72\n        value={verifyCode}\n_72\n        onChange={(e) => setVerifyCode(e.target.value.trim())}\n_72\n      />\n_72\n      {!challengeId ? (\n_72\n        <input type=\"button\" value=\"Start Challenge\" onClick={startChallenge} />\n_72\n      ) : (\n_72\n        <input type=\"button\" value=\"Verify Code\" onClick={verifyCode} />\n_72\n      )}\n_72\n    </>\n_72\n)\n_72\n}\n`\n\n- You can extract the available MFA factors for the user by calling\n`supabase.auth.mfa.listFactors()`. Don't worry this method is also very quick\nand rarely uses the network.\n- If `listFactors()` returns more than one factor (or of a different type) you\nshould present the user with a choice. For simplicity this is not shown in\nthe example.\n- Phone numbers are unique per user. Users can only have one verified phone factor with a given phone number.\nAttempting to enroll a new phone factor alongside an existing verified factor with the same number will result in an error.\n- Each time the user presses the \"Submit\" button a new challenge is created for\nthe chosen factor (in this case the first one)\n- On successful verification, the client library will refresh the session in\nthe background automatically and finally call the `onSuccess` callback, which\nwill show the authenticated `App` component on screen.\n\n### Security Configuration [\\#](\\#security-configuration)\n\nEach code is valid for up to 5 minutes, after which a new one can be sent. Successive codes remain valid until expiry. When possible choose the longest code length acceptable to your use case, at a minimum of 6. This can be configured in the [Authentication Settings](/dashboard/project/_/settings/auth).\n\nPlease be aware that Phone MFA is vulnerable to SIM swap attacks where an attacker will call a mobile provider and ask to port the target's phone number to a new SIM card and then use the said SIM card to intercept an MFA code. Please evaluate the your application's tolerance for such an attack. You can read more about SIM swapping attacks [here](https://en.wikipedia.org/wiki/SIM_swap_scam)",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Multi-Factor Authentication (Phone)</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<h2 id=\"how-does-phone-multi-factor-authentication-work\" class=\"group scroll-mt-24\">How does phone multi-factor-authentication work?<a href=\"#how-does-phone-multi-factor-authentication-work\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Phone multi-factor authentication involves a shared code generated by Supabase Auth and the end user. The code is delivered via a messaging channel, such as SMS or WhatsApp, and the user uses the code to authenticate to Supabase Auth.</p>\n<p>The phone messaging configuration for MFA is shared with <a href=\"/docs/guides/auth/phone-login\">phone auth login</a>. The same provider configuration that is used for phone login is used for MFA. You can also use the <a href=\"/docs/guides/auth/auth-hooks/send-sms-hook\">Send SMS Hook</a> if you need to use an MFA (Phone) messaging provider different from what is supported natively.</p>\n<p>Below is a flow chart illustrating how the Enrollment and Verify APIs work in the context of MFA (Phone).</p>\n<!-- -->\n<p>Phone MFA is part of the Auth Advanced MFA Add-on and costs an additional $75 per month for the first project in the organization and an additional $10 per month for additional projects.</p>\n<h3 id=\"add-enrollment-flow\" class=\"group scroll-mt-24\">Add enrollment flow<a href=\"#add-enrollment-flow\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>An enrollment flow provides a UI for users to set up additional authentication factors. Most applications add the enrollment flow in two places within their app:</p>\n<ol>\n<li>Right after login or sign up.\nThis allows users quickly set up Multi Factor Authentication (MFA) post login or account creation. Where possible, encourage all users to set up MFA. Many applications offer this as an opt-in step in an\neffort to reduce onboarding friction.</li>\n<li>From within a settings page.\nAllows users to set up, disable or modify their MFA settings.</li>\n</ol>\n<p>As far as possible, maintain a generic flow that you can reuse in both cases with minor modifications.</p>\n<p>Enrolling a factor for use with MFA takes three steps for phone MFA:</p>\n<ol>\n<li>Call <code>supabase.auth.mfa.enroll()</code>.</li>\n<li>Calling the <code>supabase.auth.mfa.challenge()</code> API. This sends a code via SMS or WhatsApp and prepares Supabase Auth to accept a verification code from the user.</li>\n<li>Calling the <code>supabase.auth.mfa.verify()</code> API. <code>supabase.auth.mfa.challenge()</code> returns a challenge ID.\nThis verifies that the code issued by Supabase Auth matches the code input by the user. If the verification succeeds, the factor\nimmediately becomes active for the user account. If not, you should repeat\nsteps 2 and 3.</li>\n</ol>\n<h4 id=\"example-react\" class=\"group scroll-mt-24\">Example: React<a href=\"#example-react\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h4>\n<p>Below is an example that creates a new <code>EnrollMFA</code> component that illustrates the important pieces of the MFA enrollment flow.</p>\n<ul>\n<li>When the component appears on screen, the <code>supabase.auth.mfa.enroll()</code> API is\ncalled once to start the process of enrolling a new factor for the current\nuser.</li>\n<li>A challenge is created using the <code>supabase.auth.mfa.challenge()</code> API and the\ncode from the user is submitted for verification using the\n<code>supabase.auth.mfa.verify()</code> challenge.</li>\n<li><code>onEnabled</code> is a callback that notifies the other components that enrollment\nhas completed.</li>\n<li><code>onCancelled</code> is a callback that notifies the other components that the user\nhas clicked the <code>Cancel</code> button.</li>\n</ul>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>export function EnrollMFA({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  onEnrolled,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  onCancelled,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>}: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  onEnrolled: () =&gt; void</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  onCancelled: () =&gt; void</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>}) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [phoneNumber, setPhoneNumber] = useState('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [factorId, setFactorId] = useState('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [verifyCode, setVerifyCode] = useState('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [error, setError] = useState('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [challengeId, setChallengeId] = useState('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  const onEnableClicked = () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>    setError('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>    ;(async () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      const verify = await auth.mfa.verify({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        factorId,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        challengeId,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        code: verifyCode,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      if (verify.error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        setError(verify.error.message)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        throw verify.error</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      onEnrolled()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>    })()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  const onEnrollClicked = async () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>    setError('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>    try {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      const factor = await auth.mfa.enroll({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        phone: phoneNumber,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        factorType: 'phone',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      if (factor.error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        setError(factor.error.message)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        throw factor.error</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      setFactorId(factor.data.id)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>    } catch (error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      setError('Failed to Enroll the Factor.')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  const onSendOTPClicked = async () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>    setError('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>    try {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      const challenge = await auth.mfa.challenge({ factorId })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      if (challenge.error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        setError(challenge.error.message)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        throw challenge.error</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      setChallengeId(challenge.data.id)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>    } catch (error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      setError('Failed to resend the code.')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  return (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      {error &amp;&amp; &lt;div className=\"error\"&gt;{error}&lt;/div&gt;}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;input</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        type=\"text\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        placeholder=\"Phone Number\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        value={phoneNumber}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        onChange={(e) =&gt; setPhoneNumber(e.target.value.trim())}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;input</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        type=\"text\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        placeholder=\"Verification Code\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        value={verifyCode}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>        onChange={(e) =&gt; setVerifyCode(e.target.value.trim())}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;input type=\"button\" value=\"Enroll\" onClick={onEnrollClicked} /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;input type=\"button\" value=\"Submit Code\" onClick={onEnableClicked} /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;input type=\"button\" value=\"Send OTP Code\" onClick={onSendOTPClicked} /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;input type=\"button\" value=\"Cancel\" onClick={onCancelled} /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;/&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>  )</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->84</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div>\n<h3 id=\"add-a-challenge-step-to-login\" class=\"group scroll-mt-24\">Add a challenge step to login<a href=\"#add-a-challenge-step-to-login\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Once a user has logged in via their first factor (email+password, magic link, one time password, social login etc.) you need to perform a check if any additional factors need to be verified.</p>\n<p>This can be done by using the <code>supabase.auth.mfa.getAuthenticatorAssuranceLevel()</code> API. When the user signs in and is redirected back to your app, you should call this method to extract the user's current and next authenticator assurance level (AAL).</p>\n<p>Therefore if you receive a <code>currentLevel</code> which is <code>aal1</code> but a <code>nextLevel</code> of <code>aal2</code>, the user should be given the option to go through MFA.</p>\n<p>Below is a table that explains the combined meaning.</p>\n<table><thead><tr><th align=\"right\">Current Level</th><th align=\"left\">Next Level</th><th align=\"left\">Meaning</th></tr></thead><tbody><tr><td align=\"right\"><code>aal1</code></td><td align=\"left\"><code>aal1</code></td><td align=\"left\">User does not have MFA enrolled.</td></tr><tr><td align=\"right\"><code>aal1</code></td><td align=\"left\"><code>aal2</code></td><td align=\"left\">User has an MFA factor enrolled but has not verified it.</td></tr><tr><td align=\"right\"><code>aal2</code></td><td align=\"left\"><code>aal2</code></td><td align=\"left\">User has verified their MFA factor.</td></tr><tr><td align=\"right\"><code>aal2</code></td><td align=\"left\"><code>aal1</code></td><td align=\"left\">User has disabled their MFA factor. (Stale JWT.)</td></tr></tbody></table>\n<h4 id=\"example-react\" class=\"group scroll-mt-24\">Example: React<a href=\"#example-react\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h4>\n<p>Adding the challenge step to login depends heavily on the architecture of your app. However, a fairly common way to structure React apps is to have a large component (often named <code>App</code>) which contains most of the authenticated application logic.</p>\n<p>This example will wrap this component with logic that will show an MFA challenge screen if necessary, before showing the full application. This is illustrated in the <code>AppWithMFA</code> example below.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>function AppWithMFA() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [readyToShow, setReadyToShow] = useState(false)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [showMFAScreen, setShowMFAScreen] = useState(false)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>  useEffect(() =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>    ;(async () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>      try {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>        const { data, error } = await supabase.auth.mfa.getAuthenticatorAssuranceLevel()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>        if (error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>          throw error</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>        }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>        console.log(data)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>        if (data.nextLevel === 'aal2' &amp;&amp; data.nextLevel !== data.currentLevel) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>          setShowMFAScreen(true)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>        }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>      } finally {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>        setReadyToShow(true)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>    })()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>  }, [])</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>  if (readyToShow) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>    if (showMFAScreen) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>      return &lt;AuthMFA /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>    return &lt;App /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>  return &lt;&gt;&lt;/&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->33</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div>\n<ul>\n<li><code>supabase.auth.mfa.getAuthenticatorAssuranceLevel()</code> does return a promise.\nDon't worry, this is a very fast method (microseconds) as it rarely uses the\nnetwork.</li>\n<li><code>readyToShow</code> only makes sure the AAL check completes before showing any\napplication UI to the user.</li>\n<li>If the current level can be upgraded to the next one, the MFA screen is\nshown.</li>\n<li>Once the challenge is successful, the <code>App</code> component is finally rendered on\nscreen.</li>\n</ul>\n<p>Below is the component that implements the challenge and verify logic.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>function AuthMFA() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [verifyCode, setVerifyCode] = useState('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [error, setError] = useState('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [factorId, setFactorId] = useState('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [challengeId, setChallengeId] = useState('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>  const [phoneNumber, setPhoneNumber] = useState('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>  const startChallenge = async () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>    setError('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>    try {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      const factors = await supabase.auth.mfa.listFactors()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      if (factors.error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>        throw factors.error</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      const phoneFactor = factors.data.phone[0]</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      if (!phoneFactor) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>        throw new Error('No phone factors found!')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      const factorId = phoneFactor.id</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      setFactorId(factorId)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      setPhoneNumber(phoneFactor.phone)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      const challenge = await supabase.auth.mfa.challenge({ factorId })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      if (challenge.error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>        setError(challenge.error.message)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>        throw challenge.error</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      setChallengeId(challenge.data.id)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>    } catch (error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      setError(error.message)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>  const verifyCode = async () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>    setError('')</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>    try {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      const verify = await supabase.auth.mfa.verify({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>        factorId,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>        challengeId,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>        code: verifyCode,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      })</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      if (verify.error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>        setError(verify.error.message)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>        throw verify.error</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>    } catch (error) {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      setError(error.message)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>    }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>  return (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;div&gt;Please enter the code sent to your phone.&lt;/div&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      {phoneNumber &amp;&amp; &lt;div&gt;Phone number: {phoneNumber}&lt;/div&gt;}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      {error &amp;&amp; &lt;div className=\"error\"&gt;{error}&lt;/div&gt;}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;input</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>        type=\"text\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>        value={verifyCode}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>        onChange={(e) =&gt; setVerifyCode(e.target.value.trim())}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      {!challengeId ? (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>        &lt;input type=\"button\" value=\"Start Challenge\" onClick={startChallenge} /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      ) : (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>        &lt;input type=\"button\" value=\"Verify Code\" onClick={verifyCode} /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>      )}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;/&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>  )</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->72</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div>\n<ul>\n<li>You can extract the available MFA factors for the user by calling\n<code>supabase.auth.mfa.listFactors()</code>. Don't worry this method is also very quick\nand rarely uses the network.</li>\n<li>If <code>listFactors()</code> returns more than one factor (or of a different type) you\nshould present the user with a choice. For simplicity this is not shown in\nthe example.</li>\n<li>Phone numbers are unique per user. Users can only have one verified phone factor with a given phone number.\nAttempting to enroll a new phone factor alongside an existing verified factor with the same number will result in an error.</li>\n<li>Each time the user presses the \"Submit\" button a new challenge is created for\nthe chosen factor (in this case the first one)</li>\n<li>On successful verification, the client library will refresh the session in\nthe background automatically and finally call the <code>onSuccess</code> callback, which\nwill show the authenticated <code>App</code> component on screen.</li>\n</ul>\n<h3 id=\"security-configuration\" class=\"group scroll-mt-24\">Security Configuration<a href=\"#security-configuration\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Each code is valid for up to 5 minutes, after which a new one can be sent. Successive codes remain valid until expiry. When possible choose the longest code length acceptable to your use case, at a minimum of 6. This can be configured in the <a href=\"/dashboard/project/_/settings/auth\">Authentication Settings</a>.</p>\n<p>Please be aware that Phone MFA is vulnerable to SIM swap attacks where an attacker will call a mobile provider and ask to port the target's phone number to a new SIM card and then use the said SIM card to intercept an MFA code. Please evaluate the your application's tolerance for such an attack. You can read more about SIM swapping attacks <a href=\"https://en.wikipedia.org/wiki/SIM_swap_scam\">here</a></p></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-mfa/phone",
        "title": "Multi-Factor Authentication (Phone) | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Multi-Factor%20Authentication%20(Phone)&description=Add%20an%20additional%20layer%20of%20security%20with%20phone%20(SMS%20or%20WhatsApp)%20multi-factor-authentication.",
        "ogTitle": "Multi-Factor Authentication (Phone) | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-mfa/phone",
        "description": "Add an additional layer of security with phone (SMS or WhatsApp) multi-factor-authentication.",
        "modifiedTime": "2024-09-10T20:36:24.980Z",
        "ogDescription": "Add an additional layer of security with phone (SMS or WhatsApp) multi-factor-authentication.",
        "publishedTime": "2024-09-10T20:36:24.980Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Phone Login\n\n* * *\n\nPhone Login is a method of authentication that allows users to log in to a website or application without using a password. The user authenticates through a one-time code sent via SMS.\n\nUsers can also log in with their phones using Native Mobile Login with the built-in identity provider. For Native Mobile Login with Android and iOS, see the [Social Login guides](/docs/guides/auth/social-login).\n\nPhone OTP login can:\n\n- Improve the user experience by not requiring users to create and remember a password\n- Increase security by reducing the risk of password-related security breaches\n- Reduce support burden of dealing with password resets and other password-related flows\n\nTo keep SMS sending costs under control, make sure you adjust your project's rate limits and [configure CAPTCHA](/docs/guides/auth/auth-captcha). See the [Production Checklist](/docs/guides/platform/going-into-prod) to learn more.\n\nSome countries have special regulations for services that send SMS messages to users, for example, India's TRAI DLT regulations. Remember to look up and follow the regulations of countries where you operate.\n\n## Enabling Phone Login [\\#](\\#enabling-phone-login)\n\nEnable phone authentication on the [Auth Providers page](/dashboard/project/_/auth/providers) for hosted Supabase projects.\n\nFor self-hosted projects or local development, use the [configuration file](/docs/guides/cli/config#auth.sms.enable_signup). See the configuration variables namespaced under `auth.sms`.\n\nYou also need to set up an SMS provider. Each provider has its own configuration. Supported providers include MessageBird, Twilio, Vonage, and TextLocal (community-supported).\n\n### Configuring SMS Providers\n\n![MessageBird Icon](https://supabase.com/docs/img/icons/messagebird-icon.svg)\n\n##### MessageBird\n\n![Twilio Icon](https://supabase.com/docs/img/icons/twilio-icon.svg)\n\n##### Twilio\n\n![Vonage Icon](https://supabase.com/docs/img/icons/vonage-icon-light.svg)\n\n##### Vonage\n\n![Textlocal (Community Supported) Icon](https://supabase.com/docs/guides/auth/Community%20Supported)\n\n##### Textlocal (Community Supported)\n\nBy default, a user can only request an OTP once every 60 seconds and they expire after 1 hour.\n\n## Signing in with phone OTP [\\#](\\#signing-in-with-phone-otp)\n\nWith OTP, a user can sign in without setting a password on their account. They need to verify their phone number each time they sign in.\n\nJavaScriptSwiftKotlinPythonHTTP\n\n`\n_10\nconst { data, error } = await supabase.auth.signInWithOtp({\n_10\nphone: '+13334445555',\n_10\n})\n`\n\nThe user receives an SMS with a 6-digit pin that you must verify within 60 seconds.\n\n## Verifying a phone OTP [\\#](\\#verifying-a-phone-otp)\n\nTo verify the one-time password (OTP) sent to the user's phone number, call [`verifyOtp()`](/docs/reference/javascript/auth-verifyotp) with the phone number and OTP:\n\nJavaScriptSwiftKotlinPythonHTTP\n\nYou should present a form to the user so they can input the 6 digit pin, then send it along with the phone number to `verifyOtp`:\n\n`\n_10\nconst {\n_10\ndata: { session },\n_10\nerror,\n_10\n} = await supabase.auth.verifyOtp({\n_10\nphone: '13334445555',\n_10\ntoken: '123456',\n_10\ntype: 'sms',\n_10\n})\n`\n\nIf successful the user will now be logged in and you should receive a valid session like:\n\n`\n_10\n{\n_10\n\"access_token\": \"<ACCESS_TOKEN>\",\n_10\n\"token_type\": \"bearer\",\n_10\n\"expires_in\": 3600,\n_10\n\"refresh_token\": \"<REFRESH_TOKEN>\"\n_10\n}\n`\n\nThe access token can be sent in the Authorization header as a Bearer token for any CRUD operations on supabase-js. See our guide on [Row Level Security](/docs/guides/auth#row-level-security) for more info on restricting access on a user basis.\n\n## Updating a phone number [\\#](\\#updating-a-phone-number)\n\nTo update a user's phone number, the user must be logged in. Call [`updateUser()`](/docs/reference/javascript/auth-updateuser) with their phone number:\n\nJavaScriptSwiftPython\n\n`\n_10\nconst { data, error } = await supabase.auth.updateUser({\n_10\nphone: '123456789',\n_10\n})\n`\n\nThe user receives an SMS with a 6-digit pin that you must [verify](#verifying-a-phone-otp) within 60 seconds.\nUse the `phone_change` type when calling `verifyOTP` to update a user\u2019s phone number.",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Phone Login</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>Phone Login is a method of authentication that allows users to log in to a website or application without using a password. The user authenticates through a one-time code sent via SMS.</p>\n<p>Users can also log in with their phones using Native Mobile Login with the built-in identity provider. For Native Mobile Login with Android and iOS, see the <a href=\"/docs/guides/auth/social-login\">Social Login guides</a>.</p>\n<p>Phone OTP login can:</p>\n<ul>\n<li>Improve the user experience by not requiring users to create and remember a password</li>\n<li>Increase security by reducing the risk of password-related security breaches</li>\n<li>Reduce support burden of dealing with password resets and other password-related flows</li>\n</ul>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>To keep SMS sending costs under control, make sure you adjust your project's rate limits and <a href=\"/docs/guides/auth/auth-captcha\">configure CAPTCHA</a>. See the<!-- --> <a href=\"/docs/guides/platform/going-into-prod\">Production Checklist</a> to learn more.</p><p>Some countries have special regulations for services that send SMS messages to users, for example, India's TRAI DLT regulations. Remember to look up and follow the regulations of countries where you operate.</p></div></div>\n<h2 id=\"enabling-phone-login\" class=\"group scroll-mt-24\">Enabling Phone Login<a href=\"#enabling-phone-login\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Enable phone authentication on the <a href=\"/dashboard/project/_/auth/providers\">Auth Providers page</a> for hosted Supabase projects.</p>\n<p>For self-hosted projects or local development, use the <a href=\"/docs/guides/cli/config#auth.sms.enable_signup\">configuration file</a>. See the configuration variables namespaced under <code>auth.sms</code>.</p>\n<p>You also need to set up an SMS provider. Each provider has its own configuration. Supported providers include MessageBird, Twilio, Vonage, and TextLocal (community-supported).</p>\n<!--$--><section aria-labelledby=\"sms-provider-configuration\"><h3 class=\"sr-only\" id=\"sms-provider-configuration\">Configuring SMS Providers</h3><div class=\"grid grid-cols-6 gap-10 not-prose py-8\"><button class=\"col-span-6 xl:col-span-3\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/messagebird-icon.svg\" alt=\"MessageBird Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">MessageBird</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></button><button class=\"col-span-6 xl:col-span-3\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/twilio-icon.svg\" alt=\"Twilio Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Twilio</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></button><button class=\"col-span-6 xl:col-span-3\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/vonage-icon-light.svg\" alt=\"Vonage Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Vonage</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></button><button class=\"col-span-6 xl:col-span-3\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/textlocal-icon.svg\" alt=\"Textlocal (Community Supported) Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Textlocal (Community Supported)</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></button></div></section><!--/$-->\n<p>By default, a user can only request an OTP once every <!-- -->60 seconds<!-- --> and they expire after <!-- -->1 hour<!-- -->.</p>\n<h2 id=\"signing-in-with-phone-otp\" class=\"group scroll-mt-24\">Signing in with phone OTP<a href=\"#signing-in-with-phone-otp\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>With OTP, a user can sign in without setting a password on their account. They need to verify their phone number each time they sign in.</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rbm9jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Rbm9jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbm9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Rbm9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbm9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:Rbm9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbm9jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:Rbm9jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbm9jtsn7qb6ra:-content-http\" data-state=\"inactive\" id=\"radix-:Rbm9jtsn7qb6ra:-trigger-http\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>HTTP</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbm9jtsn7qb6ra:-trigger-js\" id=\"radix-:Rbm9jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const { data, error } = await supabase.auth.signInWithOtp({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  phone: '+13334445555',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbm9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Rbm9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbm9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:Rbm9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbm9jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:Rbm9jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbm9jtsn7qb6ra:-trigger-http\" hidden=\"\" id=\"radix-:Rbm9jtsn7qb6ra:-content-http\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p>The user receives an SMS with a 6-digit pin that you must verify within 60 seconds.</p>\n<h2 id=\"verifying-a-phone-otp\" class=\"group scroll-mt-24\">Verifying a phone OTP<a href=\"#verifying-a-phone-otp\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>To verify the one-time password (OTP) sent to the user's phone number, call <a href=\"/docs/reference/javascript/auth-verifyotp\"><code>verifyOtp()</code></a> with the phone number and OTP:</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rcm9jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Rcm9jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rcm9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Rcm9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rcm9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:Rcm9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rcm9jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:Rcm9jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rcm9jtsn7qb6ra:-content-http\" data-state=\"inactive\" id=\"radix-:Rcm9jtsn7qb6ra:-trigger-http\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>HTTP</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rcm9jtsn7qb6ra:-trigger-js\" id=\"radix-:Rcm9jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>You should present a form to the user so they can input the 6 digit pin, then send it along with the phone number to <code>verifyOtp</code>:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  data: { session },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  error,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>} = await supabase.auth.verifyOtp({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  phone: '13334445555',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  token: '123456',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  type: 'sms',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rcm9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Rcm9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rcm9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:Rcm9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rcm9jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:Rcm9jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rcm9jtsn7qb6ra:-trigger-http\" hidden=\"\" id=\"radix-:Rcm9jtsn7qb6ra:-content-http\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p>If successful the user will now be logged in and you should receive a valid session like:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"access_token\": \"&lt;ACCESS_TOKEN&gt;\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"token_type\": \"bearer\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"expires_in\": 3600,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"refresh_token\": \"&lt;REFRESH_TOKEN&gt;\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div>\n<p>The access token can be sent in the Authorization header as a Bearer token for any CRUD operations on supabase-js. See our guide on <a href=\"/docs/guides/auth#row-level-security\">Row Level Security</a> for more info on restricting access on a user basis.</p>\n<h2 id=\"updating-a-phone-number\" class=\"group scroll-mt-24\">Updating a phone number<a href=\"#updating-a-phone-number\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>To update a user's phone number, the user must be logged in. Call <a href=\"/docs/reference/javascript/auth-updateuser\"><code>updateUser()</code></a> with their phone number:</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Re69jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Re69jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Re69jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Re69jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Re69jtsn7qb6ra:-content-python\" data-state=\"inactive\" id=\"radix-:Re69jtsn7qb6ra:-trigger-python\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Python</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Re69jtsn7qb6ra:-trigger-js\" id=\"radix-:Re69jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const { data, error } = await supabase.auth.updateUser({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  phone: '123456789',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Re69jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Re69jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Re69jtsn7qb6ra:-trigger-python\" hidden=\"\" id=\"radix-:Re69jtsn7qb6ra:-content-python\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p>The user receives an SMS with a 6-digit pin that you must <a href=\"#verifying-a-phone-otp\">verify</a> within 60 seconds.\nUse the <code>phone_change</code> type when calling <code>verifyOTP</code> to update a user\u2019s phone number.</p></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/phone-login",
        "title": "Phone Login | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Phone%20Login&description=Learn%20about%20logging%20in%20to%20your%20platform%20using%20SMS%20one-time%20passwords.",
        "ogTitle": "Phone Login | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/phone-login",
        "description": "Learn about logging in to your platform using SMS one-time passwords.",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "ogDescription": "Learn about logging in to your platform using SMS one-time passwords.",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Flutter Auth UI\n\n* * *\n\nFlutter Auth UI is a Flutter package containing pre-built widgets for authenticating users.\nIt is unstyled and can match your brand and aesthetic.\n\n![Flutter Auth UI](https://raw.githubusercontent.com/supabase-community/flutter-auth-ui/main/screenshots/supabase_auth_ui.png)\n\n## Add Flutter Auth UI [\\#](\\#add-flutter-auth-ui)\n\nAdd the latest version of the package [supabase-auth-ui](https://pub.dev/packages/supabase_auth_ui) to pubspec.yaml:\n\n`\n1\nflutter pub add supabase_auth_ui\n`\n\n### Initialize the Flutter Auth package [\\#](\\#initialize-the-flutter-auth-package)\n\n`\n1\nimport 'package:flutter/material.dart';\n2\nimport 'package:supabase_auth_ui/supabase_auth_ui.dart';\n3\n4\nvoid main() async {\n5\nawait Supabase.initialize(\n6\n    url: dotenv.get('SUPABASE_URL'),\n7\n    anonKey: dotenv.get('SUPABASE_ANON_KEY'),\n8\n);\n9\n10\nrunApp(const MyApp());\n11\n}\n`\n\n### Email Auth [\\#](\\#email-auth)\n\nUse a SupaEmailAuth widget to create an email and password signin and signup form. It also contains a button to toggle to display a forgot password form.\n\nYou can pass metadataFields to add additional fields to the form to pass as metadata to Supabase.\n\n`\n1\nSupaEmailAuth(\n2\nredirectTo: kIsWeb ? null : 'io.mydomain.myapp://callback',\n3\nonSignInComplete: (response) {},\n4\nonSignUpComplete: (response) {},\n5\nmetadataFields: [\\\n6\\\n    MetaDataField(\\\n7\\\n    prefixIcon: const Icon(Icons.person),\\\n8\\\n    label: 'Username',\\\n9\\\n    key: 'username',\\\n10\\\n    validator: (val) {\\\n11\\\n            if (val == null || val.isEmpty) {\\\n12\\\n            return 'Please enter something';\\\n13\\\n            }\\\n14\\\n            return null;\\\n15\\\n          },\\\n16\\\n        ),\\\n17\\\n    ],\n18\n)\n`\n\n### Magic link Auth [\\#](\\#magic-link-auth)\n\nUse SupaMagicAuth widget to create a magic link signIn form.\n\n`\n1\nSupaMagicAuth(\n2\nredirectUrl: kIsWeb ? null : 'io.mydomain.myapp://callback',\n3\nonSuccess: (Session response) {},\n4\nonError: (error) {},\n5\n)\n`\n\n### Reset password [\\#](\\#reset-password)\n\nUse SupaResetPassword to create a password reset form.\n\n`\n1\nSupaResetPassword(\n2\naccessToken: supabase.auth.currentSession?.accessToken,\n3\nonSuccess: (UserResponse response) {},\n4\nonError: (error) {},\n5\n)\n`\n\n### Phone Auth [\\#](\\#phone-auth)\n\nUse SupaPhoneAuth to create a phone authentication form.\n\n`\n1\nSupaPhoneAuth(\n2\nauthAction: SupaAuthAction.signUp,\n3\nonSuccess: (AuthResponse response) {},\n4\n),\n`\n\n### Social Auth [\\#](\\#social-auth)\n\nThe package supports login with [official social providers](../../auth#providers).\n\nUse SupaSocialsAuth to create list of social login buttons.\n\n`\n1\nSupaSocialsAuth(\n2\nsocialProviders: [\\\n3\\\n    OAuthProvider.apple,\\\n4\\\n    OAuthProvider.google,\\\n5\\\n],\n6\ncolored: true,\n7\nredirectUrl: kIsWeb\n8\n    ? null\n9\n    : 'io.mydomain.myapp://callback',\n10\nonSuccess: (Session response) {},\n11\nonError: (error) {},\n12\n)\n`\n\n### Theming [\\#](\\#theming)\n\nThis package uses plain Flutter components allowing you to control the appearance of the components using your own theme.\n\n### Is this helpful?\n\nYesNo\n\nThanks for your feedback!\n\nOn this page\n\n- [Add Flutter Auth UI](#add-flutter-auth-ui)\n- [Initialize the Flutter Auth package](#initialize-the-flutter-auth-package)\n- [Email Auth](#email-auth)\n- [Magic link Auth](#magic-link-auth)\n- [Reset password](#reset-password)\n- [Phone Auth](#phone-auth)\n- [Social Auth](#social-auth)\n- [Theming](#theming)\n\n1. We only collect analytics essential to ensuring smooth operation of our services. [Learn more](https://supabase.com/privacy)\n\n\n\n\n\n   AcceptOpt out[Learn more](https://supabase.com/privacy)",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Flutter Auth UI</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>Flutter Auth UI is a Flutter package containing pre-built widgets for authenticating users.\nIt is unstyled and can match your brand and aesthetic.</p>\n<p><img src=\"https://raw.githubusercontent.com/supabase-community/flutter-auth-ui/main/screenshots/supabase_auth_ui.png\" alt=\"Flutter Auth UI\"></p>\n<h2 id=\"add-flutter-auth-ui\" class=\"group scroll-mt-24\">Add Flutter Auth UI<a href=\"#add-flutter-auth-ui\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Add the latest version of the package <a href=\"https://pub.dev/packages/supabase_auth_ui\">supabase-auth-ui</a> to pubspec.yaml:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"bash\" style=\"width: 926px; height: 59px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 57px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 19px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 224px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-3);\">flutter </span><span style=\"color: var(--ch-8);\">pub add supabase_auth_ui</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<h3 id=\"initialize-the-flutter-auth-package\" class=\"group scroll-mt-24\">Initialize the Flutter Auth package<a href=\"#initialize-the-flutter-auth-package\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"dart\" style=\"width: 926px; height: 249px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 247px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 209px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 392px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">import </span><span style=\"color: var(--ch-8);\">'package:flutter/material.dart'</span><span style=\"color: var(--ch-4);\">;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 392px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">import </span><span style=\"color: var(--ch-8);\">'package:supabase_auth_ui/supabase_auth_ui.dart'</span><span style=\"color: var(--ch-4);\">;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 392px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\"></span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 392px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">void </span><span style=\"color: var(--ch-5);\">main</span><span style=\"color: var(--ch-4);\">() </span><span style=\"color: var(--ch-7);\">async</span><span style=\"color: var(--ch-4);\"> {</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 76px); width: 31.5px; opacity: 0.99;\">5</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 76px); width: 392px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">  await </span><span style=\"color: var(--ch-2);\">Supabase</span><span style=\"color: var(--ch-4);\">.</span><span style=\"color: var(--ch-5);\">initialize</span><span style=\"color: var(--ch-4);\">(</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 95px); width: 31.5px; opacity: 0.99;\">6</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 95px); width: 392px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">    url</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> dotenv.</span><span style=\"color: var(--ch-5);\">get</span><span style=\"color: var(--ch-4);\">(</span><span style=\"color: var(--ch-8);\">'SUPABASE_URL'</span><span style=\"color: var(--ch-4);\">),</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 114px); width: 31.5px; opacity: 0.99;\">7</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 114px); width: 392px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">    anonKey</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> dotenv.</span><span style=\"color: var(--ch-5);\">get</span><span style=\"color: var(--ch-4);\">(</span><span style=\"color: var(--ch-8);\">'SUPABASE_ANON_KEY'</span><span style=\"color: var(--ch-4);\">),</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 133px); width: 31.5px; opacity: 0.99;\">8</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 133px); width: 392px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  );</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 152px); width: 31.5px; opacity: 0.99;\">9</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 152px); width: 392px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\"></span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 171px); width: 31.5px; opacity: 0.99;\">10</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 171px); width: 392px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-5);\">  runApp</span><span style=\"color: var(--ch-4);\">(</span><span style=\"color: var(--ch-7);\">const </span><span style=\"color: var(--ch-2);\">MyApp</span><span style=\"color: var(--ch-4);\">());</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 190px); width: 31.5px; opacity: 0.99;\">11</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 190px); width: 392px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">}</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<h3 id=\"email-auth\" class=\"group scroll-mt-24\">Email Auth<a href=\"#email-auth\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Use a SupaEmailAuth widget to create an email and password signin and signup form. It also contains a button to toggle to display a forgot password form.</p>\n<p>You can pass metadataFields to add additional fields to the form to pass as metadata to Supabase.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"dart\" style=\"width: 926px; height: 382px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 380px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 342px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-2);\">SupaEmailAuth</span><span style=\"color: var(--ch-4);\">(</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  redirectTo</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> kIsWeb </span><span style=\"color: var(--ch-7);\">? </span><span style=\"color: var(--ch-2);\">null </span><span style=\"color: var(--ch-7);\">: </span><span style=\"color: var(--ch-8);\">'io.mydomain.myapp://callback'</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  onSignInComplete</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> (response) {},</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  onSignUpComplete</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> (response) {},</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 76px); width: 31.5px; opacity: 0.99;\">5</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 76px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  metadataFields</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> [</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 95px); width: 31.5px; opacity: 0.99;\">6</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 95px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-2);\">    MetaDataField</span><span style=\"color: var(--ch-4);\">(</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 114px); width: 31.5px; opacity: 0.99;\">7</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 114px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">    prefixIcon</span><span style=\"color: var(--ch-7);\">: const </span><span style=\"color: var(--ch-2);\">Icon</span><span style=\"color: var(--ch-4);\">(</span><span style=\"color: var(--ch-2);\">Icons</span><span style=\"color: var(--ch-4);\">.person),</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 133px); width: 31.5px; opacity: 0.99;\">8</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 133px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">    label</span><span style=\"color: var(--ch-7);\">: </span><span style=\"color: var(--ch-8);\">'Username'</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 152px); width: 31.5px; opacity: 0.99;\">9</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 152px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">    key</span><span style=\"color: var(--ch-7);\">: </span><span style=\"color: var(--ch-8);\">'username'</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 171px); width: 31.5px; opacity: 0.99;\">10</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 171px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">    validator</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> (val) {</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 190px); width: 31.5px; opacity: 0.99;\">11</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 190px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">            if</span><span style=\"color: var(--ch-4);\"> (val </span><span style=\"color: var(--ch-7);\">== </span><span style=\"color: var(--ch-2);\">null </span><span style=\"color: var(--ch-7);\">||</span><span style=\"color: var(--ch-4);\"> val.isEmpty) {</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 209px); width: 31.5px; opacity: 0.99;\">12</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 209px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">            return </span><span style=\"color: var(--ch-8);\">'Please enter something'</span><span style=\"color: var(--ch-4);\">;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 228px); width: 31.5px; opacity: 0.99;\">13</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 228px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">            }</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 247px); width: 31.5px; opacity: 0.99;\">14</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 247px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">            return </span><span style=\"color: var(--ch-2);\">null</span><span style=\"color: var(--ch-4);\">;</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 266px); width: 31.5px; opacity: 0.99;\">15</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 266px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">          },</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 285px); width: 31.5px; opacity: 0.99;\">16</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 285px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">        ),</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 304px); width: 31.5px; opacity: 0.99;\">17</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 304px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">    ],</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 323px); width: 31.5px; opacity: 0.99;\">18</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 323px); width: 427px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">)</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<h3 id=\"magic-link-auth\" class=\"group scroll-mt-24\">Magic link Auth<a href=\"#magic-link-auth\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Use SupaMagicAuth widget to create a magic link signIn form.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"dart\" style=\"width: 926px; height: 135px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 133px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 95px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 434px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-2);\">SupaMagicAuth</span><span style=\"color: var(--ch-4);\">(</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 434px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  redirectUrl</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> kIsWeb </span><span style=\"color: var(--ch-7);\">? </span><span style=\"color: var(--ch-2);\">null </span><span style=\"color: var(--ch-7);\">: </span><span style=\"color: var(--ch-8);\">'io.mydomain.myapp://callback'</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 434px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  onSuccess</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> (</span><span style=\"color: var(--ch-2);\">Session</span><span style=\"color: var(--ch-4);\"> response) {},</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 434px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  onError</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> (error) {},</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 76px); width: 31.5px; opacity: 0.99;\">5</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 76px); width: 434px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">)</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<h3 id=\"reset-password\" class=\"group scroll-mt-24\">Reset password<a href=\"#reset-password\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Use SupaResetPassword to create a password reset form.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"dart\" style=\"width: 926px; height: 135px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 133px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 95px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 399px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-2);\">SupaResetPassword</span><span style=\"color: var(--ch-4);\">(</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 399px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  accessToken</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> supabase.auth.currentSession</span><span style=\"color: var(--ch-7);\">?</span><span style=\"color: var(--ch-4);\">.accessToken,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 399px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  onSuccess</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> (</span><span style=\"color: var(--ch-2);\">UserResponse</span><span style=\"color: var(--ch-4);\"> response) {},</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 399px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  onError</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> (error) {},</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 76px); width: 31.5px; opacity: 0.99;\">5</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 76px); width: 399px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">)</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<h3 id=\"phone-auth\" class=\"group scroll-mt-24\">Phone Auth<a href=\"#phone-auth\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Use SupaPhoneAuth to create a phone authentication form.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"dart\" style=\"width: 926px; height: 116px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 114px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 76px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 280px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-2);\">SupaPhoneAuth</span><span style=\"color: var(--ch-4);\">(</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 280px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  authAction</span><span style=\"color: var(--ch-7);\">: </span><span style=\"color: var(--ch-2);\">SupaAuthAction</span><span style=\"color: var(--ch-4);\">.signUp,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 280px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  onSuccess</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> (</span><span style=\"color: var(--ch-2);\">AuthResponse</span><span style=\"color: var(--ch-4);\"> response) {},</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 280px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">),</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<h3 id=\"social-auth\" class=\"group scroll-mt-24\">Social Auth<a href=\"#social-auth\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>The package supports login with <a href=\"../../auth#providers\">official social providers</a>.</p>\n<p>Use SupaSocialsAuth to create list of social login buttons.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"true\"><code class=\"ch-code-scroll-parent\" data-ch-lang=\"dart\" style=\"width: 926px; height: 268px; position: relative; overflow: auto;\"><div class=\"ch-code-scroll-content\" style=\"position: absolute; top: 0px; left: 0px; transform-origin: left top; width: 924px; height: 266px; overflow: hidden;\"><div style=\"position: absolute; top: 0px; left: 0px; transform: translateX(0px) translateY(19px) scale(1); transform-origin: left top; width: 924px; height: 228px;\"><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 0px); width: 31.5px; opacity: 0.99;\">1</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 0px); width: 259px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-2);\">SupaSocialsAuth</span><span style=\"color: var(--ch-4);\">(</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 19px); width: 31.5px; opacity: 0.99;\">2</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 19px); width: 259px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  socialProviders</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> [</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 38px); width: 31.5px; opacity: 0.99;\">3</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 38px); width: 259px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-2);\">    OAuthProvider</span><span style=\"color: var(--ch-4);\">.apple,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 57px); width: 31.5px; opacity: 0.99;\">4</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 57px); width: 259px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-2);\">    OAuthProvider</span><span style=\"color: var(--ch-4);\">.google,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 76px); width: 31.5px; opacity: 0.99;\">5</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 76px); width: 259px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  ],</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 95px); width: 31.5px; opacity: 0.99;\">6</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 95px); width: 259px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  colored</span><span style=\"color: var(--ch-7);\">: </span><span style=\"color: var(--ch-2);\">true</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 114px); width: 31.5px; opacity: 0.99;\">7</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 114px); width: 259px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  redirectUrl</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> kIsWeb</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 133px); width: 31.5px; opacity: 0.99;\">8</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 133px); width: 259px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">    ? </span><span style=\"color: var(--ch-2);\">null</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 152px); width: 31.5px; opacity: 0.99;\">9</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 152px); width: 259px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-7);\">    : </span><span style=\"color: var(--ch-8);\">'io.mydomain.myapp://callback'</span><span style=\"color: var(--ch-4);\">,</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 171px); width: 31.5px; opacity: 0.99;\">10</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 171px); width: 259px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  onSuccess</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> (</span><span style=\"color: var(--ch-2);\">Session</span><span style=\"color: var(--ch-4);\"> response) {},</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 190px); width: 31.5px; opacity: 0.99;\">11</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 190px); width: 259px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">  onError</span><span style=\"color: var(--ch-7);\">:</span><span style=\"color: var(--ch-4);\"> (error) {},</span></span><br></div></div><span class=\"ch-code-line-number\" style=\"position: absolute; top: 0px; left: 0px; transform: translate(0px, 209px); width: 31.5px; opacity: 0.99;\">12</span><div style=\"position: absolute; top: 0px; left: 0px; transform: translate(31.5px, 209px); width: 259px;\"><div style=\"display: inline-block; width: 100%;\"><span style=\"opacity: 0.99;\"><span style=\"color: var(--ch-4);\">)</span></span><br></div></div></div></div></code><button type=\"button\" title=\"Copy code\" class=\"ch-code-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div></div>\n<h3 id=\"theming\" class=\"group scroll-mt-24\">Theming<a href=\"#theming\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>This package uses plain Flutter components allowing you to control the appearance of the components using your own theme.</p></article></div><div class=\"border-l thin-scrollbar overflow-y-auto px-2 hidden md:block col-span-3 self-start sticky top-[calc(var(--header-height)+1px+2rem)] max-h-[calc(100vh-var(--header-height)-3rem)]\"><section class=\"@container px-5 mb-6\" aria-labelledby=\"feedback-title\"><h3 id=\"feedback-title\" class=\"block font-mono text-xs uppercase text-foreground mb-4\">Is this helpful?</h3><div class=\"relative flex flex-col gap-y-4 mb-2 @[12rem]:flex-row @[12rem]:items-center\"><div class=\"relative flex gap-[var(--container-flex-gap)] items-center\" style=\"--container-flex-gap: 0.5rem;\"><button data-size=\"tiny\" type=\"button\" class=\"relative justify-center cursor-pointer inline-flex items-center space-x-2 text-center font-regular ease-out duration-200 outline-none transition-all outline-0 focus-visible:outline-4 focus-visible:outline-offset-1 border text-foreground bg-transparent border-strong focus-visible:outline-border-strong data-[state=open]:border-stronger data-[state=open]:outline-border-strong text-xs py-1 h-[26px] rounded-full px-1 hover:text-brand-600 hover:border-brand-500 [transition-property:opacity,transform,color] [transition-duration:150ms,300ms,300ms] motion-reduce:[transition-duration:150ms,1ms,300ms]\"> <span class=\"truncate\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"3\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-check\"><path d=\"M20 6 9 17l-5-5\"></path></svg><span class=\"sr-only\">Yes</span></span> </button><button data-size=\"tiny\" type=\"button\" class=\"relative justify-center cursor-pointer inline-flex items-center space-x-2 text-center font-regular ease-out duration-200 outline-none transition-all outline-0 focus-visible:outline-4 focus-visible:outline-offset-1 border text-foreground bg-transparent border-strong focus-visible:outline-border-strong data-[state=open]:border-stronger data-[state=open]:outline-border-strong text-xs py-1 h-[26px] rounded-full px-1 hover:text-warning-600 hover:border-warning-500 [transition-property:opacity,transform,color] [transition-duration:150ms,300ms,300ms] motion-reduce:[transition-duration:150ms,1ms,300ms]\"> <span class=\"truncate\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"3\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-x\"><path d=\"M18 6 6 18\"></path><path d=\"m6 6 12 12\"></path></svg><span class=\"sr-only\">No</span></span> </button></div><div class=\"flex flex-col gap-1 text-xs opacity-0 invisible text-left -translate-x-[0.25rem] @[12rem]:-translate-x-[1.25rem] [transition-property:opacity,transform] [transition-duration:150ms,300ms] motion-reduce:[transition-duration:150ms,1ms] delay-300\"><span class=\"text-foreground-light\">Thanks for your feedback!</span></div></div></section><span class=\"block font-mono text-xs uppercase text-foreground px-5 mb-6\">On this page</span><ul class=\"toc-menu list-none pl-5 text-[0.8rem] grid gap-2\"><li class=\"\"><a href=\"#add-flutter-auth-ui\" class=\"text-foreground-lighter hover:text-brand-link transition-colors\">Add Flutter Auth UI</a></li><li class=\"ml-4\"><a href=\"#initialize-the-flutter-auth-package\" class=\"text-foreground-lighter hover:text-brand-link transition-colors\">Initialize the Flutter Auth package</a></li><li class=\"ml-4\"><a href=\"#email-auth\" class=\"text-foreground-lighter hover:text-brand-link transition-colors\">Email Auth</a></li><li class=\"ml-4\"><a href=\"#magic-link-auth\" class=\"text-foreground-lighter hover:text-brand-link transition-colors\">Magic link Auth</a></li><li class=\"ml-4\"><a href=\"#reset-password\" class=\"text-foreground-lighter hover:text-brand-link transition-colors\">Reset password</a></li><li class=\"ml-4\"><a href=\"#phone-auth\" class=\"text-foreground-lighter hover:text-brand-link transition-colors\">Phone Auth</a></li><li class=\"ml-4\"><a href=\"#social-auth\" class=\"text-foreground-lighter hover:text-brand-link transition-colors\">Social Auth</a></li><li class=\"ml-4\"><a href=\"#theming\" class=\"text-foreground-lighter hover:text-brand-link transition-colors\">Theming</a></li></ul></div></div></div><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div><next-route-announcer style=\"position: absolute;\"></next-route-announcer><section aria-label=\"Notifications alt+T\" tabindex=\"-1\"><ol dir=\"ltr\" tabindex=\"-1\" class=\"toaster group pointer-events-auto\" data-sonner-toaster=\"true\" data-theme=\"light\" data-y-position=\"top\" data-x-position=\"right\" style=\"--front-toast-height: 112px; --offset: 32px; --width: 356px; --gap: 14px; font-family: inherit;\"></ol><ol dir=\"ltr\" tabindex=\"-1\" class=\"toaster group pointer-events-auto\" data-sonner-toaster=\"true\" data-theme=\"light\" data-y-position=\"bottom\" data-x-position=\"right\" style=\"--front-toast-height: 112px; --offset: 32px; --width: 356px; --gap: 14px; font-family: inherit;\"><li aria-live=\"polite\" aria-atomic=\"true\" role=\"status\" tabindex=\"0\" class=\"group toast w-full rounded-md py-3 px-5 flex gap-2 items-start font-normal text-sm group-[.toaster]:bg-overlay group-[.toaster]:text-foreground group-[.toaster]:border group-[.toaster]:border-overlay group-[.toaster]:shadow-lg\" data-sonner-toast=\"\" data-styled=\"false\" data-mounted=\"true\" data-promise=\"false\" data-removed=\"false\" data-visible=\"true\" data-y-position=\"bottom\" data-x-position=\"right\" data-index=\"0\" data-front=\"true\" data-swiping=\"false\" data-dismissible=\"true\" data-swipe-out=\"false\" data-expanded=\"false\" style=\"--index: 0; --toasts-before: 0; --z-index: 1; --offset: 0px; --initial-height: 112px;\"><button aria-label=\"Close toast\" data-disabled=\"false\" data-close-button=\"true\" class=\"absolute right-2 top-2 rounded-md text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-destructive-300 group-[.destructive]:hover:text-destructive-50 group-[.destructive]:focus:ring-destructive-400 group-[.destructive]:focus:ring-offset-destructive-600 left-auto transform-none bg-transparent border-0 border-transparent hover:!bg-transparent hover:border-transparent\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line></svg></button><div class=\"space-y-3 py-1 flex flex-col w-full\"><div><p class=\"text-foreground\">We only collect analytics essential to ensuring smooth operation of our services. <a class=\"inline sm:hidden underline text-light\" target=\"_blank\" rel=\"noreferrer\" href=\"https://supabase.com/privacy\">Learn more</a></p></div><div class=\"flex items-center space-x-2\"><button data-size=\"tiny\" type=\"button\" class=\"relative justify-center cursor-pointer inline-flex items-center space-x-2 text-center font-regular ease-out duration-200 rounded-md outline-none transition-all outline-0 focus-visible:outline-4 focus-visible:outline-offset-1 border text-foreground bg-alternative dark:bg-muted hover:bg-selection border-strong hover:border-stronger focus-visible:outline-brand-600 data-[state=open]:bg-selection data-[state=open]:outline-brand-600 data-[state=open]:border-button-hover text-xs px-2.5 py-1 h-[26px]\"> <span class=\"truncate\">Accept</span> </button><button data-size=\"tiny\" type=\"button\" class=\"relative justify-center cursor-pointer inline-flex items-center space-x-2 text-center font-regular ease-out duration-200 rounded-md outline-none transition-all outline-0 focus-visible:outline-4 focus-visible:outline-offset-1 border text-foreground hover:bg-surface-300 shadow-none focus-visible:outline-border-strong data-[state=open]:bg-surface-300 data-[state=open]:outline-border-strong border-transparent text-xs px-2.5 py-1 h-[26px]\"> <span class=\"truncate\">Opt out</span> </button><a target=\"_blank\" rel=\"noreferrer\" data-size=\"tiny\" type=\"button\" class=\"relative justify-center cursor-pointer items-center space-x-2 text-center font-regular ease-out duration-200 rounded-md outline-none transition-all outline-0 focus-visible:outline-4 focus-visible:outline-offset-1 border hover:bg-surface-300 shadow-none focus-visible:outline-border-strong data-[state=open]:bg-surface-300 data-[state=open]:outline-border-strong border-transparent text-xs px-2.5 py-1 h-[26px] hidden sm:block text-light hover:text-foreground\" href=\"https://supabase.com/privacy\"><span class=\"truncate\">Learn more</span></a></div></div></li></ol></section></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-helpers/flutter-auth-ui",
        "title": "Flutter Auth UI | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Flutter%20Auth%20UI&description=Prebuilt%2C%20customizable%20Flutter%20widgets%20for%20authenticating%20users.",
        "ogTitle": "Flutter Auth UI | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-helpers/flutter-auth-ui",
        "description": "Prebuilt, customizable Flutter widgets for authenticating users.",
        "modifiedTime": "2024-09-10T20:36:24.980Z",
        "ogDescription": "Prebuilt, customizable Flutter widgets for authenticating users.",
        "publishedTime": "2024-09-10T20:36:24.980Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Migrating to the SSR package from Auth Helpers\n\n* * *\n\nThe new `ssr` package takes the core concepts of the Auth Helpers and makes them available to any server language or framework. This page will guide you through migrating from the Auth Helpers package to `ssr`.\n\n### Replacing Supabase packages [\\#](\\#replacing-supabase-packages)\n\nNext.jsSvelteKitRemix\n\n`\n_10\nnpm uninstall @supabase/auth-helpers-nextjs\n`\n\n`\n_10\nnpm install @supabase/ssr\n`\n\n### Creating a client [\\#](\\#creating-a-client)\n\nThe new `ssr` package exports two functions for creating a Supabase client. The `createBrowserClient` function is used in the client, and the `createServerClient` function is used in the server.\n\nCheck out the [Creating a client](/docs/guides/auth/server-side/creating-a-client) page for examples of creating a client in your framework.\n\n## Next steps [\\#](\\#next-steps)\n\n- Implement [Authentication using Email and Password](/docs/guides/auth/server-side/email-based-auth-with-pkce-flow-for-ssr)\n- Implement [Authentication using OAuth](/docs/guides/auth/server-side/oauth-with-pkce-flow-for-ssr)\n- [Learn more about SSR](/docs/guides/auth/server-side-rendering)",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Migrating to the SSR package from Auth Helpers</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>The new <code>ssr</code> package takes the core concepts of the Auth Helpers and makes them available to any server language or framework. This page will guide you through migrating from the Auth Helpers package to <code>ssr</code>.</p>\n<h3 id=\"replacing-supabase-packages\" class=\"group scroll-mt-24\">Replacing Supabase packages<a href=\"#replacing-supabase-packages\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R4u9jtsn7qb6ra:-content-nextjs\" data-state=\"active\" id=\"radix-:R4u9jtsn7qb6ra:-trigger-nextjs\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Next.js</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R4u9jtsn7qb6ra:-content-sveltekit\" data-state=\"inactive\" id=\"radix-:R4u9jtsn7qb6ra:-trigger-sveltekit\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>SvelteKit</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R4u9jtsn7qb6ra:-content-remix\" data-state=\"inactive\" id=\"radix-:R4u9jtsn7qb6ra:-trigger-remix\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Remix</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R4u9jtsn7qb6ra:-trigger-nextjs\" id=\"radix-:R4u9jtsn7qb6ra:-content-nextjs\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>npm uninstall @supabase/auth-helpers-nextjs</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R4u9jtsn7qb6ra:-trigger-sveltekit\" hidden=\"\" id=\"radix-:R4u9jtsn7qb6ra:-content-sveltekit\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R4u9jtsn7qb6ra:-trigger-remix\" hidden=\"\" id=\"radix-:R4u9jtsn7qb6ra:-content-remix\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>npm install @supabase/ssr</span></div></div><br></code></div></div>\n<h3 id=\"creating-a-client\" class=\"group scroll-mt-24\">Creating a client<a href=\"#creating-a-client\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>The new <code>ssr</code> package exports two functions for creating a Supabase client. The <code>createBrowserClient</code> function is used in the client, and the <code>createServerClient</code> function is used in the server.</p>\n<p>Check out the <a href=\"/docs/guides/auth/server-side/creating-a-client\">Creating a client</a> page for examples of creating a client in your framework.</p>\n<h2 id=\"next-steps\" class=\"group scroll-mt-24\">Next steps<a href=\"#next-steps\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<ul>\n<li>Implement <a href=\"/docs/guides/auth/server-side/email-based-auth-with-pkce-flow-for-ssr\">Authentication using Email and Password</a></li>\n<li>Implement <a href=\"/docs/guides/auth/server-side/oauth-with-pkce-flow-for-ssr\">Authentication using OAuth</a></li>\n<li><a href=\"/docs/guides/auth/server-side-rendering\">Learn more about SSR</a></li>\n</ul></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/server-side/migrating-to-ssr-from-auth-helpers",
        "title": "Migrating to the SSR package from Auth Helpers | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Migrating%20to%20the%20SSR%20package%20from%20Auth%20Helpers&description=Step-by-step%20guide%20to%20migrating%20your%20app%20to%20the%20new%20SSR%20package",
        "ogTitle": "Migrating to the SSR package from Auth Helpers | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/server-side/migrating-to-ssr-from-auth-helpers",
        "description": "Step-by-step guide to migrating your app to the new SSR package",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "ogDescription": "Step-by-step guide to migrating your app to the new SSR package",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Use Supabase Auth with Next.js\n\n## Learn how to configure Supabase Auth for the Next.js App Router.\n\n* * *\n\n1\n\n### Create a new Supabase project\n\nHead over to [database.new](https://database.new) and create a new Supabase project.\n\nYour new database has a table for storing your users. You can see that this table is currently empty by running some SQL in the [SQL Editor](https://supabase.com/dashboard/project/_/sql/new).\n\nSQL\\_EDITOR\n\n`\n_10\nselect * from auth.users;\n`\n\n2\n\n### Create a Next.js app\n\nUse the `create-next-app` command and the `with-supabase` template, to create a Next.js app pre-configured with:\n\n- [Cookie-based Auth](https://supabase.com/docs/guides/auth/auth-helpers/nextjs)\n- [TypeScript](https://www.typescriptlang.org/)\n- [Tailwind CSS](https://tailwindcss.com/)\n\n[See GitHub repo](https://github.com/vercel/next.js/tree/canary/examples/with-supabase)\n\nTerminal\n\n`\n_10\nnpx create-next-app -e with-supabase\n`\n\n3\n\n### Declare Supabase Environment Variables\n\nRename `.env.local.example` to `.env.local` and populate with [your project's URL and Anon Key](https://supabase.com/dashboard/project/_/settings/api).\n\n.env.local\n\n`\n_10\nNEXT_PUBLIC_SUPABASE_URL=your-project-url\n_10\nNEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key\n`\n\n4\n\n### Start the app\n\nStart the development server, go to [http://localhost:3000](http://localhost:3000) in a browser, and you should see the contents of `app/page.tsx`.\n\nTo Sign Up a new user, navigate to [http://localhost:3000/login](http://localhost:3000/login), and click `Sign Up Now`.\n\nCheck out the [Supabase Auth docs](https://supabase.com/docs/guides/auth#authentication) for more authentication methods.\n\nTerminal\n\n`\n_10\nnpm run dev\n`",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Use Supabase Auth with Next.js</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Learn how to configure Supabase Auth for the Next.js App Router.</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<div class=\"py-8\"><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">1</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Create a new Supabase project</h3><p>Head over to <a href=\"https://database.new\">database.new</a> and create a new Supabase project.</p><p>Your new database has a table for storing your users. You can see that this table is currently empty by running some SQL in the <a href=\"https://supabase.com/dashboard/project/_/sql/new\">SQL Editor</a>.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"SQL_EDITOR\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>SQL_EDITOR</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span> select * from auth.users;</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">2</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Create a Next.js app</h3><p>Use the <code>create-next-app</code> command and the <code>with-supabase</code> template, to create a Next.js app pre-configured with:</p><ul>\n<li><a href=\"https://supabase.com/docs/guides/auth/auth-helpers/nextjs\">Cookie-based Auth</a></li>\n<li><a href=\"https://www.typescriptlang.org/\">TypeScript</a></li>\n<li><a href=\"https://tailwindcss.com/\">Tailwind CSS</a></li>\n</ul><p><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-supabase\">See GitHub repo</a></p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"Terminal\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>Terminal</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>npx create-next-app -e with-supabase</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">3</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Declare Supabase Environment Variables</h3><p>Rename <code>.env.local.example</code> to <code>.env.local</code> and populate with <a href=\"https://supabase.com/dashboard/project/_/settings/api\">your project's URL and Anon Key</a>.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\".env.local\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>.env.local</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  NEXT_PUBLIC_SUPABASE_URL=your-project-url</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key</span></div></div><br></code></div></div></div></div></div></div></div><div class=\"relative pb-8 group\"><div class=\" absolute w-px left-[11px] pt-1 h-full \"><div class=\" absolute w-full h-full py-1 bg-border-control group-last:bg-transparent \"></div></div><div class=\" absolute left-0 flex gap-3 items-center not-prose \"><div class=\"flex items-center gap-6\"><div class=\"border bg-surface-100 border-control flex items-center justify-center rounded-full w-6 h-6 text-xs text-foreground font-normal font-mono dropshadow-sm \">4</div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-12 lg:gap-10 lg:ml-12\"><div class=\"col-span-5 ml-12 lg:ml-0\"><h3 class=\"mt-0 text-foreground text-base\">Start the app</h3><p>Start the development server, go to <a href=\"http://localhost:3000\">http://localhost:3000</a> in a browser, and you should see the contents of <code>app/page.tsx</code>.</p><p>To Sign Up a new user, navigate to <a href=\"http://localhost:3000/login\">http://localhost:3000/login</a>, and click <code>Sign Up Now</code>.</p><p>Check out the <a href=\"https://supabase.com/docs/guides/auth#authentication\">Supabase Auth docs</a> for more authentication methods.</p></div><div class=\"col-span-7 not-prose\"><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"Terminal\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\"></span>Terminal</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>npm run dev</span></div></div><br></code></div></div></div></div></div></div></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/quickstarts/nextjs",
        "title": "Use Supabase Auth with Next.js | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Use%20Supabase%20Auth%20with%20Next.js&description=undefined",
        "ogTitle": "Use Supabase Auth with Next.js | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/quickstarts/nextjs",
        "description": "Learn how to configure Supabase Auth for the Next.js App Router.",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "ogDescription": "Learn how to configure Supabase Auth for the Next.js App Router.",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Password security\n\n## Help your users to protect their password security\n\n* * *\n\nA password is more secure if it is harder to guess or brute-force. In theory, a password is harder to guess if it is longer. It is also harder to guess if it uses a larger set of characters (for example, digits, lowercase and uppercase letters, and symbols).\n\nThis table shows the _minimum_ number of guesses that need to be tried to access a user's account:\n\n| Required characters | Length | Guesses |\n| --- | --- | --- |\n| Digits only | 8 | ~ 227 |\n| Digits and letters | 8 | ~ 241 |\n| Digits, lower and uppercase letters | 8 | ~ 248 |\n| Digits, lower and uppercase letters, symbols | 8 | ~ 252 |\n\nIn reality though, passwords are not always generated at random. They often contain variations of names, words, dates, and common phrases. Malicious actors can use these properties to guess a password in fewer attempts.\n\nThere are hundreds of millions (and growing!) known passwords out there. Malicious actors can use these lists of leaked passwords to automate login attempts (known as credential stuffing) and steal or access sensitive user data.\n\n## Password strength and leaked password protection [\\#](\\#password-strength-and-leaked-password-protection)\n\nTo help protect your users, Supabase Auth allows you fine-grained control over the strength of the passwords used on your project. You can configure these in your project's [Auth settings](/dashboard/project/_/settings/auth):\n\n- Set a large minimum password length. Anything less than 8 characters is not recommended.\n- Set the required characters that must appear at least once in a user's password. Use the strongest option of requiring digits, lowercase and uppercase letters, and symbols.\n- Prevent the use of leaked passwords. Supabase Auth uses the open-source [HaveIBeenPwned.org Pwned Passwords API](https://haveibeenpwned.com/Passwords) to reject passwords that have been leaked and are known by malicious actors.\n\n## Additional recommendations [\\#](\\#additional-recommendations)\n\nIn addition to choosing suitable password strength settings and preventing the use of leaked passwords, consider asking your users to:\n\n- Use a password manager to store and generate passwords.\n- Avoid password reuse across websites and apps.\n- Avoid using personal information in passwords.\n- Use [Multi-Factor Authentication](/docs/guides/auth/auth-mfa).\n\n## Frequently asked questions [\\#](\\#frequently-asked-questions)\n\n### How are passwords stored? [\\#](\\#how-are-passwords-stored)\n\nSupabase Auth uses [bcrypt](https://en.wikipedia.org/wiki/Bcrypt), a strong password hashing function, to store hashes of users' passwords. Only hashed passwords are stored. You cannot impersonate a user with the password hash. Each hash is accompanied by a randomly generated salt parameter for extra security.\n\nThe hash is stored in the `encrypted_password` column of the `auth.users` table. The column's name is a misnomer (cryptographic hashing is not encryption), but is kept for backward compatibility.\n\n### How will strengthened password requirements affect current users? [\\#](\\#how-will-strengthened-password-requirements-affect-current-users)\n\nExisting users can still sign in with their current password even if it doesn't meet the new, strengthened password requirements. However, if their password falls short of these updated standards, they will encounter a `WeakPasswordError` during the `signInWithPassword` process, explaining why it's considered weak. This change is also applicable to new users and existing users changing their passwords, ensuring everyone adheres to the enhanced security standards.",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Password security</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Help your users to protect their password security</h2><hr class=\"not-prose border-t-0 border-b my-8\"><p>A password is more secure if it is harder to guess or brute-force. In theory, a password is harder to guess if it is longer. It is also harder to guess if it uses a larger set of characters (for example, digits, lowercase and uppercase letters, and symbols).</p>\n<p>This table shows the <em>minimum</em> number of guesses that need to be tried to access a user's account:</p>\n<table><thead><tr><th>Required characters</th><th>Length</th><th>Guesses</th></tr></thead><tbody><tr><td>Digits only</td><td>8</td><td>~ 2<sup>27</sup></td></tr><tr><td>Digits and letters</td><td>8</td><td>~ 2<sup>41</sup></td></tr><tr><td>Digits, lower and uppercase letters</td><td>8</td><td>~ 2<sup>48</sup></td></tr><tr><td>Digits, lower and uppercase letters, symbols</td><td>8</td><td>~ 2<sup>52</sup></td></tr></tbody></table>\n<p>In reality though, passwords are not always generated at random. They often contain variations of names, words, dates, and common phrases. Malicious actors can use these properties to guess a password in fewer attempts.</p>\n<p>There are hundreds of millions (and growing!) known passwords out there. Malicious actors can use these lists of leaked passwords to automate login attempts (known as credential stuffing) and steal or access sensitive user data.</p>\n<h2 id=\"password-strength-and-leaked-password-protection\" class=\"group scroll-mt-24\">Password strength and leaked password protection<a href=\"#password-strength-and-leaked-password-protection\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>To help protect your users, Supabase Auth allows you fine-grained control over the strength of the passwords used on your project. You can configure these in your project's <a href=\"/dashboard/project/_/settings/auth\">Auth settings</a>:</p>\n<ul>\n<li>Set a large minimum password length. Anything less than 8 characters is not recommended.</li>\n<li>Set the required characters that must appear at least once in a user's password. Use the strongest option of requiring digits, lowercase and uppercase letters, and symbols.</li>\n<li>Prevent the use of leaked passwords. Supabase Auth uses the open-source <a href=\"https://haveibeenpwned.com/Passwords\">HaveIBeenPwned.org Pwned Passwords API</a> to reject passwords that have been leaked and are known by malicious actors.</li>\n</ul>\n<h2 id=\"additional-recommendations\" class=\"group scroll-mt-24\">Additional recommendations<a href=\"#additional-recommendations\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>In addition to choosing suitable password strength settings and preventing the use of leaked passwords, consider asking your users to:</p>\n<ul>\n<li>Use a password manager to store and generate passwords.</li>\n<li>Avoid password reuse across websites and apps.</li>\n<li>Avoid using personal information in passwords.</li>\n<li>Use <a href=\"/docs/guides/auth/auth-mfa\">Multi-Factor Authentication</a>.</li>\n</ul>\n<h2 id=\"frequently-asked-questions\" class=\"group scroll-mt-24\">Frequently asked questions<a href=\"#frequently-asked-questions\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<h3 id=\"how-are-passwords-stored\" class=\"group scroll-mt-24\">How are passwords stored?<a href=\"#how-are-passwords-stored\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Supabase Auth uses <a href=\"https://en.wikipedia.org/wiki/Bcrypt\">bcrypt</a>, a strong password hashing function, to store hashes of users' passwords. Only hashed passwords are stored. You cannot impersonate a user with the password hash. Each hash is accompanied by a randomly generated salt parameter for extra security.</p>\n<p>The hash is stored in the <code>encrypted_password</code> column of the <code>auth.users</code> table. The column's name is a misnomer (cryptographic hashing is not encryption), but is kept for backward compatibility.</p>\n<h3 id=\"how-will-strengthened-password-requirements-affect-current-users\" class=\"group scroll-mt-24\">How will strengthened password requirements affect current users?<a href=\"#how-will-strengthened-password-requirements-affect-current-users\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>Existing users can still sign in with their current password even if it doesn't meet the new, strengthened password requirements. However, if their password falls short of these updated standards, they will encounter a <code>WeakPasswordError</code> during the <code>signInWithPassword</code> process, explaining why it's considered weak. This change is also applicable to new users and existing users changing their passwords, ensuring everyone adheres to the enhanced security standards.</p></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/password-security",
        "title": "Password security | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Password%20security&description=undefined",
        "ogTitle": "Password security | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/password-security",
        "description": "Help your users to protect their password security",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "ogDescription": "Help your users to protect their password security",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Social Login\n\n* * *\n\nSocial Login (OAuth) is an open standard for authentication that allows users to log in to one website or application using their credentials from another website or application. OAuth allows users to grant third-party applications access to their online accounts without sharing their passwords.\nOAuth is commonly used for things like logging in to a social media account from a third-party app. It is a secure and convenient way to authenticate users and share information between applications.\n\n## Benefits [\\#](\\#benefits)\n\nThere are several reasons why you might want to add social login to your applications:\n\n- **Improved user experience**: Users can register and log in to your application using their existing social media accounts, which can be faster and more convenient than creating a new account from scratch. This makes it easier for users to access your application, improving their overall experience.\n\n- **Better user engagement**: You can access additional data and insights about your users, such as their interests, demographics, and social connections. This can help you tailor your content and marketing efforts to better engage with your users and provide a more personalized experience.\n\n- **Increased security**: Social login can improve the security of your application by leveraging the security measures and authentication protocols of the social media platforms that your users are logging in with. This can help protect against unauthorized access and account takeovers.\n\n\n## Set up a social provider with Supabase Auth [\\#](\\#set-up-a-social-provider-with-supabase-auth)\n\nSupabase supports a suite of social providers. Follow these guides to configure a social provider for your platform.\n\n[![Google Icon](https://supabase.com/docs/img/icons/google-icon.svg)\\\\\n\\\\\n**Google**](/docs/guides/auth/social-login/auth-google) [![Facebook Icon](https://supabase.com/docs/img/icons/facebook-icon.svg)\\\\\n\\\\\n**Facebook**](/docs/guides/auth/social-login/auth-facebook) [![Apple Icon](https://supabase.com/docs/img/icons/apple-icon.svg)\\\\\n\\\\\n**Apple**](/docs/guides/auth/social-login/auth-apple) [![Azure (Microsoft) Icon](https://supabase.com/docs/guides/auth/Microsoft)\\\\\n\\\\\n**Azure (Microsoft)**](/docs/guides/auth/social-login/auth-azure) [![Twitter Icon](https://supabase.com/docs/img/icons/twitter-icon-light.svg)\\\\\n\\\\\n**Twitter**](/docs/guides/auth/social-login/auth-twitter) [![GitHub Icon](https://supabase.com/docs/img/icons/github-icon-light.svg)\\\\\n\\\\\n**GitHub**](/docs/guides/auth/social-login/auth-github) [![Gitlab Icon](https://supabase.com/docs/img/icons/gitlab-icon.svg)\\\\\n\\\\\n**Gitlab**](/docs/guides/auth/social-login/auth-gitlab) [![Bitbucket Icon](https://supabase.com/docs/img/icons/bitbucket-icon.svg)\\\\\n\\\\\n**Bitbucket**](/docs/guides/auth/social-login/auth-bitbucket) [![Discord Icon](https://supabase.com/docs/img/icons/discord-icon.svg)\\\\\n\\\\\n**Discord**](/docs/guides/auth/social-login/auth-discord) [![Figma Icon](https://supabase.com/docs/img/icons/figma-icon.svg)\\\\\n\\\\\n**Figma**](/docs/guides/auth/social-login/auth-figma) [![Kakao Icon](https://supabase.com/docs/img/icons/kakao-icon.svg)\\\\\n\\\\\n**Kakao**](/docs/guides/auth/social-login/auth-kakao) [![Keycloak Icon](https://supabase.com/docs/img/icons/keycloak-icon.svg)\\\\\n\\\\\n**Keycloak**](/docs/guides/auth/social-login/auth-keycloak) [![LinkedIn Icon](https://supabase.com/docs/img/icons/linkedin-icon.svg)\\\\\n\\\\\n**LinkedIn**](/docs/guides/auth/social-login/auth-linkedin) [![Notion Icon](https://supabase.com/docs/img/icons/notion-icon.svg)\\\\\n\\\\\n**Notion**](/docs/guides/auth/social-login/auth-notion) [![Slack Icon](https://supabase.com/docs/img/icons/slack-icon.svg)\\\\\n\\\\\n**Slack**](/docs/guides/auth/social-login/auth-slack) [![Spotify Icon](https://supabase.com/docs/img/icons/spotify-icon.svg)\\\\\n\\\\\n**Spotify**](/docs/guides/auth/social-login/auth-spotify) [![Twitch Icon](https://supabase.com/docs/img/icons/twitch-icon.svg)\\\\\n\\\\\n**Twitch**](/docs/guides/auth/social-login/auth-twitch) [![WorkOS Icon](https://supabase.com/docs/img/icons/workos-icon.svg)\\\\\n\\\\\n**WorkOS**](/docs/guides/auth/social-login/auth-workos) [![Zoom Icon](https://supabase.com/docs/img/icons/zoom-icon.svg)\\\\\n\\\\\n**Zoom**](/docs/guides/auth/social-login/auth-zoom)\n\n## Provider tokens [\\#](\\#provider-tokens)\n\nYou can use the provider token and provider refresh token returned to make API calls to the OAuth provider. For example, you can use the Google provider token to access Google APIs on behalf of your user.\n\nSupabase Auth does not manage refreshing the provider token for the user. Your application will need to use the provider refresh token to obtain a new provider token. If no provider refresh token is returned, then it could mean one of the following:\n\n- The OAuth provider does not return a refresh token\n- Additional scopes need to be specified in order for the OAuth provider to return a refresh token.\n\nProvider tokens are intentionally not stored in your project's database. This is because provider tokens give access to potentially sensitive user data in third-party systems. Different applications have different needs, and one application's OAuth scopes may be significantly more permissive than another. If you want to use the provider token outside of the browser that completed the OAuth flow, it is recommended to send it to a trusted and secure server you control.",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Social Login</h1><hr class=\"not-prose border-t-0 border-b my-8\"><p>Social Login (OAuth) is an open standard for authentication that allows users to log in to one website or application using their credentials from another website or application. OAuth allows users to grant third-party applications access to their online accounts without sharing their passwords.\nOAuth is commonly used for things like logging in to a social media account from a third-party app. It is a secure and convenient way to authenticate users and share information between applications.</p>\n<h2 id=\"benefits\" class=\"group scroll-mt-24\">Benefits<a href=\"#benefits\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>There are several reasons why you might want to add social login to your applications:</p>\n<ul>\n<li>\n<p><strong>Improved user experience</strong>: Users can register and log in to your application using their existing social media accounts, which can be faster and more convenient than creating a new account from scratch. This makes it easier for users to access your application, improving their overall experience.</p>\n</li>\n<li>\n<p><strong>Better user engagement</strong>: You can access additional data and insights about your users, such as their interests, demographics, and social connections. This can help you tailor your content and marketing efforts to better engage with your users and provide a more personalized experience.</p>\n</li>\n<li>\n<p><strong>Increased security</strong>: Social login can improve the security of your application by leveraging the security measures and authentication protocols of the social media platforms that your users are logging in with. This can help protect against unauthorized access and account takeovers.</p>\n</li>\n</ul>\n<h2 id=\"set-up-a-social-provider-with-supabase-auth\" class=\"group scroll-mt-24\">Set up a social provider with Supabase Auth<a href=\"#set-up-a-social-provider-with-supabase-auth\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Supabase supports a suite of social providers. Follow these guides to configure a social provider for your platform.</p>\n<div class=\"grid grid-cols-12 xs:gap-x-10 gap-y-10 not-prose py-8\"><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-google\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/google-icon.svg\" alt=\"Google Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Google</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-facebook\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/facebook-icon.svg\" alt=\"Facebook Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Facebook</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-apple\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/apple-icon.svg\" alt=\"Apple Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Apple</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-azure\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/microsoft-icon.svg\" alt=\"Azure (Microsoft) Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Azure (Microsoft)</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-twitter\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/twitter-icon-light.svg\" alt=\"Twitter Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Twitter</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-github\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/github-icon-light.svg\" alt=\"GitHub Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">GitHub</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-gitlab\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/gitlab-icon.svg\" alt=\"Gitlab Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Gitlab</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-bitbucket\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/bitbucket-icon.svg\" alt=\"Bitbucket Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Bitbucket</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-discord\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/discord-icon.svg\" alt=\"Discord Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Discord</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-figma\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/figma-icon.svg\" alt=\"Figma Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Figma</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-kakao\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/kakao-icon.svg\" alt=\"Kakao Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Kakao</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-keycloak\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/keycloak-icon.svg\" alt=\"Keycloak Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Keycloak</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-linkedin\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/linkedin-icon.svg\" alt=\"LinkedIn Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">LinkedIn</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-notion\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/notion-icon.svg\" alt=\"Notion Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Notion</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-slack\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/slack-icon.svg\" alt=\"Slack Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Slack</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-spotify\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/spotify-icon.svg\" alt=\"Spotify Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Spotify</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-twitch\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/twitch-icon.svg\" alt=\"Twitch Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Twitch</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-workos\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/workos-icon.svg\" alt=\"WorkOS Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">WorkOS</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-zoom\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/zoom-icon.svg\" alt=\"Zoom Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Zoom</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a></div>\n<h2 id=\"provider-tokens\" class=\"group scroll-mt-24\">Provider tokens<a href=\"#provider-tokens\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>You can use the provider token and provider refresh token returned to make API calls to the OAuth provider. For example, you can use the Google provider token to access Google APIs on behalf of your user.</p>\n<p>Supabase Auth does not manage refreshing the provider token for the user. Your application will need to use the provider refresh token to obtain a new provider token. If no provider refresh token is returned, then it could mean one of the following:</p>\n<ul>\n<li>The OAuth provider does not return a refresh token</li>\n<li>Additional scopes need to be specified in order for the OAuth provider to return a refresh token.</li>\n</ul>\n<p>Provider tokens are intentionally not stored in your project's database. This is because provider tokens give access to potentially sensitive user data in third-party systems. Different applications have different needs, and one application's OAuth scopes may be significantly more permissive than another. If you want to use the provider token outside of the browser that completed the OAuth flow, it is recommended to send it to a trusted and secure server you control.</p></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/social-login",
        "title": "Social Login | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Social%20Login&description=Logging%20in%20with%20social%20accounts",
        "ogTitle": "Social Login | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/social-login",
        "description": "Logging in with social accounts",
        "modifiedTime": "2024-09-10T20:36:24.980Z",
        "ogDescription": "Logging in with social accounts",
        "publishedTime": "2024-09-10T20:36:24.980Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Enable Captcha Protection\n\n* * *\n\nSupabase provides you with the option of adding captcha to your sign-in, sign-up, and password reset forms. This keeps your website safe from bots and malicious scripts. Supabase authentication has support for [hCaptcha](https://www.hcaptcha.com/) and [Cloudflare Turnstile](https://www.cloudflare.com/products/turnstile/).\n\n## Sign up for Captcha [\\#](\\#sign-up-for-captcha)\n\nHCaptchaTurnstile\n\nGo to the [hCaptcha](https://www.hcaptcha.com/) website and sign up for an account. On the Welcome page, copy the **Sitekey** and **Secret key**.\n\nIf you have already signed up and didn't copy this information from the Welcome page, you can get the **Secret key** from the Settings page.\n\n![site_secret_settings.png](https://supabase.com/docs/img/guides/auth-captcha/site_secret_settings.png)\n\nThe **Sitekey** can be found in the **Settings** of the active site you created.\n\n![sites_dashboard.png](https://supabase.com/docs/img/guides/auth-captcha/sites_dashboard.png)\n\nIn the Settings page, look for the **Sitekey** section and copy the key.\n\n![sitekey_settings.png](https://supabase.com/docs/img/guides/auth-captcha/sitekey_settings.png)\n\n## Enable Captcha protection for your Supabase project [\\#](\\#enable-captcha-protection-for-your-supabase-project)\n\nNavigate to the **[Auth](https://supabase.com/dashboard/project/_/settings/auth)** section of your Project Settings in the Supabase Dashboard and find the **Enable Captcha protection** toggle under Settings > Authentication > Bot and Abuse Protection > Enable Captcha protection.\n\nSelect your CAPTCHA provider from the dropdown, enter your Captcha **Secret key**, and click **Save**.\n\n## Add the Captcha frontend component [\\#](\\#add-the-captcha-frontend-component)\n\nThe frontend requires some changes to provide the captcha on-screen for the user. This example uses React and the corresponding Captcha React component, but both Captcha providers can be used with any JavaScript framework.\n\nHCaptchaTurnstile\n\nInstall `@hcaptcha/react-hcaptcha` in your project as a dependency.\n\n`\n_10\nnpm install @hcaptcha/react-hcaptcha\n`\n\nNow import the `HCaptcha` component from the `@hcaptcha/react-hcaptcha` library.\n\n`\n_10\nimport HCaptcha from '@hcaptcha/react-hcaptcha'\n`\n\nLet's create a empty state to store our `captchaToken`\n\n`\n_10\nconst [captchaToken, setCaptchaToken] = useState()\n`\n\nNow lets add the HCaptcha component to the JSX section of our code\n\n`\n_10\n<HCaptcha />\n`\n\nWe will pass it the sitekey we copied from the hCaptcha website as a property along with a onVerify property which takes a callback function. This callback function will have a token as one of its properties. Let's set the token in the state using `setCaptchaToken`\n\n`\n_10\n<HCaptcha\n_10\nsitekey=\"your-sitekey\"\n_10\nonVerify={(token) => {\n_10\n    setCaptchaToken(token)\n_10\n}}\n_10\n/>\n`\n\nNow lets use the captcha token we receive in our Supabase signUp function.\n\n`\n_10\nawait supabase.auth.signUp({\n_10\nemail,\n_10\npassword,\n_10\noptions: { captchaToken },\n_10\n})\n`\n\nWe will also need to reset the captcha challenge after we have made a call to the function above.\n\nCreate a ref to use on our HCaptcha component.\n\n`\n_10\nconst captcha = useRef()\n`\n\nLet's add a ref attribute on the `HCaptcha` component and assign the `captcha` constant to it.\n\n`\n_10\n<HCaptcha\n_10\nref={captcha}\n_10\nsitekey=\"your-sitekey\"\n_10\nonVerify={(token) => {\n_10\n    setCaptchaToken(token)\n_10\n}}\n_10\n/>\n`\n\nReset the `captcha` after the signUp function is called using the following code:\n\n`\n_10\ncaptcha.current.resetCaptcha()\n`\n\nIn order to test that this works locally we will need to use something like [ngrok](https://ngrok.com/) or add an entry to your hosts file. You can read more about this in the [hCaptcha docs](https://docs.hcaptcha.com/#local-development).\n\nRun the application and you should now be provided with a captcha challenge.",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Enable Captcha Protection</h1><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>Supabase provides you with the option of adding captcha to your sign-in, sign-up, and password reset forms. This keeps your website safe from bots and malicious scripts. Supabase authentication has support for <a href=\"https://www.hcaptcha.com/\">hCaptcha</a> and <a href=\"https://www.cloudflare.com/products/turnstile/\">Cloudflare Turnstile</a>.</p>\n<h2 id=\"sign-up-for-captcha\" class=\"group scroll-mt-24\">Sign up for Captcha<a href=\"#sign-up-for-captcha\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R4u9jtsn7qb6ra:-content-hcaptcha-1\" data-state=\"active\" id=\"radix-:R4u9jtsn7qb6ra:-trigger-hcaptcha-1\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>HCaptcha</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R4u9jtsn7qb6ra:-content-turnstile-1\" data-state=\"inactive\" id=\"radix-:R4u9jtsn7qb6ra:-trigger-turnstile-1\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Turnstile</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R4u9jtsn7qb6ra:-trigger-hcaptcha-1\" id=\"radix-:R4u9jtsn7qb6ra:-content-hcaptcha-1\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>Go to the <a href=\"https://www.hcaptcha.com/\">hCaptcha</a> website and sign up for an account. On the Welcome page, copy the <strong>Sitekey</strong> and <strong>Secret key</strong>.</p><p>If you have already signed up and didn't copy this information from the Welcome page, you can get the <strong>Secret key</strong> from the Settings page.</p><p><img src=\"/docs/img/guides/auth-captcha/site_secret_settings.png\" alt=\"site_secret_settings.png\"></p><p>The <strong>Sitekey</strong> can be found in the <strong>Settings</strong> of the active site you created.</p><p><img src=\"/docs/img/guides/auth-captcha/sites_dashboard.png\" alt=\"sites_dashboard.png\"></p><p>In the Settings page, look for the <strong>Sitekey</strong> section and copy the key.</p><p><img src=\"/docs/img/guides/auth-captcha/sitekey_settings.png\" alt=\"sitekey_settings.png\"></p></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R4u9jtsn7qb6ra:-trigger-turnstile-1\" hidden=\"\" id=\"radix-:R4u9jtsn7qb6ra:-content-turnstile-1\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h2 id=\"enable-captcha-protection-for-your-supabase-project\" class=\"group scroll-mt-24\">Enable Captcha protection for your Supabase project<a href=\"#enable-captcha-protection-for-your-supabase-project\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Navigate to the <strong><a href=\"https://supabase.com/dashboard/project/_/settings/auth\">Auth</a></strong> section of your Project Settings in the Supabase Dashboard and find the <strong>Enable Captcha protection</strong> toggle under Settings &gt; Authentication &gt; Bot and Abuse Protection &gt; Enable Captcha protection.</p>\n<p>Select your CAPTCHA provider from the dropdown, enter your Captcha <strong>Secret key</strong>, and click <strong>Save</strong>.</p>\n<h2 id=\"add-the-captcha-frontend-component\" class=\"group scroll-mt-24\">Add the Captcha frontend component<a href=\"#add-the-captcha-frontend-component\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>The frontend requires some changes to provide the captcha on-screen for the user. This example uses React and the corresponding Captcha React component, but both Captcha providers can be used with any JavaScript framework.</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R6e9jtsn7qb6ra:-content-hcaptcha-2\" data-state=\"active\" id=\"radix-:R6e9jtsn7qb6ra:-trigger-hcaptcha-2\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>HCaptcha</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R6e9jtsn7qb6ra:-content-turnstile-2\" data-state=\"inactive\" id=\"radix-:R6e9jtsn7qb6ra:-trigger-turnstile-2\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Turnstile</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6e9jtsn7qb6ra:-trigger-hcaptcha-2\" id=\"radix-:R6e9jtsn7qb6ra:-content-hcaptcha-2\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>Install <code>@hcaptcha/react-hcaptcha</code> in your project as a dependency.</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>npm install @hcaptcha/react-hcaptcha</span></div></div><br></code></div></div><p>Now import the <code>HCaptcha</code> component from the <code>@hcaptcha/react-hcaptcha</code> library.</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>import HCaptcha from '@hcaptcha/react-hcaptcha'</span></div></div><br></code></div></div><p>Let's create a empty state to store our <code>captchaToken</code></p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const [captchaToken, setCaptchaToken] = useState()</span></div></div><br></code></div></div><p>Now lets add the HCaptcha component to the JSX section of our code</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;HCaptcha /&gt;</span></div></div><br></code></div></div><p>We will pass it the sitekey we copied from the hCaptcha website as a property along with a onVerify property which takes a callback function. This callback function will have a token as one of its properties. Let's set the token in the state using <code>setCaptchaToken</code></p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;HCaptcha</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  sitekey=\"your-sitekey\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  onVerify={(token) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    setCaptchaToken(token)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>/&gt;</span></div></div><br></code></div></div><p>Now lets use the captcha token we receive in our Supabase signUp function.</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>await supabase.auth.signUp({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  email,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  password,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  options: { captchaToken },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><br></code></div></div><p>We will also need to reset the captcha challenge after we have made a call to the function above.</p><p>Create a ref to use on our HCaptcha component.</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const captcha = useRef()</span></div></div><br></code></div></div><p>Let's add a ref attribute on the <code>HCaptcha</code> component and assign the <code>captcha</code> constant to it.</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>&lt;HCaptcha</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  ref={captcha}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  sitekey=\"your-sitekey\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  onVerify={(token) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    setCaptchaToken(token)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  }}</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>/&gt;</span></div></div><br></code></div></div><p>Reset the <code>captcha</code> after the signUp function is called using the following code:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>captcha.current.resetCaptcha()</span></div></div><br></code></div></div><p>In order to test that this works locally we will need to use something like <a href=\"https://ngrok.com/\">ngrok</a> or add an entry to your hosts file. You can read more about this in the <a href=\"https://docs.hcaptcha.com/#local-development\">hCaptcha docs</a>.</p></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R6e9jtsn7qb6ra:-trigger-turnstile-2\" hidden=\"\" id=\"radix-:R6e9jtsn7qb6ra:-content-turnstile-2\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p>Run the application and you should now be provided with a captcha challenge.</p></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-captcha",
        "title": "Enable Captcha Protection | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Enable%20Captcha%20Protection&description=Add%20Captcha%20Protection%20to%20your%20Supabase%20project",
        "ogTitle": "Enable Captcha Protection | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-captcha",
        "description": "Add Captcha Protection to your Supabase project",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "ogDescription": "Add Captcha Protection to your Supabase project",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Auth architecture\n\n## The architecture behind Supabase Auth.\n\n* * *\n\nThere are four major layers to Supabase Auth:\n\n1. [Client layer.](#client-layer) This can be one of the Supabase client SDKs, or manually made HTTP requests using the HTTP client of your choice.\n2. Kong API gateway. This is shared between all Supabase products.\n3. [Auth service](#auth-service) (formerly known as GoTrue).\n4. [Postgres database.](#postgres) This is shared between all Supabase products.\n\n## Client layer [\\#](\\#client-layer)\n\nThe client layer runs in your app. This could be running in many places, including:\n\n- Your frontend browser code\n- Your backend server code\n- Your native application\n\nThe client layer provides the functions that you use to sign in and manage users. We recommend using the Supabase client SDKs, which handle:\n\n- Configuration and authentication of HTTP calls to the Supabase Auth backend\n- Persistence, refresh, and removal of Auth Tokens in your app's storage medium\n- Integration with other Supabase products\n\nBut at its core, this layer manages the making of HTTP calls, so you could write your own client layer if you wanted to.\n\nSee the Client SDKs for more information:\n\n- [JavaScript](/docs/reference/javascript/introduction)\n- [Flutter](/docs/reference/dart/introduction)\n- [Swift](/docs/reference/swift/introduction)\n- [Python](/docs/reference/python/introduction)\n- [C#](/docs/reference/csharp/introduction)\n- [Kotlin](/docs/reference/kotlin/introduction)\n\n## Auth service [\\#](\\#auth-service)\n\nThe [Auth service](https://github.com/supabase/auth) is an Auth API server written and maintained by Supabase. It is a fork of the GoTrue project, originally created by Netlify.\n\nWhen you deploy a new Supabase project, we deploy an instance of this server alongside your database, and inject your database with the required Auth schema.\n\nThe Auth service is responsible for:\n\n- Validating, issuing, and refreshing JWTs\n- Serving as the intermediary between your app and Auth information in the database\n- Communicating with external providers for Social Login and SSO\n\n## Postgres [\\#](\\#postgres)\n\nSupabase Auth uses the `auth` schema in your Postgres database to store user tables and other information. For security, this schema is not exposed on the auto-generated API.\n\nYou can connect Auth information to your own objects using [database triggers](/docs/guides/database/postgres/triggers) and [foreign keys](https://www.postgresql.org/docs/current/tutorial-fk.html). Make sure that any views you create for Auth data are adequately protected by [enabling RLS](/docs/guides/database/postgres/row-level-security) or [revoking grants](https://www.postgresql.org/docs/current/sql-revoke.html).\n\nMake sure any views you create for Auth data are protected.\n\nStarting in Postgres version 15, views inherit the RLS policies of the underlying tables if created with `security_invoker`. Views in earlier versions, or those created without `security_invoker`, inherit the permissions of the owner, who can bypass RLS policies.",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Auth architecture</h1><h2 class=\"mt-3 text-xl text-foreground-light\">The architecture behind Supabase Auth.</h2><hr class=\"not-prose border-t-0 border-b my-8\"><p>There are four major layers to Supabase Auth:</p>\n<ol>\n<li><a href=\"#client-layer\">Client layer.</a> This can be one of the Supabase client SDKs, or manually made HTTP requests using the HTTP client of your choice.</li>\n<li>Kong API gateway. This is shared between all Supabase products.</li>\n<li><a href=\"#auth-service\">Auth service</a> (formerly known as GoTrue).</li>\n<li><a href=\"#postgres\">Postgres database.</a> This is shared between all Supabase products.</li>\n</ol>\n<!-- -->\n<h2 id=\"client-layer\" class=\"group scroll-mt-24\">Client layer<a href=\"#client-layer\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>The client layer runs in your app. This could be running in many places, including:</p>\n<ul>\n<li>Your frontend browser code</li>\n<li>Your backend server code</li>\n<li>Your native application</li>\n</ul>\n<p>The client layer provides the functions that you use to sign in and manage users. We recommend using the Supabase client SDKs, which handle:</p>\n<ul>\n<li>Configuration and authentication of HTTP calls to the Supabase Auth backend</li>\n<li>Persistence, refresh, and removal of Auth Tokens in your app's storage medium</li>\n<li>Integration with other Supabase products</li>\n</ul>\n<p>But at its core, this layer manages the making of HTTP calls, so you could write your own client layer if you wanted to.</p>\n<p>See the Client SDKs for more information:</p>\n<ul>\n<li><a href=\"/docs/reference/javascript/introduction\">JavaScript</a></li>\n<li><a href=\"/docs/reference/dart/introduction\">Flutter</a></li>\n<li><a href=\"/docs/reference/swift/introduction\">Swift</a></li>\n<li><a href=\"/docs/reference/python/introduction\">Python</a></li>\n<li><a href=\"/docs/reference/csharp/introduction\">C#</a></li>\n<li><a href=\"/docs/reference/kotlin/introduction\">Kotlin</a></li>\n</ul>\n<h2 id=\"auth-service\" class=\"group scroll-mt-24\">Auth service<a href=\"#auth-service\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>The <a href=\"https://github.com/supabase/auth\">Auth service</a> is an Auth API server written and maintained by Supabase. It is a fork of the GoTrue project, originally created by Netlify.</p>\n<p>When you deploy a new Supabase project, we deploy an instance of this server alongside your database, and inject your database with the required Auth schema.</p>\n<p>The Auth service is responsible for:</p>\n<ul>\n<li>Validating, issuing, and refreshing JWTs</li>\n<li>Serving as the intermediary between your app and Auth information in the database</li>\n<li>Communicating with external providers for Social Login and SSO</li>\n</ul>\n<h2 id=\"postgres\" class=\"group scroll-mt-24\">Postgres<a href=\"#postgres\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Supabase Auth uses the <code>auth</code> schema in your Postgres database to store user tables and other information. For security, this schema is not exposed on the auto-generated API.</p>\n<p>You can connect Auth information to your own objects using <a href=\"/docs/guides/database/postgres/triggers\">database triggers</a> and <a href=\"https://www.postgresql.org/docs/current/tutorial-fk.html\">foreign keys</a>. Make sure that any views you create for Auth data are adequately protected by <a href=\"/docs/guides/database/postgres/row-level-security\">enabling RLS</a> or <a href=\"https://www.postgresql.org/docs/current/sql-revoke.html\">revoking grants</a>.</p>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text [&amp;>svg]:text-destructive-200 [&amp;>svg]:bg-destructive-600 mb-2 [&amp;_svg]:bg-destructive [&amp;_svg]:text-white bg-alternative border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>Make sure any views you create for Auth data are protected.</p><p>Starting in Postgres version 15, views inherit the RLS policies of the underlying tables if created with <code>security_invoker</code>. Views in earlier versions, or those created without <code>security_invoker</code>, inherit the permissions of the owner, who can bypass RLS policies.</p></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/architecture",
        "title": "Auth architecture | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Auth%20architecture&description=undefined",
        "ogTitle": "Auth architecture | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/architecture",
        "description": "The architecture behind Supabase Auth.",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "ogDescription": "The architecture behind Supabase Auth.",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Identities\n\n* * *\n\nAn identity is an authentication method associated with a user. Supabase Auth supports the following types of identity:\n\n- Email\n- Phone\n- OAuth\n- SAML\n\nA user can have more than one identity. Anonymous users have no identity until they link an identity to their user.\n\n## The user identity object [\\#](\\#the-user-identity-object)\n\nThe user identity object contains the following attributes:\n\n| Attributes | Type | Description |\n| --- | --- | --- |\n| provider\\_id | `string` | The provider id returned by the provider. If the provider is an OAuth provider, the id refers to the user's account with the OAuth provider. If the provider is `email` or `phone`, the id is the user's id from the `auth.users` table. |\n| user\\_id | `string` | The user's id that the identity is linked to. |\n| identity\\_data | `object` | The identity metadata. For OAuth and SAML identities, this contains information about the user from the provider. |\n| id | `string` | The unique id of the identity. |\n| provider | `string` | The provider name. |\n| email | `string` | The email is a generated column that references the optional email property in the identity\\_data |\n| created\\_at | `string` | The timestamp that the identity was created. |\n| last\\_sign\\_in\\_at | `string` | The timestamp that the identity was last used to sign in. |\n| updated\\_at | `string` | The timestamp that the identity was last updated. |",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Identities</h1><hr class=\"not-prose border-t-0 border-b my-8\"><p>An identity is an authentication method associated with a user. Supabase Auth supports the following types of identity:</p>\n<ul>\n<li>Email</li>\n<li>Phone</li>\n<li>OAuth</li>\n<li>SAML</li>\n</ul>\n<p>A user can have more than one identity. Anonymous users have no identity until they link an identity to their user.</p>\n<h2 id=\"the-user-identity-object\" class=\"group scroll-mt-24\">The user identity object<a href=\"#the-user-identity-object\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>The user identity object contains the following attributes:</p>\n<table><thead><tr><th>Attributes</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>provider_id</td><td><code>string</code></td><td>The provider id returned by the provider. If the provider is an OAuth provider, the id refers to the user's account with the OAuth provider. If the provider is <code>email</code> or <code>phone</code>, the id is the user's id from the <code>auth.users</code> table.</td></tr><tr><td>user_id</td><td><code>string</code></td><td>The user's id that the identity is linked to.</td></tr><tr><td>identity_data</td><td><code>object</code></td><td>The identity metadata. For OAuth and SAML identities, this contains information about the user from the provider.</td></tr><tr><td>id</td><td><code>string</code></td><td>The unique id of the identity.</td></tr><tr><td>provider</td><td><code>string</code></td><td>The provider name.</td></tr><tr><td>email</td><td><code>string</code></td><td>The email is a generated column that references the optional email property in the identity_data</td></tr><tr><td>created_at</td><td><code>string</code></td><td>The timestamp that the identity was created.</td></tr><tr><td>last_sign_in_at</td><td><code>string</code></td><td>The timestamp that the identity was last used to sign in.</td></tr><tr><td>updated_at</td><td><code>string</code></td><td>The timestamp that the identity was last updated.</td></tr></tbody></table></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/identities",
        "title": "Identities | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Identities&description=undefined",
        "ogTitle": "Identities | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/identities",
        "modifiedTime": "2024-09-10T20:36:24.980Z",
        "publishedTime": "2024-09-10T20:36:24.980Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Configure a Custom SMTP\n\n* * *\n\n## Auth SMTP [\\#](\\#auth-smtp)\n\nAt present, you can trial the Supabase platform by sending up to **3** emails per hour via the built-in service. The default email service as a whole is offered on a best effort basis: we will do our best to maintain it and will review usage of the service on a regular basis to see if the email service should be continued.\n\nAs you progress toward production, you may find yourself wanting for a custom SMTP service in order to increase your limits. A custom SMTP server will allow you to set your own cap on the number of emails sent per hour.\n\nBeyond rate limits, an SMTP server might also help with:\n\n- Deliverability and Reputation Management\n- Scalability\n- Analytics and Tracking\n- Compliance and Anti Spam measures\n\n## How to set up SMTP [\\#](\\#how-to-set-up-smtp)\n\nHead over to [Auth Settings Page](https://supabase.com/dashboard/project/_/settings/auth) and hit \"Enable Custom SMTP\" under the SMTP Provider section.\n\nFill in fields below with the relevant details obtained from your custom SMTP provider:\n\n![SMTP settings](https://supabase.com/docs/img/guides/auth-smtp/smtp.png)\n\n## How to update email rate limits [\\#](\\#how-to-update-email-rate-limits)\n\nAfter adding a custom SMTP provider, you can head over to [Auth > Rate Limits](https://supabase.com/dashboard/project/_/auth/rate-limits) to configure the rate limits for sending emails.\n\n### SMTP providers [\\#](\\#smtp-providers)\n\nYou can use Supabase Auth with any major SMTP provider of your choosing. Some SMTP providers you could consider using are:\n\n- [Twilio SendGrid](https://docs.sendgrid.com/for-developers/sending-email/integrating-with-the-smtp-api)\n- [AWS SES](https://docs.aws.amazon.com/ses/latest/dg/send-email-smtp.html)\n- [Resend](https://resend.com/docs/dashboard/emails/introduction)",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Configure a Custom SMTP</h1><hr class=\"not-prose border-t-0 border-b my-8\"><h2 id=\"auth-smtp\" class=\"group scroll-mt-24\">Auth SMTP<a href=\"#auth-smtp\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>At present, you can trial the Supabase platform by sending up to <strong>3</strong> emails per hour via the built-in service. The default email service as a whole is offered on a best effort basis: we will do our best to maintain it and will review usage of the service on a regular basis to see if the email service should be continued.</p>\n<p>As you progress toward production, you may find yourself wanting for a custom SMTP service in order to increase your limits. A custom SMTP server will allow you to set your own cap on the number of emails sent per hour.</p>\n<p>Beyond rate limits, an SMTP server might also help with:</p>\n<ul>\n<li>Deliverability and Reputation Management</li>\n<li>Scalability</li>\n<li>Analytics and Tracking</li>\n<li>Compliance and Anti Spam measures</li>\n</ul>\n<h2 id=\"how-to-set-up-smtp\" class=\"group scroll-mt-24\">How to set up SMTP<a href=\"#how-to-set-up-smtp\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Head over to <a href=\"https://supabase.com/dashboard/project/_/settings/auth\">Auth Settings Page</a> and hit \"Enable Custom SMTP\" under the SMTP Provider section.</p>\n<p>Fill in fields below with the relevant details obtained from your custom SMTP provider:</p>\n<p><img src=\"/docs/img/guides/auth-smtp/smtp.png\" alt=\"SMTP settings\"></p>\n<h2 id=\"how-to-update-email-rate-limits\" class=\"group scroll-mt-24\">How to update email rate limits<a href=\"#how-to-update-email-rate-limits\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>After adding a custom SMTP provider, you can head over to <a href=\"https://supabase.com/dashboard/project/_/auth/rate-limits\">Auth &gt; Rate Limits</a> to configure the rate limits for sending emails.</p>\n<h3 id=\"smtp-providers\" class=\"group scroll-mt-24\">SMTP providers<a href=\"#smtp-providers\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<p>You can use Supabase Auth with any major SMTP provider of your choosing. Some SMTP providers you could consider using are:</p>\n<ul>\n<li><a href=\"https://docs.sendgrid.com/for-developers/sending-email/integrating-with-the-smtp-api\">Twilio SendGrid</a></li>\n<li><a href=\"https://docs.aws.amazon.com/ses/latest/dg/send-email-smtp.html\">AWS SES</a></li>\n<li><a href=\"https://resend.com/docs/dashboard/emails/introduction\">Resend</a></li>\n</ul></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-smtp",
        "title": "Configure a Custom SMTP | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Configure%20a%20Custom%20SMTP&description=Moving%20towards%20production%3A%20Configuring%20a%20custom%20SMTP%20provider",
        "ogTitle": "Configure a Custom SMTP | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-smtp",
        "description": "Moving towards production: Configuring a custom SMTP provider",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "ogDescription": "Moving towards production: Configuring a custom SMTP provider",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Enterprise Single Sign-On\n\n* * *\n\nSupabase Auth supports building enterprise applications that require Single Sign-On (SSO) authentication [with SAML 2.0](/docs/guides/auth/sso/auth-sso-saml).",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Enterprise Single Sign-On</h1><hr class=\"not-prose border-t-0 border-b my-8\"><p>Supabase Auth supports building enterprise applications that require Single Sign-On (SSO) authentication <a href=\"/docs/guides/auth/sso/auth-sso-saml\">with SAML 2.0</a>.</p></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/enterprise-sso",
        "title": "Enterprise Single Sign-On | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Enterprise%20Single%20Sign-On&description=Learn%20about%20Single%20Sign-On%20support%20in%20Supabase%20Auth%20for%20enterprise%20applications",
        "ogTitle": "Enterprise Single Sign-On | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/enterprise-sso",
        "description": "Learn about Single Sign-On support in Supabase Auth for enterprise applications",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "ogDescription": "Learn about Single Sign-On support in Supabase Auth for enterprise applications",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# General configuration\n\n## General configuration options for Supabase Auth\n\n* * *\n\nThis section covers the [general configuration options](/dashboard/project/_/settings/auth) for Supabase Auth. If you are looking for another type of configuration, you may be interested in one of the following sections:\n\n- [Provider-specific configuration](/dashboard/project/_/auth/providers)\n- [Rate limits](/dashboard/project/_/auth/rate-limits)\n- [Email Templates](/dashboard/project/_/auth/templates)\n- [Redirect URLs](/dashboard/project/_/auth/url-configuration)\n- [Auth Hooks](/dashboard/project/_/auth/hooks)\n\nSupabase Auth provides these [general configuration options](/dashboard/project/_/settings/auth) to control user access to your application:\n\n- **Allow new users to sign up**: Users will be able to sign up. If this config is disabled, only existing users can sign in.\n\n- **Confirm Email**: Users will need to confirm their email address before signing in for the first time.\n  - Having **Confirm Email** disabled assumes that the user's email does not need to be verified in order to login and implicitly confirms the user's email in the database.\n  - This option can be found in the email provider under the provider-specific configuration.\n- **Allow anonymous sign-ins**: Allow anonymous users to be created.\n\n- **Allow manual linking**: Allow users to link their accounts manually.",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">General configuration</h1><h2 class=\"mt-3 text-xl text-foreground-light\">General configuration options for Supabase Auth</h2><hr class=\"not-prose border-t-0 border-b my-8\"><p>This section covers the <a href=\"/dashboard/project/_/settings/auth\">general configuration options</a> for Supabase Auth. If you are looking for another type of configuration, you may be interested in one of the following sections:</p>\n<ul>\n<li><a href=\"/dashboard/project/_/auth/providers\">Provider-specific configuration</a></li>\n<li><a href=\"/dashboard/project/_/auth/rate-limits\">Rate limits</a></li>\n<li><a href=\"/dashboard/project/_/auth/templates\">Email Templates</a></li>\n<li><a href=\"/dashboard/project/_/auth/url-configuration\">Redirect URLs</a></li>\n<li><a href=\"/dashboard/project/_/auth/hooks\">Auth Hooks</a></li>\n</ul>\n<p>Supabase Auth provides these <a href=\"/dashboard/project/_/settings/auth\">general configuration options</a> to control user access to your application:</p>\n<ul>\n<li>\n<p><strong>Allow new users to sign up</strong>: Users will be able to sign up. If this config is disabled, only existing users can sign in.</p>\n</li>\n<li>\n<p><strong>Confirm Email</strong>: Users will need to confirm their email address before signing in for the first time.</p>\n<ul>\n<li>Having <strong>Confirm Email</strong> disabled assumes that the user's email does not need to be verified in order to login and implicitly confirms the user's email in the database.</li>\n<li>This option can be found in the email provider under the provider-specific configuration.<!-- -->\n<!-- -->\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Allow anonymous sign-ins</strong>: Allow anonymous users to be created.</p>\n</li>\n<li>\n<p><strong>Allow manual linking</strong>: Allow users to link their accounts manually.</p>\n</li>\n</ul></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/general-configuration",
        "title": "General configuration | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=General%20configuration&description=undefined",
        "ogTitle": "General configuration | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/general-configuration",
        "description": "General configuration options for Supabase Auth",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "ogDescription": "General configuration options for Supabase Auth",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# User Management\n\n## View, delete, and export user information.\n\n* * *\n\nYou can view your users on the [Users page](/dashboard/project/_/auth/users) of the Dashboard. You can also view the contents of the Auth schema in the [Table Editor](/dashboard/project/_/editor).\n\n## Accessing user data via API [\\#](\\#accessing-user-data-via-api)\n\nFor security, the Auth schema is not exposed in the auto-generated API. If you want to access users data via the API, you can create your own user tables in the `public` schema.\n\nMake sure to protect the table by enabling [Row Level Security](/docs/guides/database/postgres/row-level-security). Reference the `auth.users` table to ensure data integrity. Specify `on delete cascade` in the reference. For example, a `public.profiles` table might look like this:\n\n`\n_10\ncreate table public.profiles (\n_10\nid uuid not null references auth.users on delete cascade,\n_10\nfirst_name text,\n_10\nlast_name text,\n_10\n_10\nprimary key (id)\n_10\n);\n_10\n_10\nalter table public.profiles enable row level security;\n`\n\nOnly use primary keys as [foreign key references](https://www.postgresql.org/docs/current/tutorial-fk.html) for schemas and tables like `auth.users` which are managed by Supabase. PostgreSQL lets you specify a foreign key reference for columns backed by a unique index (not necessarily primary keys).\n\nPrimary keys are **guaranteed not to change**. Columns, indices, constraints or other database objects managed by Supabase **may change at any time** and you should be careful when referencing them directly.\n\nTo update your `public.profiles` table every time a user signs up, set up a trigger. If the trigger fails, it could block signups, so test your code thoroughly.\n\n`\n_17\n-- inserts a row into public.profiles\n_17\ncreate function public.handle_new_user()\n_17\nreturns trigger\n_17\nlanguage plpgsql\n_17\nsecurity definer set search_path = ''\n_17\nas $$\n_17\nbegin\n_17\ninsert into public.profiles (id, first_name, last_name)\n_17\nvalues (new.id, new.raw_user_meta_data ->> 'first_name', new.raw_user_meta_data ->> 'last_name');\n_17\nreturn new;\n_17\nend;\n_17\n$$;\n_17\n_17\n-- trigger the function every time a user is created\n_17\ncreate trigger on_auth_user_created\n_17\nafter insert on auth.users\n_17\nfor each row execute procedure public.handle_new_user();\n`\n\n## Adding and retrieving user metadata [\\#](\\#adding-and-retrieving-user-metadata)\n\nYou can assign metadata to users on sign up:\n\nJavaScriptDartSwiftKotlin\n\n`\n_10\nconst { data, error } = await supabase.auth.signUp({\n_10\nemail: 'example@email.com',\n_10\npassword: 'example-password',\n_10\noptions: {\n_10\n    data: {\n_10\n      first_name: 'John',\n_10\n      age: 27,\n_10\n    },\n_10\n},\n_10\n})\n`\n\nUser metadata is stored on the `raw_user_meta_data` column of the `auth.users` table. To view the metadata:\n\nJavaScriptDartSwiftKotlin\n\n`\n_10\nconst {\n_10\ndata: { user },\n_10\n} = await supabase.auth.getUser()\n_10\nlet metadata = user.user_metadata\n`\n\n## Deleting users [\\#](\\#deleting-users)\n\nYou may delete users directly or via the management console at Authentication > Users. Note that deleting a user from the `auth.users` table does not automatically sign out a user. As Supabase makes use of JSON Web Tokens (JWT), a user's JWT will remain \"valid\" until it has expired. Should you wish to immediately revoke access for a user, do consider making use of a Row Level Security policy as described below.\n\nYou cannot delete a user if they are the owner of any objects in Supabase Storage.\n\nYou will encounter an error when you try to delete an Auth user that owns any Storage objects. If this happens, try deleting all the objects for that user, or reassign ownership to another user.\n\n## Exporting users [\\#](\\#exporting-users)\n\nAs Supabase is built on top of Postgres, you can query the `auth.users` and `auth.identities` table via the `SQL Editor` tab to extract all users:\n\n`\n_10\nselect * from auth.users;\n`\n\nYou can then export the results as CSV.",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">User Management</h1><h2 class=\"mt-3 text-xl text-foreground-light\">View, delete, and export user information.</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>You can view your users on the <a href=\"/dashboard/project/_/auth/users\">Users page</a> of the Dashboard. You can also view the contents of the Auth schema in the <a href=\"/dashboard/project/_/editor\">Table Editor</a>.</p>\n<h2 id=\"accessing-user-data-via-api\" class=\"group scroll-mt-24\">Accessing user data via API<a href=\"#accessing-user-data-via-api\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>For security, the Auth schema is not exposed in the auto-generated API. If you want to access users data via the API, you can create your own user tables in the <code>public</code> schema.</p>\n<p>Make sure to protect the table by enabling <a href=\"/docs/guides/database/postgres/row-level-security\">Row Level Security</a>. Reference the <code>auth.users</code> table to ensure data integrity. Specify <code>on delete cascade</code> in the reference. For example, a <code>public.profiles</code> table might look like this:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>create table public.profiles (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  id uuid not null references auth.users on delete cascade,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  first_name text,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  last_name text,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  primary key (id)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>);</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>alter table public.profiles enable row level security;</span></div></div><br></code></div></div>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>Only use primary keys as <a href=\"https://www.postgresql.org/docs/current/tutorial-fk.html\">foreign key references</a> for schemas and tables like <code>auth.users</code> which are managed by Supabase. PostgreSQL lets you specify a foreign key reference for columns backed by a unique index (not necessarily primary keys).</p><p>Primary keys are <strong>guaranteed not to change</strong>. Columns, indices, constraints or other database objects managed by Supabase <strong>may change at any time</strong> and you should be careful when referencing them directly.</p></div></div>\n<p>To update your <code>public.profiles</code> table every time a user signs up, set up a trigger. If the trigger fails, it could block signups, so test your code thoroughly.</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>-- inserts a row into public.profiles</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>create function public.handle_new_user()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>returns trigger</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>language plpgsql</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>security definer set search_path = ''</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>as $$</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>begin</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>  insert into public.profiles (id, first_name, last_name)</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>  values (new.id, new.raw_user_meta_data -&gt;&gt; 'first_name', new.raw_user_meta_data -&gt;&gt; 'last_name');</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>  return new;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>end;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>$$;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>-- trigger the function every time a user is created</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>create trigger on_auth_user_created</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>  after insert on auth.users</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->17</span><div style=\"display:inline-block;margin-left:16px\"><span>  for each row execute procedure public.handle_new_user();</span></div></div><br></code></div></div>\n<h2 id=\"adding-and-retrieving-user-metadata\" class=\"group scroll-mt-24\">Adding and retrieving user metadata<a href=\"#adding-and-retrieving-user-metadata\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>You can assign metadata to users on sign up:</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rau9jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Rau9jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rau9jtsn7qb6ra:-content-dart\" data-state=\"inactive\" id=\"radix-:Rau9jtsn7qb6ra:-trigger-dart\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Dart</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rau9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Rau9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rau9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:Rau9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rau9jtsn7qb6ra:-trigger-js\" id=\"radix-:Rau9jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const { data, error } = await supabase.auth.signUp({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  email: 'example@email.com',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  password: 'example-password',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  options: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    data: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>      first_name: 'John',</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>      age: 27,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>})</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rau9jtsn7qb6ra:-trigger-dart\" hidden=\"\" id=\"radix-:Rau9jtsn7qb6ra:-content-dart\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rau9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Rau9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rau9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:Rau9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<p>User metadata is stored on the <code>raw_user_meta_data</code> column of the <code>auth.users</code> table. To view the metadata:</p>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:Rbe9jtsn7qb6ra:-content-js\" data-state=\"active\" id=\"radix-:Rbe9jtsn7qb6ra:-trigger-js\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>JavaScript</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbe9jtsn7qb6ra:-content-dart\" data-state=\"inactive\" id=\"radix-:Rbe9jtsn7qb6ra:-trigger-dart\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Dart</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbe9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:Rbe9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:Rbe9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:Rbe9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-sm leading-4 px-3 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Kotlin</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbe9jtsn7qb6ra:-trigger-js\" id=\"radix-:Rbe9jtsn7qb6ra:-content-js\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>const {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  data: { user },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>} = await supabase.auth.getUser()</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>let metadata = user.user_metadata</span></div></div><br></code></div></div></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbe9jtsn7qb6ra:-trigger-dart\" hidden=\"\" id=\"radix-:Rbe9jtsn7qb6ra:-content-dart\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbe9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:Rbe9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:Rbe9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:Rbe9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div>\n<h2 id=\"deleting-users\" class=\"group scroll-mt-24\">Deleting users<a href=\"#deleting-users\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>You may delete users directly or via the management console at Authentication &gt; Users. Note that deleting a user from the <code>auth.users</code> table does not automatically sign out a user. As Supabase makes use of JSON Web Tokens (JWT), a user's JWT will remain \"valid\" until it has expired. Should you wish to immediately revoke access for a user, do consider making use of a Row Level Security policy as described below.</p>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>You cannot delete a user if they are the owner of any objects in Supabase Storage.</p><p>You will encounter an error when you try to delete an Auth user that owns any Storage objects. If this happens, try deleting all the objects for that user, or reassign ownership to another user.</p></div></div>\n<h2 id=\"exporting-users\" class=\"group scroll-mt-24\">Exporting users<a href=\"#exporting-users\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>As Supabase is built on top of Postgres, you can query the <code>auth.users</code> and <code>auth.identities</code> table via the <code>SQL Editor</code> tab to extract all users:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>select * from auth.users;</span></div></div><br></code></div></div>\n<p>You can then export the results as CSV.</p></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/managing-user-data",
        "title": "User Management | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=User%20Management&description=undefined",
        "ogTitle": "User Management | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/managing-user-data",
        "description": "View, delete, and export user information.",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "ogDescription": "View, delete, and export user information.",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Native Mobile Deep Linking\n\n## Set up Deep Linking for mobile applications.\n\n* * *\n\nMany Auth methods involve a redirect to your app. For example:\n\n- Signup confirmation emails, Magic Link signins, and password reset emails contain a link that redirects to your app.\n- In OAuth signins, an automatic redirect occurs to your app.\n\nWith Deep Linking, you can configure this redirect to open a specific page. This is necessary if, for example, you need to display a form for password reset, or to manually exchange a token hash.\n\n## Setting up Deep Linking [\\#](\\#setting-up-deep-linking)\n\nExpo React NativeFlutterSwiftAndroid Kotlin\n\nTo link to your development build or standalone app, you need to specify a custom URL scheme for your app. You can register a scheme in your app config (app.json, app.config.js) by adding a string under the `scheme` key:\n\n`\n_10\n{\n_10\n\"expo\": {\n_10\n    \"scheme\": \"com.supabase\"\n_10\n}\n_10\n}\n`\n\nIn your project's [auth settings](https://supabase.com/dashboard/project/_/auth/url-configuration) add the redirect URL, e.g. `com.supabase://**`.\n\nFinally, implement the OAuth and linking handlers. See the [supabase-js reference](/docs/reference/javascript/initializing?example=react-native-options-async-storage) for instructions on initializing the supabase-js client in React Native.\n\n./components/Auth.tsx\n\n`\n_71\nimport { Button } from \"react-native\";\n_71\nimport { makeRedirectUri } from \"expo-auth-session\";\n_71\nimport * as QueryParams from \"expo-auth-session/build/QueryParams\";\n_71\nimport * as WebBrowser from \"expo-web-browser\";\n_71\nimport * as Linking from \"expo-linking\";\n_71\nimport { supabase } from \"app/utils/supabase\";\n_71\n_71\nWebBrowser.maybeCompleteAuthSession(); // required for web only\n_71\nconst redirectTo = makeRedirectUri();\n_71\n_71\nconst createSessionFromUrl = async (url: string) => {\n_71\nconst { params, errorCode } = QueryParams.getQueryParams(url);\n_71\n_71\nif (errorCode) throw new Error(errorCode);\n_71\nconst { access_token, refresh_token } = params;\n_71\n_71\nif (!access_token) return;\n_71\n_71\nconst { data, error } = await supabase.auth.setSession({\n_71\n    access_token,\n_71\n    refresh_token,\n_71\n});\n_71\nif (error) throw error;\n_71\nreturn data.session;\n_71\n};\n_71\n_71\nconst performOAuth = async () => {\n_71\nconst { data, error } = await supabase.auth.signInWithOAuth({\n_71\n    provider: \"github\",\n_71\n    options: {\n_71\n      redirectTo,\n_71\n      skipBrowserRedirect: true,\n_71\n    },\n_71\n});\n_71\nif (error) throw error;\n_71\n_71\nconst res = await WebBrowser.openAuthSessionAsync(\n_71\n    data?.url ?? \"\",\n_71\n    redirectTo\n_71\n);\n_71\n_71\nif (res.type === \"success\") {\n_71\n    const { url } = res;\n_71\n    await createSessionFromUrl(url);\n_71\n}\n_71\n};\n_71\n_71\nconst sendMagicLink = async () => {\n_71\nconst { error } = await supabase.auth.signInWithOtp({\n_71\n    email: \"example@email.com\",\n_71\n    options: {\n_71\n      emailRedirectTo: redirectTo,\n_71\n    },\n_71\n});\n_71\n_71\nif (error) throw error;\n_71\n// Email sent.\n_71\n};\n_71\n_71\nexport default function Auth() {\n_71\n// Handle linking into app from email app.\n_71\nconst url = Linking.useURL();\n_71\nif (url) createSessionFromUrl(url);\n_71\n_71\nreturn (\n_71\n    <>\n_71\n      <Button onPress={performOAuth} title=\"Sign in with Github\" />\n_71\n      <Button onPress={sendMagicLink} title=\"Send Magic Link\" />\n_71\n    </>\n_71\n);\n_71\n}\n`\n\nFor the best user experience it is recommended to use universal links which require a more elaborate setup. You can find the detailed setup instructions in the [Expo docs](https://docs.expo.dev/guides/deep-linking/).",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Native Mobile Deep Linking</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Set up Deep Linking for mobile applications.</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>Many Auth methods involve a redirect to your app. For example:</p>\n<ul>\n<li>Signup confirmation emails, Magic Link signins, and password reset emails contain a link that redirects to your app.</li>\n<li>In OAuth signins, an automatic redirect occurs to your app.</li>\n</ul>\n<p>With Deep Linking, you can configure this redirect to open a specific page. This is necessary if, for example, you need to display a form for password reset, or to manually exchange a token hash.</p>\n<h2 id=\"setting-up-deep-linking\" class=\"group scroll-mt-24\">Setting up Deep Linking<a href=\"#setting-up-deep-linking\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<div dir=\"ltr\" data-orientation=\"horizontal\" class=\"w-full justify-between space-y-4 \"><div role=\"tablist\" aria-orientation=\"horizontal\" class=\" flex items-center border-b border-secondary  overflow-auto whitespace-nowrap no-scrollbar mask-fadeout-right flex-wrap\" tabindex=\"-1\" data-orientation=\"horizontal\" style=\"outline:none\"><button type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"radix-:R3e9jtsn7qb6ra:-content-react-native\" data-state=\"active\" id=\"radix-:R3e9jtsn7qb6ra:-trigger-react-native\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-base px-4 py-2  !text-foreground border-b-2 border-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Expo React Native</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R3e9jtsn7qb6ra:-content-flutter\" data-state=\"inactive\" id=\"radix-:R3e9jtsn7qb6ra:-trigger-flutter\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-base px-4 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Flutter</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R3e9jtsn7qb6ra:-content-swift\" data-state=\"inactive\" id=\"radix-:R3e9jtsn7qb6ra:-trigger-swift\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-base px-4 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Swift</span></button><button type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"radix-:R3e9jtsn7qb6ra:-content-kotlin\" data-state=\"inactive\" id=\"radix-:R3e9jtsn7qb6ra:-trigger-kotlin\" class=\" relative cursor-pointer text-foreground-lighter flex items-center space-x-2 text-center transition focus:outline-none focus-visible:ring focus-visible:ring-foreground-muted focus-visible:border-foreground-muted  text-base px-4 py-2  hover:text-foreground \" tabindex=\"-1\" data-orientation=\"horizontal\" data-radix-collection-item=\"\"><span>Android Kotlin</span></button></div><div data-state=\"active\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R3e9jtsn7qb6ra:-trigger-react-native\" id=\"radix-:R3e9jtsn7qb6ra:-content-react-native\" tabindex=\"0\" class=\"focus:outline-none transition-height \" style=\"animation-duration:0s\"><p>To link to your development build or standalone app, you need to specify a custom URL scheme for your app. You can register a scheme in your app config (app.json, app.config.js) by adding a string under the <code>scheme</code> key:</p><div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>{</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  \"expo\": {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>    \"scheme\": \"com.supabase\"</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div><p>In your project's <a href=\"https://supabase.com/dashboard/project/_/auth/url-configuration\">auth settings</a> add the redirect URL, e.g. <code>com.supabase://**</code>.</p><p>Finally, implement the OAuth and linking handlers. See the <a href=\"/docs/reference/javascript/initializing?example=react-native-options-async-storage\">supabase-js reference</a> for instructions on initializing the supabase-js client in React Native.</p><div class=\"ch-codegroup not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-editor-frame\"><div class=\"ch-frame-title-bar\"><div class=\"ch-frame-buttons\"><div class=\"ch-frame-button ch-frame-button-left\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-middle\"></div><div class=\"ch-frame-button-space\"></div><div class=\"ch-frame-button ch-frame-button-right\"></div></div><div title=\"./components/Auth.tsx\" data-ch-tab=\"north\" data-active=\"true\" class=\"ch-editor-tab\"><div><span style=\"opacity:0.5\">./components/</span>Auth.tsx</div></div><div style=\"flex:1;min-width:0.8em\"></div><button type=\"button\" title=\"Copy code\" class=\"ch-editor-button\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.6px\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg></button></div><div data-ch-panel=\"north\" style=\"flex-grow:1;overflow:hidden\"><div style=\"height:100%\" class=\"ch-code-wrapper \" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>import { Button } from \"react-native\";</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>import { makeRedirectUri } from \"expo-auth-session\";</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>import * as QueryParams from \"expo-auth-session/build/QueryParams\";</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>import * as WebBrowser from \"expo-web-browser\";</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>import * as Linking from \"expo-linking\";</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>import { supabase } from \"app/utils/supabase\";</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>WebBrowser.maybeCompleteAuthSession(); // required for web only</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>const redirectTo = makeRedirectUri();</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>const createSessionFromUrl = async (url: string) =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  const { params, errorCode } = QueryParams.getQueryParams(url);</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  if (errorCode) throw new Error(errorCode);</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  const { access_token, refresh_token } = params;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  if (!access_token) return;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  const { data, error } = await supabase.auth.setSession({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>    access_token,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>    refresh_token,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  });</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  if (error) throw error;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  return data.session;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>};</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>const performOAuth = async () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  const { data, error } = await supabase.auth.signInWithOAuth({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>    provider: \"github\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>    options: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>      redirectTo,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>      skipBrowserRedirect: true,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>    },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  });</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  if (error) throw error;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  const res = await WebBrowser.openAuthSessionAsync(</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>    data?.url ?? \"\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>    redirectTo</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  );</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  if (res.type === \"success\") {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>    const { url } = res;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>    await createSessionFromUrl(url);</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  }</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>};</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>const sendMagicLink = async () =&gt; {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  const { error } = await supabase.auth.signInWithOtp({</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>    email: \"example@email.com\",</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>    options: {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>      emailRedirectTo: redirectTo,</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>    },</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  });</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  if (error) throw error;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  // Email sent.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>};</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>export default function Auth() {</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  // Handle linking into app from email app.</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  const url = Linking.useURL();</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  if (url) createSessionFromUrl(url);</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span></span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  return (</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;Button onPress={performOAuth} title=\"Sign in with Github\" /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>      &lt;Button onPress={sendMagicLink} title=\"Send Magic Link\" /&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>    &lt;/&gt;</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>  );</span></div></div><div><span class=\"ch-code-line-number\">_<!-- -->71</span><div style=\"display:inline-block;margin-left:16px\"><span>}</span></div></div><br></code></div></div></div></div><p>For the best user experience it is recommended to use universal links which require a more elaborate setup. You can find the detailed setup instructions in the <a href=\"https://docs.expo.dev/guides/deep-linking/\">Expo docs</a>.</p></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R3e9jtsn7qb6ra:-trigger-flutter\" hidden=\"\" id=\"radix-:R3e9jtsn7qb6ra:-content-flutter\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R3e9jtsn7qb6ra:-trigger-swift\" hidden=\"\" id=\"radix-:R3e9jtsn7qb6ra:-content-swift\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div><div data-state=\"inactive\" data-orientation=\"horizontal\" role=\"tabpanel\" aria-labelledby=\"radix-:R3e9jtsn7qb6ra:-trigger-kotlin\" hidden=\"\" id=\"radix-:R3e9jtsn7qb6ra:-content-kotlin\" tabindex=\"0\" class=\"focus:outline-none transition-height \"></div></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/native-mobile-deep-linking",
        "title": "Native Mobile Deep Linking | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Native%20Mobile%20Deep%20Linking&description=undefined",
        "ogTitle": "Native Mobile Deep Linking | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/native-mobile-deep-linking",
        "description": "Set up Deep Linking for mobile applications.",
        "modifiedTime": "2024-09-10T20:36:24.980Z",
        "ogDescription": "Set up Deep Linking for mobile applications.",
        "publishedTime": "2024-09-10T20:36:24.980Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Rate limits\n\n## Rate limits protect your services from abuse\n\n* * *\n\nSupabase Auth enforces rate limits on endpoints to prevent abuse. Some rate limits are [customizable](/dashboard/project/_/auth/rate-limits).\n\n| Endpoint | Path | Limited By | Rate Limit |\n| --- | --- | --- | --- |\n| All endpoints that send emails | `/auth/v1/signup` `/auth/v1/recover` `/auth/v1/user` [1](#user-content-fn-1) | Sum of combined requests | Defaults to 4 emails per hour as of 14th July 2023. As of 21 Oct 2023, this has been updated to 2 emails per hour. You can only change this with your own custom SMTP setup. |\n| All endpoints that send One-Time-Passwords (OTP) | `/auth/v1/otp` | Sum of combined requests | Defaults to 30 OTPs per hour. Is customizable. |\n| Send OTPs or magiclinks | `/auth/v1/otp` | Last request | Defaults to 60 seconds window before a new request is allowed. Is customizable. |\n| Signup confirmation request | `/auth/v1/signup` | Last request | Defaults to 60 seconds window before a new request is allowed. Is customizable. |\n| Password Reset Request | `/auth/v1/recover` | Last request | Defaults to 60 seconds window before a new request is allowed. Is customizable. |\n| Verification requests | `/auth/v1/verify` | IP Address | 360 requests per hour (with bursts up to 30 requests) |\n| Token refresh requests | `/auth/v1/token` | IP Address | 1800 requests per hour (with bursts up to 30 requests) |\n| Create or Verify an MFA challenge | `/auth/v1/factors/:id/challenge` `/auth/v1/factors/:id/verify` | IP Address | 15 requests per hour (with bursts up to  requests) |\n| Anonymous sign-ins | `/auth/v1/signup` [2](#user-content-fn-2) | IP Address | 30 requests per hour (with bursts up to 30 requests) |\n\n## Footnotes [\\#](\\#footnote-label)\n\n1. The rate limit is only applied on `/auth/v1/user` if this endpoint is called to update the user's email address. [\u21a9](#user-content-fnref-1)\n\n2. The rate limit is only applied on `/auth/v1/signup` if this endpoint is called without passing in an email or phone number in the request body. [\u21a9](#user-content-fnref-2)",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Rate limits</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Rate limits protect your services from abuse</h2><hr class=\"not-prose border-t-0 border-b my-8\"><p>Supabase Auth enforces rate limits on endpoints to prevent abuse. Some rate limits are <a href=\"/dashboard/project/_/auth/rate-limits\">customizable</a>.</p>\n<table><thead><tr><th>Endpoint</th><th>Path</th><th>Limited By</th><th>Rate Limit</th></tr></thead><tbody><tr><td>All endpoints that send emails</td><td><code>/auth/v1/signup</code> <code>/auth/v1/recover</code> <code>/auth/v1/user</code><sup><a href=\"#user-content-fn-1\" id=\"user-content-fnref-1\" data-footnote-ref=\"true\" aria-describedby=\"footnote-label\">1</a></sup></td><td>Sum of combined requests</td><td>Defaults to 4 emails per hour as of 14th July 2023. As of 21 Oct 2023, this has been updated to <!-- -->2<!-- --> emails per hour. You can only change this with your own custom SMTP setup.</td></tr><tr><td>All endpoints that send One-Time-Passwords (OTP)</td><td><code>/auth/v1/otp</code></td><td>Sum of combined requests</td><td>Defaults to <!-- -->30<!-- --> OTPs per hour. Is customizable.</td></tr><tr><td>Send OTPs or magiclinks</td><td><code>/auth/v1/otp</code></td><td>Last request</td><td>Defaults to <!-- -->60 seconds<!-- --> window before a new request is allowed. Is customizable.</td></tr><tr><td>Signup confirmation request</td><td><code>/auth/v1/signup</code></td><td>Last request</td><td>Defaults to <!-- -->60 seconds<!-- --> window before a new request is allowed. Is customizable.</td></tr><tr><td>Password Reset Request</td><td><code>/auth/v1/recover</code></td><td>Last request</td><td>Defaults to <!-- -->60 seconds<!-- --> window before a new request is allowed. Is customizable.</td></tr><tr><td>Verification requests</td><td><code>/auth/v1/verify</code></td><td>IP Address</td><td>360<!-- --> requests per hour (with bursts up to <!-- -->30<!-- --> requests)</td></tr><tr><td>Token refresh requests</td><td><code>/auth/v1/token</code></td><td>IP Address</td><td>1800<!-- --> requests per hour (with bursts up to <!-- -->30<!-- --> requests)</td></tr><tr><td>Create or Verify an MFA challenge</td><td><code>/auth/v1/factors/:id/challenge</code> <code>/auth/v1/factors/:id/verify</code></td><td>IP Address</td><td>15<!-- --> requests per hour (with bursts up to <!-- --> requests)</td></tr><tr><td>Anonymous sign-ins</td><td><code>/auth/v1/signup</code><sup><a href=\"#user-content-fn-2\" id=\"user-content-fnref-2\" data-footnote-ref=\"true\" aria-describedby=\"footnote-label\">2</a></sup></td><td>IP Address</td><td>30<!-- --> requests per hour (with bursts up to <!-- -->30<!-- --> requests)</td></tr></tbody></table>\n<section data-footnotes=\"true\" class=\"footnotes\"><h2 id=\"footnote-label\" class=\"sr-only\">Footnotes<a href=\"#footnote-label\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<ol>\n<li id=\"user-content-fn-1\">\n<p>The rate limit is only applied on <code>/auth/v1/user</code> if this endpoint is called to update the user's email address. <a href=\"#user-content-fnref-1\" data-footnote-backref=\"true\" class=\"data-footnote-backref\" aria-label=\"Back to content\">\u21a9</a></p>\n</li>\n<li id=\"user-content-fn-2\">\n<p>The rate limit is only applied on <code>/auth/v1/signup</code> if this endpoint is called without passing in an email or phone number in the request body. <a href=\"#user-content-fnref-2\" data-footnote-backref=\"true\" class=\"data-footnote-backref\" aria-label=\"Back to content\">\u21a9</a></p>\n</li>\n</ol>\n</section></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/rate-limits",
        "title": "Rate limits | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Rate%20limits&description=undefined",
        "ogTitle": "Rate limits | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/rate-limits",
        "description": "Rate limits protect your services from abuse",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "ogDescription": "Rate limits protect your services from abuse",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Implicit flow\n\n## About authenticating with implicit flow.\n\n* * *\n\nThe implicit flow is one of two ways that a user can authenticate and your app can receive the necessary access and refresh tokens.\n\nThe flow is an implementation detail handled for you by Supabase Auth, but understanding the difference between implicit and [PKCE flow](/docs/guides/auth/sessions/pkce-flow) is important for understanding the difference between client-only and server-side auth.\n\n## How it works [\\#](\\#how-it-works)\n\nAfter a successful signin, the user is redirected to your app with a URL that looks like this:\n\n`\n_10\nhttps://yourapp.com/...#access_token=<...>&refresh_token=<...>&...\n`\n\nThe access and refresh tokens are contained in the URL fragment.\n\nThe client libraries:\n\n- Detect this type of URL\n- Extract the access token, refresh token, and some extra information\n- Persist this information to local storage for further use by the library and your app\n\n## Limitations [\\#](\\#limitations)\n\nThe implicit flow only works on the client. Web browsers do not send the URL fragment to the server by design. This is a security feature:\n\n- You may be hosting your single-page app on a third-party server. The third-party service shouldn't get access to your user's credentials.\n- Even if the server is under your direct control, `GET` requests and their full URLs are often logged. This approach avoids leaking credentials in request or access logs.\n\nIf you wish to obtain the access token and refresh token on a server, use the [PKCE flow](/docs/guides/auth/sessions/pkce-flow).",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Implicit flow</h1><h2 class=\"mt-3 text-xl text-foreground-light\">About authenticating with implicit flow.</h2><hr class=\"not-prose border-t-0 border-b my-8\">\n<p>The implicit flow is one of two ways that a user can authenticate and your app can receive the necessary access and refresh tokens.</p>\n<p>The flow is an implementation detail handled for you by Supabase Auth, but understanding the difference between implicit and <a href=\"/docs/guides/auth/sessions/pkce-flow\">PKCE flow</a> is important for understanding the difference between client-only and server-side auth.</p>\n<h2 id=\"how-it-works\" class=\"group scroll-mt-24\">How it works<a href=\"#how-it-works\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>After a successful signin, the user is redirected to your app with a URL that looks like this:</p>\n<div class=\"ch-codeblock not-prose \" data-ch-theme=\"supabase\"><div class=\"ch-code-wrapper ch-code\" data-ch-measured=\"false\"><code class=\"ch-code-scroll-parent\"><br><div><span class=\"ch-code-line-number\">_<!-- -->10</span><div style=\"display:inline-block;margin-left:16px\"><span>https://yourapp.com/...#access_token=&lt;...&gt;&amp;refresh_token=&lt;...&gt;&amp;...</span></div></div><br></code></div></div>\n<p>The access and refresh tokens are contained in the URL fragment.</p>\n<p>The client libraries:</p>\n<ul>\n<li>Detect this type of URL</li>\n<li>Extract the access token, refresh token, and some extra information</li>\n<li>Persist this information to local storage for further use by the library and your app</li>\n</ul>\n<h2 id=\"limitations\" class=\"group scroll-mt-24\">Limitations<a href=\"#limitations\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>The implicit flow only works on the client. Web browsers do not send the URL fragment to the server by design. This is a security feature:</p>\n<ul>\n<li>You may be hosting your single-page app on a third-party server. The third-party service shouldn't get access to your user's credentials.</li>\n<li>Even if the server is under your direct control, <code>GET</code> requests and their full URLs are often logged. This approach avoids leaking credentials in request or access logs.</li>\n</ul>\n<p>If you wish to obtain the access token and refresh token on a server, use the <a href=\"/docs/guides/auth/sessions/pkce-flow\">PKCE flow</a>.</p></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/sessions/implicit-flow",
        "title": "Implicit flow | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Implicit%20flow&description=undefined",
        "ogTitle": "Implicit flow | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/sessions/implicit-flow",
        "description": "About authenticating with implicit flow.",
        "modifiedTime": "2024-09-10T20:36:24.980Z",
        "ogDescription": "About authenticating with implicit flow.",
        "publishedTime": "2024-09-10T20:36:24.980Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Users\n\n* * *\n\nA **user** in Supabase Auth is someone with a user ID, stored in the Auth schema. Once someone is a user, they can be issued an Access Token, which can be used to access Supabase endpoints. The token is tied to the user, so you can restrict access to resources via [RLS policies](/docs/guides/database/postgres/row-level-security).\n\n## Permanent and anonymous users [\\#](\\#permanent-and-anonymous-users)\n\nSupabase distinguishes between permanent and anonymous users.\n\n- **Permanent users** are tied to a piece of Personally Identifiable Information (PII), such as an email address, a phone number, or a third-party identity. They can use these identities to sign back into their account after signing out.\n- **Anonymous users** aren't tied to any identities. They have a user ID and a personalized Access Token, but they have no way of signing back in as the same user if they are signed out.\n\nAnonymous users are useful for:\n\n- E-commerce applications, to create shopping carts before checkout\n- Full-feature demos without collecting personal information\n- Temporary or throw-away accounts\n\nSee the [Anonymous Signins guide](/docs/guides/auth/auth-anonymous) to learn more about anonymous users.\n\n##### Anonymous users do not use the anon role\n\nJust like permanent users, anonymous users use the **authenticated** role for database access.\n\nThe **anon** role is for those who aren't signed in at all and are not tied to any user ID. We refer to these as unauthenticated or public users.\n\n## The user object [\\#](\\#the-user-object)\n\nThe user object stores all the information related to a user in your application. The user object can be retrieved using one of these methods:\n\n1. [`supabase.auth.getUser()`](/docs/reference/javascript/auth-getuser)\n2. Retrieve a user object as an admin using [`supabase.auth.admin.getUserById()`](/docs/reference/javascript/auth-admin-listusers)\n\nA user can sign in with one of the following methods:\n\n- Password-based method (with email or phone)\n- Passwordless method (with email or phone)\n- OAuth\n- SAML SSO\n\nAn identity describes the authentication method that a user can use to sign in. A user can have multiple identities. These are the types of identities supported:\n\n- Email\n- Phone\n- OAuth\n- SAML\n\nA user with an email or phone identity will be able to sign in with either a password or passwordless method (e.g. use a one-time password (OTP) or magiclink). By default, a user with an unverified email or phone number will not be able to sign in.\n\nThe user object contains the following attributes:\n\n| Attributes | Type | Description |\n| --- | --- | --- |\n| id | `string` | The unique id of the identity of the user. |\n| aud | `string` | The audience claim. |\n| role | `string` | The role claim used by Postgres to perform Row Level Security (RLS) checks. |\n| email | `string` | The user's email address. |\n| email\\_confirmed\\_at | `string` | The timestamp that the user's email was confirmed. If null, it means that the user's email is not confirmed. |\n| phone | `string` | The user's phone number. |\n| phone\\_confirmed\\_at | `string` | The timestamp that the user's phone was confirmed. If null, it means that the user's phone is not confirmed. |\n| confirmed\\_at | `string` | The timestamp that either the user's email or phone was confirmed. If null, it means that the user does not have a confirmed email address and phone number. |\n| last\\_sign\\_in\\_at | `string` | The timestamp that the user last signed in. |\n| app\\_metadata | `object` | The `provider` attribute indicates the first provider that the user used to sign up with. The `providers` attribute indicates the list of providers that the user can use to login with. |\n| user\\_metadata | `object` | Defaults to the first provider's identity data but can contain additional custom user metadata if specified. Refer to [**User Identity**](/docs/guides/auth/auth-identity-linking#the-user-identity) for more information about the identity object. |\n| identities | `UserIdentity[]` | Contains an object array of identities linked to the user. |\n| created\\_at | `string` | The timestamp that the user was created. |\n| updated\\_at | `string` | The timestamp that the user was last updated. |\n| is\\_anonymous | `boolean` | Is true if the user is an anonymous user. |\n\n## Resources [\\#](\\#resources)\n\n- [User Management guide](/docs/guides/auth/managing-user-data)",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Users</h1><hr class=\"not-prose border-t-0 border-b my-8\"><p>A <strong>user</strong> in Supabase Auth is someone with a user ID, stored in the Auth schema. Once someone is a user, they can be issued an Access Token, which can be used to access Supabase endpoints. The token is tied to the user, so you can restrict access to resources via <a href=\"/docs/guides/database/postgres/row-level-security\">RLS policies</a>.</p>\n<h2 id=\"permanent-and-anonymous-users\" class=\"group scroll-mt-24\">Permanent and anonymous users<a href=\"#permanent-and-anonymous-users\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Supabase distinguishes between permanent and anonymous users.</p>\n<ul>\n<li><strong>Permanent users</strong> are tied to a piece of Personally Identifiable Information (PII), such as an email address, a phone number, or a third-party identity. They can use these identities to sign back into their account after signing out.</li>\n<li><strong>Anonymous users</strong> aren't tied to any identities. They have a user ID and a personalized Access Token, but they have no way of signing back in as the same user if they are signed out.</li>\n</ul>\n<p>Anonymous users are useful for:</p>\n<ul>\n<li>E-commerce applications, to create shopping carts before checkout</li>\n<li>Full-feature demos without collecting personal information</li>\n<li>Temporary or throw-away accounts</li>\n</ul>\n<p>See the <a href=\"/docs/guides/auth/auth-anonymous\">Anonymous Signins guide</a> to learn more about anonymous users.</p>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><h5 class=\"mb-1 text mt-0.5 flex gap-3 text-sm [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 flex-col\">Anonymous users do not use the anon role</h5><div class=\"text-sm [&amp;_p]:leading-relaxed text-foreground-light font-normal mt-3 [&amp;_p]:mb-1.5 [&amp;_p]:mt-0\"><p>Just like permanent users, anonymous users use the <strong>authenticated</strong> role for database access.</p><p>The <strong>anon</strong> role is for those who aren't signed in at all and are not tied to any user ID. We refer to these as unauthenticated or public users.</p></div></div>\n<h2 id=\"the-user-object\" class=\"group scroll-mt-24\">The user object<a href=\"#the-user-object\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>The user object stores all the information related to a user in your application. The user object can be retrieved using one of these methods:</p>\n<ol>\n<li><a href=\"/docs/reference/javascript/auth-getuser\"><code>supabase.auth.getUser()</code></a></li>\n<li>Retrieve a user object as an admin using <a href=\"/docs/reference/javascript/auth-admin-listusers\"><code>supabase.auth.admin.getUserById()</code></a></li>\n</ol>\n<p>A user can sign in with one of the following methods:</p>\n<ul>\n<li>Password-based method (with email or phone)</li>\n<li>Passwordless method (with email or phone)</li>\n<li>OAuth</li>\n<li>SAML SSO</li>\n</ul>\n<p>An identity describes the authentication method that a user can use to sign in. A user can have multiple identities. These are the types of identities supported:</p>\n<ul>\n<li>Email</li>\n<li>Phone</li>\n<li>OAuth</li>\n<li>SAML</li>\n</ul>\n<div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded text-foreground [&amp;>svg]:text-background [&amp;>svg]:bg-foreground mb-2 [&amp;_svg]:bg-foreground-muted [&amp;_svg]:text-background-muted bg-surface-200/25 border border-default\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>A user with an email or phone identity will be able to sign in with either a password or passwordless method (e.g. use a one-time password (OTP) or magiclink). By default, a user with an unverified email or phone number will not be able to sign in.</p></div></div>\n<p>The user object contains the following attributes:</p>\n<table><thead><tr><th>Attributes</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td><code>string</code></td><td>The unique id of the identity of the user.</td></tr><tr><td>aud</td><td><code>string</code></td><td>The audience claim.</td></tr><tr><td>role</td><td><code>string</code></td><td>The role claim used by Postgres to perform Row Level Security (RLS) checks.</td></tr><tr><td>email</td><td><code>string</code></td><td>The user's email address.</td></tr><tr><td>email_confirmed_at</td><td><code>string</code></td><td>The timestamp that the user's email was confirmed. If null, it means that the user's email is not confirmed.</td></tr><tr><td>phone</td><td><code>string</code></td><td>The user's phone number.</td></tr><tr><td>phone_confirmed_at</td><td><code>string</code></td><td>The timestamp that the user's phone was confirmed. If null, it means that the user's phone is not confirmed.</td></tr><tr><td>confirmed_at</td><td><code>string</code></td><td>The timestamp that either the user's email or phone was confirmed. If null, it means that the user does not have a confirmed email address and phone number.</td></tr><tr><td>last_sign_in_at</td><td><code>string</code></td><td>The timestamp that the user last signed in.</td></tr><tr><td>app_metadata</td><td><code>object</code></td><td>The <code>provider</code> attribute indicates the first provider that the user used to sign up with. The <code>providers</code> attribute indicates the list of providers that the user can use to login with.</td></tr><tr><td>user_metadata</td><td><code>object</code></td><td>Defaults to the first provider's identity data but can contain additional custom user metadata if specified. Refer to <a href=\"/docs/guides/auth/auth-identity-linking#the-user-identity\"><strong>User Identity</strong></a> for more information about the identity object.</td></tr><tr><td>identities</td><td><code>UserIdentity[]</code></td><td>Contains an object array of identities linked to the user.</td></tr><tr><td>created_at</td><td><code>string</code></td><td>The timestamp that the user was created.</td></tr><tr><td>updated_at</td><td><code>string</code></td><td>The timestamp that the user was last updated.</td></tr><tr><td>is_anonymous</td><td><code>boolean</code></td><td>Is true if the user is an anonymous user.</td></tr></tbody></table>\n<h2 id=\"resources\" class=\"group scroll-mt-24\">Resources<a href=\"#resources\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<ul>\n<li><a href=\"/docs/guides/auth/managing-user-data\">User Management guide</a></li>\n</ul></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/users",
        "title": "Users | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Users&description=undefined",
        "ogTitle": "Users | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/users",
        "modifiedTime": "2024-09-10T20:36:24.564Z",
        "publishedTime": "2024-09-10T20:36:24.564Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Auth Helpers\n\n* * *\n\nThe Auth helpers package is in maintenance mode and we won\u2019t be actively improving it. We strongly recommend using the new `@supabase/ssr` package instead of `auth-helpers`. `@supabase/ssr` takes the core concepts of the Auth Helpers package and makes them available to any server framework. Check out the [migration doc](/docs/guides/auth/server-side/migrating-to-ssr-from-auth-helpers) to learn more.\n\nWorking with server-side frameworks is slightly different to client-side frameworks. In this section we cover the various ways of handling server-side authentication and demonstrate how to use the Supabase helper-libraries to make the process more seamless.\n\n[**Next.js** \\\\\n\\\\\nHelpers for authenticating users in Next.js applications.](/docs/guides/auth/auth-helpers/nextjs)\n\n[**SvelteKit** \\\\\n\\\\\nHelpers for authenticating users in SvelteKit applications.](/docs/guides/auth/auth-helpers/sveltekit)\n\n[**Remix** \\\\\n\\\\\nHelpers for authenticating users in Remix applications.](/docs/guides/auth/auth-helpers/remix)\n\n## Status [\\#](\\#status)\n\nThe Auth Helpers are in `beta`. They are usable in their current state, but it's likely that there will be breaking changes.\n\n## Additional links [\\#](\\#additional-links)\n\n- [Source code](https://github.com/supabase/auth-helpers)\n- [Known bugs and issues](https://github.com/supabase/auth-helpers/issues)",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Auth Helpers</h1><hr class=\"not-prose border-t-0 border-b my-8\"><div role=\"alert\" class=\"relative w-full text-sm rounded-lg p-4 [&amp;>svg~*]:pl-10 [&amp;>svg+div]:translate-y-[-3px] [&amp;>svg]:absolute [&amp;>svg]:left-4 [&amp;>svg]:top-4 [&amp;>svg]:w-[23px] [&amp;>svg]:h-[23px] [&amp;>svg]:p-1 [&amp;>svg]:flex [&amp;>svg]:rounded [&amp;>svg]:text-warning-200 [&amp;>svg]:bg-warning-600 mb-2 [&amp;_svg]:bg-warning [&amp;_svg]:text-warning-100 bg-alternative border border-default ![&amp;_p]:text-background-muted\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 20\" class=\"w-6 h-6\" fill=\"currentColor\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z\"></path></svg><div class=\"text mt [&amp;_p]:mb-1.5 [&amp;_p]:mt-0 mt-0.5 [&amp;_p:last-child]:mb-0\"><p>The Auth helpers package is in maintenance mode and we won\u2019t be actively improving it. We strongly recommend using the new <code>@supabase/ssr</code> package instead of <code>auth-helpers</code>. <code>@supabase/ssr</code> takes the core concepts of the Auth Helpers package and makes them available to any server framework. Check out the <a href=\"/docs/guides/auth/server-side/migrating-to-ssr-from-auth-helpers\">migration doc</a> to learn more.</p></div></div>\n<p>Working with server-side frameworks is slightly different to client-side frameworks. In this section we cover the various ways of handling server-side authentication and demonstrate how to use the Supabase helper-libraries to make the process more seamless.</p>\n<div class=\"container\" style=\"padding:0\"><div class=\"grid md:grid-cols-12 gap-4\"><div class=\"col-span-6\"><a class=\"h-full block shadow-none bg-surface-100 rounded transition border border-transparent hover:border-overlay\" href=\"/docs/guides/auth/auth-helpers/nextjs\"><div class=\"px-6 py-4 gap-x-4 gap-y-2 flex flex-col\"><h3 class=\"my-0 text-base text-foreground\">Next.js</h3><p class=\"my-0 text-sm\">Helpers for authenticating users in Next.js applications.</p></div></a></div><div class=\"col-span-6\"><a class=\"h-full block shadow-none bg-surface-100 rounded transition border border-transparent hover:border-overlay\" href=\"/docs/guides/auth/auth-helpers/sveltekit\"><div class=\"px-6 py-4 gap-x-4 gap-y-2 flex flex-col\"><h3 class=\"my-0 text-base text-foreground\">SvelteKit</h3><p class=\"my-0 text-sm\">Helpers for authenticating users in SvelteKit applications.</p></div></a></div><div class=\"col-span-6\"><a class=\"h-full block shadow-none bg-surface-100 rounded transition border border-transparent hover:border-overlay\" href=\"/docs/guides/auth/auth-helpers/remix\"><div class=\"px-6 py-4 gap-x-4 gap-y-2 flex flex-col\"><h3 class=\"my-0 text-base text-foreground\">Remix</h3><p class=\"my-0 text-sm\">Helpers for authenticating users in Remix applications.</p></div></a></div></div></div>\n<h2 id=\"status\" class=\"group scroll-mt-24\">Status<a href=\"#status\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>The Auth Helpers are in <code>beta</code>. They are usable in their current state, but it's likely that there will be breaking changes.</p>\n<h2 id=\"additional-links\" class=\"group scroll-mt-24\">Additional links<a href=\"#additional-links\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<ul>\n<li><a href=\"https://github.com/supabase/auth-helpers\">Source code</a></li>\n<li><a href=\"https://github.com/supabase/auth-helpers/issues\">Known bugs and issues</a></li>\n</ul></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth/auth-helpers",
        "title": "Auth Helpers | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Auth%20Helpers&description=Server-Side%20Auth%20guides%20and%20utilities%20for%20working%20with%20Supabase.",
        "ogTitle": "Auth Helpers | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth/auth-helpers",
        "description": "Server-Side Auth guides and utilities for working with Supabase.",
        "modifiedTime": "2024-09-10T20:36:25.434Z",
        "ogDescription": "Server-Side Auth guides and utilities for working with Supabase.",
        "publishedTime": "2024-09-10T20:36:25.434Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    },
    {
      "markdown": "Auth\n\n# Auth\n\n## Use Supabase to authenticate and authorize your users.\n\n* * *\n\nSupabase Auth makes it easy to implement authentication and authorization in your app. We provide client SDKs and API endpoints to help you create and manage users.\n\nYour users can use many popular Auth methods, including password, magic link, one-time password (OTP), social login, and single sign-on (SSO).\n\n## About authentication and authorization [\\#](\\#about-authentication-and-authorization)\n\nAuthentication and authorization are the core responsibilities of any Auth system.\n\n- **Authentication** means checking that a user is who they say they are.\n- **Authorization** means checking what resources a user is allowed to access.\n\nSupabase Auth uses [JSON Web Tokens (JWTs)](/docs/guides/auth/jwts) for authentication. Auth integrates with Supabase's database features, making it easy to use [Row Level Security (RLS)](/docs/guides/database/postgres/row-level-security) for authorization.\n\n## The Supabase ecosystem [\\#](\\#the-supabase-ecosystem)\n\nYou can use Supabase Auth as a standalone product, but it's also built to integrate with the Supabase ecosystem.\n\nAuth uses your project's Postgres database under the hood, storing user data and other Auth information in a special schema. You can connect this data to your own tables using triggers and foreign key references.\n\nAuth also enables access control to your database's automatically generated [REST API](/docs/guides/api). When using Supabase SDKs, your data requests are automatically sent with the user's Auth Token. The Auth Token scopes database access on a row-by-row level when used along with [RLS policies](/docs/guides/database/postgres/row-level-security).\n\n## Providers [\\#](\\#providers)\n\nSupabase Auth works with many popular Auth methods, including Social and Phone Auth using third-party providers. See the following sections for a list of supported third-party providers.\n\n### Social Auth [\\#](\\#social-auth)\n\n[![Apple Icon](https://supabase.com/docs/img/icons/apple-icon.svg)\\\\\n\\\\\n**Apple**](/docs/guides/auth/social-login/auth-apple) [![Azure (Microsoft) Icon](https://supabase.com/docs/guides/Microsoft)\\\\\n\\\\\n**Azure (Microsoft)**](/docs/guides/auth/social-login/auth-azure) [![Bitbucket Icon](https://supabase.com/docs/img/icons/bitbucket-icon.svg)\\\\\n\\\\\n**Bitbucket**](/docs/guides/auth/social-login/auth-bitbucket) [![Discord Icon](https://supabase.com/docs/img/icons/discord-icon.svg)\\\\\n\\\\\n**Discord**](/docs/guides/auth/social-login/auth-discord) [![Facebook Icon](https://supabase.com/docs/img/icons/facebook-icon.svg)\\\\\n\\\\\n**Facebook**](/docs/guides/auth/social-login/auth-facebook) [![Figma Icon](https://supabase.com/docs/img/icons/figma-icon.svg)\\\\\n\\\\\n**Figma**](/docs/guides/auth/social-login/auth-figma) [![GitHub Icon](https://supabase.com/docs/img/icons/github-icon-light.svg)\\\\\n\\\\\n**GitHub**](/docs/guides/auth/social-login/auth-github) [![GitLab Icon](https://supabase.com/docs/img/icons/gitlab-icon.svg)\\\\\n\\\\\n**GitLab**](/docs/guides/auth/social-login/auth-gitlab) [![Google Icon](https://supabase.com/docs/img/icons/google-icon.svg)\\\\\n\\\\\n**Google**](/docs/guides/auth/social-login/auth-google) [![Kakao Icon](https://supabase.com/docs/img/icons/kakao-icon.svg)\\\\\n\\\\\n**Kakao**](/docs/guides/auth/social-login/auth-kakao) [![Keycloak Icon](https://supabase.com/docs/img/icons/keycloak-icon.svg)\\\\\n\\\\\n**Keycloak**](/docs/guides/auth/social-login/auth-keycloak) [![LinkedIn Icon](https://supabase.com/docs/img/icons/linkedin-icon.svg)\\\\\n\\\\\n**LinkedIn**](/docs/guides/auth/social-login/auth-linkedin) [![Notion Icon](https://supabase.com/docs/img/icons/notion-icon.svg)\\\\\n\\\\\n**Notion**](/docs/guides/auth/social-login/auth-notion) [![Slack Icon](https://supabase.com/docs/img/icons/slack-icon.svg)\\\\\n\\\\\n**Slack**](/docs/guides/auth/social-login/auth-slack) [![Spotify Icon](https://supabase.com/docs/img/icons/spotify-icon.svg)\\\\\n\\\\\n**Spotify**](/docs/guides/auth/social-login/auth-spotify) [![Twitter Icon](https://supabase.com/docs/img/icons/twitter-icon-light.svg)\\\\\n\\\\\n**Twitter**](/docs/guides/auth/social-login/auth-twitter) [![Twitch Icon](https://supabase.com/docs/img/icons/twitch-icon.svg)\\\\\n\\\\\n**Twitch**](/docs/guides/auth/social-login/auth-twitch) [![WorkOS Icon](https://supabase.com/docs/img/icons/workos-icon.svg)\\\\\n\\\\\n**WorkOS**](/docs/guides/auth/social-login/auth-workos) [![Zoom Icon](https://supabase.com/docs/img/icons/zoom-icon.svg)\\\\\n\\\\\n**Zoom**](/docs/guides/auth/social-login/auth-zoom)\n\n### Phone Auth [\\#](\\#phone-auth)\n\n[![MessageBird Icon](https://supabase.com/docs/img/icons/messagebird-icon.svg)\\\\\n\\\\\n**MessageBird**](/docs/guides/auth/phone-login?showSmsProvider=MessageBird) [![Twilio Icon](https://supabase.com/docs/img/icons/twilio-icon.svg)\\\\\n\\\\\n**Twilio**](/docs/guides/auth/phone-login?showSmsProvider=Twilio) [![Vonage Icon](https://supabase.com/docs/img/icons/vonage-icon-light.svg)\\\\\n\\\\\n**Vonage**](/docs/guides/auth/phone-login?showSmsProvider=Vonage)",
      "html": "<!DOCTYPE html><html lang=\"en\" data-theme=\"light\" style=\"color-scheme: light;\"><body><div class=\"flex flex-col\"><div class=\"grow\"><div class=\"flex flex-col h-full w-full\"><div class=\"hidden lg:sticky w-full lg:flex top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"flex flex-row h-full relative\"><main id=\"docs-content-container\" class=\"w-full transition-all ease-out relative lg:ml-0\"><div class=\"flex flex-col sticky top-0\"><div class=\"flex lg:hidden w-full top-0 left-0 right-0 z-50\"><!--$--><!--/$--></div><div class=\"sticky transition-all top-0 z-10 backdrop-blur backdrop-filter bg-background\"><div class=\"lg:hidden px-3.5 border-b z-10 transition-all ease-out top-0 flex items-center gap-1\"><button class=\"h-8 w-8 flex group items-center justify-center mr-1\"><div class=\"space-y-1 cursor-pointer relative w-4 h-[8px]\"><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-4\"></span><span class=\"transition-all ease-out block h-px bg-foreground-muted group-hover:bg-foreground w-3 group-hover:w-4\"></span></div></button><span class=\"transition-all duration-200 text-foreground text-sm\">Auth</span></div></div><div class=\"grow\"><div class=\"max-w-7xl px-5 mx-auto py-8 pb-0\"><div class=\"grid grid-cols-12 relative gap-4\"><div class=\"relative transition-all ease-out duration-100 col-span-12 md:col-span-9\"><article id=\"sb-docs-guide-main-article\" class=\"prose max-w-none\"><h1 class=\"mb-0\">Auth</h1><h2 class=\"mt-3 text-xl text-foreground-light\">Use Supabase to authenticate and authorize your users.</h2><hr class=\"not-prose border-t-0 border-b my-8\"><p>Supabase Auth makes it easy to implement authentication and authorization in your app. We provide client SDKs and API endpoints to help you create and manage users.</p>\n<p>Your users can use many popular Auth methods, including password, magic link, one-time password (OTP), social login, and single sign-on (SSO).</p>\n<h2 id=\"about-authentication-and-authorization\" class=\"group scroll-mt-24\">About authentication and authorization<a href=\"#about-authentication-and-authorization\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Authentication and authorization are the core responsibilities of any Auth system.</p>\n<ul>\n<li><strong>Authentication</strong> means checking that a user is who they say they are.</li>\n<li><strong>Authorization</strong> means checking what resources a user is allowed to access.</li>\n</ul>\n<p>Supabase Auth uses <a href=\"/docs/guides/auth/jwts\">JSON Web Tokens (JWTs)</a> for authentication. Auth integrates with Supabase's database features, making it easy to use <a href=\"/docs/guides/database/postgres/row-level-security\">Row Level Security (RLS)</a> for authorization.</p>\n<h2 id=\"the-supabase-ecosystem\" class=\"group scroll-mt-24\">The Supabase ecosystem<a href=\"#the-supabase-ecosystem\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>You can use Supabase Auth as a standalone product, but it's also built to integrate with the Supabase ecosystem.</p>\n<p>Auth uses your project's Postgres database under the hood, storing user data and other Auth information in a special schema. You can connect this data to your own tables using triggers and foreign key references.</p>\n<p>Auth also enables access control to your database's automatically generated <a href=\"/docs/guides/api\">REST API</a>. When using Supabase SDKs, your data requests are automatically sent with the user's Auth Token. The Auth Token scopes database access on a row-by-row level when used along with <a href=\"/docs/guides/database/postgres/row-level-security\">RLS policies</a>.</p>\n<h2 id=\"providers\" class=\"group scroll-mt-24\">Providers<a href=\"#providers\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h2>\n<p>Supabase Auth works with many popular Auth methods, including Social and Phone Auth using third-party providers. See the following sections for a list of supported third-party providers.</p>\n<h3 id=\"social-auth\" class=\"group scroll-mt-24\">Social Auth<a href=\"#social-auth\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<div class=\"grid grid-cols-12 xs:gap-x-10 gap-y-10 not-prose py-8\"><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-apple\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/apple-icon.svg\" alt=\"Apple Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Apple</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-azure\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/microsoft-icon.svg\" alt=\"Azure (Microsoft) Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Azure (Microsoft)</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-bitbucket\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/bitbucket-icon.svg\" alt=\"Bitbucket Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Bitbucket</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-discord\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/discord-icon.svg\" alt=\"Discord Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Discord</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-facebook\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/facebook-icon.svg\" alt=\"Facebook Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Facebook</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-figma\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/figma-icon.svg\" alt=\"Figma Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Figma</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-github\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/github-icon-light.svg\" alt=\"GitHub Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">GitHub</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-gitlab\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/gitlab-icon.svg\" alt=\"GitLab Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">GitLab</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-google\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/google-icon.svg\" alt=\"Google Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Google</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-kakao\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/kakao-icon.svg\" alt=\"Kakao Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Kakao</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-keycloak\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/keycloak-icon.svg\" alt=\"Keycloak Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Keycloak</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-linkedin\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/linkedin-icon.svg\" alt=\"LinkedIn Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">LinkedIn</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-notion\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/notion-icon.svg\" alt=\"Notion Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Notion</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-slack\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/slack-icon.svg\" alt=\"Slack Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Slack</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-spotify\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/spotify-icon.svg\" alt=\"Spotify Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Spotify</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-twitter\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/twitter-icon-light.svg\" alt=\"Twitter Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Twitter</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-twitch\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/twitch-icon.svg\" alt=\"Twitch Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Twitch</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-workos\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/workos-icon.svg\" alt=\"WorkOS Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">WorkOS</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/social-login/auth-zoom\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/zoom-icon.svg\" alt=\"Zoom Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Zoom</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a></div>\n<h3 id=\"phone-auth\" class=\"group scroll-mt-24\">Phone Auth<a href=\"#phone-auth\" aria-hidden=\"true\" class=\"ml-2 opacity-0 group-hover:opacity-100 transition\"><span aria-hidden=\"true\">#</span></a></h3>\n<div class=\"grid grid-cols-12 xs:gap-x-10 gap-y-10 not-prose py-8\"><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/phone-login?showSmsProvider=MessageBird\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/messagebird-icon.svg\" alt=\"MessageBird Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">MessageBird</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/phone-login?showSmsProvider=Twilio\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/twilio-icon.svg\" alt=\"Twilio Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Twilio</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a><a class=\"col-span-12 xs:col-span-6 lg:col-span-4 xl:col-span-3\" href=\"/docs/guides/auth/phone-login?showSmsProvider=Vonage\"><div class=\"relative group\"><div class=\"peer relative flex flex-col gap-6\"><div class=\"flex items-center gap-3\"><div class=\"relative flex items-center justify-center shrink-0 h-10 w-10 rounded-lg group cursor-pointer overflow-hidden border rounded-full hover:border-strong bg-surface-100 transition\"><img class=\"w-5\" src=\"/docs/img/icons/vonage-icon-light.svg\" alt=\"Vonage Icon\"></div><div class=\"flex flex-col gap-1\"><div class=\"flex items-center gap-3\"><h5 class=\"text-base text-foreground m-0\">Vonage</h5><div class=\" transition-all ease-out -ml-1 opacity-0 text-foreground-muted group-hover:opacity-100 group-hover:ml-0\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-chevron-right\"><path d=\"m9 18 6-6-6-6\"></path></svg></div></div></div></div></div><div class=\" absolute transition-all ease-in -z-10 -inset-3 rounded-2xl bg-surface-100 opacity-0 peer-hover:opacity-100\"></div></div></a></div></article></div></div></div><!--$--><div class=\"max-w-7xl px-5 mx-auto py-8 pt-0\"></div><!--/$--></div><div class=\"left-0 right-0 z-10 backdrop-blur-sm backdrop-filter bg-alternative/90 hidden h-0 lg:hidden\"></div></div></main></div></div></div></div></body></html>",
      "metadata": {
        "ogUrl": "https://supabase.com/docs/guides/auth",
        "title": "Auth | Supabase Docs",
        "robots": "index, follow",
        "ogImage": "https://obuldanrptloktxcffvn.supabase.co/functions/v1/og-images?site=docs&type=auth&title=Auth&description=Use%20Supabase%20to%20Authenticate%20and%20Authorize%20your%20users.",
        "ogTitle": "Auth | Supabase Docs",
        "language": "en",
        "sourceURL": "https://supabase.com/docs/guides/auth",
        "description": "Use Supabase to Authenticate and Authorize your users.",
        "modifiedTime": "2024-09-10T20:36:24.980Z",
        "ogDescription": "Use Supabase to Authenticate and Authorize your users.",
        "publishedTime": "2024-09-10T20:36:24.980Z",
        "ogLocaleAlternate": [],
        "statusCode": 200
      }
    }
  ]
}