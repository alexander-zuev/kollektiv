from typing import ClassVar
from uuid import UUID, uuid4

from pydantic import Field

from src.models.base_models import BaseDbModel


class SourceSummary(BaseDbModel):
    """A summary of a source document generated by an LLM."""

    summary_id: UUID = Field(default_factory=uuid4, description="Unique identifier for the summary")
    source_id: UUID = Field(..., description="ID of the source this summary belongs to")
    summary: str = Field(..., description="Summary of the source document generated by the LLM")
    keywords: list[str] = Field(..., description="List of keywords or key topics generated by the LLM")

    _db_config: ClassVar[dict] = {"schema": "chat", "table": "source_summaries", "primary_key": "summary_id"}

    class Config:
        """Pydantic model configuration."""

        from_attributes = True
